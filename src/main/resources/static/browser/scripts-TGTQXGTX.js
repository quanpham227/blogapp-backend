(function(kt,Ue){typeof exports=="object"&&typeof module=="object"?module.exports=Ue():typeof define=="function"&&define.amd?define([],Ue):typeof exports=="object"?exports.AOS=Ue():kt.AOS=Ue()})(this,function(){return function(kt){function Ue(Fe){if(Ye[Fe])return Ye[Fe].exports;var at=Ye[Fe]={exports:{},id:Fe,loaded:!1};return kt[Fe].call(at.exports,at,at.exports,Ue),at.loaded=!0,at.exports}var Ye={};return Ue.m=kt,Ue.c=Ye,Ue.p="dist/",Ue(0)}([function(kt,Ue,Ye){"use strict";function Fe(Be){return Be&&Be.__esModule?Be:{default:Be}}var at=Object.assign||function(Be){for(var mn=1;mn<arguments.length;mn++){var ae=arguments[mn];for(var On in ae)Object.prototype.hasOwnProperty.call(ae,On)&&(Be[On]=ae[On])}return Be},pt=Ye(1),qt=(Fe(pt),Ye(6)),je=Fe(qt),lt=Ye(7),Ze=Fe(lt),ct=Ye(8),Je=Fe(ct),se=Ye(9),dt=Fe(se),Pt=Ye(10),Xe=Fe(Pt),mt=Ye(11),Tn=Fe(mt),Ft=Ye(14),Rt=Fe(Ft),Z=[],Ge=!1,st={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1,startEvent:"DOMContentLoaded",throttleDelay:99,debounceDelay:50,disableMutationObserver:!1},hn=function(){var Be=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(Be&&(Ge=!0),Ge)return Z=(0,Tn.default)(Z,st),(0,Xe.default)(Z,st.once),Z},Te=function(){Z=(0,Rt.default)(),hn()},Le=function(){Z.forEach(function(Be,mn){Be.node.removeAttribute("data-aos"),Be.node.removeAttribute("data-aos-easing"),Be.node.removeAttribute("data-aos-duration"),Be.node.removeAttribute("data-aos-delay")})},Ne=function(Be){return Be===!0||Be==="mobile"&&dt.default.mobile()||Be==="phone"&&dt.default.phone()||Be==="tablet"&&dt.default.tablet()||typeof Be=="function"&&Be()===!0},K=function(Be){st=at(st,Be),Z=(0,Rt.default)();var mn=document.all&&!window.atob;return Ne(st.disable)||mn?Le():(st.disableMutationObserver||Je.default.isSupported()||(console.info(`
      aos: MutationObserver is not supported on this browser,
      code mutations observing has been disabled.
      You may have to call "refreshHard()" by yourself.
    `),st.disableMutationObserver=!0),document.querySelector("body").setAttribute("data-aos-easing",st.easing),document.querySelector("body").setAttribute("data-aos-duration",st.duration),document.querySelector("body").setAttribute("data-aos-delay",st.delay),st.startEvent==="DOMContentLoaded"&&["complete","interactive"].indexOf(document.readyState)>-1?hn(!0):st.startEvent==="load"?window.addEventListener(st.startEvent,function(){hn(!0)}):document.addEventListener(st.startEvent,function(){hn(!0)}),window.addEventListener("resize",(0,Ze.default)(hn,st.debounceDelay,!0)),window.addEventListener("orientationchange",(0,Ze.default)(hn,st.debounceDelay,!0)),window.addEventListener("scroll",(0,je.default)(function(){(0,Xe.default)(Z,st.once)},st.throttleDelay)),st.disableMutationObserver||Je.default.ready("[data-aos]",Te),Z)};kt.exports={init:K,refresh:hn,refreshHard:Te}},function(kt,Ue){},,,,,function(kt,Ue){(function(Ye){"use strict";function Fe(Ne,K,Be){function mn(ue){var Kt=Vt,Lt=Rn;return Vt=Rn=void 0,Me=ue,Jt=Ne.apply(Lt,Kt)}function ae(ue){return Me=ue,ee=setTimeout(po,K),W?mn(ue):Jt}function On(ue){var Kt=ue-Ve,Lt=ue-Me,mi=K-Kt;return ho?Te(mi,Zt-Lt):mi}function Yo(ue){var Kt=ue-Ve,Lt=ue-Me;return Ve===void 0||Kt>=K||Kt<0||ho&&Lt>=Zt}function po(){var ue=Le();return Yo(ue)?te(ue):void(ee=setTimeout(po,On(ue)))}function te(ue){return ee=void 0,yt&&Vt?mn(ue):(Vt=Rn=void 0,Jt)}function ft(){ee!==void 0&&clearTimeout(ee),Me=0,Vt=Ve=Rn=ee=void 0}function St(){return ee===void 0?Jt:te(Le())}function w(){var ue=Le(),Kt=Yo(ue);if(Vt=arguments,Rn=this,Ve=ue,Kt){if(ee===void 0)return ae(Ve);if(ho)return ee=setTimeout(po,K),mn(Ve)}return ee===void 0&&(ee=setTimeout(po,K)),Jt}var Vt,Rn,Zt,Jt,ee,Ve,Me=0,W=!1,ho=!1,yt=!0;if(typeof Ne!="function")throw new TypeError(ct);return K=lt(K)||0,pt(Be)&&(W=!!Be.leading,ho="maxWait"in Be,Zt=ho?hn(lt(Be.maxWait)||0,K):Zt,yt="trailing"in Be?!!Be.trailing:yt),w.cancel=ft,w.flush=St,w}function at(Ne,K,Be){var mn=!0,ae=!0;if(typeof Ne!="function")throw new TypeError(ct);return pt(Be)&&(mn="leading"in Be?!!Be.leading:mn,ae="trailing"in Be?!!Be.trailing:ae),Fe(Ne,K,{leading:mn,maxWait:K,trailing:ae})}function pt(Ne){var K=typeof Ne>"u"?"undefined":Ze(Ne);return!!Ne&&(K=="object"||K=="function")}function qt(Ne){return!!Ne&&(typeof Ne>"u"?"undefined":Ze(Ne))=="object"}function je(Ne){return(typeof Ne>"u"?"undefined":Ze(Ne))=="symbol"||qt(Ne)&&st.call(Ne)==se}function lt(Ne){if(typeof Ne=="number")return Ne;if(je(Ne))return Je;if(pt(Ne)){var K=typeof Ne.valueOf=="function"?Ne.valueOf():Ne;Ne=pt(K)?K+"":K}if(typeof Ne!="string")return Ne===0?Ne:+Ne;Ne=Ne.replace(dt,"");var Be=Xe.test(Ne);return Be||mt.test(Ne)?Tn(Ne.slice(2),Be?2:8):Pt.test(Ne)?Je:+Ne}var Ze=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ne){return typeof Ne}:function(Ne){return Ne&&typeof Symbol=="function"&&Ne.constructor===Symbol&&Ne!==Symbol.prototype?"symbol":typeof Ne},ct="Expected a function",Je=NaN,se="[object Symbol]",dt=/^\s+|\s+$/g,Pt=/^[-+]0x[0-9a-f]+$/i,Xe=/^0b[01]+$/i,mt=/^0o[0-7]+$/i,Tn=parseInt,Ft=(typeof Ye>"u"?"undefined":Ze(Ye))=="object"&&Ye&&Ye.Object===Object&&Ye,Rt=(typeof self>"u"?"undefined":Ze(self))=="object"&&self&&self.Object===Object&&self,Z=Ft||Rt||Function("return this")(),Ge=Object.prototype,st=Ge.toString,hn=Math.max,Te=Math.min,Le=function(){return Z.Date.now()};kt.exports=at}).call(Ue,function(){return this}())},function(kt,Ue){(function(Ye){"use strict";function Fe(Le,Ne,K){function Be(yt){var ue=w,Kt=Vt;return w=Vt=void 0,Ve=yt,Zt=Le.apply(Kt,ue)}function mn(yt){return Ve=yt,Jt=setTimeout(Yo,Ne),Me?Be(yt):Zt}function ae(yt){var ue=yt-ee,Kt=yt-Ve,Lt=Ne-ue;return W?hn(Lt,Rn-Kt):Lt}function On(yt){var ue=yt-ee,Kt=yt-Ve;return ee===void 0||ue>=Ne||ue<0||W&&Kt>=Rn}function Yo(){var yt=Te();return On(yt)?po(yt):void(Jt=setTimeout(Yo,ae(yt)))}function po(yt){return Jt=void 0,ho&&w?Be(yt):(w=Vt=void 0,Zt)}function te(){Jt!==void 0&&clearTimeout(Jt),Ve=0,w=ee=Vt=Jt=void 0}function ft(){return Jt===void 0?Zt:po(Te())}function St(){var yt=Te(),ue=On(yt);if(w=arguments,Vt=this,ee=yt,ue){if(Jt===void 0)return mn(ee);if(W)return Jt=setTimeout(Yo,Ne),Be(ee)}return Jt===void 0&&(Jt=setTimeout(Yo,Ne)),Zt}var w,Vt,Rn,Zt,Jt,ee,Ve=0,Me=!1,W=!1,ho=!0;if(typeof Le!="function")throw new TypeError(Ze);return Ne=je(Ne)||0,at(K)&&(Me=!!K.leading,W="maxWait"in K,Rn=W?st(je(K.maxWait)||0,Ne):Rn,ho="trailing"in K?!!K.trailing:ho),St.cancel=te,St.flush=ft,St}function at(Le){var Ne=typeof Le>"u"?"undefined":lt(Le);return!!Le&&(Ne=="object"||Ne=="function")}function pt(Le){return!!Le&&(typeof Le>"u"?"undefined":lt(Le))=="object"}function qt(Le){return(typeof Le>"u"?"undefined":lt(Le))=="symbol"||pt(Le)&&Ge.call(Le)==Je}function je(Le){if(typeof Le=="number")return Le;if(qt(Le))return ct;if(at(Le)){var Ne=typeof Le.valueOf=="function"?Le.valueOf():Le;Le=at(Ne)?Ne+"":Ne}if(typeof Le!="string")return Le===0?Le:+Le;Le=Le.replace(se,"");var K=Pt.test(Le);return K||Xe.test(Le)?mt(Le.slice(2),K?2:8):dt.test(Le)?ct:+Le}var lt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Le){return typeof Le}:function(Le){return Le&&typeof Symbol=="function"&&Le.constructor===Symbol&&Le!==Symbol.prototype?"symbol":typeof Le},Ze="Expected a function",ct=NaN,Je="[object Symbol]",se=/^\s+|\s+$/g,dt=/^[-+]0x[0-9a-f]+$/i,Pt=/^0b[01]+$/i,Xe=/^0o[0-7]+$/i,mt=parseInt,Tn=(typeof Ye>"u"?"undefined":lt(Ye))=="object"&&Ye&&Ye.Object===Object&&Ye,Ft=(typeof self>"u"?"undefined":lt(self))=="object"&&self&&self.Object===Object&&self,Rt=Tn||Ft||Function("return this")(),Z=Object.prototype,Ge=Z.toString,st=Math.max,hn=Math.min,Te=function(){return Rt.Date.now()};kt.exports=Fe}).call(Ue,function(){return this}())},function(kt,Ue){"use strict";function Ye(lt){var Ze=void 0,ct=void 0,Je=void 0;for(Ze=0;Ze<lt.length;Ze+=1)if(ct=lt[Ze],ct.dataset&&ct.dataset.aos||(Je=ct.children&&Ye(ct.children)))return!0;return!1}function Fe(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function at(){return!!Fe()}function pt(lt,Ze){var ct=window.document,Je=Fe(),se=new Je(qt);je=Ze,se.observe(ct.documentElement,{childList:!0,subtree:!0,removedNodes:!0})}function qt(lt){lt&&lt.forEach(function(Ze){var ct=Array.prototype.slice.call(Ze.addedNodes),Je=Array.prototype.slice.call(Ze.removedNodes),se=ct.concat(Je);if(Ye(se))return je()})}Object.defineProperty(Ue,"__esModule",{value:!0});var je=function(){};Ue.default={isSupported:at,ready:pt}},function(kt,Ue){"use strict";function Ye(ct,Je){if(!(ct instanceof Je))throw new TypeError("Cannot call a class as a function")}function Fe(){return navigator.userAgent||navigator.vendor||window.opera||""}Object.defineProperty(Ue,"__esModule",{value:!0});var at=function(){function ct(Je,se){for(var dt=0;dt<se.length;dt++){var Pt=se[dt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(Je,Pt.key,Pt)}}return function(Je,se,dt){return se&&ct(Je.prototype,se),dt&&ct(Je,dt),Je}}(),pt=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,qt=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,je=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,lt=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,Ze=function(){function ct(){Ye(this,ct)}return at(ct,[{key:"phone",value:function(){var Je=Fe();return!(!pt.test(Je)&&!qt.test(Je.substr(0,4)))}},{key:"mobile",value:function(){var Je=Fe();return!(!je.test(Je)&&!lt.test(Je.substr(0,4)))}},{key:"tablet",value:function(){return this.mobile()&&!this.phone()}}]),ct}();Ue.default=new Ze},function(kt,Ue){"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});var Ye=function(at,pt,qt){var je=at.node.getAttribute("data-aos-once");pt>at.position?at.node.classList.add("aos-animate"):typeof je<"u"&&(je==="false"||!qt&&je!=="true")&&at.node.classList.remove("aos-animate")},Fe=function(at,pt){var qt=window.pageYOffset,je=window.innerHeight;at.forEach(function(lt,Ze){Ye(lt,je+qt,pt)})};Ue.default=Fe},function(kt,Ue,Ye){"use strict";function Fe(je){return je&&je.__esModule?je:{default:je}}Object.defineProperty(Ue,"__esModule",{value:!0});var at=Ye(12),pt=Fe(at),qt=function(je,lt){return je.forEach(function(Ze,ct){Ze.node.classList.add("aos-init"),Ze.position=(0,pt.default)(Ze.node,lt.offset)}),je};Ue.default=qt},function(kt,Ue,Ye){"use strict";function Fe(je){return je&&je.__esModule?je:{default:je}}Object.defineProperty(Ue,"__esModule",{value:!0});var at=Ye(13),pt=Fe(at),qt=function(je,lt){var Ze=0,ct=0,Je=window.innerHeight,se={offset:je.getAttribute("data-aos-offset"),anchor:je.getAttribute("data-aos-anchor"),anchorPlacement:je.getAttribute("data-aos-anchor-placement")};switch(se.offset&&!isNaN(se.offset)&&(ct=parseInt(se.offset)),se.anchor&&document.querySelectorAll(se.anchor)&&(je=document.querySelectorAll(se.anchor)[0]),Ze=(0,pt.default)(je).top,se.anchorPlacement){case"top-bottom":break;case"center-bottom":Ze+=je.offsetHeight/2;break;case"bottom-bottom":Ze+=je.offsetHeight;break;case"top-center":Ze+=Je/2;break;case"bottom-center":Ze+=Je/2+je.offsetHeight;break;case"center-center":Ze+=Je/2+je.offsetHeight/2;break;case"top-top":Ze+=Je;break;case"bottom-top":Ze+=je.offsetHeight+Je;break;case"center-top":Ze+=je.offsetHeight/2+Je}return se.anchorPlacement||se.offset||isNaN(lt)||(ct=lt),Ze+ct};Ue.default=qt},function(kt,Ue){"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});var Ye=function(Fe){for(var at=0,pt=0;Fe&&!isNaN(Fe.offsetLeft)&&!isNaN(Fe.offsetTop);)at+=Fe.offsetLeft-(Fe.tagName!="BODY"?Fe.scrollLeft:0),pt+=Fe.offsetTop-(Fe.tagName!="BODY"?Fe.scrollTop:0),Fe=Fe.offsetParent;return{top:pt,left:at}};Ue.default=Ye},function(kt,Ue){"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});var Ye=function(Fe){return Fe=Fe||document.querySelectorAll("[data-aos]"),Array.prototype.map.call(Fe,function(at){return{node:at}})};Ue.default=Ye}])});/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(kt,Ue){typeof exports=="object"&&typeof module<"u"?module.exports=Ue():typeof define=="function"&&define.amd?define(Ue):(kt=typeof globalThis<"u"?globalThis:kt||self).bootstrap=Ue()})(this,function(){"use strict";const kt=new Map,Ue={set(k,m,y){kt.has(k)||kt.set(k,new Map);const A=kt.get(k);A.has(m)||A.size===0?A.set(m,y):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(A.keys())[0]}.`)},get:(k,m)=>kt.has(k)&&kt.get(k).get(m)||null,remove(k,m){if(!kt.has(k))return;const y=kt.get(k);y.delete(m),y.size===0&&kt.delete(k)}},Ye="transitionend",Fe=k=>(k&&window.CSS&&window.CSS.escape&&(k=k.replace(/#([^\s"#']+)/g,(m,y)=>`#${CSS.escape(y)}`)),k),at=k=>{k.dispatchEvent(new Event(Ye))},pt=k=>!(!k||typeof k!="object")&&(k.jquery!==void 0&&(k=k[0]),k.nodeType!==void 0),qt=k=>pt(k)?k.jquery?k[0]:k:typeof k=="string"&&k.length>0?document.querySelector(Fe(k)):null,je=k=>{if(!pt(k)||k.getClientRects().length===0)return!1;const m=getComputedStyle(k).getPropertyValue("visibility")==="visible",y=k.closest("details:not([open])");if(!y)return m;if(y!==k){const A=k.closest("summary");if(A&&A.parentNode!==y||A===null)return!1}return m},lt=k=>!k||k.nodeType!==Node.ELEMENT_NODE||!!k.classList.contains("disabled")||(k.disabled!==void 0?k.disabled:k.hasAttribute("disabled")&&k.getAttribute("disabled")!=="false"),Ze=k=>{if(!document.documentElement.attachShadow)return null;if(typeof k.getRootNode=="function"){const m=k.getRootNode();return m instanceof ShadowRoot?m:null}return k instanceof ShadowRoot?k:k.parentNode?Ze(k.parentNode):null},ct=()=>{},Je=k=>{k.offsetHeight},se=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,dt=[],Pt=()=>document.documentElement.dir==="rtl",Xe=k=>{var m;m=()=>{const y=se();if(y){const A=k.NAME,j=y.fn[A];y.fn[A]=k.jQueryInterface,y.fn[A].Constructor=k,y.fn[A].noConflict=()=>(y.fn[A]=j,k.jQueryInterface)}},document.readyState==="loading"?(dt.length||document.addEventListener("DOMContentLoaded",()=>{for(const y of dt)y()}),dt.push(m)):m()},mt=(k,m=[],y=k)=>typeof k=="function"?k(...m):y,Tn=(k,m,y=!0)=>{if(!y)return void mt(k);const A=(V=>{if(!V)return 0;let{transitionDuration:ne,transitionDelay:ve}=window.getComputedStyle(V);const Se=Number.parseFloat(ne),xe=Number.parseFloat(ve);return Se||xe?(ne=ne.split(",")[0],ve=ve.split(",")[0],1e3*(Number.parseFloat(ne)+Number.parseFloat(ve))):0})(m)+5;let j=!1;const z=({target:V})=>{V===m&&(j=!0,m.removeEventListener(Ye,z),mt(k))};m.addEventListener(Ye,z),setTimeout(()=>{j||at(m)},A)},Ft=(k,m,y,A)=>{const j=k.length;let z=k.indexOf(m);return z===-1?!y&&A?k[j-1]:k[0]:(z+=y?1:-1,A&&(z=(z+j)%j),k[Math.max(0,Math.min(z,j-1))])},Rt=/[^.]*(?=\..*)\.|.*/,Z=/\..*/,Ge=/::\d+$/,st={};let hn=1;const Te={mouseenter:"mouseover",mouseleave:"mouseout"},Le=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Ne(k,m){return m&&`${m}::${hn++}`||k.uidEvent||hn++}function K(k){const m=Ne(k);return k.uidEvent=m,st[m]=st[m]||{},st[m]}function Be(k,m,y=null){return Object.values(k).find(A=>A.callable===m&&A.delegationSelector===y)}function mn(k,m,y){const A=typeof m=="string",j=A?y:m||y;let z=po(k);return Le.has(z)||(z=k),[A,j,z]}function ae(k,m,y,A,j){if(typeof m!="string"||!k)return;let[z,V,ne]=mn(m,y,A);m in Te&&(V=(Ke=>function(He){if(!He.relatedTarget||He.relatedTarget!==He.delegateTarget&&!He.delegateTarget.contains(He.relatedTarget))return Ke.call(this,He)})(V));const ve=K(k),Se=ve[ne]||(ve[ne]={}),xe=Be(Se,V,z?y:null);if(xe)return void(xe.oneOff=xe.oneOff&&j);const ge=Ne(V,m.replace(Rt,"")),et=z?function($e,Ke,He){return function Qe(Mt){const jt=$e.querySelectorAll(Ke);for(let{target:nt}=Mt;nt&&nt!==this;nt=nt.parentNode)for(const ht of jt)if(ht===nt)return ft(Mt,{delegateTarget:nt}),Qe.oneOff&&te.off($e,Mt.type,Ke,He),He.apply(nt,[Mt])}}(k,y,V):function($e,Ke){return function He(Qe){return ft(Qe,{delegateTarget:$e}),He.oneOff&&te.off($e,Qe.type,Ke),Ke.apply($e,[Qe])}}(k,V);et.delegationSelector=z?y:null,et.callable=V,et.oneOff=j,et.uidEvent=ge,Se[ge]=et,k.addEventListener(ne,et,z)}function On(k,m,y,A,j){const z=Be(m[y],A,j);z&&(k.removeEventListener(y,z,!!j),delete m[y][z.uidEvent])}function Yo(k,m,y,A){const j=m[y]||{};for(const[z,V]of Object.entries(j))z.includes(A)&&On(k,m,y,V.callable,V.delegationSelector)}function po(k){return k=k.replace(Z,""),Te[k]||k}const te={on(k,m,y,A){ae(k,m,y,A,!1)},one(k,m,y,A){ae(k,m,y,A,!0)},off(k,m,y,A){if(typeof m!="string"||!k)return;const[j,z,V]=mn(m,y,A),ne=V!==m,ve=K(k),Se=ve[V]||{},xe=m.startsWith(".");if(z===void 0){if(xe)for(const ge of Object.keys(ve))Yo(k,ve,ge,m.slice(1));for(const[ge,et]of Object.entries(Se)){const $e=ge.replace(Ge,"");ne&&!m.includes($e)||On(k,ve,V,et.callable,et.delegationSelector)}}else{if(!Object.keys(Se).length)return;On(k,ve,V,z,j?y:null)}},trigger(k,m,y){if(typeof m!="string"||!k)return null;const A=se();let j=null,z=!0,V=!0,ne=!1;m!==po(m)&&A&&(j=A.Event(m,y),A(k).trigger(j),z=!j.isPropagationStopped(),V=!j.isImmediatePropagationStopped(),ne=j.isDefaultPrevented());const ve=ft(new Event(m,{bubbles:z,cancelable:!0}),y);return ne&&ve.preventDefault(),V&&k.dispatchEvent(ve),ve.defaultPrevented&&j&&j.preventDefault(),ve}};function ft(k,m={}){for(const[y,A]of Object.entries(m))try{k[y]=A}catch{Object.defineProperty(k,y,{configurable:!0,get:()=>A})}return k}function St(k){if(k==="true")return!0;if(k==="false")return!1;if(k===Number(k).toString())return Number(k);if(k===""||k==="null")return null;if(typeof k!="string")return k;try{return JSON.parse(decodeURIComponent(k))}catch{return k}}function w(k){return k.replace(/[A-Z]/g,m=>`-${m.toLowerCase()}`)}const Vt={setDataAttribute(k,m,y){k.setAttribute(`data-bs-${w(m)}`,y)},removeDataAttribute(k,m){k.removeAttribute(`data-bs-${w(m)}`)},getDataAttributes(k){if(!k)return{};const m={},y=Object.keys(k.dataset).filter(A=>A.startsWith("bs")&&!A.startsWith("bsConfig"));for(const A of y){let j=A.replace(/^bs/,"");j=j.charAt(0).toLowerCase()+j.slice(1,j.length),m[j]=St(k.dataset[A])}return m},getDataAttribute:(k,m)=>St(k.getAttribute(`data-bs-${w(m)}`))};class Rn{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(m){return m=this._mergeConfigObj(m),m=this._configAfterMerge(m),this._typeCheckConfig(m),m}_configAfterMerge(m){return m}_mergeConfigObj(m,y){const A=pt(y)?Vt.getDataAttribute(y,"config"):{};return{...this.constructor.Default,...typeof A=="object"?A:{},...pt(y)?Vt.getDataAttributes(y):{},...typeof m=="object"?m:{}}}_typeCheckConfig(m,y=this.constructor.DefaultType){for(const[j,z]of Object.entries(y)){const V=m[j],ne=pt(V)?"element":(A=V)==null?`${A}`:Object.prototype.toString.call(A).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(z).test(ne))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${j}" provided type "${ne}" but expected type "${z}".`)}var A}}class Zt extends Rn{constructor(m,y){super(),(m=qt(m))&&(this._element=m,this._config=this._getConfig(y),Ue.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Ue.remove(this._element,this.constructor.DATA_KEY),te.off(this._element,this.constructor.EVENT_KEY);for(const m of Object.getOwnPropertyNames(this))this[m]=null}_queueCallback(m,y,A=!0){Tn(m,y,A)}_getConfig(m){return m=this._mergeConfigObj(m,this._element),m=this._configAfterMerge(m),this._typeCheckConfig(m),m}static getInstance(m){return Ue.get(qt(m),this.DATA_KEY)}static getOrCreateInstance(m,y={}){return this.getInstance(m)||new this(m,typeof y=="object"?y:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(m){return`${m}${this.EVENT_KEY}`}}const Jt=k=>{let m=k.getAttribute("data-bs-target");if(!m||m==="#"){let y=k.getAttribute("href");if(!y||!y.includes("#")&&!y.startsWith("."))return null;y.includes("#")&&!y.startsWith("#")&&(y=`#${y.split("#")[1]}`),m=y&&y!=="#"?y.trim():null}return m?m.split(",").map(y=>Fe(y)).join(","):null},ee={find:(k,m=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(m,k)),findOne:(k,m=document.documentElement)=>Element.prototype.querySelector.call(m,k),children:(k,m)=>[].concat(...k.children).filter(y=>y.matches(m)),parents(k,m){const y=[];let A=k.parentNode.closest(m);for(;A;)y.push(A),A=A.parentNode.closest(m);return y},prev(k,m){let y=k.previousElementSibling;for(;y;){if(y.matches(m))return[y];y=y.previousElementSibling}return[]},next(k,m){let y=k.nextElementSibling;for(;y;){if(y.matches(m))return[y];y=y.nextElementSibling}return[]},focusableChildren(k){const m=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(y=>`${y}:not([tabindex^="-"])`).join(",");return this.find(m,k).filter(y=>!lt(y)&&je(y))},getSelectorFromElement(k){const m=Jt(k);return m&&ee.findOne(m)?m:null},getElementFromSelector(k){const m=Jt(k);return m?ee.findOne(m):null},getMultipleElementsFromSelector(k){const m=Jt(k);return m?ee.find(m):[]}},Ve=(k,m="hide")=>{const y=`click.dismiss${k.EVENT_KEY}`,A=k.NAME;te.on(document,y,`[data-bs-dismiss="${A}"]`,function(j){if(["A","AREA"].includes(this.tagName)&&j.preventDefault(),lt(this))return;const z=ee.getElementFromSelector(this)||this.closest(`.${A}`);k.getOrCreateInstance(z)[m]()})},Me=".bs.alert",W=`close${Me}`,ho=`closed${Me}`;class yt extends Zt{static get NAME(){return"alert"}close(){if(te.trigger(this._element,W).defaultPrevented)return;this._element.classList.remove("show");const m=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,m)}_destroyElement(){this._element.remove(),te.trigger(this._element,ho),this.dispose()}static jQueryInterface(m){return this.each(function(){const y=yt.getOrCreateInstance(this);if(typeof m=="string"){if(y[m]===void 0||m.startsWith("_")||m==="constructor")throw new TypeError(`No method named "${m}"`);y[m](this)}})}}Ve(yt,"close"),Xe(yt);const ue='[data-bs-toggle="button"]';class Kt extends Zt{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(m){return this.each(function(){const y=Kt.getOrCreateInstance(this);m==="toggle"&&y[m]()})}}te.on(document,"click.bs.button.data-api",ue,k=>{k.preventDefault();const m=k.target.closest(ue);Kt.getOrCreateInstance(m).toggle()}),Xe(Kt);const Lt=".bs.swipe",mi=`touchstart${Lt}`,en=`touchmove${Lt}`,fi=`touchend${Lt}`,kd=`pointerdown${Lt}`,no=`pointerup${Lt}`,cr={endCallback:null,leftCallback:null,rightCallback:null},gi={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Jr extends Rn{constructor(m,y){super(),this._element=m,m&&Jr.isSupported()&&(this._config=this._getConfig(y),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return cr}static get DefaultType(){return gi}static get NAME(){return"swipe"}dispose(){te.off(this._element,Lt)}_start(m){this._supportPointerEvents?this._eventIsPointerPenTouch(m)&&(this._deltaX=m.clientX):this._deltaX=m.touches[0].clientX}_end(m){this._eventIsPointerPenTouch(m)&&(this._deltaX=m.clientX-this._deltaX),this._handleSwipe(),mt(this._config.endCallback)}_move(m){this._deltaX=m.touches&&m.touches.length>1?0:m.touches[0].clientX-this._deltaX}_handleSwipe(){const m=Math.abs(this._deltaX);if(m<=40)return;const y=m/this._deltaX;this._deltaX=0,y&&mt(y>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(te.on(this._element,kd,m=>this._start(m)),te.on(this._element,no,m=>this._end(m)),this._element.classList.add("pointer-event")):(te.on(this._element,mi,m=>this._start(m)),te.on(this._element,en,m=>this._move(m)),te.on(this._element,fi,m=>this._end(m)))}_eventIsPointerPenTouch(m){return this._supportPointerEvents&&(m.pointerType==="pen"||m.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Xo=".bs.carousel",Sr=".data-api",dr="next",on="prev",oo="left",An="right",Ns=`slide${Xo}`,ca=`slid${Xo}`,In=`keydown${Xo}`,Ym=`mouseenter${Xo}`,Ct=`mouseleave${Xo}`,pi=`dragstart${Xo}`,Xm=`load${Xo}${Sr}`,Cl=`click${Xo}${Sr}`,wl="carousel",Ar="active",hi=".active",da=".carousel-item",At=hi+da,Re={ArrowLeft:An,ArrowRight:oo},Ts={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Sd={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class es extends Zt{constructor(m,y){super(m,y),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=ee.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===wl&&this.cycle()}static get Default(){return Ts}static get DefaultType(){return Sd}static get NAME(){return"carousel"}next(){this._slide(dr)}nextWhenVisible(){!document.hidden&&je(this._element)&&this.next()}prev(){this._slide(on)}pause(){this._isSliding&&at(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?te.one(this._element,ca,()=>this.cycle()):this.cycle())}to(m){const y=this._getItems();if(m>y.length-1||m<0)return;if(this._isSliding)return void te.one(this._element,ca,()=>this.to(m));const A=this._getItemIndex(this._getActive());if(A===m)return;const j=m>A?dr:on;this._slide(j,y[m])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(m){return m.defaultInterval=m.interval,m}_addEventListeners(){this._config.keyboard&&te.on(this._element,In,m=>this._keydown(m)),this._config.pause==="hover"&&(te.on(this._element,Ym,()=>this.pause()),te.on(this._element,Ct,()=>this._maybeEnableCycle())),this._config.touch&&Jr.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const y of ee.find(".carousel-item img",this._element))te.on(y,pi,A=>A.preventDefault());const m={leftCallback:()=>this._slide(this._directionToOrder(oo)),rightCallback:()=>this._slide(this._directionToOrder(An)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new Jr(this._element,m)}_keydown(m){if(/input|textarea/i.test(m.target.tagName))return;const y=Re[m.key];y&&(m.preventDefault(),this._slide(this._directionToOrder(y)))}_getItemIndex(m){return this._getItems().indexOf(m)}_setActiveIndicatorElement(m){if(!this._indicatorsElement)return;const y=ee.findOne(hi,this._indicatorsElement);y.classList.remove(Ar),y.removeAttribute("aria-current");const A=ee.findOne(`[data-bs-slide-to="${m}"]`,this._indicatorsElement);A&&(A.classList.add(Ar),A.setAttribute("aria-current","true"))}_updateInterval(){const m=this._activeElement||this._getActive();if(!m)return;const y=Number.parseInt(m.getAttribute("data-bs-interval"),10);this._config.interval=y||this._config.defaultInterval}_slide(m,y=null){if(this._isSliding)return;const A=this._getActive(),j=m===dr,z=y||Ft(this._getItems(),A,j,this._config.wrap);if(z===A)return;const V=this._getItemIndex(z),ne=ge=>te.trigger(this._element,ge,{relatedTarget:z,direction:this._orderToDirection(m),from:this._getItemIndex(A),to:V});if(ne(Ns).defaultPrevented||!A||!z)return;const ve=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(V),this._activeElement=z;const Se=j?"carousel-item-start":"carousel-item-end",xe=j?"carousel-item-next":"carousel-item-prev";z.classList.add(xe),Je(z),A.classList.add(Se),z.classList.add(Se),this._queueCallback(()=>{z.classList.remove(Se,xe),z.classList.add(Ar),A.classList.remove(Ar,xe,Se),this._isSliding=!1,ne(ca)},A,this._isAnimated()),ve&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return ee.findOne(At,this._element)}_getItems(){return ee.find(da,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(m){return Pt()?m===oo?on:dr:m===oo?dr:on}_orderToDirection(m){return Pt()?m===on?oo:An:m===on?An:oo}static jQueryInterface(m){return this.each(function(){const y=es.getOrCreateInstance(this,m);if(typeof m!="number"){if(typeof m=="string"){if(y[m]===void 0||m.startsWith("_")||m==="constructor")throw new TypeError(`No method named "${m}"`);y[m]()}}else y.to(m)})}}te.on(document,Cl,"[data-bs-slide], [data-bs-slide-to]",function(k){const m=ee.getElementFromSelector(this);if(!m||!m.classList.contains(wl))return;k.preventDefault();const y=es.getOrCreateInstance(m),A=this.getAttribute("data-bs-slide-to");return A?(y.to(A),void y._maybeEnableCycle()):Vt.getDataAttribute(this,"slide")==="next"?(y.next(),void y._maybeEnableCycle()):(y.prev(),void y._maybeEnableCycle())}),te.on(window,Xm,()=>{const k=ee.find('[data-bs-ride="carousel"]');for(const m of k)es.getOrCreateInstance(m)}),Xe(es);const ts=".bs.collapse",ua=`show${ts}`,El=`shown${ts}`,bi=`hide${ts}`,ma=`hidden${ts}`,Ad=`click${ts}.data-api`,ur="show",Fn="collapse",vi="collapsing",xl=`:scope .${Fn} .${Fn}`,ns='[data-bs-toggle="collapse"]',Nd={parent:null,toggle:!0},Td={parent:"(null|element)",toggle:"boolean"};class os extends Zt{constructor(m,y){super(m,y),this._isTransitioning=!1,this._triggerArray=[];const A=ee.find(ns);for(const j of A){const z=ee.getSelectorFromElement(j),V=ee.find(z).filter(ne=>ne===this._element);z!==null&&V.length&&this._triggerArray.push(j)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Nd}static get DefaultType(){return Td}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let m=[];if(this._config.parent&&(m=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(j=>j!==this._element).map(j=>os.getOrCreateInstance(j,{toggle:!1}))),m.length&&m[0]._isTransitioning||te.trigger(this._element,ua).defaultPrevented)return;for(const j of m)j.hide();const y=this._getDimension();this._element.classList.remove(Fn),this._element.classList.add(vi),this._element.style[y]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const A=`scroll${y[0].toUpperCase()+y.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(vi),this._element.classList.add(Fn,ur),this._element.style[y]="",te.trigger(this._element,El)},this._element,!0),this._element.style[y]=`${this._element[A]}px`}hide(){if(this._isTransitioning||!this._isShown()||te.trigger(this._element,bi).defaultPrevented)return;const m=this._getDimension();this._element.style[m]=`${this._element.getBoundingClientRect()[m]}px`,Je(this._element),this._element.classList.add(vi),this._element.classList.remove(Fn,ur);for(const y of this._triggerArray){const A=ee.getElementFromSelector(y);A&&!this._isShown(A)&&this._addAriaAndCollapsedClass([y],!1)}this._isTransitioning=!0,this._element.style[m]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(vi),this._element.classList.add(Fn),te.trigger(this._element,ma)},this._element,!0)}_isShown(m=this._element){return m.classList.contains(ur)}_configAfterMerge(m){return m.toggle=!!m.toggle,m.parent=qt(m.parent),m}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const m=this._getFirstLevelChildren(ns);for(const y of m){const A=ee.getElementFromSelector(y);A&&this._addAriaAndCollapsedClass([y],this._isShown(A))}}_getFirstLevelChildren(m){const y=ee.find(xl,this._config.parent);return ee.find(m,this._config.parent).filter(A=>!y.includes(A))}_addAriaAndCollapsedClass(m,y){if(m.length)for(const A of m)A.classList.toggle("collapsed",!y),A.setAttribute("aria-expanded",y)}static jQueryInterface(m){const y={};return typeof m=="string"&&/show|hide/.test(m)&&(y.toggle=!1),this.each(function(){const A=os.getOrCreateInstance(this,y);if(typeof m=="string"){if(A[m]===void 0)throw new TypeError(`No method named "${m}"`);A[m]()}})}}te.on(document,Ad,ns,function(k){(k.target.tagName==="A"||k.delegateTarget&&k.delegateTarget.tagName==="A")&&k.preventDefault();for(const m of ee.getMultipleElementsFromSelector(this))os.getOrCreateInstance(m,{toggle:!1}).toggle()}),Xe(os);var Et="top",_t="bottom",jn="right",Nn="left",mr="auto",Os=[Et,_t,jn,Nn],Nr="start",$n="end",Rs="clippingParents",Bs="viewport",Tr="popper",Go="reference",kl=Os.reduce(function(k,m){return k.concat([m+"-"+Nr,m+"-"+$n])},[]),Sl=[].concat(Os,[mr]).reduce(function(k,m){return k.concat([m,m+"-"+Nr,m+"-"+$n])},[]),Al="beforeRead",Nl="read",Tl="afterRead",Ol="beforeMain",Rl="main",Bl="afterMain",Dl="beforeWrite",Od="write",Rd="afterWrite",Pl=[Al,Nl,Tl,Ol,Rl,Bl,Dl,Od,Rd];function ko(k){return k?(k.nodeName||"").toLowerCase():null}function Yn(k){if(k==null)return window;if(k.toString()!=="[object Window]"){var m=k.ownerDocument;return m&&m.defaultView||window}return k}function Or(k){return k instanceof Yn(k).Element||k instanceof Element}function ro(k){return k instanceof Yn(k).HTMLElement||k instanceof HTMLElement}function fa(k){return typeof ShadowRoot<"u"&&(k instanceof Yn(k).ShadowRoot||k instanceof ShadowRoot)}const ga={name:"applyStyles",enabled:!0,phase:"write",fn:function(k){var m=k.state;Object.keys(m.elements).forEach(function(y){var A=m.styles[y]||{},j=m.attributes[y]||{},z=m.elements[y];ro(z)&&ko(z)&&(Object.assign(z.style,A),Object.keys(j).forEach(function(V){var ne=j[V];ne===!1?z.removeAttribute(V):z.setAttribute(V,ne===!0?"":ne)}))})},effect:function(k){var m=k.state,y={popper:{position:m.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(m.elements.popper.style,y.popper),m.styles=y,m.elements.arrow&&Object.assign(m.elements.arrow.style,y.arrow),function(){Object.keys(m.elements).forEach(function(A){var j=m.elements[A],z=m.attributes[A]||{},V=Object.keys(m.styles.hasOwnProperty(A)?m.styles[A]:y[A]).reduce(function(ne,ve){return ne[ve]="",ne},{});ro(j)&&ko(j)&&(Object.assign(j.style,V),Object.keys(z).forEach(function(ne){j.removeAttribute(ne)}))})}},requires:["computeStyles"]};function So(k){return k.split("-")[0]}var rs=Math.max,pa=Math.min,Ds=Math.round;function Ll(){var k=navigator.userAgentData;return k!=null&&k.brands&&Array.isArray(k.brands)?k.brands.map(function(m){return m.brand+"/"+m.version}).join(" "):navigator.userAgent}function Ao(){return!/^((?!chrome|android).)*safari/i.test(Ll())}function Ps(k,m,y){m===void 0&&(m=!1),y===void 0&&(y=!1);var A=k.getBoundingClientRect(),j=1,z=1;m&&ro(k)&&(j=k.offsetWidth>0&&Ds(A.width)/k.offsetWidth||1,z=k.offsetHeight>0&&Ds(A.height)/k.offsetHeight||1);var V=(Or(k)?Yn(k):window).visualViewport,ne=!Ao()&&y,ve=(A.left+(ne&&V?V.offsetLeft:0))/j,Se=(A.top+(ne&&V?V.offsetTop:0))/z,xe=A.width/j,ge=A.height/z;return{width:xe,height:ge,top:Se,right:ve+xe,bottom:Se+ge,left:ve,x:ve,y:Se}}function yi(k){var m=Ps(k),y=k.offsetWidth,A=k.offsetHeight;return Math.abs(m.width-y)<=1&&(y=m.width),Math.abs(m.height-A)<=1&&(A=m.height),{x:k.offsetLeft,y:k.offsetTop,width:y,height:A}}function No(k,m){var y=m.getRootNode&&m.getRootNode();if(k.contains(m))return!0;if(y&&fa(y)){var A=m;do{if(A&&k.isSameNode(A))return!0;A=A.parentNode||A.host}while(A)}return!1}function wn(k){return Yn(k).getComputedStyle(k)}function ss(k){return["table","td","th"].indexOf(ko(k))>=0}function Rr(k){return((Or(k)?k.ownerDocument:k.document)||window.document).documentElement}function qe(k){return ko(k)==="html"?k:k.assignedSlot||k.parentNode||(fa(k)?k.host:null)||Rr(k)}function Bd(k){return ro(k)&&wn(k).position!=="fixed"?k.offsetParent:null}function Ls(k){for(var m=Yn(k),y=Bd(k);y&&ss(y)&&wn(y).position==="static";)y=Bd(y);return y&&(ko(y)==="html"||ko(y)==="body"&&wn(y).position==="static")?m:y||function(A){var j=/firefox/i.test(Ll());if(/Trident/i.test(Ll())&&ro(A)&&wn(A).position==="fixed")return null;var z=qe(A);for(fa(z)&&(z=z.host);ro(z)&&["html","body"].indexOf(ko(z))<0;){var V=wn(z);if(V.transform!=="none"||V.perspective!=="none"||V.contain==="paint"||["transform","perspective"].indexOf(V.willChange)!==-1||j&&V.willChange==="filter"||j&&V.filter&&V.filter!=="none")return z;z=z.parentNode}return null}(k)||m}function ha(k){return["top","bottom"].indexOf(k)>=0?"x":"y"}function Q(k,m,y){return rs(k,pa(m,y))}function is(k){return Object.assign({},{top:0,right:0,bottom:0,left:0},k)}function Ml(k,m){return m.reduce(function(y,A){return y[A]=k,y},{})}const bn={name:"arrow",enabled:!0,phase:"main",fn:function(k){var m,y=k.state,A=k.name,j=k.options,z=y.elements.arrow,V=y.modifiersData.popperOffsets,ne=So(y.placement),ve=ha(ne),Se=[Nn,jn].indexOf(ne)>=0?"height":"width";if(z&&V){var xe=function(It,Dt){return is(typeof(It=typeof It=="function"?It(Object.assign({},Dt.rects,{placement:Dt.placement})):It)!="number"?It:Ml(It,Os))}(j.padding,y),ge=yi(z),et=ve==="y"?Et:Nn,$e=ve==="y"?_t:jn,Ke=y.rects.reference[Se]+y.rects.reference[ve]-V[ve]-y.rects.popper[Se],He=V[ve]-y.rects.reference[ve],Qe=Ls(z),Mt=Qe?ve==="y"?Qe.clientHeight||0:Qe.clientWidth||0:0,jt=Ke/2-He/2,nt=xe[et],ht=Mt-ge[Se]-xe[$e],ze=Mt/2-ge[Se]/2+jt,gt=Q(nt,ze,ht),Bt=ve;y.modifiersData[A]=((m={})[Bt]=gt,m.centerOffset=gt-ze,m)}},effect:function(k){var m=k.state,y=k.options.element,A=y===void 0?"[data-popper-arrow]":y;A!=null&&(typeof A!="string"||(A=m.elements.popper.querySelector(A)))&&No(m.elements.popper,A)&&(m.elements.arrow=A)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function To(k){return k.split("-")[1]}var Gm={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Il(k){var m,y=k.popper,A=k.popperRect,j=k.placement,z=k.variation,V=k.offsets,ne=k.position,ve=k.gpuAcceleration,Se=k.adaptive,xe=k.roundOffsets,ge=k.isFixed,et=V.x,$e=et===void 0?0:et,Ke=V.y,He=Ke===void 0?0:Ke,Qe=typeof xe=="function"?xe({x:$e,y:He}):{x:$e,y:He};$e=Qe.x,He=Qe.y;var Mt=V.hasOwnProperty("x"),jt=V.hasOwnProperty("y"),nt=Nn,ht=Et,ze=window;if(Se){var gt=Ls(y),Bt="clientHeight",It="clientWidth";gt===Yn(y)&&wn(gt=Rr(y)).position!=="static"&&ne==="absolute"&&(Bt="scrollHeight",It="scrollWidth"),(j===Et||(j===Nn||j===jn)&&z===$n)&&(ht=_t,He-=(ge&&gt===ze&&ze.visualViewport?ze.visualViewport.height:gt[Bt])-A.height,He*=ve?1:-1),j!==Nn&&(j!==Et&&j!==_t||z!==$n)||(nt=jn,$e-=(ge&&gt===ze&&ze.visualViewport?ze.visualViewport.width:gt[It])-A.width,$e*=ve?1:-1)}var Dt,Gt=Object.assign({position:ne},Se&&Gm),fn=xe===!0?function(lo,qn){var co=lo.x,uo=lo.y,Qt=qn.devicePixelRatio||1;return{x:Ds(co*Qt)/Qt||0,y:Ds(uo*Qt)/Qt||0}}({x:$e,y:He},Yn(y)):{x:$e,y:He};return $e=fn.x,He=fn.y,ve?Object.assign({},Gt,((Dt={})[ht]=jt?"0":"",Dt[nt]=Mt?"0":"",Dt.transform=(ze.devicePixelRatio||1)<=1?"translate("+$e+"px, "+He+"px)":"translate3d("+$e+"px, "+He+"px, 0)",Dt)):Object.assign({},Gt,((m={})[ht]=jt?He+"px":"",m[nt]=Mt?$e+"px":"",m.transform="",m))}const Fl={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(k){var m=k.state,y=k.options,A=y.gpuAcceleration,j=A===void 0||A,z=y.adaptive,V=z===void 0||z,ne=y.roundOffsets,ve=ne===void 0||ne,Se={placement:So(m.placement),variation:To(m.placement),popper:m.elements.popper,popperRect:m.rects.popper,gpuAcceleration:j,isFixed:m.options.strategy==="fixed"};m.modifiersData.popperOffsets!=null&&(m.styles.popper=Object.assign({},m.styles.popper,Il(Object.assign({},Se,{offsets:m.modifiersData.popperOffsets,position:m.options.strategy,adaptive:V,roundOffsets:ve})))),m.modifiersData.arrow!=null&&(m.styles.arrow=Object.assign({},m.styles.arrow,Il(Object.assign({},Se,{offsets:m.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:ve})))),m.attributes.popper=Object.assign({},m.attributes.popper,{"data-popper-placement":m.placement})},data:{}};var ba={passive:!0};const We={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(k){var m=k.state,y=k.instance,A=k.options,j=A.scroll,z=j===void 0||j,V=A.resize,ne=V===void 0||V,ve=Yn(m.elements.popper),Se=[].concat(m.scrollParents.reference,m.scrollParents.popper);return z&&Se.forEach(function(xe){xe.addEventListener("scroll",y.update,ba)}),ne&&ve.addEventListener("resize",y.update,ba),function(){z&&Se.forEach(function(xe){xe.removeEventListener("scroll",y.update,ba)}),ne&&ve.removeEventListener("resize",y.update,ba)}},data:{}};var Dd={left:"right",right:"left",bottom:"top",top:"bottom"};function as(k){return k.replace(/left|right|bottom|top/g,function(m){return Dd[m]})}var va={start:"end",end:"start"};function zn(k){return k.replace(/start|end/g,function(m){return va[m]})}function En(k){var m=Yn(k);return{scrollLeft:m.pageXOffset,scrollTop:m.pageYOffset}}function jl(k){return Ps(Rr(k)).left+En(k).scrollLeft}function $l(k){var m=wn(k),y=m.overflow,A=m.overflowX,j=m.overflowY;return/auto|scroll|overlay|hidden/.test(y+j+A)}function _i(k){return["html","body","#document"].indexOf(ko(k))>=0?k.ownerDocument.body:ro(k)&&$l(k)?k:_i(qe(k))}function Ms(k,m){var y;m===void 0&&(m=[]);var A=_i(k),j=A===((y=k.ownerDocument)==null?void 0:y.body),z=Yn(A),V=j?[z].concat(z.visualViewport||[],$l(A)?A:[]):A,ne=m.concat(V);return j?ne:ne.concat(Ms(qe(V)))}function tn(k){return Object.assign({},k,{left:k.x,top:k.y,right:k.x+k.width,bottom:k.y+k.height})}function Qo(k,m,y){return m===Bs?tn(function(A,j){var z=Yn(A),V=Rr(A),ne=z.visualViewport,ve=V.clientWidth,Se=V.clientHeight,xe=0,ge=0;if(ne){ve=ne.width,Se=ne.height;var et=Ao();(et||!et&&j==="fixed")&&(xe=ne.offsetLeft,ge=ne.offsetTop)}return{width:ve,height:Se,x:xe+jl(A),y:ge}}(k,y)):Or(m)?function(A,j){var z=Ps(A,!1,j==="fixed");return z.top=z.top+A.clientTop,z.left=z.left+A.clientLeft,z.bottom=z.top+A.clientHeight,z.right=z.left+A.clientWidth,z.width=A.clientWidth,z.height=A.clientHeight,z.x=z.left,z.y=z.top,z}(m,y):tn(function(A){var j,z=Rr(A),V=En(A),ne=(j=A.ownerDocument)==null?void 0:j.body,ve=rs(z.scrollWidth,z.clientWidth,ne?ne.scrollWidth:0,ne?ne.clientWidth:0),Se=rs(z.scrollHeight,z.clientHeight,ne?ne.scrollHeight:0,ne?ne.clientHeight:0),xe=-V.scrollLeft+jl(A),ge=-V.scrollTop;return wn(ne||z).direction==="rtl"&&(xe+=rs(z.clientWidth,ne?ne.clientWidth:0)-ve),{width:ve,height:Se,x:xe,y:ge}}(Rr(k)))}function Un(k){var m,y=k.reference,A=k.element,j=k.placement,z=j?So(j):null,V=j?To(j):null,ne=y.x+y.width/2-A.width/2,ve=y.y+y.height/2-A.height/2;switch(z){case Et:m={x:ne,y:y.y-A.height};break;case _t:m={x:ne,y:y.y+y.height};break;case jn:m={x:y.x+y.width,y:ve};break;case Nn:m={x:y.x-A.width,y:ve};break;default:m={x:y.x,y:y.y}}var Se=z?ha(z):null;if(Se!=null){var xe=Se==="y"?"height":"width";switch(V){case Nr:m[Se]=m[Se]-(y[xe]/2-A[xe]/2);break;case $n:m[Se]=m[Se]+(y[xe]/2-A[xe]/2)}}return m}function Xn(k,m){m===void 0&&(m={});var y=m,A=y.placement,j=A===void 0?k.placement:A,z=y.strategy,V=z===void 0?k.strategy:z,ne=y.boundary,ve=ne===void 0?Rs:ne,Se=y.rootBoundary,xe=Se===void 0?Bs:Se,ge=y.elementContext,et=ge===void 0?Tr:ge,$e=y.altBoundary,Ke=$e!==void 0&&$e,He=y.padding,Qe=He===void 0?0:He,Mt=is(typeof Qe!="number"?Qe:Ml(Qe,Os)),jt=et===Tr?Go:Tr,nt=k.rects.popper,ht=k.elements[Ke?jt:et],ze=function(qn,co,uo,Qt){var Mo=co==="clippingParents"?function(zt){var Dn=Ms(qe(zt)),Qn=["absolute","fixed"].indexOf(wn(zt).position)>=0&&ro(zt)?Ls(zt):zt;return Or(Qn)?Dn.filter(function(zr){return Or(zr)&&No(zr,Qn)&&ko(zr)!=="body"}):[]}(qn):[].concat(co),tr=[].concat(Mo,[uo]),nr=tr[0],gn=tr.reduce(function(zt,Dn){var Qn=Qo(qn,Dn,Qt);return zt.top=rs(Qn.top,zt.top),zt.right=pa(Qn.right,zt.right),zt.bottom=pa(Qn.bottom,zt.bottom),zt.left=rs(Qn.left,zt.left),zt},Qo(qn,nr,Qt));return gn.width=gn.right-gn.left,gn.height=gn.bottom-gn.top,gn.x=gn.left,gn.y=gn.top,gn}(Or(ht)?ht:ht.contextElement||Rr(k.elements.popper),ve,xe,V),gt=Ps(k.elements.reference),Bt=Un({reference:gt,element:nt,strategy:"absolute",placement:j}),It=tn(Object.assign({},nt,Bt)),Dt=et===Tr?It:gt,Gt={top:ze.top-Dt.top+Mt.top,bottom:Dt.bottom-ze.bottom+Mt.bottom,left:ze.left-Dt.left+Mt.left,right:Dt.right-ze.right+Mt.right},fn=k.modifiersData.offset;if(et===Tr&&fn){var lo=fn[j];Object.keys(Gt).forEach(function(qn){var co=[jn,_t].indexOf(qn)>=0?1:-1,uo=[Et,_t].indexOf(qn)>=0?"y":"x";Gt[qn]+=lo[uo]*co})}return Gt}function Ci(k,m){m===void 0&&(m={});var y=m,A=y.placement,j=y.boundary,z=y.rootBoundary,V=y.padding,ne=y.flipVariations,ve=y.allowedAutoPlacements,Se=ve===void 0?Sl:ve,xe=To(A),ge=xe?ne?kl:kl.filter(function(Ke){return To(Ke)===xe}):Os,et=ge.filter(function(Ke){return Se.indexOf(Ke)>=0});et.length===0&&(et=ge);var $e=et.reduce(function(Ke,He){return Ke[He]=Xn(k,{placement:He,boundary:j,rootBoundary:z,padding:V})[So(He)],Ke},{});return Object.keys($e).sort(function(Ke,He){return $e[Ke]-$e[He]})}const rn={name:"flip",enabled:!0,phase:"main",fn:function(k){var m=k.state,y=k.options,A=k.name;if(!m.modifiersData[A]._skip){for(var j=y.mainAxis,z=j===void 0||j,V=y.altAxis,ne=V===void 0||V,ve=y.fallbackPlacements,Se=y.padding,xe=y.boundary,ge=y.rootBoundary,et=y.altBoundary,$e=y.flipVariations,Ke=$e===void 0||$e,He=y.allowedAutoPlacements,Qe=m.options.placement,Mt=So(Qe),jt=ve||(Mt!==Qe&&Ke?function(zt){if(So(zt)===mr)return[];var Dn=as(zt);return[zn(zt),Dn,zn(Dn)]}(Qe):[as(Qe)]),nt=[Qe].concat(jt).reduce(function(zt,Dn){return zt.concat(So(Dn)===mr?Ci(m,{placement:Dn,boundary:xe,rootBoundary:ge,padding:Se,flipVariations:Ke,allowedAutoPlacements:He}):Dn)},[]),ht=m.rects.reference,ze=m.rects.popper,gt=new Map,Bt=!0,It=nt[0],Dt=0;Dt<nt.length;Dt++){var Gt=nt[Dt],fn=So(Gt),lo=To(Gt)===Nr,qn=[Et,_t].indexOf(fn)>=0,co=qn?"width":"height",uo=Xn(m,{placement:Gt,boundary:xe,rootBoundary:ge,altBoundary:et,padding:Se}),Qt=qn?lo?jn:Nn:lo?_t:Et;ht[co]>ze[co]&&(Qt=as(Qt));var Mo=as(Qt),tr=[];if(z&&tr.push(uo[fn]<=0),ne&&tr.push(uo[Qt]<=0,uo[Mo]<=0),tr.every(function(zt){return zt})){It=Gt,Bt=!1;break}gt.set(Gt,tr)}if(Bt)for(var nr=function(zt){var Dn=nt.find(function(Qn){var zr=gt.get(Qn);if(zr)return zr.slice(0,zt).every(function(Ys){return Ys})});if(Dn)return It=Dn,"break"},gn=Ke?3:1;gn>0&&nr(gn)!=="break";gn--);m.placement!==It&&(m.modifiersData[A]._skip=!0,m.placement=It,m.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function zl(k,m,y){return y===void 0&&(y={x:0,y:0}),{top:k.top-m.height-y.y,right:k.right-m.width+y.x,bottom:k.bottom-m.height+y.y,left:k.left-m.width-y.x}}function ya(k){return[Et,jn,_t,Nn].some(function(m){return k[m]>=0})}const Is={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(k){var m=k.state,y=k.name,A=m.rects.reference,j=m.rects.popper,z=m.modifiersData.preventOverflow,V=Xn(m,{elementContext:"reference"}),ne=Xn(m,{altBoundary:!0}),ve=zl(V,A),Se=zl(ne,j,z),xe=ya(ve),ge=ya(Se);m.modifiersData[y]={referenceClippingOffsets:ve,popperEscapeOffsets:Se,isReferenceHidden:xe,hasPopperEscaped:ge},m.attributes.popper=Object.assign({},m.attributes.popper,{"data-popper-reference-hidden":xe,"data-popper-escaped":ge})}},Ul={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(k){var m=k.state,y=k.options,A=k.name,j=y.offset,z=j===void 0?[0,0]:j,V=Sl.reduce(function(xe,ge){return xe[ge]=function(et,$e,Ke){var He=So(et),Qe=[Nn,Et].indexOf(He)>=0?-1:1,Mt=typeof Ke=="function"?Ke(Object.assign({},$e,{placement:et})):Ke,jt=Mt[0],nt=Mt[1];return jt=jt||0,nt=(nt||0)*Qe,[Nn,jn].indexOf(He)>=0?{x:nt,y:jt}:{x:jt,y:nt}}(ge,m.rects,z),xe},{}),ne=V[m.placement],ve=ne.x,Se=ne.y;m.modifiersData.popperOffsets!=null&&(m.modifiersData.popperOffsets.x+=ve,m.modifiersData.popperOffsets.y+=Se),m.modifiersData[A]=V}},_a={name:"popperOffsets",enabled:!0,phase:"read",fn:function(k){var m=k.state,y=k.name;m.modifiersData[y]=Un({reference:m.rects.reference,element:m.rects.popper,strategy:"absolute",placement:m.placement})},data:{}},Hl={name:"preventOverflow",enabled:!0,phase:"main",fn:function(k){var m=k.state,y=k.options,A=k.name,j=y.mainAxis,z=j===void 0||j,V=y.altAxis,ne=V!==void 0&&V,ve=y.boundary,Se=y.rootBoundary,xe=y.altBoundary,ge=y.padding,et=y.tether,$e=et===void 0||et,Ke=y.tetherOffset,He=Ke===void 0?0:Ke,Qe=Xn(m,{boundary:ve,rootBoundary:Se,padding:ge,altBoundary:xe}),Mt=So(m.placement),jt=To(m.placement),nt=!jt,ht=ha(Mt),ze=ht==="x"?"y":"x",gt=m.modifiersData.popperOffsets,Bt=m.rects.reference,It=m.rects.popper,Dt=typeof He=="function"?He(Object.assign({},m.rects,{placement:m.placement})):He,Gt=typeof Dt=="number"?{mainAxis:Dt,altAxis:Dt}:Object.assign({mainAxis:0,altAxis:0},Dt),fn=m.modifiersData.offset?m.modifiersData.offset[m.placement]:null,lo={x:0,y:0};if(gt){if(z){var qn,co=ht==="y"?Et:Nn,uo=ht==="y"?_t:jn,Qt=ht==="y"?"height":"width",Mo=gt[ht],tr=Mo+Qe[co],nr=Mo-Qe[uo],gn=$e?-It[Qt]/2:0,zt=jt===Nr?Bt[Qt]:It[Qt],Dn=jt===Nr?-It[Qt]:-Bt[Qt],Qn=m.elements.arrow,zr=$e&&Qn?yi(Qn):{width:0,height:0},Ys=m.modifiersData["arrow#persistent"]?m.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Di=Ys[co],Xs=Ys[uo],Ia=Q(0,Bt[Qt],zr[Qt]),ys=nt?Bt[Qt]/2-gn-Ia-Di-Gt.mainAxis:zt-Ia-Di-Gt.mainAxis,hc=nt?-Bt[Qt]/2+gn+Ia+Xs+Gt.mainAxis:Dn+Ia+Xs+Gt.mainAxis,bc=m.elements.arrow&&Ls(m.elements.arrow),vc=bc?ht==="y"?bc.clientTop||0:bc.clientLeft||0:0,su=(qn=fn?.[ht])!=null?qn:0,Pi=Mo+hc-su,yc=Q($e?pa(tr,Mo+ys-su-vc):tr,Mo,$e?rs(nr,Pi):nr);gt[ht]=yc,lo[ht]=yc-Mo}if(ne){var _s,iu=ht==="x"?Et:Nn,au=ht==="x"?_t:jn,ot=gt[ze],Fa=ze==="y"?"height":"width",or=ot+Qe[iu],Gs=ot-Qe[au],Li=[Et,Nn].indexOf(Mt)!==-1,_c=(_s=fn?.[ze])!=null?_s:0,_o=Li?or:ot-Bt[Fa]-It[Fa]-_c+Gt.altAxis,Sn=Li?ot+Bt[Fa]+It[Fa]-_c-Gt.altAxis:Gs,Mi=$e&&Li?function(Cc,Ii,_r){var Cs=Q(Cc,Ii,_r);return Cs>_r?_r:Cs}(_o,ot,Sn):Q($e?_o:or,ot,$e?Sn:Gs);gt[ze]=Mi,lo[ze]=Mi-ot}m.modifiersData[A]=lo}},requiresIfExists:["offset"]};function Fs(k,m,y){y===void 0&&(y=!1);var A,j,z=ro(m),V=ro(m)&&function(ge){var et=ge.getBoundingClientRect(),$e=Ds(et.width)/ge.offsetWidth||1,Ke=Ds(et.height)/ge.offsetHeight||1;return $e!==1||Ke!==1}(m),ne=Rr(m),ve=Ps(k,V,y),Se={scrollLeft:0,scrollTop:0},xe={x:0,y:0};return(z||!z&&!y)&&((ko(m)!=="body"||$l(ne))&&(Se=(A=m)!==Yn(A)&&ro(A)?{scrollLeft:(j=A).scrollLeft,scrollTop:j.scrollTop}:En(A)),ro(m)?((xe=Ps(m,!0)).x+=m.clientLeft,xe.y+=m.clientTop):ne&&(xe.x=jl(ne))),{x:ve.left+Se.scrollLeft-xe.x,y:ve.top+Se.scrollTop-xe.y,width:ve.width,height:ve.height}}function Pd(k){var m=new Map,y=new Set,A=[];function j(z){y.add(z.name),[].concat(z.requires||[],z.requiresIfExists||[]).forEach(function(V){if(!y.has(V)){var ne=m.get(V);ne&&j(ne)}}),A.push(z)}return k.forEach(function(z){m.set(z.name,z)}),k.forEach(function(z){y.has(z.name)||j(z)}),A}var js={placement:"bottom",modifiers:[],strategy:"absolute"};function Ca(){for(var k=arguments.length,m=new Array(k),y=0;y<k;y++)m[y]=arguments[y];return!m.some(function(A){return!(A&&typeof A.getBoundingClientRect=="function")})}function Br(k){k===void 0&&(k={});var m=k,y=m.defaultModifiers,A=y===void 0?[]:y,j=m.defaultOptions,z=j===void 0?js:j;return function(V,ne,ve){ve===void 0&&(ve=z);var Se,xe,ge={placement:"bottom",orderedModifiers:[],options:Object.assign({},js,z),modifiersData:{},elements:{reference:V,popper:ne},attributes:{},styles:{}},et=[],$e=!1,Ke={state:ge,setOptions:function(Qe){var Mt=typeof Qe=="function"?Qe(ge.options):Qe;He(),ge.options=Object.assign({},z,ge.options,Mt),ge.scrollParents={reference:Or(V)?Ms(V):V.contextElement?Ms(V.contextElement):[],popper:Ms(ne)};var jt,nt,ht=function(ze){var gt=Pd(ze);return Pl.reduce(function(Bt,It){return Bt.concat(gt.filter(function(Dt){return Dt.phase===It}))},[])}((jt=[].concat(A,ge.options.modifiers),nt=jt.reduce(function(ze,gt){var Bt=ze[gt.name];return ze[gt.name]=Bt?Object.assign({},Bt,gt,{options:Object.assign({},Bt.options,gt.options),data:Object.assign({},Bt.data,gt.data)}):gt,ze},{}),Object.keys(nt).map(function(ze){return nt[ze]})));return ge.orderedModifiers=ht.filter(function(ze){return ze.enabled}),ge.orderedModifiers.forEach(function(ze){var gt=ze.name,Bt=ze.options,It=Bt===void 0?{}:Bt,Dt=ze.effect;if(typeof Dt=="function"){var Gt=Dt({state:ge,name:gt,instance:Ke,options:It});et.push(Gt||function(){})}}),Ke.update()},forceUpdate:function(){if(!$e){var Qe=ge.elements,Mt=Qe.reference,jt=Qe.popper;if(Ca(Mt,jt)){ge.rects={reference:Fs(Mt,Ls(jt),ge.options.strategy==="fixed"),popper:yi(jt)},ge.reset=!1,ge.placement=ge.options.placement,ge.orderedModifiers.forEach(function(Dt){return ge.modifiersData[Dt.name]=Object.assign({},Dt.data)});for(var nt=0;nt<ge.orderedModifiers.length;nt++)if(ge.reset!==!0){var ht=ge.orderedModifiers[nt],ze=ht.fn,gt=ht.options,Bt=gt===void 0?{}:gt,It=ht.name;typeof ze=="function"&&(ge=ze({state:ge,options:Bt,name:It,instance:Ke})||ge)}else ge.reset=!1,nt=-1}}},update:(Se=function(){return new Promise(function(Qe){Ke.forceUpdate(),Qe(ge)})},function(){return xe||(xe=new Promise(function(Qe){Promise.resolve().then(function(){xe=void 0,Qe(Se())})})),xe}),destroy:function(){He(),$e=!0}};if(!Ca(V,ne))return Ke;function He(){et.forEach(function(Qe){return Qe()}),et=[]}return Ke.setOptions(ve).then(function(Qe){!$e&&ve.onFirstUpdate&&ve.onFirstUpdate(Qe)}),Ke}}var wa=Br(),sn=Br({defaultModifiers:[We,_a,Fl,ga]}),Dr=Br({defaultModifiers:[We,_a,Fl,ga,Ul,rn,Hl,bn,Is]});const B=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Bl,afterRead:Tl,afterWrite:Rd,applyStyles:ga,arrow:bn,auto:mr,basePlacements:Os,beforeMain:Ol,beforeRead:Al,beforeWrite:Dl,bottom:_t,clippingParents:Rs,computeStyles:Fl,createPopper:Dr,createPopperBase:wa,createPopperLite:sn,detectOverflow:Xn,end:$n,eventListeners:We,flip:rn,hide:Is,left:Nn,main:Rl,modifierPhases:Pl,offset:Ul,placements:Sl,popper:Tr,popperGenerator:Br,popperOffsets:_a,preventOverflow:Hl,read:Nl,reference:Go,right:jn,start:Nr,top:Et,variationPlacements:kl,viewport:Bs,write:Od},Symbol.toStringTag,{value:"Module"})),Ld="dropdown",Pr=".bs.dropdown",so=".data-api",Md="ArrowUp",tt="ArrowDown",Oo=`hide${Pr}`,Id=`hidden${Pr}`,Lr=`show${Pr}`,wi=`shown${Pr}`,bo=`click${Pr}${so}`,Ei=`keydown${Pr}${so}`,Fd=`keyup${Pr}${so}`,io="show",Ro='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',jd=`${Ro}.${io}`,xi=".dropdown-menu",xn=Pt()?"top-end":"top-start",$s=Pt()?"top-start":"top-end",ql=Pt()?"bottom-end":"bottom-start",Wl=Pt()?"bottom-start":"bottom-end",Vl=Pt()?"left-start":"right-start",Kl=Pt()?"right-start":"left-start",Mr={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Yl={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Bo extends Zt{constructor(m,y){super(m,y),this._popper=null,this._parent=this._element.parentNode,this._menu=ee.next(this._element,xi)[0]||ee.prev(this._element,xi)[0]||ee.findOne(xi,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Mr}static get DefaultType(){return Yl}static get NAME(){return Ld}toggle(){return this._isShown()?this.hide():this.show()}show(){if(lt(this._element)||this._isShown())return;const m={relatedTarget:this._element};if(!te.trigger(this._element,Lr,m).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const y of[].concat(...document.body.children))te.on(y,"mouseover",ct);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(io),this._element.classList.add(io),te.trigger(this._element,wi,m)}}hide(){if(lt(this._element)||!this._isShown())return;const m={relatedTarget:this._element};this._completeHide(m)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(m){if(!te.trigger(this._element,Oo,m).defaultPrevented){if("ontouchstart"in document.documentElement)for(const y of[].concat(...document.body.children))te.off(y,"mouseover",ct);this._popper&&this._popper.destroy(),this._menu.classList.remove(io),this._element.classList.remove(io),this._element.setAttribute("aria-expanded","false"),Vt.removeDataAttribute(this._menu,"popper"),te.trigger(this._element,Id,m)}}_getConfig(m){if(typeof(m=super._getConfig(m)).reference=="object"&&!pt(m.reference)&&typeof m.reference.getBoundingClientRect!="function")throw new TypeError(`${Ld.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return m}_createPopper(){if(B===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let m=this._element;this._config.reference==="parent"?m=this._parent:pt(this._config.reference)?m=qt(this._config.reference):typeof this._config.reference=="object"&&(m=this._config.reference);const y=this._getPopperConfig();this._popper=Dr(m,this._menu,y)}_isShown(){return this._menu.classList.contains(io)}_getPlacement(){const m=this._parent;if(m.classList.contains("dropend"))return Vl;if(m.classList.contains("dropstart"))return Kl;if(m.classList.contains("dropup-center"))return"top";if(m.classList.contains("dropdown-center"))return"bottom";const y=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return m.classList.contains("dropup")?y?$s:xn:y?Wl:ql}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:m}=this._config;return typeof m=="string"?m.split(",").map(y=>Number.parseInt(y,10)):typeof m=="function"?y=>m(y,this._element):m}_getPopperConfig(){const m={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Vt.setDataAttribute(this._menu,"popper","static"),m.modifiers=[{name:"applyStyles",enabled:!1}]),{...m,...mt(this._config.popperConfig,[m])}}_selectMenuItem({key:m,target:y}){const A=ee.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(j=>je(j));A.length&&Ft(A,y,m===tt,!A.includes(y)).focus()}static jQueryInterface(m){return this.each(function(){const y=Bo.getOrCreateInstance(this,m);if(typeof m=="string"){if(y[m]===void 0)throw new TypeError(`No method named "${m}"`);y[m]()}})}static clearMenus(m){if(m.button===2||m.type==="keyup"&&m.key!=="Tab")return;const y=ee.find(jd);for(const A of y){const j=Bo.getInstance(A);if(!j||j._config.autoClose===!1)continue;const z=m.composedPath(),V=z.includes(j._menu);if(z.includes(j._element)||j._config.autoClose==="inside"&&!V||j._config.autoClose==="outside"&&V||j._menu.contains(m.target)&&(m.type==="keyup"&&m.key==="Tab"||/input|select|option|textarea|form/i.test(m.target.tagName)))continue;const ne={relatedTarget:j._element};m.type==="click"&&(ne.clickEvent=m),j._completeHide(ne)}}static dataApiKeydownHandler(m){const y=/input|textarea/i.test(m.target.tagName),A=m.key==="Escape",j=[Md,tt].includes(m.key);if(!j&&!A||y&&!A)return;m.preventDefault();const z=this.matches(Ro)?this:ee.prev(this,Ro)[0]||ee.next(this,Ro)[0]||ee.findOne(Ro,m.delegateTarget.parentNode),V=Bo.getOrCreateInstance(z);if(j)return m.stopPropagation(),V.show(),void V._selectMenuItem(m);V._isShown()&&(m.stopPropagation(),V.hide(),z.focus())}}te.on(document,Ei,Ro,Bo.dataApiKeydownHandler),te.on(document,Ei,xi,Bo.dataApiKeydownHandler),te.on(document,bo,Bo.clearMenus),te.on(document,Fd,Bo.clearMenus),te.on(document,bo,Ro,function(k){k.preventDefault(),Bo.getOrCreateInstance(this).toggle()}),Xe(Bo);const Xl="backdrop",$d="show",ls=`mousedown.bs.${Xl}`,zd={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},fr={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Ir extends Rn{constructor(m){super(),this._config=this._getConfig(m),this._isAppended=!1,this._element=null}static get Default(){return zd}static get DefaultType(){return fr}static get NAME(){return Xl}show(m){if(!this._config.isVisible)return void mt(m);this._append();const y=this._getElement();this._config.isAnimated&&Je(y),y.classList.add($d),this._emulateAnimation(()=>{mt(m)})}hide(m){this._config.isVisible?(this._getElement().classList.remove($d),this._emulateAnimation(()=>{this.dispose(),mt(m)})):mt(m)}dispose(){this._isAppended&&(te.off(this._element,ls),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const m=document.createElement("div");m.className=this._config.className,this._config.isAnimated&&m.classList.add("fade"),this._element=m}return this._element}_configAfterMerge(m){return m.rootElement=qt(m.rootElement),m}_append(){if(this._isAppended)return;const m=this._getElement();this._config.rootElement.append(m),te.on(m,ls,()=>{mt(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(m){Tn(m,this._getElement(),this._config.isAnimated)}}const zs=".bs.focustrap",ki=`focusin${zs}`,Ea=`keydown.tab${zs}`,cs="backward",ds={autofocus:!0,trapElement:null},Qm={autofocus:"boolean",trapElement:"element"};class Us extends Rn{constructor(m){super(),this._config=this._getConfig(m),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return ds}static get DefaultType(){return Qm}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),te.off(document,zs),te.on(document,ki,m=>this._handleFocusin(m)),te.on(document,Ea,m=>this._handleKeydown(m)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,te.off(document,zs))}_handleFocusin(m){const{trapElement:y}=this._config;if(m.target===document||m.target===y||y.contains(m.target))return;const A=ee.focusableChildren(y);A.length===0?y.focus():this._lastTabNavDirection===cs?A[A.length-1].focus():A[0].focus()}_handleKeydown(m){m.key==="Tab"&&(this._lastTabNavDirection=m.shiftKey?cs:"forward")}}const Gl=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Ql=".sticky-top",us="padding-right",Do="margin-right";class xa{constructor(){this._element=document.body}getWidth(){const m=document.documentElement.clientWidth;return Math.abs(window.innerWidth-m)}hide(){const m=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,us,y=>y+m),this._setElementAttributes(Gl,us,y=>y+m),this._setElementAttributes(Ql,Do,y=>y-m)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,us),this._resetElementAttributes(Gl,us),this._resetElementAttributes(Ql,Do)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(m,y,A){const j=this.getWidth();this._applyManipulationCallback(m,z=>{if(z!==this._element&&window.innerWidth>z.clientWidth+j)return;this._saveInitialAttribute(z,y);const V=window.getComputedStyle(z).getPropertyValue(y);z.style.setProperty(y,`${A(Number.parseFloat(V))}px`)})}_saveInitialAttribute(m,y){const A=m.style.getPropertyValue(y);A&&Vt.setDataAttribute(m,y,A)}_resetElementAttributes(m,y){this._applyManipulationCallback(m,A=>{const j=Vt.getDataAttribute(A,y);j!==null?(Vt.removeDataAttribute(A,y),A.style.setProperty(y,j)):A.style.removeProperty(y)})}_applyManipulationCallback(m,y){if(pt(m))y(m);else for(const A of ee.find(m,this._element))y(A)}}const Hn=".bs.modal",Zl=`hide${Hn}`,Ud=`hidePrevented${Hn}`,Bn=`hidden${Hn}`,Zo=`show${Hn}`,Jl=`shown${Hn}`,Xt=`resize${Hn}`,Hd=`click.dismiss${Hn}`,ms=`mousedown.dismiss${Hn}`,Hs=`keydown.dismiss${Hn}`,Nt=`click${Hn}.data-api`,gr="modal-open",ka="show",Sa="modal-static",Aa={backdrop:!0,focus:!0,keyboard:!0},Zm={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class fs extends Zt{constructor(m,y){super(m,y),this._dialog=ee.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new xa,this._addEventListeners()}static get Default(){return Aa}static get DefaultType(){return Zm}static get NAME(){return"modal"}toggle(m){return this._isShown?this.hide():this.show(m)}show(m){this._isShown||this._isTransitioning||te.trigger(this._element,Zo,{relatedTarget:m}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(gr),this._adjustDialog(),this._backdrop.show(()=>this._showElement(m)))}hide(){this._isShown&&!this._isTransitioning&&(te.trigger(this._element,Zl).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(ka),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){te.off(window,Hn),te.off(this._dialog,Hn),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Ir({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Us({trapElement:this._element})}_showElement(m){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const y=ee.findOne(".modal-body",this._dialog);y&&(y.scrollTop=0),Je(this._element),this._element.classList.add(ka),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,te.trigger(this._element,Jl,{relatedTarget:m})},this._dialog,this._isAnimated())}_addEventListeners(){te.on(this._element,Hs,m=>{m.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),te.on(window,Xt,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),te.on(this._element,ms,m=>{te.one(this._element,Hd,y=>{this._element===m.target&&this._element===y.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(gr),this._resetAdjustments(),this._scrollBar.reset(),te.trigger(this._element,Bn)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(te.trigger(this._element,Ud).defaultPrevented)return;const m=this._element.scrollHeight>document.documentElement.clientHeight,y=this._element.style.overflowY;y==="hidden"||this._element.classList.contains(Sa)||(m||(this._element.style.overflowY="hidden"),this._element.classList.add(Sa),this._queueCallback(()=>{this._element.classList.remove(Sa),this._queueCallback(()=>{this._element.style.overflowY=y},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const m=this._element.scrollHeight>document.documentElement.clientHeight,y=this._scrollBar.getWidth(),A=y>0;if(A&&!m){const j=Pt()?"paddingLeft":"paddingRight";this._element.style[j]=`${y}px`}if(!A&&m){const j=Pt()?"paddingRight":"paddingLeft";this._element.style[j]=`${y}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(m,y){return this.each(function(){const A=fs.getOrCreateInstance(this,m);if(typeof m=="string"){if(A[m]===void 0)throw new TypeError(`No method named "${m}"`);A[m](y)}})}}te.on(document,Nt,'[data-bs-toggle="modal"]',function(k){const m=ee.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&k.preventDefault(),te.one(m,Zo,A=>{A.defaultPrevented||te.one(m,Bn,()=>{je(this)&&this.focus()})});const y=ee.findOne(".modal.show");y&&fs.getInstance(y).hide(),fs.getOrCreateInstance(m).toggle(this)}),Ve(fs),Xe(fs);const Jo=".bs.offcanvas",gs=".data-api",Na=`load${Jo}${gs}`,Ta="show",Oa="showing",ec="hiding",tc=".offcanvas.show",qd=`show${Jo}`,Wd=`shown${Jo}`,Vd=`hide${Jo}`,vn=`hidePrevented${Jo}`,nc=`hidden${Jo}`,Jm=`resize${Jo}`,Kd=`click${Jo}${gs}`,an=`keydown.dismiss${Jo}`,Si={backdrop:!0,keyboard:!0,scroll:!1},nn={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Po extends Zt{constructor(m,y){super(m,y),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Si}static get DefaultType(){return nn}static get NAME(){return"offcanvas"}toggle(m){return this._isShown?this.hide():this.show(m)}show(m){this._isShown||te.trigger(this._element,qd,{relatedTarget:m}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new xa().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Oa),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Ta),this._element.classList.remove(Oa),te.trigger(this._element,Wd,{relatedTarget:m})},this._element,!0))}hide(){this._isShown&&(te.trigger(this._element,Vd).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(ec),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Ta,ec),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new xa().reset(),te.trigger(this._element,nc)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const m=!!this._config.backdrop;return new Ir({className:"offcanvas-backdrop",isVisible:m,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:m?()=>{this._config.backdrop!=="static"?this.hide():te.trigger(this._element,vn)}:null})}_initializeFocusTrap(){return new Us({trapElement:this._element})}_addEventListeners(){te.on(this._element,an,m=>{m.key==="Escape"&&(this._config.keyboard?this.hide():te.trigger(this._element,vn))})}static jQueryInterface(m){return this.each(function(){const y=Po.getOrCreateInstance(this,m);if(typeof m=="string"){if(y[m]===void 0||m.startsWith("_")||m==="constructor")throw new TypeError(`No method named "${m}"`);y[m](this)}})}}te.on(document,Kd,'[data-bs-toggle="offcanvas"]',function(k){const m=ee.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&k.preventDefault(),lt(this))return;te.one(m,nc,()=>{je(this)&&this.focus()});const y=ee.findOne(tc);y&&y!==m&&Po.getInstance(y).hide(),Po.getOrCreateInstance(m).toggle(this)}),te.on(window,Na,()=>{for(const k of ee.find(tc))Po.getOrCreateInstance(k).show()}),te.on(window,Jm,()=>{for(const k of ee.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(k).position!=="fixed"&&Po.getOrCreateInstance(k).hide()}),Ve(Po),Xe(Po);const Yd={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},qs=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Xd=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Gd=(k,m)=>{const y=k.nodeName.toLowerCase();return m.includes(y)?!qs.has(y)||!!Xd.test(k.nodeValue):m.filter(A=>A instanceof RegExp).some(A=>A.test(y))},ps={allowList:Yd,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Ra={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},he={entry:"(string|element|function|null)",selector:"(string|element)"};class pr extends Rn{constructor(m){super(),this._config=this._getConfig(m)}static get Default(){return ps}static get DefaultType(){return Ra}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(m=>this._resolvePossibleFunction(m)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(m){return this._checkContent(m),this._config.content={...this._config.content,...m},this}toHtml(){const m=document.createElement("div");m.innerHTML=this._maybeSanitize(this._config.template);for(const[j,z]of Object.entries(this._config.content))this._setContent(m,z,j);const y=m.children[0],A=this._resolvePossibleFunction(this._config.extraClass);return A&&y.classList.add(...A.split(" ")),y}_typeCheckConfig(m){super._typeCheckConfig(m),this._checkContent(m.content)}_checkContent(m){for(const[y,A]of Object.entries(m))super._typeCheckConfig({selector:y,entry:A},he)}_setContent(m,y,A){const j=ee.findOne(A,m);j&&((y=this._resolvePossibleFunction(y))?pt(y)?this._putElementInTemplate(qt(y),j):this._config.html?j.innerHTML=this._maybeSanitize(y):j.textContent=y:j.remove())}_maybeSanitize(m){return this._config.sanitize?function(y,A,j){if(!y.length)return y;if(j&&typeof j=="function")return j(y);const z=new window.DOMParser().parseFromString(y,"text/html"),V=[].concat(...z.body.querySelectorAll("*"));for(const ne of V){const ve=ne.nodeName.toLowerCase();if(!Object.keys(A).includes(ve)){ne.remove();continue}const Se=[].concat(...ne.attributes),xe=[].concat(A["*"]||[],A[ve]||[]);for(const ge of Se)Gd(ge,xe)||ne.removeAttribute(ge.nodeName)}return z.body.innerHTML}(m,this._config.allowList,this._config.sanitizeFn):m}_resolvePossibleFunction(m){return mt(m,[this])}_putElementInTemplate(m,y){if(this._config.html)return y.innerHTML="",void y.append(m);y.textContent=m.textContent}}const Ai=new Set(["sanitize","allowList","sanitizeFn"]),ao="fade",hs="show",Fr=".modal",Lo="hide.bs.modal",Ws="hover",Ni="focus",X={AUTO:"auto",TOP:"top",RIGHT:Pt()?"left":"right",BOTTOM:"bottom",LEFT:Pt()?"right":"left"},ef={allowList:Yd,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},tf={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Gn extends Zt{constructor(m,y){if(B===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(m,y),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return ef}static get DefaultType(){return tf}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),te.off(this._element.closest(Fr),Lo,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const m=te.trigger(this._element,this.constructor.eventName("show")),y=(Ze(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(m.defaultPrevented||!y)return;this._disposePopper();const A=this._getTipElement();this._element.setAttribute("aria-describedby",A.getAttribute("id"));const{container:j}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(j.append(A),te.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(A),A.classList.add(hs),"ontouchstart"in document.documentElement)for(const z of[].concat(...document.body.children))te.on(z,"mouseover",ct);this._queueCallback(()=>{te.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!te.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(hs),"ontouchstart"in document.documentElement)for(const m of[].concat(...document.body.children))te.off(m,"mouseover",ct);this._activeTrigger.click=!1,this._activeTrigger[Ni]=!1,this._activeTrigger[Ws]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),te.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(m){const y=this._getTemplateFactory(m).toHtml();if(!y)return null;y.classList.remove(ao,hs),y.classList.add(`bs-${this.constructor.NAME}-auto`);const A=(j=>{do j+=Math.floor(1e6*Math.random());while(document.getElementById(j));return j})(this.constructor.NAME).toString();return y.setAttribute("id",A),this._isAnimated()&&y.classList.add(ao),y}setContent(m){this._newContent=m,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(m){return this._templateFactory?this._templateFactory.changeContent(m):this._templateFactory=new pr({...this._config,content:m,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(m){return this.constructor.getOrCreateInstance(m.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(ao)}_isShown(){return this.tip&&this.tip.classList.contains(hs)}_createPopper(m){const y=mt(this._config.placement,[this,m,this._element]),A=X[y.toUpperCase()];return Dr(this._element,m,this._getPopperConfig(A))}_getOffset(){const{offset:m}=this._config;return typeof m=="string"?m.split(",").map(y=>Number.parseInt(y,10)):typeof m=="function"?y=>m(y,this._element):m}_resolvePossibleFunction(m){return mt(m,[this._element])}_getPopperConfig(m){const y={placement:m,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:A=>{this._getTipElement().setAttribute("data-popper-placement",A.state.placement)}}]};return{...y,...mt(this._config.popperConfig,[y])}}_setListeners(){const m=this._config.trigger.split(" ");for(const y of m)if(y==="click")te.on(this._element,this.constructor.eventName("click"),this._config.selector,A=>{this._initializeOnDelegatedTarget(A).toggle()});else if(y!=="manual"){const A=y===Ws?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),j=y===Ws?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");te.on(this._element,A,this._config.selector,z=>{const V=this._initializeOnDelegatedTarget(z);V._activeTrigger[z.type==="focusin"?Ni:Ws]=!0,V._enter()}),te.on(this._element,j,this._config.selector,z=>{const V=this._initializeOnDelegatedTarget(z);V._activeTrigger[z.type==="focusout"?Ni:Ws]=V._element.contains(z.relatedTarget),V._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},te.on(this._element.closest(Fr),Lo,this._hideModalHandler)}_fixTitle(){const m=this._element.getAttribute("title");m&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",m),this._element.setAttribute("data-bs-original-title",m),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(m,y){clearTimeout(this._timeout),this._timeout=setTimeout(m,y)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(m){const y=Vt.getDataAttributes(this._element);for(const A of Object.keys(y))Ai.has(A)&&delete y[A];return m={...y,...typeof m=="object"&&m?m:{}},m=this._mergeConfigObj(m),m=this._configAfterMerge(m),this._typeCheckConfig(m),m}_configAfterMerge(m){return m.container=m.container===!1?document.body:qt(m.container),typeof m.delay=="number"&&(m.delay={show:m.delay,hide:m.delay}),typeof m.title=="number"&&(m.title=m.title.toString()),typeof m.content=="number"&&(m.content=m.content.toString()),m}_getDelegateConfig(){const m={};for(const[y,A]of Object.entries(this._config))this.constructor.Default[y]!==A&&(m[y]=A);return m.selector=!1,m.trigger="manual",m}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(m){return this.each(function(){const y=Gn.getOrCreateInstance(this,m);if(typeof m=="string"){if(y[m]===void 0)throw new TypeError(`No method named "${m}"`);y[m]()}})}}Xe(Gn);const Ti={...Gn.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},oc={...Gn.DefaultType,content:"(null|string|element|function)"};class Tt extends Gn{static get Default(){return Ti}static get DefaultType(){return oc}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(m){return this.each(function(){const y=Tt.getOrCreateInstance(this,m);if(typeof m=="string"){if(y[m]===void 0)throw new TypeError(`No method named "${m}"`);y[m]()}})}}Xe(Tt);const Ba=".bs.scrollspy",vo=`activate${Ba}`,wt=`click${Ba}`,Da=`load${Ba}.data-api`,Vs="active",yo="[href]",Qd=".nav-link",rc=`${Qd}, .nav-item > ${Qd}, .list-group-item`,nf={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Zd={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Oi extends Zt{constructor(m,y){super(m,y),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return nf}static get DefaultType(){return Zd}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const m of this._observableSections.values())this._observer.observe(m)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(m){return m.target=qt(m.target)||document.body,m.rootMargin=m.offset?`${m.offset}px 0px -30%`:m.rootMargin,typeof m.threshold=="string"&&(m.threshold=m.threshold.split(",").map(y=>Number.parseFloat(y))),m}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(te.off(this._config.target,wt),te.on(this._config.target,wt,yo,m=>{const y=this._observableSections.get(m.target.hash);if(y){m.preventDefault();const A=this._rootElement||window,j=y.offsetTop-this._element.offsetTop;if(A.scrollTo)return void A.scrollTo({top:j,behavior:"smooth"});A.scrollTop=j}}))}_getNewObserver(){const m={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(y=>this._observerCallback(y),m)}_observerCallback(m){const y=V=>this._targetLinks.get(`#${V.target.id}`),A=V=>{this._previousScrollData.visibleEntryTop=V.target.offsetTop,this._process(y(V))},j=(this._rootElement||document.documentElement).scrollTop,z=j>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=j;for(const V of m){if(!V.isIntersecting){this._activeTarget=null,this._clearActiveClass(y(V));continue}const ne=V.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(z&&ne){if(A(V),!j)return}else z||ne||A(V)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const m=ee.find(yo,this._config.target);for(const y of m){if(!y.hash||lt(y))continue;const A=ee.findOne(decodeURI(y.hash),this._element);je(A)&&(this._targetLinks.set(decodeURI(y.hash),y),this._observableSections.set(y.hash,A))}}_process(m){this._activeTarget!==m&&(this._clearActiveClass(this._config.target),this._activeTarget=m,m.classList.add(Vs),this._activateParents(m),te.trigger(this._element,vo,{relatedTarget:m}))}_activateParents(m){if(m.classList.contains("dropdown-item"))ee.findOne(".dropdown-toggle",m.closest(".dropdown")).classList.add(Vs);else for(const y of ee.parents(m,".nav, .list-group"))for(const A of ee.prev(y,rc))A.classList.add(Vs)}_clearActiveClass(m){m.classList.remove(Vs);const y=ee.find(`${yo}.${Vs}`,m);for(const A of y)A.classList.remove(Vs)}static jQueryInterface(m){return this.each(function(){const y=Oi.getOrCreateInstance(this,m);if(typeof m=="string"){if(y[m]===void 0||m.startsWith("_")||m==="constructor")throw new TypeError(`No method named "${m}"`);y[m]()}})}}te.on(window,Da,()=>{for(const k of ee.find('[data-bs-spy="scroll"]'))Oi.getOrCreateInstance(k)}),Xe(Oi);const bs=".bs.tab",sc=`hide${bs}`,hr=`hidden${bs}`,kn=`show${bs}`,Jd=`shown${bs}`,ln=`click${bs}`,of=`keydown${bs}`,br=`load${bs}`,eu="ArrowLeft",jr="ArrowRight",ic="ArrowUp",ac="ArrowDown",lc="Home",Ri="End",vr="active",cc="fade",Pa="show",dc=".dropdown-toggle",uc=`:not(${dc})`,La='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',mc=`.nav-link${uc}, .list-group-item${uc}, [role="tab"]${uc}, ${La}`,fc=`.${vr}[data-bs-toggle="tab"], .${vr}[data-bs-toggle="pill"], .${vr}[data-bs-toggle="list"]`;class yr extends Zt{constructor(m){super(m),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),te.on(this._element,of,y=>this._keydown(y)))}static get NAME(){return"tab"}show(){const m=this._element;if(this._elemIsActive(m))return;const y=this._getActiveElem(),A=y?te.trigger(y,sc,{relatedTarget:m}):null;te.trigger(m,kn,{relatedTarget:y}).defaultPrevented||A&&A.defaultPrevented||(this._deactivate(y,m),this._activate(m,y))}_activate(m,y){m&&(m.classList.add(vr),this._activate(ee.getElementFromSelector(m)),this._queueCallback(()=>{m.getAttribute("role")==="tab"?(m.removeAttribute("tabindex"),m.setAttribute("aria-selected",!0),this._toggleDropDown(m,!0),te.trigger(m,Jd,{relatedTarget:y})):m.classList.add(Pa)},m,m.classList.contains(cc)))}_deactivate(m,y){m&&(m.classList.remove(vr),m.blur(),this._deactivate(ee.getElementFromSelector(m)),this._queueCallback(()=>{m.getAttribute("role")==="tab"?(m.setAttribute("aria-selected",!1),m.setAttribute("tabindex","-1"),this._toggleDropDown(m,!1),te.trigger(m,hr,{relatedTarget:y})):m.classList.remove(Pa)},m,m.classList.contains(cc)))}_keydown(m){if(![eu,jr,ic,ac,lc,Ri].includes(m.key))return;m.stopPropagation(),m.preventDefault();const y=this._getChildren().filter(j=>!lt(j));let A;if([lc,Ri].includes(m.key))A=y[m.key===lc?0:y.length-1];else{const j=[jr,ac].includes(m.key);A=Ft(y,m.target,j,!0)}A&&(A.focus({preventScroll:!0}),yr.getOrCreateInstance(A).show())}_getChildren(){return ee.find(mc,this._parent)}_getActiveElem(){return this._getChildren().find(m=>this._elemIsActive(m))||null}_setInitialAttributes(m,y){this._setAttributeIfNotExists(m,"role","tablist");for(const A of y)this._setInitialAttributesOnChild(A)}_setInitialAttributesOnChild(m){m=this._getInnerElement(m);const y=this._elemIsActive(m),A=this._getOuterElement(m);m.setAttribute("aria-selected",y),A!==m&&this._setAttributeIfNotExists(A,"role","presentation"),y||m.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(m,"role","tab"),this._setInitialAttributesOnTargetPanel(m)}_setInitialAttributesOnTargetPanel(m){const y=ee.getElementFromSelector(m);y&&(this._setAttributeIfNotExists(y,"role","tabpanel"),m.id&&this._setAttributeIfNotExists(y,"aria-labelledby",`${m.id}`))}_toggleDropDown(m,y){const A=this._getOuterElement(m);if(!A.classList.contains("dropdown"))return;const j=(z,V)=>{const ne=ee.findOne(z,A);ne&&ne.classList.toggle(V,y)};j(dc,vr),j(".dropdown-menu",Pa),A.setAttribute("aria-expanded",y)}_setAttributeIfNotExists(m,y,A){m.hasAttribute(y)||m.setAttribute(y,A)}_elemIsActive(m){return m.classList.contains(vr)}_getInnerElement(m){return m.matches(mc)?m:ee.findOne(mc,m)}_getOuterElement(m){return m.closest(".nav-item, .list-group-item")||m}static jQueryInterface(m){return this.each(function(){const y=yr.getOrCreateInstance(this);if(typeof m=="string"){if(y[m]===void 0||m.startsWith("_")||m==="constructor")throw new TypeError(`No method named "${m}"`);y[m]()}})}}te.on(document,ln,La,function(k){["A","AREA"].includes(this.tagName)&&k.preventDefault(),lt(this)||yr.getOrCreateInstance(this).show()}),te.on(window,br,()=>{for(const k of ee.find(fc))yr.getOrCreateInstance(k)}),Xe(yr);const er=".bs.toast",vs=`mouseover${er}`,rf=`mouseout${er}`,gc=`focusin${er}`,sf=`focusout${er}`,tu=`hide${er}`,nu=`hidden${er}`,ou=`show${er}`,ru=`shown${er}`,pc="hide",Bi="show",Ks="showing",af={animation:"boolean",autohide:"boolean",delay:"number"},Ma={animation:!0,autohide:!0,delay:5e3};class $r extends Zt{constructor(m,y){super(m,y),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Ma}static get DefaultType(){return af}static get NAME(){return"toast"}show(){te.trigger(this._element,ou).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(pc),Je(this._element),this._element.classList.add(Bi,Ks),this._queueCallback(()=>{this._element.classList.remove(Ks),te.trigger(this._element,ru),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(te.trigger(this._element,tu).defaultPrevented||(this._element.classList.add(Ks),this._queueCallback(()=>{this._element.classList.add(pc),this._element.classList.remove(Ks,Bi),te.trigger(this._element,nu)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Bi),super.dispose()}isShown(){return this._element.classList.contains(Bi)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(m,y){switch(m.type){case"mouseover":case"mouseout":this._hasMouseInteraction=y;break;case"focusin":case"focusout":this._hasKeyboardInteraction=y}if(y)return void this._clearTimeout();const A=m.relatedTarget;this._element===A||this._element.contains(A)||this._maybeScheduleHide()}_setListeners(){te.on(this._element,vs,m=>this._onInteraction(m,!0)),te.on(this._element,rf,m=>this._onInteraction(m,!1)),te.on(this._element,gc,m=>this._onInteraction(m,!0)),te.on(this._element,sf,m=>this._onInteraction(m,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(m){return this.each(function(){const y=$r.getOrCreateInstance(this,m);if(typeof m=="string"){if(y[m]===void 0)throw new TypeError(`No method named "${m}"`);y[m](this)}})}}return Ve($r),Xe($r),{Alert:yt,Button:Kt,Carousel:es,Collapse:os,Dropdown:Bo,Modal:fs,Offcanvas:Po,Popover:Tt,ScrollSpy:Oi,Tab:yr,Toast:$r,Tooltip:Gn}}),function(){"use strict";var kt=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var t=typeof e;return t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":t},Ue=function(e){return{eq:e}},Ye=Ue(function(e,t){return e===t}),Fe=function(e){return Ue(function(t,n){if(t.length!==n.length)return!1;for(var o=t.length,r=0;r<o;r++)if(!e.eq(t[r],n[r]))return!1;return!0})},at=function(e){return Ue(function(t,n){var o=Object.keys(t),r=Object.keys(n);if(!function(l,c){return function(d,u){return Ue(function(f,h){return d.eq(u(f),u(h))})}(Fe(l),function(d){return function(u,f){return Array.prototype.slice.call(u).sort(f)}(d,c)})}(Ye).eq(o,r))return!1;for(var s=o.length,i=0;i<s;i++){var a=o[i];if(!e.eq(t[a],n[a]))return!1}return!0})},pt=Ue(function(e,t){if(e===t)return!0;var n=kt(e);return n===kt(t)&&(function(o){return["undefined","boolean","number","string","function","xml","null"].indexOf(o)!==-1}(n)?e===t:n==="array"?Fe(pt).eq(e,t):n==="object"&&at(pt).eq(e,t))});const qt=Object.getPrototypeOf,je=(e,t,n)=>{var o;return!!n(e,t.prototype)||((o=e.constructor)===null||o===void 0?void 0:o.name)===t.name},lt=e=>t=>(n=>{const o=typeof n;return n===null?"null":o==="object"&&Array.isArray(n)?"array":o==="object"&&je(n,String,(r,s)=>s.isPrototypeOf(r))?"string":o})(t)===e,Ze=e=>t=>typeof t===e,ct=e=>t=>e===t,Je=(e,t)=>dt(e)&&je(e,t,(n,o)=>qt(n)===o),se=lt("string"),dt=lt("object"),Pt=e=>Je(e,Object),Xe=lt("array"),mt=ct(null),Tn=Ze("boolean"),Ft=ct(void 0),Rt=e=>e==null,Z=e=>!Rt(e),Ge=Ze("function"),st=Ze("number"),hn=(e,t)=>{if(Xe(e)){for(let n=0,o=e.length;n<o;++n)if(!t(e[n]))return!1;return!0}return!1},Te=()=>{},Le=(e,t)=>(...n)=>e(t.apply(null,n)),Ne=(e,t)=>n=>e(t(n)),K=e=>()=>e,Be=e=>e,mn=(e,t)=>e===t;function ae(e,...t){return(...n)=>{const o=t.concat(n);return e.apply(null,o)}}const On=e=>t=>!e(t),Yo=e=>()=>{throw new Error(e)},po=e=>e(),te=e=>{e()},ft=K(!1),St=K(!0);class w{constructor(t,n){this.tag=t,this.value=n}static some(t){return new w(!0,t)}static none(){return w.singletonNone}fold(t,n){return this.tag?n(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?w.some(t(this.value)):w.none()}bind(t){return this.tag?t(this.value):w.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:w.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t??"Called getOrDie on None")}static from(t){return Z(t)?w.some(t):w.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}w.singletonNone=new w(!1);const Vt=Array.prototype.slice,Rn=Array.prototype.indexOf,Zt=Array.prototype.push,Jt=(e,t)=>Rn.call(e,t),ee=(e,t)=>Jt(e,t)>-1,Ve=(e,t)=>{for(let n=0,o=e.length;n<o;n++)if(t(e[n],n))return!0;return!1},Me=(e,t)=>{const n=e.length,o=new Array(n);for(let r=0;r<n;r++){const s=e[r];o[r]=t(s,r)}return o},W=(e,t)=>{for(let n=0,o=e.length;n<o;n++)t(e[n],n)},ho=(e,t)=>{for(let n=e.length-1;n>=0;n--)t(e[n],n)},yt=(e,t)=>{const n=[],o=[];for(let r=0,s=e.length;r<s;r++){const i=e[r];(t(i,r)?n:o).push(i)}return{pass:n,fail:o}},ue=(e,t)=>{const n=[];for(let o=0,r=e.length;o<r;o++){const s=e[o];t(s,o)&&n.push(s)}return n},Kt=(e,t,n)=>(ho(e,(o,r)=>{n=t(n,o,r)}),n),Lt=(e,t,n)=>(W(e,(o,r)=>{n=t(n,o,r)}),n),mi=(e,t,n)=>{for(let o=0,r=e.length;o<r;o++){const s=e[o];if(t(s,o))return w.some(s);if(n(s,o))break}return w.none()},en=(e,t)=>mi(e,t,ft),fi=(e,t)=>{for(let n=0,o=e.length;n<o;n++)if(t(e[n],n))return w.some(n);return w.none()},kd=e=>{const t=[];for(let n=0,o=e.length;n<o;++n){if(!Xe(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);Zt.apply(t,e[n])}return t},no=(e,t)=>kd(Me(e,t)),cr=(e,t)=>{for(let n=0,o=e.length;n<o;++n)if(t(e[n],n)!==!0)return!1;return!0},gi=e=>{const t=Vt.call(e,0);return t.reverse(),t},Jr=(e,t)=>ue(e,n=>!ee(t,n)),Xo=(e,t)=>{const n={};for(let o=0,r=e.length;o<r;o++){const s=e[o];n[String(s)]=t(s,o)}return n},Sr=(e,t)=>{const n=Vt.call(e,0);return n.sort(t),n},dr=(e,t)=>t>=0&&t<e.length?w.some(e[t]):w.none(),on=e=>dr(e,0),oo=e=>dr(e,e.length-1),An=Ge(Array.from)?Array.from:e=>Vt.call(e),Ns=(e,t)=>{for(let n=0;n<e.length;n++){const o=t(e[n],n);if(o.isSome())return o}return w.none()},ca=(e,t)=>{const n=[],o=Ge(t)?r=>Ve(n,s=>t(s,r)):r=>ee(n,r);for(let r=0,s=e.length;r<s;r++){const i=e[r];o(i)||n.push(i)}return n},In=Object.keys,Ym=Object.hasOwnProperty,Ct=(e,t)=>{const n=In(e);for(let o=0,r=n.length;o<r;o++){const s=n[o];t(e[s],s)}},pi=(e,t)=>Xm(e,(n,o)=>({k:o,v:t(n,o)})),Xm=(e,t)=>{const n={};return Ct(e,(o,r)=>{const s=t(o,r);n[s.k]=s.v}),n},Cl=e=>(t,n)=>{e[n]=t},wl=(e,t,n,o)=>{Ct(e,(r,s)=>{(t(r,s)?n:o)(r,s)})},Ar=(e,t)=>{const n={};return wl(e,t,Cl(n),Te),n},hi=(e,t)=>{const n=[];return Ct(e,(o,r)=>{n.push(t(o,r))}),n},da=e=>hi(e,Be),At=(e,t)=>Re(e,t)?w.from(e[t]):w.none(),Re=(e,t)=>Ym.call(e,t),Ts=(e,t)=>Re(e,t)&&e[t]!==void 0&&e[t]!==null,Sd=e=>{const t={};return W(e,n=>{t[n]={}}),In(t)},es=e=>e.length!==void 0,ts=Array.isArray,ua=(e,t,n)=>{if(!e)return!1;if(n=n||e,es(e)){for(let o=0,r=e.length;o<r;o++)if(t.call(n,e[o],o,e)===!1)return!1}else for(const o in e)if(Re(e,o)&&t.call(n,e[o],o,e)===!1)return!1;return!0},El=(e,t)=>{const n=[];return ua(e,(o,r)=>{n.push(t(o,r,e))}),n},bi=(e,t)=>{const n=[];return ua(e,(o,r)=>{t&&!t(o,r,e)||n.push(o)}),n},ma=(e,t,n,o)=>{let r=Ft(n)?e[0]:n;for(let s=0;s<e.length;s++)r=t.call(o,r,e[s],s);return r},Ad=(e,t,n)=>{for(let o=0,r=e.length;o<r;o++)if(t.call(n,e[o],o,e))return o;return-1},ur=e=>e[e.length-1],Fn=e=>{let t,n=!1;return(...o)=>(n||(n=!0,t=e.apply(null,o)),t)},vi=()=>xl(0,0),xl=(e,t)=>({major:e,minor:t}),ns={nu:xl,detect:(e,t)=>{const n=String(t).toLowerCase();return e.length===0?vi():((o,r)=>{const s=((a,l)=>{for(let c=0;c<a.length;c++){const d=a[c];if(d.test(l))return d}})(o,r);if(!s)return{major:0,minor:0};const i=a=>Number(r.replace(s,"$"+a));return xl(i(1),i(2))})(e,n)},unknown:vi},Nd=(e,t)=>{const n=String(t).toLowerCase();return en(e,o=>o.search(n))},Td=(e,t,n)=>t===""||e.length>=t.length&&e.substr(n,n+t.length)===t,os=(e,t)=>_t(e,t)?((n,o)=>n.substring(o))(e,t.length):e,Et=(e,t,n=0,o)=>{const r=e.indexOf(t,n);return r!==-1&&(!!Ft(o)||r+t.length<=o)},_t=(e,t)=>Td(e,t,0),jn=(e,t)=>Td(e,t,e.length-t.length),Nn=e=>t=>t.replace(e,""),mr=Nn(/^\s+|\s+$/g),Os=Nn(/^\s+/g),Nr=Nn(/\s+$/g),$n=e=>e.length>0,Rs=e=>!$n(e),Bs=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?w.none():w.some(n)},Tr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Go=e=>t=>Et(t,e),kl=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Et(e,"edge/")&&Et(e,"chrome")&&Et(e,"safari")&&Et(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Tr],search:e=>Et(e,"chrome")&&!Et(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Et(e,"msie")||Et(e,"trident")},{name:"Opera",versionRegexes:[Tr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Go("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Go("firefox")},{name:"Safari",versionRegexes:[Tr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Et(e,"safari")||Et(e,"mobile/"))&&Et(e,"applewebkit")}],Sl=[{name:"Windows",search:Go("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Et(e,"iphone")||Et(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Go("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Go("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Go("linux"),versionRegexes:[]},{name:"Solaris",search:Go("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Go("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Go("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Al={browsers:K(kl),oses:K(Sl)},Nl="Edge",Tl="Chromium",Ol="Opera",Rl="Firefox",Bl="Safari",Dl=e=>{const t=e.current,n=e.version,o=r=>()=>t===r;return{current:t,version:n,isEdge:o(Nl),isChromium:o(Tl),isIE:o("IE"),isOpera:o(Ol),isFirefox:o(Rl),isSafari:o(Bl)}},Od=()=>Dl({current:void 0,version:ns.unknown()}),Rd=Dl,Pl=(K(Nl),K(Tl),K("IE"),K(Ol),K(Rl),K(Bl),"Windows"),ko="Android",Yn="Linux",Or="macOS",ro="Solaris",fa="FreeBSD",ga="ChromeOS",So=e=>{const t=e.current,n=e.version,o=r=>()=>t===r;return{current:t,version:n,isWindows:o(Pl),isiOS:o("iOS"),isAndroid:o(ko),isMacOS:o(Or),isLinux:o(Yn),isSolaris:o(ro),isFreeBSD:o(fa),isChromeOS:o(ga)}},rs=()=>So({current:void 0,version:ns.unknown()}),pa=So,Ds=(K(Pl),K("iOS"),K(ko),K(Yn),K(Or),K(ro),K(fa),K(ga),e=>window.matchMedia(e).matches);let Ll=Fn(()=>((e,t,n)=>{const o=Al.browsers(),r=Al.oses(),s=t.bind(l=>((c,d)=>Ns(d.brands,u=>{const f=u.brand.toLowerCase();return en(c,h=>{var g;return f===((g=h.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(h=>({current:h.name,version:ns.nu(parseInt(u.version,10),0)}))}))(o,l)).orThunk(()=>((l,c)=>Nd(l,c).map(d=>{const u=ns.detect(d.versionRegexes,c);return{current:d.name,version:u}}))(o,e)).fold(Od,Rd),i=((l,c)=>Nd(l,c).map(d=>{const u=ns.detect(d.versionRegexes,c);return{current:d.name,version:u}}))(r,e).fold(rs,pa),a=((l,c,d,u)=>{const f=l.isiOS()&&/ipad/i.test(d)===!0,h=l.isiOS()&&!f,g=l.isiOS()||l.isAndroid(),b=g||u("(pointer:coarse)"),p=f||!h&&g&&u("(min-device-width:768px)"),v=h||g&&!p,_=c.isSafari()&&l.isiOS()&&/safari/i.test(d)===!1,C=!v&&!p&&!_;return{isiPad:K(f),isiPhone:K(h),isTablet:K(p),isPhone:K(v),isTouch:K(b),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:K(_),isDesktop:K(C)}})(i,s,e,n);return{browser:s,os:i,deviceType:a}})(window.navigator.userAgent,w.from(window.navigator.userAgentData),Ds));const Ao=()=>Ll(),Ps=window.navigator.userAgent,yi=Ao(),No=yi.browser,wn=yi.os,ss=yi.deviceType,Rr=Ps.indexOf("Windows Phone")!==-1,qe={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:No.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!No.isIE(),windowsPhone:Rr,browser:{current:No.current,version:No.version,isChromium:No.isChromium,isEdge:No.isEdge,isFirefox:No.isFirefox,isIE:No.isIE,isOpera:No.isOpera,isSafari:No.isSafari},os:{current:wn.current,version:wn.version,isAndroid:wn.isAndroid,isChromeOS:wn.isChromeOS,isFreeBSD:wn.isFreeBSD,isiOS:wn.isiOS,isLinux:wn.isLinux,isMacOS:wn.isMacOS,isSolaris:wn.isSolaris,isWindows:wn.isWindows},deviceType:{isDesktop:ss.isDesktop,isiPad:ss.isiPad,isiPhone:ss.isiPhone,isPhone:ss.isPhone,isTablet:ss.isTablet,isTouch:ss.isTouch,isWebView:ss.isWebView}},Bd=/^\s*|\s*$/g,Ls=e=>Rt(e)?"":(""+e).replace(Bd,""),ha=function(e,t,n,o){o=o||this,e&&(n&&(e=e[n]),ua(e,(r,s)=>t.call(o,r,s,n)!==!1&&(ha(r,t,n,o),!0)))},Q={trim:Ls,isArray:ts,is:(e,t)=>t?!(t!=="array"||!ts(e))||typeof e===t:e!==void 0,toArray:e=>{if(ts(e))return e;{const t=[];for(let n=0,o=e.length;n<o;n++)t[n]=e[n];return t}},makeMap:(e,t,n={})=>{const o=se(e)?e.split(t||","):e||[];let r=o.length;for(;r--;)n[o[r]]={};return n},each:ua,map:El,grep:bi,inArray:(e,t)=>{if(e){for(let n=0,o=e.length;n<o;n++)if(e[n]===t)return n}return-1},hasOwn:Re,extend:(e,...t)=>{for(let n=0;n<t.length;n++){const o=t[n];for(const r in o)if(Re(o,r)){const s=o[r];s!==void 0&&(e[r]=s)}}return e},walk:ha,resolve:(e,t=window)=>{const n=e.split(".");for(let o=0,r=n.length;o<r&&(t=t[n[o]]);o++);return t},explode:(e,t)=>Xe(e)?e:e===""?[]:El(e.split(t||","),Ls),_addCacheSuffix:e=>{const t=qe.cacheSuffix;return t&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e}},is=(e,t,n=mn)=>e.exists(o=>n(o,t)),Ml=(e,t,n=mn)=>bn(e,t,n).getOr(e.isNone()&&t.isNone()),bn=(e,t,n)=>e.isSome()&&t.isSome()?w.some(n(e.getOrDie(),t.getOrDie())):w.none(),To=(e,t)=>e?w.some(t):w.none(),Gm=typeof window<"u"?window:Function("return this;")(),Il=(e,t)=>((n,o)=>{let r=o??Gm;for(let s=0;s<n.length&&r!=null;++s)r=r[n[s]];return r})(e.split("."),t),Fl=Object.getPrototypeOf,ba=e=>{const t=Il("ownerDocument.defaultView",e);return dt(e)&&((n=>((o,r)=>{const s=((i,a)=>Il(i,a))(o,r);if(s==null)throw new Error(o+" not available on this browser");return s})("HTMLElement",n))(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Fl(e).constructor.name))},We=e=>e.dom.nodeName.toLowerCase(),Dd=e=>e.dom.nodeType,as=e=>t=>Dd(t)===e,va=e=>zn(e)&&ba(e.dom),zn=as(1),En=as(3),jl=as(9),$l=as(11),_i=e=>t=>zn(t)&&We(t)===e,Ms=(e,t,n)=>{if(!(se(n)||Tn(n)||st(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},tn=(e,t,n)=>{Ms(e.dom,t,n)},Qo=(e,t)=>{const n=e.dom;Ct(t,(o,r)=>{Ms(n,r,o)})},Un=(e,t)=>{const n=e.dom.getAttribute(t);return n===null?void 0:n},Xn=(e,t)=>w.from(Un(e,t)),Ci=(e,t)=>{const n=e.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},rn=(e,t)=>{e.dom.removeAttribute(t)},zl=e=>Lt(e.dom.attributes,(t,n)=>(t[n.name]=n.value,t),{}),ya=(e,t)=>{const n=Un(e,t);return n===void 0||n===""?[]:n.split(" ")},Is=e=>e.dom.classList!==void 0,Ul=e=>ya(e,"class"),_a=(e,t)=>((n,o,r)=>{const s=ya(n,o).concat([r]);return tn(n,o,s.join(" ")),!0})(e,"class",t),Hl=(e,t)=>((n,o,r)=>{const s=ue(ya(n,o),i=>i!==r);return s.length>0?tn(n,o,s.join(" ")):rn(n,o),!1})(e,"class",t),Fs=(e,t)=>{Is(e)?e.dom.classList.add(t):_a(e,t)},Pd=e=>{(Is(e)?e.dom.classList:Ul(e)).length===0&&rn(e,"class")},js=(e,t)=>{Is(e)?e.dom.classList.remove(t):Hl(e,t),Pd(e)},Ca=(e,t)=>Is(e)&&e.dom.classList.contains(t),Br=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},wa=(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,e),new Error(o)}return Br(n.childNodes[0])},sn=(e,t)=>{const n=(t||document).createElement(e);return Br(n)},Dr=(e,t)=>{const n=(t||document).createTextNode(e);return Br(n)},B=Br,Ld=(e,t,n)=>w.from(e.dom.elementFromPoint(t,n)).map(Br),Pr=(e,t)=>{const n=[],o=s=>(n.push(s),t(s));let r=t(e);do r=r.bind(o);while(r.isSome());return n},so=(e,t)=>{const n=e.dom;if(n.nodeType!==1)return!1;{const o=n;if(o.matches!==void 0)return o.matches(t);if(o.msMatchesSelector!==void 0)return o.msMatchesSelector(t);if(o.webkitMatchesSelector!==void 0)return o.webkitMatchesSelector(t);if(o.mozMatchesSelector!==void 0)return o.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},Md=e=>e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11||e.childElementCount===0,tt=(e,t)=>e.dom===t.dom,Oo=(e,t)=>{const n=e.dom,o=t.dom;return n!==o&&n.contains(o)},Id=e=>B(e.dom.ownerDocument),Lr=e=>jl(e)?e:Id(e),wi=e=>B(Lr(e).dom.defaultView),bo=e=>w.from(e.dom.parentNode).map(B),Ei=e=>w.from(e.dom.parentElement).map(B),Fd=(e,t)=>{const n=Ge(t)?t:ft;let o=e.dom;const r=[];for(;o.parentNode!==null&&o.parentNode!==void 0;){const s=o.parentNode,i=B(s);if(r.push(i),n(i)===!0)break;o=s}return r},io=e=>w.from(e.dom.previousSibling).map(B),Ro=e=>w.from(e.dom.nextSibling).map(B),jd=e=>gi(Pr(e,io)),xi=e=>Pr(e,Ro),xn=e=>Me(e.dom.childNodes,B),$s=(e,t)=>{const n=e.dom.childNodes;return w.from(n[t]).map(B)},ql=e=>$s(e,0),Wl=e=>$s(e,e.dom.childNodes.length-1),Vl=e=>e.dom.childNodes.length,Kl=e=>$l(e)&&Z(e.dom.host),Mr=e=>B(e.dom.getRootNode()),Yl=e=>Kl(e)?e:(t=>{const n=t.dom.head;if(n==null)throw new Error("Head is not available yet");return B(n)})(Lr(e)),Bo=e=>B(e.dom.host),Xl=e=>{if(Z(e.target)){const t=B(e.target);if(zn(t)&&$d(t)&&e.composed&&e.composedPath){const n=e.composedPath();if(n)return on(n)}}return w.from(e.target)},$d=e=>Z(e.dom.shadowRoot),ls=e=>{const t=En(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const n=t.ownerDocument;return(o=>{const r=Mr(o);return Kl(r)?w.some(r):w.none()})(B(t)).fold(()=>n.body.contains(t),Ne(ls,Bo))};var zd=(e,t,n,o,r)=>e(n,o)?w.some(n):Ge(r)&&r(n)?w.none():t(n,o,r);const fr=(e,t,n)=>{let o=e.dom;const r=Ge(n)?n:ft;for(;o.parentNode;){o=o.parentNode;const s=B(o);if(t(s))return w.some(s);if(r(s))break}return w.none()},Ir=(e,t,n)=>zd((o,r)=>r(o),fr,e,t,n),zs=(e,t)=>{const n=o=>{for(let r=0;r<o.childNodes.length;r++){const s=B(o.childNodes[r]);if(t(s))return w.some(s);const i=n(o.childNodes[r]);if(i.isSome())return i}return w.none()};return n(e.dom)},ki=(e,t,n)=>fr(e,o=>so(o,t),n),Ea=(e,t)=>((n,o)=>{const r=o===void 0?document:o.dom;return Md(r)?w.none():w.from(r.querySelector(n)).map(B)})(t,e),cs=(e,t,n)=>zd((o,r)=>so(o,r),ki,e,t,n),ds=(e,t=!1)=>{return ls(e)?e.dom.isContentEditable:(n=e,cs(n,"[contenteditable]")).fold(K(t),o=>Qm(o)==="true");var n},Qm=e=>e.dom.contentEditable,Us=e=>e.style!==void 0&&Ge(e.style.getPropertyValue),Gl=(e,t,n)=>{if(!se(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Us(e)&&e.style.setProperty(t,n)},Ql=(e,t,n)=>{const o=e.dom;Gl(o,t,n)},us=(e,t)=>{const n=e.dom;Ct(t,(o,r)=>{Gl(n,r,o)})},Do=(e,t)=>{const n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return o!==""||ls(e)?o:xa(n,t)},xa=(e,t)=>Us(e)?e.style.getPropertyValue(t):"",Hn=(e,t)=>{const n=e.dom,o=xa(n,t);return w.from(o).filter(r=>r.length>0)},Zl=e=>{const t={},n=e.dom;if(Us(n))for(let o=0;o<n.style.length;o++){const r=n.style.item(o);t[r]=n.style[r]}return t},Ud=(e,t)=>{((n,o)=>{Us(n)&&n.style.removeProperty(o)})(e.dom,t),is(Xn(e,"style").map(mr),"")&&rn(e,"style")},Bn=(e,t)=>{bo(e).each(n=>{n.dom.insertBefore(t.dom,e.dom)})},Zo=(e,t)=>{Ro(e).fold(()=>{bo(e).each(n=>{Xt(n,t)})},n=>{Bn(n,t)})},Jl=(e,t)=>{ql(e).fold(()=>{Xt(e,t)},n=>{e.dom.insertBefore(t.dom,n.dom)})},Xt=(e,t)=>{e.dom.appendChild(t.dom)},Hd=(e,t)=>{Bn(e,t),Xt(t,e)},ms=(e,t)=>{W(t,n=>{Xt(e,n)})},Hs=e=>{e.dom.textContent="",W(xn(e),t=>{Nt(t)})},Nt=e=>{const t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},gr=e=>{const t=xn(e);var n,o;t.length>0&&(n=e,W(o=t,(r,s)=>{const i=s===0?n:o[s-1];Zo(i,r)})),Nt(e)},ka=e=>Me(e,B),Sa=e=>e.dom.innerHTML,Aa=(e,t)=>{const n=Id(e).dom,o=B(n.createDocumentFragment()),r=((s,i)=>{const a=(i||document).createElement("div");return a.innerHTML=s,xn(B(a))})(t,n);ms(o,r),Hs(e),Xt(e,o)},Zm=(e,t,n,o)=>((r,s,i,a,l)=>{const c=((d,u)=>f=>{d(f)&&u((h=>{const g=B(Xl(h).getOr(h.target)),b=()=>h.stopPropagation(),p=()=>h.preventDefault(),v=Le(p,b);return((_,C,E,x,S,O,T)=>({target:_,x:C,y:E,stop:x,prevent:S,kill:O,raw:T}))(g,h.clientX,h.clientY,b,p,v,h)})(f))})(i,a);return r.dom.addEventListener(s,c,!1),{unbind:ae(fs,r,s,c,!1)}})(e,t,n,o),fs=(e,t,n,o)=>{e.dom.removeEventListener(t,n,o)},Jo=(e,t)=>({left:e,top:t,translate:(n,o)=>Jo(e+n,t+o)}),gs=Jo,Na=(e,t)=>e!==void 0?e:t!==void 0?t:0,Ta=e=>{const t=e.dom,n=t.ownerDocument.body;return n===t?gs(n.offsetLeft,n.offsetTop):ls(e)?(o=>{const r=o.getBoundingClientRect();return gs(r.left,r.top)})(t):gs(0,0)},Oa=e=>{const t=e!==void 0?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,o=t.body.scrollTop||t.documentElement.scrollTop;return gs(n,o)},ec=(e,t,n)=>{const o=(n!==void 0?n.dom:document).defaultView;o&&o.scrollTo(e,t)},tc=(e,t)=>{Ao().browser.isSafari()&&Ge(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},qd=(e,t,n,o)=>({x:e,y:t,width:n,height:o,right:e+n,bottom:t+o}),Wd=e=>{const t=e===void 0?window:e,n=t.document,o=Oa(B(n));return(r=>{const s=r===void 0?window:r;return Ao().browser.isFirefox()?w.none():w.from(s.visualViewport)})(t).fold(()=>{const r=t.document.documentElement,s=r.clientWidth,i=r.clientHeight;return qd(o.left,o.top,s,i)},r=>qd(Math.max(r.pageLeft,o.left),Math.max(r.pageTop,o.top),r.width,r.height))},Vd=(e,t)=>{let n=[];return W(xn(e),o=>{t(o)&&(n=n.concat([o])),n=n.concat(Vd(o,t))}),n},vn=(e,t)=>((n,o)=>{const r=o===void 0?document:o.dom;return Md(r)?[]:Me(r.querySelectorAll(n),B)})(t,e),nc=(e,t,n)=>fr(e,t,n).isSome(),Jm=(e,t)=>((n,o)=>{const r=n.dom;return r.parentNode?((s,i)=>en(s.dom.childNodes,a=>i(B(a))).map(B))(B(r.parentNode),s=>!tt(n,s)&&o(s)):w.none()})(e,t).isSome(),Kd=(e,t)=>zs(e,t).isSome();class an{constructor(t,n){this.node=t,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,n,o,r){if(t){if(!r&&t[n])return t[n];if(t!==this.rootNode){let s=t[o];if(s)return s;for(let i=t.parentNode;i&&i!==this.rootNode;i=i.parentNode)if(s=i[o],s)return s}}}findPreviousNode(t,n){if(t){const o=t.previousSibling;if(this.rootNode&&o===this.rootNode)return;if(o){if(!n){for(let s=o.lastChild;s;s=s.lastChild)if(!s.lastChild)return s}return o}const r=t.parentNode;if(r&&r!==this.rootNode)return r}}}const Si="\uFEFF",nn="\xA0",Po=e=>e===Si,Yd=/^[ \t\r\n]*$/,qs=e=>Yd.test(e),Xd=e=>e===`
`||e==="\r",Gd=(e,t=4,n=!0,o=!0)=>{const r=((a,l)=>l<=0?"":new Array(l+1).join(" "))(0,t),s=e.replace(/\t/g,r);return Lt(s,(a,l)=>(c=>" \f	\v".indexOf(c)!==-1)(l)||l===nn?a.pcIsSpace||a.str===""&&n||a.str.length===s.length-1&&o||((c,d)=>d<c.length&&d>=0&&Xd(c[d]))(s,a.str.length+1)?{pcIsSpace:!1,str:a.str+nn}:{pcIsSpace:!0,str:a.str+" "}:{pcIsSpace:Xd(l),str:a.str+l},{pcIsSpace:!1,str:""}).str},ps=e=>t=>!!t&&t.nodeType===e,Ra=e=>!!e&&!Object.getPrototypeOf(e),he=ps(1),pr=e=>he(e)&&va(B(e)),Ai=e=>{const t=e.toLowerCase();return n=>Z(n)&&n.nodeName.toLowerCase()===t},ao=e=>{const t=e.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const o=n.nodeName.toLowerCase();return ee(t,o)}return!1}},hs=(e,t)=>{const n=t.toLowerCase().split(" ");return o=>{if(he(o)){const r=o.ownerDocument.defaultView;if(r)for(let s=0;s<n.length;s++){const i=r.getComputedStyle(o,null);if((i?i.getPropertyValue(e):null)===n[s])return!0}}return!1}},Fr=e=>he(e)&&e.hasAttribute("data-mce-bogus"),Lo=e=>he(e)&&e.tagName==="TABLE",Ws=e=>t=>!!(pr(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e)),Ni=ao(["textarea","input"]),X=ps(3),ef=ps(4),tf=ps(7),Gn=ps(8),Ti=ps(9),oc=ps(11),Tt=Ai("br"),Ba=Ai("img"),vo=Ws("true"),wt=Ws("false"),Da=ao(["td","th"]),Vs=ao(["td","th","caption"]),yo=ao(["video","audio","object","embed"]),Qd=Ai("li"),rc=Ai("details"),nf=Ai("summary"),Zd={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},Oi=e=>he(e)&&e.hasAttribute("data-mce-bookmark"),bs=(e,t,n,o)=>X(e)&&!((r,s,i)=>qs(r.data)&&!((a,l,c)=>{const d=B(l),u=B(a),f=c.getWhitespaceElements();return nc(u,h=>Re(f,We(h)),ae(tt,d))})(r,s,i))(e,t,n)&&(!o.includeZwsp||!(r=>{for(const s of r)if(!Po(s))return!1;return!0})(e.data)),sc=(e,t,n,o)=>Ge(o.isContent)&&o.isContent(t)||((r,s)=>he(r)&&Re(s.getNonEmptyElements(),r.nodeName))(t,e)||Oi(t)||(r=>he(r)&&r.nodeName==="A"&&!r.hasAttribute("href")&&(r.hasAttribute("name")||r.hasAttribute("id")))(t)||bs(t,n,e,o)||wt(t)||vo(t)&&(r=>Ei(B(r)).exists(s=>!ds(s)))(t),hr=(e,t,n)=>{const o={...Zd,...n};if(o.checkRootAsContent&&sc(e,t,t,o))return!1;let r=t.firstChild,s=0;if(!r)return!0;const i=new an(r,t);do{if(o.skipBogus&&he(r)){const a=r.getAttribute("data-mce-bogus");if(a){r=i.next(a==="all");continue}}if(Gn(r))r=i.next(!0);else if(Tt(r))s++,r=i.next();else{if(sc(e,r,t,o))return!1;r=i.next()}}while(r);return s<=1},kn=(e,t,n)=>hr(e,t.dom,{checkRootAsContent:!0,...n}),Jd=(e,t,n)=>sc(e,t,t,{includeZwsp:Zd.includeZwsp,...n}),ln=e=>{let t=e;return{get:()=>t,set:n=>{t=n}}},of=e=>{const t=ln(w.none()),n=()=>t.get().each(o=>clearInterval(o));return{clear:()=>{n(),t.set(w.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:o=>{n(),t.set(w.some(setInterval(o,e)))}}},br=()=>{const e=(t=>{const n=ln(w.none()),o=()=>n.get().each(t);return{clear:()=>{o(),n.set(w.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:r=>{o(),n.set(w.some(r))}}})(Te);return{...e,on:t=>e.get().each(t)}},eu=e=>{const t=e.toLowerCase();return t==="svg"?"svg":t==="math"?"math":"html"},jr=e=>eu(e)!=="html",ic=e=>jr(e.nodeName),ac=e=>eu(e.nodeName),lc=["svg","math"],Ri="data-mce-block",vr=e=>Me((t=>ue(In(t),n=>!/[A-Z]/.test(n)))(e),t=>{const n=CSS.escape(t);return`${n}:`+Me(lc,o=>`not(${o} ${n})`).join(":")}).join(","),cc=(e,t)=>Z(t.querySelector(e))?(t.setAttribute(Ri,"true"),t.getAttribute("data-mce-selected")==="inline-boundary"&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(Ri),!1),Pa=(e,t)=>{const n=vr(e.getTransparentElements()),o=vr(e.getBlockElements());return ue(t.querySelectorAll(n),r=>cc(o,r))},dc=(e,t,n)=>{var o;const r=n?"lastChild":"firstChild";for(let s=t[r];s;s=s[r])if(hr(e,s,{checkRootAsContent:!0}))return void((o=s.parentNode)===null||o===void 0||o.removeChild(s))},uc=(e,t,n)=>{const o=e.getBlockElements(),r=B(t),s=a=>We(a)in o,i=a=>tt(a,r);W(ka(n),a=>{fr(a,s,i).each(l=>{const c=((d,u)=>ue(xn(d),f=>s(f)&&!e.isValidChild(We(l),We(f))))(a);if(c.length>0){const d=Ei(l);W(c,u=>{fr(u,s,i).each(f=>{((h,g,b)=>{const p=document.createRange(),v=g.parentNode;if(v){p.setStartBefore(g),p.setEndBefore(b);const _=p.extractContents();dc(h,_,!0),p.setStartAfter(b),p.setEndAfter(g);const C=p.extractContents();dc(h,C,!1),hr(h,_,{checkRootAsContent:!0})||v.insertBefore(_,g),hr(h,b,{checkRootAsContent:!0})||v.insertBefore(b,g),hr(h,C,{checkRootAsContent:!0})||v.insertBefore(C,g),v.removeChild(g)}})(e,f.dom,u.dom)})}),d.each(u=>Pa(e,u.dom))}})})},La=(e,t)=>{const n=Pa(e,t);uc(e,t,n),((o,r,s)=>{W([...s,...vs(o,r)?[r]:[]],i=>W(vn(B(i),i.nodeName.toLowerCase()),a=>{rf(o,a.dom)&&gr(a)}))})(e,t,n)},mc=(e,t)=>{if(er(e,t)){const n=vr(e.getBlockElements());cc(n,t)}},fc=e=>e.hasAttribute(Ri),yr=(e,t)=>Re(e.getTransparentElements(),t),er=(e,t)=>he(t)&&yr(e,t.nodeName),vs=(e,t)=>er(e,t)&&fc(t),rf=(e,t)=>er(e,t)&&!fc(t),gc=(e,t)=>t.type===1&&yr(e,t.name)&&se(t.attr(Ri)),sf=Ao().browser,tu=e=>en(e,zn),nu=(e,t)=>e.children&&ee(e.children,t),ou=(e,t={})=>{let n=0;const o={},r=B(e),s=Lr(r),i=u=>{Xt(Yl(r),u)},a=u=>{const f=Yl(r);Ea(f,"#"+u).each(Nt)},l=u=>At(o,u).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),c=u=>new Promise((f,h)=>{let g;const b=Q._addCacheSuffix(u),p=l(b);o[b]=p,p.count++;const v=(x,S)=>{W(x,te),p.status=S,p.passed=[],p.failed=[],g&&(g.onload=null,g.onerror=null,g=null)},_=()=>v(p.passed,2),C=()=>v(p.failed,3);if(f&&p.passed.push(f),h&&p.failed.push(h),p.status===1)return;if(p.status===2)return void _();if(p.status===3)return void C();p.status=1;const E=sn("link",s.dom);Qo(E,{rel:"stylesheet",type:"text/css",id:p.id}),t.contentCssCors&&tn(E,"crossOrigin","anonymous"),t.referrerPolicy&&tn(E,"referrerpolicy",t.referrerPolicy),g=E.dom,g.onload=_,g.onerror=C,i(E),tn(E,"href",b)}),d=u=>{const f=Q._addCacheSuffix(u);At(o,f).each(h=>{--h.count==0&&(delete o[f],a(h.id))})};return{load:c,loadRawCss:(u,f)=>{const h=l(u);o[u]=h,h.count++;const g=sn("style",s.dom);Qo(g,{rel:"stylesheet",type:"text/css",id:h.id}),g.dom.innerHTML=f,i(g)},loadAll:u=>Promise.allSettled(Me(u,f=>c(f).then(K(f)))).then(f=>{const h=yt(f,g=>g.status==="fulfilled");return h.fail.length>0?Promise.reject(Me(h.fail,g=>g.reason)):Me(h.pass,g=>g.value)}),unload:d,unloadRawCss:u=>{At(o,u).each(f=>{--f.count==0&&(delete o[u],a(f.id))})},unloadAll:u=>{W(u,f=>{d(f)})},_setReferrerPolicy:u=>{t.referrerPolicy=u},_setContentCssCors:u=>{t.contentCssCors=u}}},ru=(()=>{const e=new WeakMap;return{forElement:(t,n)=>{const o=Mr(t).dom;return w.from(e.get(o)).getOrThunk(()=>{const r=ou(o,n);return e.set(o,r),r})}}})(),pc=(e,t)=>Z(e)&&(Jd(t,e)||t.isInline(e.nodeName.toLowerCase())),Bi=e=>(t=>t.nodeName.toLowerCase()==="span")(e)&&e.getAttribute("data-mce-type")==="bookmark",Ks=(e,t,n,o)=>{var r;const s=o||t;if(he(t)&&Bi(t))return t;const i=t.childNodes;for(let a=i.length-1;a>=0;a--)Ks(e,i[a],n,s);if(he(t)){const a=t.childNodes;a.length===1&&Bi(a[0])&&((r=t.parentNode)===null||r===void 0||r.insertBefore(a[0],t))}return(a=>oc(a)||Ti(a))(t)||Jd(n,t)||(a=>!!he(a)&&a.childNodes.length>0)(t)||((a,l,c)=>X(a)&&a.data.length>0&&((d,u,f)=>{const h=new an(d,u).prev(!1),g=new an(d,u).next(!1),b=Ft(h)||pc(h,f),p=Ft(g)||pc(g,f);return b&&p})(a,l,c))(t,s,n)||e.remove(t),t},af=Q.makeMap,Ma=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,$r=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,k=/[<>&\"\']/g,m=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,y={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"},A={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},j={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},z=(e,t)=>{const n={};if(e){const o=e.split(",");t=t||10;for(let r=0;r<o.length;r+=2){const s=String.fromCharCode(parseInt(o[r],t));if(!A[s]){const i="&"+o[r+1]+";";n[s]=i,n[i]=s}}return n}},V=z("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),ne=(e,t)=>e.replace(t?Ma:$r,n=>A[n]||n),ve=(e,t)=>e.replace(t?Ma:$r,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":A[n]||"&#"+n.charCodeAt(0)+";"),Se=(e,t,n)=>{const o=n||V;return e.replace(t?Ma:$r,r=>A[r]||o[r]||r)},xe={encodeRaw:ne,encodeAllRaw:e=>(""+e).replace(k,t=>A[t]||t),encodeNumeric:ve,encodeNamed:Se,getEncodeFunc:(e,t)=>{const n=z(t)||V,o=af(e.replace(/\+/g,","));return o.named&&o.numeric?(r,s)=>r.replace(s?Ma:$r,i=>A[i]!==void 0?A[i]:n[i]!==void 0?n[i]:i.length>1?"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";":"&#"+i.charCodeAt(0)+";"):o.named?t?(r,s)=>Se(r,s,n):Se:o.numeric?ve:ne},decode:e=>e.replace(m,(t,n)=>n?(n=n.charAt(0).toLowerCase()==="x"?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):y[n]||String.fromCharCode(n):j[t]||V[t]||(o=>{const r=sn("div").dom;return r.innerHTML=o,r.textContent||r.innerText||o})(t))},ge=(e,t)=>(e=Q.trim(e))?e.split(t||" "):[],et=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),$e=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),Ke=e=>{let t,n;t="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",n="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(t+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",n+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(n=[n,"acronym applet basefont big font strike tt"].join(" "),t=[t,"center dir isindex noframes"].join(" "));const o=[t,n].join(" ");return{blockContent:t,phrasingContent:n,flowContent:o}},He=e=>{const{blockContent:t,phrasingContent:n,flowContent:o}=Ke(e),r=s=>Object.freeze(s.split(" "));return Object.freeze({blockContent:r(t),phrasingContent:r(n),flowContent:r(o)})},Qe={html4:Fn(()=>He("html4")),html5:Fn(()=>He("html5")),"html5-strict":Fn(()=>He("html5-strict"))},Mt=(e,t)=>{const{blockContent:n,phrasingContent:o,flowContent:r}=Qe[e]();return t==="blocks"?w.some(n):t==="phrasing"?w.some(o):t==="flow"?w.some(r):w.none()},jt=e=>w.from(/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/.exec(e)).map(t=>({preset:t[1]==="@",name:t[2]})),nt={},ht=Q.makeMap,ze=Q.each,gt=Q.extend,Bt=Q.explode,It=(e,t={})=>{const n=ht(e," ",ht(e.toUpperCase()," "));return gt(n,t)},Dt=e=>It("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Gt=(e,t)=>{if(e){const n={};return se(e)&&(e={"*":e}),ze(e,(o,r)=>{n[r]=n[r.toUpperCase()]=t==="map"?ht(o,/[, ]/):Bt(o,/[, ]/)}),n}},fn=(e={})=>{var t;const n={},o={};let r=[];const s={},i={},a=(ce,De,Ie)=>{const Pe=e[ce];if(Pe)return ht(Pe,/[, ]/,ht(Pe.toUpperCase(),/[, ]/));{let rt=nt[ce];return rt||(rt=It(De,Ie),nt[ce]=rt),rt}},l=(t=e.schema)!==null&&t!==void 0?t:"html5",c=(ce=>{const De=$e(ce),{phrasingContent:Ie,flowContent:Pe}=Ke(ce),rt={},xt=(ut,Ot,dn)=>{rt[ut]={attributes:Xo(Ot,K({})),attributesOrder:Ot,children:Xo(dn,K({}))}},ie=(ut,Ot="",dn="")=>{const to=ge(dn),ar=ge(ut);let Mn=ar.length;const go=[...De,...ge(Ot)];for(;Mn--;)xt(ar[Mn],go.slice(),to)},we=(ut,Ot)=>{const dn=ge(ut),to=ge(Ot);let ar=dn.length;for(;ar--;){const Mn=rt[dn[ar]];for(let go=0,un=to.length;go<un;go++)Mn.attributes[to[go]]={},Mn.attributesOrder.push(to[go])}};return ce!=="html5-strict"&&(W(ge("acronym applet basefont big font strike tt"),ut=>{ie(ut,"",Ie)}),W(ge("center dir isindex noframes"),ut=>{ie(ut,"",Pe)})),ie("html","manifest","head body"),ie("head","","base command link meta noscript script style title"),ie("title hr noscript br"),ie("base","href target"),ie("link","href rel media hreflang type sizes hreflang"),ie("meta","name http-equiv content charset"),ie("style","media type scoped"),ie("script","src async defer type charset"),ie("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",Pe),ie("dd div","",Pe),ie("address dt caption","",ce==="html4"?Ie:Pe),ie("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",Ie),ie("blockquote","cite",Pe),ie("ol","reversed start type","li"),ie("ul","","li"),ie("li","value",Pe),ie("dl","","dt dd"),ie("a","href target rel media hreflang type",ce==="html4"?Ie:Pe),ie("q","cite",Ie),ie("ins del","cite datetime",Pe),ie("img","src sizes srcset alt usemap ismap width height"),ie("iframe","src name width height",Pe),ie("embed","src type width height"),ie("object","data type typemustmatch name usemap form width height",[Pe,"param"].join(" ")),ie("param","name value"),ie("map","name",[Pe,"area"].join(" ")),ie("area","alt coords shape href target rel media hreflang type"),ie("table","border","caption colgroup thead tfoot tbody tr"+(ce==="html4"?" col":"")),ie("colgroup","span","col"),ie("col","span"),ie("tbody thead tfoot","","tr"),ie("tr","","td th"),ie("td","colspan rowspan headers",Pe),ie("th","colspan rowspan headers scope abbr",Pe),ie("form","accept-charset action autocomplete enctype method name novalidate target",Pe),ie("fieldset","disabled form name",[Pe,"legend"].join(" ")),ie("label","form for",Ie),ie("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),ie("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",ce==="html4"?Pe:Ie),ie("select","disabled form multiple name required size","option optgroup"),ie("optgroup","disabled label","option"),ie("option","disabled label selected value"),ie("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),ie("menu","type label",[Pe,"li"].join(" ")),ie("noscript","",Pe),ce!=="html4"&&(ie("wbr"),ie("ruby","",[Ie,"rt rp"].join(" ")),ie("figcaption","",Pe),ie("mark rt rp bdi","",Ie),ie("summary","",[Ie,"h1 h2 h3 h4 h5 h6"].join(" ")),ie("canvas","width height",Pe),ie("data","value",Ie),ie("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[Pe,"track source"].join(" ")),ie("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[Pe,"track source"].join(" ")),ie("picture","","img source"),ie("source","src srcset type media sizes"),ie("track","kind src srclang label default"),ie("datalist","",[Ie,"option"].join(" ")),ie("article section nav aside main header footer","",Pe),ie("hgroup","","h1 h2 h3 h4 h5 h6"),ie("figure","",[Pe,"figcaption"].join(" ")),ie("time","datetime",Ie),ie("dialog","open",Pe),ie("command","type label icon disabled checked radiogroup command"),ie("output","for form name",Ie),ie("progress","value max",Ie),ie("meter","value min max low high optimum",Ie),ie("details","open",[Pe,"summary"].join(" ")),ie("keygen","autofocus challenge disabled form keytype name"),xt("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),ce!=="html5-strict"&&(we("script","language xml:space"),we("style","xml:space"),we("object","declare classid code codebase codetype archive standby align border hspace vspace"),we("embed","align name hspace vspace"),we("param","valuetype type"),we("a","charset name rev shape coords"),we("br","clear"),we("applet","codebase archive code object alt name width height align hspace vspace"),we("img","name longdesc align border hspace vspace"),we("iframe","longdesc frameborder marginwidth marginheight scrolling align"),we("font basefont","size color face"),we("input","usemap align"),we("select"),we("textarea"),we("h1 h2 h3 h4 h5 h6 div p legend caption","align"),we("ul","type compact"),we("li","type"),we("ol dl menu dir","compact"),we("pre","width xml:space"),we("hr","align noshade size width"),we("isindex","prompt"),we("table","summary width frame rules cellspacing cellpadding align bgcolor"),we("col","width align char charoff valign"),we("colgroup","width align char charoff valign"),we("thead","align char charoff valign"),we("tr","align char charoff valign bgcolor"),we("th","axis align char charoff valign nowrap bgcolor width height"),we("form","accept"),we("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),we("tfoot","align char charoff valign"),we("tbody","align char charoff valign"),we("area","nohref"),we("body","background bgcolor text link vlink alink")),ce!=="html4"&&(we("input button select textarea","autofocus"),we("input textarea","placeholder"),we("a","download"),we("link script img","crossorigin"),we("img","loading"),we("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),ce!=="html4"&&W([rt.video,rt.audio],ut=>{delete ut.children.audio,delete ut.children.video}),W(ge("a form meter progress dfn"),ut=>{rt[ut]&&delete rt[ut].children[ut]}),delete rt.caption.children.table,delete rt.script,rt})(l);e.verify_html===!1&&(e.valid_elements="*[*]");const d=Gt(e.valid_styles),u=Gt(e.invalid_styles,"map"),f=Gt(e.valid_classes,"map"),h=a("whitespace_elements","pre script noscript style textarea video audio iframe object code"),g=a("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),b=a("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),p=a("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),v="td th iframe video audio object script code",_=a("non_empty_elements",v+" pre svg textarea summary",b),C=a("move_caret_before_on_enter_elements",v+" table",b),E="h1 h2 h3 h4 h5 h6",x=a("text_block_elements",E+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),S=a("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",x),O=a("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),T=a("transparent_elements","a ins del canvas map"),L=a("wrap_block_elements","pre "+E);ze("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),ce=>{i[ce]=new RegExp("</"+ce+"[^>]*>","gi")});const I=ce=>{const De=w.from(n["@"]),Ie=/[*?+]/;W(((Pe,rt)=>{const xt=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return no(ge(rt,","),ie=>{const we=xt.exec(ie);if(we){const ut=we[1],Ot=we[2],dn=we[3],to=we[4],ar=we[5],Mn={attributes:{},attributesOrder:[]};if(Pe.each(go=>((un,xo)=>{Ct(un.attributes,(Zr,Ss)=>{xo.attributes[Ss]=Zr}),xo.attributesOrder.push(...un.attributesOrder)})(go,Mn)),ut==="#"?Mn.paddEmpty=!0:ut==="-"&&(Mn.removeEmpty=!0),to==="!"&&(Mn.removeEmptyAttrs=!0),ar&&((go,un)=>{const xo=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,Zr=/[*?+]/,{attributes:Ss,attributesOrder:aa}=un;W(ge(go,"|"),zh=>{const lr=xo.exec(zh);if(lr){const di={},Cn=lr[1],Kn=lr[2].replace(/[\\:]:/g,":"),vl=lr[3],ui=lr[4];if(Cn==="!"&&(un.attributesRequired=un.attributesRequired||[],un.attributesRequired.push(Kn),di.required=!0),Cn==="-")return delete Ss[Kn],void aa.splice(Q.inArray(aa,Kn),1);if(vl&&(vl==="="?(un.attributesDefault=un.attributesDefault||[],un.attributesDefault.push({name:Kn,value:ui}),di.defaultValue=ui):vl==="~"?(un.attributesForced=un.attributesForced||[],un.attributesForced.push({name:Kn,value:ui}),di.forcedValue=ui):vl==="<"&&(di.validValues=Q.makeMap(ui,"?"))),Zr.test(Kn)){const yl=di;un.attributePatterns=un.attributePatterns||[],yl.pattern=et(Kn),un.attributePatterns.push(yl)}else Ss[Kn]||aa.push(Kn),Ss[Kn]=di}})})(ar,Mn),dn&&(Mn.outputName=Ot),Ot==="@"){if(!Pe.isNone())return[];Pe=w.some(Mn)}return[dn?{name:Ot,element:Mn,aliasName:dn}:{name:Ot,element:Mn}]}return[]})})(De,ce??""),({name:Pe,element:rt,aliasName:xt})=>{if(xt&&(n[xt]=rt),Ie.test(Pe)){const ie=rt;ie.pattern=et(Pe),r.push(ie)}else n[Pe]=rt})},N=ce=>{r=[],W(In(n),De=>{delete n[De]}),I(ce)},R=(ce,De)=>{var Ie,Pe;delete nt.text_block_elements,delete nt.block_elements;const rt=!!De.extends&&!bt(De.extends),xt=De.extends;if(o[ce]=xt?o[xt]:{},s[ce]=xt??ce,_[ce.toUpperCase()]={},_[ce]={},rt||(S[ce.toUpperCase()]={},S[ce]={}),xt&&!n[ce]&&n[xt]){const ie=(we=>{const ut=Ot=>Xe(Ot)?Me(Ot,ut):(dn=>dt(dn)&&dn.source&&Object.prototype.toString.call(dn)==="[object RegExp]")(Ot)?new RegExp(Ot.source,Ot.flags):dt(Ot)?pi(Ot,ut):Ot;return ut(we)})(n[xt]);delete ie.removeEmptyAttrs,delete ie.removeEmpty,n[ce]=ie}else n[ce]={attributesOrder:[],attributes:{}};if(Xe(De.attributes)){const ie=ut=>{we.attributesOrder.push(ut),we.attributes[ut]={}},we=(Ie=n[ce])!==null&&Ie!==void 0?Ie:{};delete we.attributesDefault,delete we.attributesForced,delete we.attributePatterns,delete we.attributesRequired,we.attributesOrder=[],we.attributes={},W(De.attributes,ut=>{const Ot=$e(l);jt(ut).each(({preset:dn,name:to})=>{dn?to==="global"&&W(Ot,ie):ie(to)})}),n[ce]=we}if(Tn(De.padEmpty)){const ie=(Pe=n[ce])!==null&&Pe!==void 0?Pe:{};ie.paddEmpty=De.padEmpty,n[ce]=ie}if(Xe(De.children)){const ie={},we=Ot=>{ie[Ot]={}},ut=Ot=>{Mt(l,Ot).each(dn=>{W(dn,we)})};W(De.children,Ot=>{jt(Ot).each(({preset:dn,name:to})=>{dn?ut(to):we(to)})}),o[ce]=ie}xt&&Ct(o,(ie,we)=>{ie[xt]&&(o[we]=ie=gt({},o[we]),ie[ce]=ie[xt])})},P=ce=>{dt(ce)?Ct(ce,(De,Ie)=>R(Ie,De)):se(ce)&&(De=>{W((Ie=>{const Pe=/^(~)?(.+)$/;return no(ge(Ie,","),rt=>{const xt=Pe.exec(rt);return xt?[{cloneName:xt[1]==="~"?"span":"div",name:xt[2]}]:[]})})(De??""),({name:Ie,cloneName:Pe})=>{R(Ie,{extends:Pe})})})(ce)},H=ce=>{W((De=>{const Ie=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return no(ge(De,","),Pe=>{const rt=Ie.exec(Pe);if(rt){const xt=rt[1];return[{operation:xt?(we=>we==="-"?"remove":"add")(xt):"replace",name:rt[2],validChildren:no(ge(rt[3],"|"),we=>jt(we).toArray())}]}return[]})})(ce??""),({operation:De,name:Ie,validChildren:Pe})=>{const rt=De==="replace"?{"#comment":{}}:o[Ie],xt=ie=>{De==="remove"?delete rt[ie]:rt[ie]={}};W(Pe,({preset:ie,name:we})=>{ie?(ut=>{Mt(l,ut).each(Ot=>{W(Ot,xt)})})(we):xt(we)}),o[Ie]=rt})},G=ce=>{const De=n[ce];if(De)return De;let Ie=r.length;for(;Ie--;){const Pe=r[Ie];if(Pe.pattern.test(ce))return Pe}},Y=K(d),me=K(u),be=K(f),ye=K(p),fe=K(S),oe=K(x),pe=K(O),D=K(Object.seal(b)),M=K(g),$=K(_),q=K(C),re=K(h),J=K(T),Ce=K(L),Ee=K(Object.seal(i)),Oe=(ce,De)=>{const Ie=G(ce);if(Ie){if(!De)return!0;{if(Ie.attributes[De])return!0;const Pe=Ie.attributePatterns;if(Pe){let rt=Pe.length;for(;rt--;)if(Pe[rt].pattern.test(De))return!0}}}return!1},bt=ce=>Re(fe(),ce),Ut=ce=>!_t(ce,"#")&&Oe(ce)&&!bt(ce),Eo=K(s);return e.valid_elements?(N(e.valid_elements),ze(c,(ce,De)=>{o[De]=ce.children})):(ze(c,(ce,De)=>{n[De]={attributes:ce.attributes,attributesOrder:ce.attributesOrder},o[De]=ce.children}),ze(ge("strong/b em/i"),ce=>{const De=ge(ce,"/");n[De[1]].outputName=De[0]}),ze(O,(ce,De)=>{n[De]&&(e.padd_empty_block_inline_children&&(n[De].paddInEmptyBlock=!0),n[De].removeEmpty=!0)}),ze(ge("ol ul blockquote a table tbody"),ce=>{n[ce]&&(n[ce].removeEmpty=!0)}),ze(ge("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),ce=>{n[ce]&&(n[ce].paddEmpty=!0)}),ze(ge("span"),ce=>{n[ce].removeEmptyAttrs=!0})),delete n.svg,P(e.custom_elements),H(e.valid_children),I(e.extended_valid_elements),H("+ol[ul|ol],+ul[ul|ol]"),ze({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(ce,De)=>{n[De]&&(n[De].parentsRequired=ge(ce))}),e.invalid_elements&&ze(Bt(e.invalid_elements),ce=>{n[ce]&&delete n[ce]}),G("span")||I("span[!data-mce-type|*]"),{type:l,children:o,elements:n,getValidStyles:Y,getValidClasses:be,getBlockElements:fe,getInvalidStyles:me,getVoidElements:D,getTextBlockElements:oe,getTextInlineElements:pe,getBoolAttrs:ye,getElementRule:G,getSelfClosingElements:M,getNonEmptyElements:$,getMoveCaretBeforeOnEnterElements:q,getWhitespaceElements:re,getTransparentElements:J,getSpecialElements:Ee,isValidChild:(ce,De)=>{const Ie=o[ce.toLowerCase()];return!(!Ie||!Ie[De.toLowerCase()])},isValid:Oe,isBlock:bt,isInline:Ut,isWrapper:ce=>Re(Ce(),ce)||Ut(ce),getCustomElements:Eo,addValidElements:I,setValidElements:N,addCustomElements:P,addValidChildren:H}},lo=e=>{const t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()},qn=e=>(t=>{return{value:(n=t,os(n,"#").toUpperCase())};var n})(lo(e.red)+lo(e.green)+lo(e.blue)),co=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,uo=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Qt=(e,t,n,o)=>((r,s,i,a)=>({red:r,green:s,blue:i,alpha:a}))(parseInt(e,10),parseInt(t,10),parseInt(n,10),parseFloat(o)),Mo=e=>{const t=co.exec(e);if(t!==null)return w.some(Qt(t[1],t[2],t[3],"1"));const n=uo.exec(e);return n!==null?w.some(Qt(n[1],n[2],n[3],n[4])):w.none()},tr=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,nr=e=>Mo(e).map(qn).map(t=>"#"+t.value).getOr(e),gn=(e={},t)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,o=/\s*([^:]+):\s*([^;]+);?/g,r=/\s+$/,s={};let i,a;const l=Si;t&&(i=t.getValidStyles(),a=t.getInvalidStyles());const c=`\\" \\' \\; \\: ; : \uFEFF`.split(" ");for(let u=0;u<c.length;u++)s[c[u]]=l+u,s[l+u]=c[u];const d={parse:u=>{const f={};let h=!1;const g=e.url_converter,b=e.url_converter_scope||d,p=(N,R,P)=>{const H=f[N+"-top"+R];if(!H)return;const G=f[N+"-right"+R];if(!G)return;const Y=f[N+"-bottom"+R];if(!Y)return;const me=f[N+"-left"+R];if(!me)return;const be=[H,G,Y,me];let ye=be.length-1;for(;ye--&&be[ye]===be[ye+1];);ye>-1&&P||(f[N+R]=ye===-1?be[0]:be.join(" "),delete f[N+"-top"+R],delete f[N+"-right"+R],delete f[N+"-bottom"+R],delete f[N+"-left"+R])},v=N=>{const R=f[N];if(!R)return;const P=R.indexOf(",")>-1?[R]:R.split(" ");let H=P.length;for(;H--;)if(P[H]!==P[0])return!1;return f[N]=P[0],!0},_=N=>(h=!0,s[N]),C=(N,R)=>(h&&(N=N.replace(/\uFEFF[0-9]/g,P=>s[P])),R||(N=N.replace(/\\([\'\";:])/g,"$1")),N),E=N=>String.fromCharCode(parseInt(N.slice(1),16)),x=N=>N.replace(/\\[0-9a-f]+/gi,E),S=(N,R,P,H,G,Y)=>{if(G=G||Y)return"'"+(G=C(G)).replace(/\'/g,"\\'")+"'";if(R=C(R||P||H||""),!e.allow_script_urls){const me=R.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(me)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(me))return""}return g&&(R=g.call(b,R,"style")),"url('"+R.replace(/\'/g,"\\'")+"')"};if(u){let N;for(u=(u=u.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,_).replace(/\"[^\"]+\"|\'[^\']+\'/g,R=>R.replace(/[;:]/g,_));N=o.exec(u);){o.lastIndex=N.index+N[0].length;let R=N[1].replace(r,"").toLowerCase(),P=N[2].replace(r,"");if(R&&P){if(R=x(R),P=x(P),R.indexOf(l)!==-1||R.indexOf('"')!==-1||!e.allow_script_urls&&(R==="behavior"||/expression\s*\(|\/\*|\*\//.test(P)))continue;R==="font-weight"&&P==="700"?P="bold":R!=="color"&&R!=="background-color"||(P=P.toLowerCase()),I=P,(co.test(I)?"rgb":uo.test(I)?"rgba":"other")=="rgb"&&Mo(P).each(H=>{P=nr(tr(H)).toLowerCase()}),P=P.replace(n,S),f[R]=h?C(P,!0):P}}p("border","",!0),p("border","-width"),p("border","-color"),p("border","-style"),p("padding",""),p("margin",""),T="border-style",L="border-color",v(O="border-width")&&v(T)&&v(L)&&(f.border=f[O]+" "+f[T]+" "+f[L],delete f[O],delete f[T],delete f[L]),f.border==="medium none"&&delete f.border,f["border-image"]==="none"&&delete f["border-image"]}var O,T,L,I;return f},serialize:(u,f)=>{let h="";const g=(b,p)=>{const v=p[b];if(v)for(let _=0,C=v.length;_<C;_++){const E=v[_],x=u[E];x&&(h+=(h.length>0?" ":"")+E+": "+x+";")}};return f&&i?(g("*",i),g(f,i)):Ct(u,(b,p)=>{b&&((v,_)=>{if(!a||!_)return!0;let C=a["*"];return!(C&&C[v]||(C=a[_],C&&C[v]))})(p,f)&&(h+=(h.length>0?" ":"")+p+": "+b+";")}),h}};return d},zt={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Dn=(e,t)=>{const n=t??{};for(const o in e)Re(zt,o)||(n[o]=e[o]);return Z(e.composedPath)&&(n.composedPath=()=>e.composedPath()),Z(e.getModifierState)&&(n.getModifierState=o=>e.getModifierState(o)),Z(e.getTargetRanges)&&(n.getTargetRanges=()=>e.getTargetRanges()),n},Qn=(e,t,n,o)=>{var r;const s=Dn(t,o);return s.type=e,Rt(s.target)&&(s.target=(r=s.srcElement)!==null&&r!==void 0?r:n),(i=>Rt(i.preventDefault)||(a=>a instanceof Event||Ge(a.initEvent))(i))(t)&&(s.preventDefault=()=>{s.defaultPrevented=!0,s.isDefaultPrevented=St,Ge(t.preventDefault)&&t.preventDefault()},s.stopPropagation=()=>{s.cancelBubble=!0,s.isPropagationStopped=St,Ge(t.stopPropagation)&&t.stopPropagation()},s.stopImmediatePropagation=()=>{s.isImmediatePropagationStopped=St,s.stopPropagation()},(i=>i.isDefaultPrevented===St||i.isDefaultPrevented===ft)(s)||(s.isDefaultPrevented=s.defaultPrevented===!0?St:ft,s.isPropagationStopped=s.cancelBubble===!0?St:ft,s.isImmediatePropagationStopped=ft)),s},zr=/^(?:mouse|contextmenu)|click/,Ys=(e,t,n,o)=>{e.addEventListener(t,n,o||!1)},Di=(e,t,n,o)=>{e.removeEventListener(t,n,o||!1)},Xs=(e,t)=>{const n=Qn(e.type,e,document,t);if((o=>Z(o)&&zr.test(o.type))(e)&&Ft(e.pageX)&&!Ft(e.clientX)){const o=n.target.ownerDocument||document,r=o.documentElement,s=o.body,i=n;i.pageX=e.clientX+(r&&r.scrollLeft||s&&s.scrollLeft||0)-(r&&r.clientLeft||s&&s.clientLeft||0),i.pageY=e.clientY+(r&&r.scrollTop||s&&s.scrollTop||0)-(r&&r.clientTop||s&&s.clientTop||0)}return n},Ia=(e,t,n)=>{const o=e.document,r={type:"ready"};if(n.domLoaded)return void t(r);const s=()=>{Di(e,"DOMContentLoaded",s),Di(e,"load",s),n.domLoaded||(n.domLoaded=!0,t(r)),e=null};o.readyState==="complete"||o.readyState==="interactive"&&o.body?s():Ys(e,"DOMContentLoaded",s),n.domLoaded||Ys(e,"load",s)};class ys{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,n,o,r){const s=this;let i;const a=window,l=f=>{s.executeHandlers(Xs(f||a.event),c)};if(!t||X(t)||Gn(t))return o;let c;t[s.expando]?c=t[s.expando]:(c=s.count++,t[s.expando]=c,s.events[c]={}),r=r||t;const d=n.split(" ");let u=d.length;for(;u--;){let f=d[u],h=l,g=!1,b=!1;f==="DOMContentLoaded"&&(f="ready"),s.domLoaded&&f==="ready"&&t.readyState==="complete"?o.call(r,Xs({type:f})):(s.hasFocusIn||f!=="focusin"&&f!=="focusout"||(g=!0,b=f==="focusin"?"focus":"blur",h=p=>{const v=Xs(p||a.event);v.type=v.type==="focus"?"focusin":"focusout",s.executeHandlers(v,c)}),i=s.events[c][f],i?f==="ready"&&s.domLoaded?o(Xs({type:f})):i.push({func:o,scope:r}):(s.events[c][f]=i=[{func:o,scope:r}],i.fakeName=b,i.capture=g,i.nativeHandler=h,f==="ready"?Ia(t,h,s):Ys(t,b||f,h,g)))}return t=i=null,o}unbind(t,n,o){if(!t||X(t)||Gn(t))return this;const r=t[this.expando];if(r){let s=this.events[r];if(n){const i=n.split(" ");let a=i.length;for(;a--;){const l=i[a],c=s[l];if(c){if(o){let d=c.length;for(;d--;)if(c[d].func===o){const u=c.nativeHandler,f=c.fakeName,h=c.capture,g=c.slice(0,d).concat(c.slice(d+1));g.nativeHandler=u,g.fakeName=f,g.capture=h,s[l]=g}}o&&c.length!==0||(delete s[l],Di(t,c.fakeName||l,c.nativeHandler,c.capture))}}}else Ct(s,(i,a)=>{Di(t,i.fakeName||a,i.nativeHandler,i.capture)}),s={};for(const i in s)if(Re(s,i))return this;delete this.events[r];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,n,o){return this.dispatch(t,n,o)}dispatch(t,n,o){if(!t||X(t)||Gn(t))return this;const r=Xs({type:n,target:t},o);do{const s=t[this.expando];s&&this.executeHandlers(r,s),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!r.isPropagationStopped());return this}clean(t){if(!t||X(t)||Gn(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);const n=t.getElementsByTagName("*");let o=n.length;for(;o--;)(t=n[o])[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,n){const o=this.events[n],r=o&&o[t.type];if(r)for(let s=0,i=r.length;s<i;s++){const a=r[s];if(a&&a.func.call(a.scope,t)===!1&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}ys.Event=new ys;const hc=Q.each,bc=Q.grep,vc="data-mce-style",su=Q.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Pi=(e,t,n)=>{Rt(n)||n===""?rn(e,t):tn(e,t,n)},yc=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),_s=(e,t)=>{let n=0;if(e)for(let o=e.nodeType,r=e.previousSibling;r;r=r.previousSibling){const s=r.nodeType;(!t||!X(r)||s!==o&&r.data.length)&&(n++,o=s)}return n},iu=(e,t)=>{const n=Un(t,"style"),o=e.serialize(e.parse(n),We(t));Pi(t,vc,o)},au=(e,t,n)=>{const o=yc(t);Rt(n)||n===""?Ud(e,o):Ql(e,o,((r,s)=>st(r)?Re(su,s)?r+"":r+"px":r)(n,o))},ot=(e,t={})=>{const n={},o=window,r={};let s=0;const i=ru.forElement(B(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),a=[],l=t.schema?t.schema:fn({}),c=gn({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),d=t.ownEvents?new ys:ys.Event,u=l.getBlockElements(),f=D=>D&&e&&se(D)?e.getElementById(D):D,h=D=>{const M=f(D);return Z(M)?B(M):null},g=(D,M,$="")=>{let q;const re=h(D);if(Z(re)&&zn(re)){const J=pe[M];q=J&&J.get?J.get(re.dom,M):Un(re,M)}return Z(q)?q:$},b=D=>{const M=f(D);return Rt(M)?[]:M.attributes},p=(D,M,$)=>{T(D,q=>{if(he(q)){const re=B(q),J=$===""?null:$,Ce=Un(re,M),Ee=pe[M];Ee&&Ee.set?Ee.set(re.dom,J,M):Pi(re,M,J),Ce!==J&&t.onSetAttrib&&t.onSetAttrib({attrElm:re.dom,attrName:M,attrValue:J})}})},v=()=>t.root_element||e.body,_=(D,M)=>(($,q,re)=>{let J=0,Ce=0;const Ee=$.ownerDocument;if(re=re||$,q){if(re===$&&q.getBoundingClientRect&&Do(B($),"position")==="static"){const bt=q.getBoundingClientRect();return J=bt.left+(Ee.documentElement.scrollLeft||$.scrollLeft)-Ee.documentElement.clientLeft,Ce=bt.top+(Ee.documentElement.scrollTop||$.scrollTop)-Ee.documentElement.clientTop,{x:J,y:Ce}}let Oe=q;for(;Oe&&Oe!==re&&Oe.nodeType&&!nu(Oe,re);){const bt=Oe;J+=bt.offsetLeft||0,Ce+=bt.offsetTop||0,Oe=bt.offsetParent}for(Oe=q.parentNode;Oe&&Oe!==re&&Oe.nodeType&&!nu(Oe,re);)J-=Oe.scrollLeft||0,Ce-=Oe.scrollTop||0,Oe=Oe.parentNode;Ce+=(bt=>sf.isFirefox()&&We(bt)==="table"?tu(xn(bt)).filter(Ut=>We(Ut)==="caption").bind(Ut=>tu(xi(Ut)).map(Eo=>{const ce=Eo.dom.offsetTop,De=Ut.dom.offsetTop,Ie=Ut.dom.offsetHeight;return ce<=De?-Ie:0})).getOr(0):0)(B(q))}return{x:J,y:Ce}})(e.body,f(D),M),C=(D,M,$)=>{const q=f(D);var re;if(!Rt(q)&&(pr(q)||he(re=q)&&re.namespaceURI==="http://www.w3.org/2000/svg"))return $?Do(B(q),yc(M)):((M=M.replace(/-(\D)/g,(J,Ce)=>Ce.toUpperCase()))==="float"&&(M="cssFloat"),q.style?q.style[M]:void 0)},E=D=>{const M=f(D);if(!M)return{w:0,h:0};let $=C(M,"width"),q=C(M,"height");return $&&$.indexOf("px")!==-1||($="0"),q&&q.indexOf("px")!==-1||(q="0"),{w:parseInt($,10)||M.offsetWidth||M.clientWidth,h:parseInt(q,10)||M.offsetHeight||M.clientHeight}},x=(D,M)=>{if(!D)return!1;const $=Xe(D)?D:[D];return Ve($,q=>so(B(q),M))},S=(D,M,$,q)=>{const re=[];let J=f(D);q=q===void 0;const Ce=$||(v().nodeName!=="BODY"?v().parentNode:null);if(se(M))if(M==="*")M=he;else{const Ee=M;M=Oe=>x(Oe,Ee)}for(;J&&!(J===Ce||Rt(J.nodeType)||Ti(J)||oc(J));){if(!M||M(J)){if(!q)return[J];re.push(J)}J=J.parentNode}return q?re:null},O=(D,M,$)=>{let q=M;if(D){se(M)&&(q=re=>x(re,M));for(let re=D[$];re;re=re[$])if(Ge(q)&&q(re))return re}return null},T=function(D,M,$){const q=$??this;if(Xe(D)){const re=[];return hc(D,(J,Ce)=>{const Ee=f(J);Ee&&re.push(M.call(q,Ee,Ce))}),re}{const re=f(D);return!!re&&M.call(q,re)}},L=(D,M)=>{T(D,$=>{Ct(M,(q,re)=>{p($,re,q)})})},I=(D,M)=>{T(D,$=>{const q=B($);Aa(q,M)})},N=(D,M,$,q,re)=>T(D,J=>{const Ce=se(M)?e.createElement(M):M;return Z($)&&L(Ce,$),q&&(!se(q)&&q.nodeType?Ce.appendChild(q):se(q)&&I(Ce,q)),re?Ce:J.appendChild(Ce)}),R=(D,M,$)=>N(e.createElement(D),D,M,$,!0),P=xe.encodeAllRaw,H=(D,M)=>T(D,$=>{const q=B($);return M&&W(xn(q),re=>{En(re)&&re.dom.length===0?Nt(re):Bn(q,re)}),Nt(q),q.dom}),G=(D,M,$)=>{T(D,q=>{if(he(q)){const re=B(q),J=M.split(" ");W(J,Ce=>{Z($)?($?Fs:js)(re,Ce):((Ee,Oe)=>{const bt=Is(Ee)?Ee.dom.classList.toggle(Oe):((Ut,Eo)=>ee(Ul(Ut),Eo)?Hl(Ut,Eo):_a(Ut,Eo))(Ee,Oe);Pd(Ee)})(re,Ce)})}})},Y=(D,M,$)=>T(M,q=>{var re;const J=Xe(M)?D.cloneNode(!0):D;return $&&hc(bc(q.childNodes),Ce=>{J.appendChild(Ce)}),(re=q.parentNode)===null||re===void 0||re.replaceChild(J,q),q}),me=()=>e.createRange(),be=(D,M,$,q)=>{if(Xe(D)){let re=D.length;const J=[];for(;re--;)J[re]=be(D[re],M,$,q);return J}return!t.collect||D!==e&&D!==o||a.push([D,M,$,q]),d.bind(D,M,$,q||oe)},ye=(D,M,$)=>{if(Xe(D)){let q=D.length;const re=[];for(;q--;)re[q]=ye(D[q],M,$);return re}if(a.length>0&&(D===e||D===o)){let q=a.length;for(;q--;){const[re,J,Ce]=a[q];D!==re||M&&M!==J||$&&$!==Ce||d.unbind(re,J,Ce)}}return d.unbind(D,M,$)},fe=D=>{if(D&&pr(D)){const M=D.getAttribute("data-mce-contenteditable");return M&&M!=="inherit"?M:D.contentEditable!=="inherit"?D.contentEditable:null}return null},oe={doc:e,settings:t,win:o,files:r,stdMode:!0,boxModel:!0,styleSheetLoader:i,boundEvents:a,styles:c,schema:l,events:d,isBlock:D=>se(D)?Re(u,D):he(D)&&(Re(u,D.nodeName)||vs(l,D)),root:null,clone:(D,M)=>D.cloneNode(M),getRoot:v,getViewPort:D=>{const M=Wd(D);return{x:M.x,y:M.y,w:M.width,h:M.height}},getRect:D=>{const M=f(D),$=_(M),q=E(M);return{x:$.x,y:$.y,w:q.w,h:q.h}},getSize:E,getParent:(D,M,$)=>{const q=S(D,M,$,!1);return q&&q.length>0?q[0]:null},getParents:S,get:f,getNext:(D,M)=>O(D,M,"nextSibling"),getPrev:(D,M)=>O(D,M,"previousSibling"),select:(D,M)=>{var $,q;const re=(q=($=f(M))!==null&&$!==void 0?$:t.root_element)!==null&&q!==void 0?q:e;return Ge(re.querySelectorAll)?An(re.querySelectorAll(D)):[]},is:x,add:N,create:R,createHTML:(D,M,$="")=>{let q="<"+D;for(const re in M)Ts(M,re)&&(q+=" "+re+'="'+P(M[re])+'"');return Rs($)&&Re(l.getVoidElements(),D)?q+" />":q+">"+$+"</"+D+">"},createFragment:D=>{const M=e.createElement("div"),$=e.createDocumentFragment();let q;for($.appendChild(M),D&&(M.innerHTML=D);q=M.firstChild;)$.appendChild(q);return $.removeChild(M),$},remove:H,setStyle:(D,M,$)=>{T(D,q=>{const re=B(q);au(re,M,$),t.update_styles&&iu(c,re)})},getStyle:C,setStyles:(D,M)=>{T(D,$=>{const q=B($);Ct(M,(re,J)=>{au(q,J,re)}),t.update_styles&&iu(c,q)})},removeAllAttribs:D=>T(D,M=>{const $=M.attributes;for(let q=$.length-1;q>=0;q--)M.removeAttributeNode($.item(q))}),setAttrib:p,setAttribs:L,getAttrib:g,getPos:_,parseStyle:D=>c.parse(D),serializeStyle:(D,M)=>c.serialize(D,M),addStyle:D=>{if(oe!==ot.DOM&&e===document){if(n[D])return;n[D]=!0}let M=e.getElementById("mceDefaultStyles");if(!M){M=e.createElement("style"),M.id="mceDefaultStyles",M.type="text/css";const $=e.head;$.firstChild?$.insertBefore(M,$.firstChild):$.appendChild(M)}M.styleSheet?M.styleSheet.cssText+=D:M.appendChild(e.createTextNode(D))},loadCSS:D=>{D||(D=""),W(D.split(","),M=>{r[M]=!0,i.load(M).catch(Te)})},addClass:(D,M)=>{G(D,M,!0)},removeClass:(D,M)=>{G(D,M,!1)},hasClass:(D,M)=>{const $=h(D),q=M.split(" ");return Z($)&&cr(q,re=>Ca($,re))},toggleClass:G,show:D=>{T(D,M=>Ud(B(M),"display"))},hide:D=>{T(D,M=>Ql(B(M),"display","none"))},isHidden:D=>{const M=h(D);return Z(M)&&is(Hn(M,"display"),"none")},uniqueId:D=>(D||"mce_")+s++,setHTML:I,getOuterHTML:D=>{const M=h(D);return Z(M)?he(M.dom)?M.dom.outerHTML:($=>{const q=sn("div"),re=B($.dom.cloneNode(!0));return Xt(q,re),Sa(q)})(M):""},setOuterHTML:(D,M)=>{T(D,$=>{he($)&&($.outerHTML=M)})},decode:xe.decode,encode:P,insertAfter:(D,M)=>{const $=f(M);return T(D,q=>{const re=$?.parentNode,J=$?.nextSibling;return re&&(J?re.insertBefore(q,J):re.appendChild(q)),q})},replace:Y,rename:(D,M)=>{if(D.nodeName!==M.toUpperCase()){const $=R(M);return hc(b(D),q=>{p($,q.nodeName,g(D,q.nodeName))}),Y($,D,!0),$}return D},findCommonAncestor:(D,M)=>{let $=D;for(;$;){let q=M;for(;q&&$!==q;)q=q.parentNode;if($===q)break;$=$.parentNode}return!$&&D.ownerDocument?D.ownerDocument.documentElement:$},run:T,getAttribs:b,isEmpty:(D,M,$)=>Pt(M)?hr(l,D,{...$,isContent:re=>{const J=re.nodeName.toLowerCase();return!!M[J]}}):hr(l,D,$),createRng:me,nodeIndex:_s,split:(D,M,$)=>{let q,re,J=me();if(D&&M&&D.parentNode&&M.parentNode){const Ce=D.parentNode;return J.setStart(Ce,_s(D)),J.setEnd(M.parentNode,_s(M)),q=J.extractContents(),J=me(),J.setStart(M.parentNode,_s(M)+1),J.setEnd(Ce,_s(D)+1),re=J.extractContents(),Ce.insertBefore(Ks(oe,q,l),D),$?Ce.insertBefore($,D):Ce.insertBefore(M,D),Ce.insertBefore(Ks(oe,re,l),D),H(D),$||M}},bind:be,unbind:ye,fire:(D,M,$)=>d.dispatch(D,M,$),dispatch:(D,M,$)=>d.dispatch(D,M,$),getContentEditable:fe,getContentEditableParent:D=>{const M=v();let $=null;for(let q=D;q&&q!==M&&($=fe(q),$===null);q=q.parentNode);return $},isEditable:D=>{if(Z(D)){const M=he(D)?D:D.parentElement;return Z(M)&&pr(M)&&ds(B(M))}return!1},destroy:()=>{if(a.length>0){let D=a.length;for(;D--;){const[M,$,q]=a[D];d.unbind(M,$,q)}}Ct(r,(D,M)=>{i.unload(M),delete r[M]})},isChildOf:(D,M)=>D===M||M.contains(D),dumpRng:D=>"startContainer: "+D.startContainer.nodeName+", startOffset: "+D.startOffset+", endContainer: "+D.endContainer.nodeName+", endOffset: "+D.endOffset},pe=((D,M,$)=>{const q=M.keep_values,re={set:(Ce,Ee,Oe)=>{const bt=B(Ce);Ge(M.url_converter)&&Z(Ee)&&(Ee=M.url_converter.call(M.url_converter_scope||$(),String(Ee),Oe,Ce)),Pi(bt,"data-mce-"+Oe,Ee),Pi(bt,Oe,Ee)},get:(Ce,Ee)=>{const Oe=B(Ce);return Un(Oe,"data-mce-"+Ee)||Un(Oe,Ee)}},J={style:{set:(Ce,Ee)=>{const Oe=B(Ce);q&&Pi(Oe,vc,Ee),rn(Oe,"style"),se(Ee)&&us(Oe,D.parse(Ee))},get:Ce=>{const Ee=B(Ce),Oe=Un(Ee,vc)||Un(Ee,"style");return D.serialize(D.parse(Oe),We(Ee))}}};return q&&(J.href=J.src=re),J})(c,t,K(oe));return oe};ot.DOM=ot(document),ot.nodeIndex=_s;const Fa=ot.DOM;class or{constructor(t={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}loadScript(t){return new Promise((n,o)=>{const r=Fa;let s;const i=()=>{r.remove(a),s&&(s.onerror=s.onload=s=null)},a=r.uniqueId();s=document.createElement("script"),s.id=a,s.type="text/javascript",s.src=Q._addCacheSuffix(t),this.settings.referrerPolicy&&r.setAttrib(s,"referrerpolicy",this.settings.referrerPolicy),s.onload=()=>{i(),n()},s.onerror=()=>{i(),o("Failed to load script: "+t)},(document.getElementsByTagName("head")[0]||document.body).appendChild(s)})}isDone(t){return this.states[t]===2}markDone(t){this.states[t]=2}add(t){const n=this;return n.queue.push(t),n.states[t]===void 0&&(n.states[t]=0),new Promise((o,r)=>{n.scriptLoadedCallbacks[t]||(n.scriptLoadedCallbacks[t]=[]),n.scriptLoadedCallbacks[t].push({resolve:o,reject:r})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const n=this,o=(l,c)=>{At(n.scriptLoadedCallbacks,c).each(d=>{W(d,u=>u[l](c))}),delete n.scriptLoadedCallbacks[c]},r=l=>{const c=ue(l,d=>d.status==="rejected");return c.length>0?Promise.reject(no(c,({reason:d})=>Xe(d)?d:[d])):Promise.resolve()},s=l=>Promise.allSettled(Me(l,c=>n.states[c]===2?(o("resolve",c),Promise.resolve()):n.states[c]===3?(o("reject",c),Promise.reject(c)):(n.states[c]=1,n.loadScript(c).then(()=>{n.states[c]=2,o("resolve",c);const d=n.queue;return d.length>0?(n.queue=[],s(d).then(r)):Promise.resolve()},()=>(n.states[c]=3,o("reject",c),Promise.reject(c)))))),i=l=>(n.loading=!0,s(l).then(c=>{n.loading=!1;const d=n.queueLoadedCallbacks.shift();return w.from(d).each(te),r(c)})),a=Sd(t);return n.loading?new Promise((l,c)=>{n.queueLoadedCallbacks.push(()=>{i(a).then(l,c)})}):i(a)}}or.ScriptLoader=new or;const Gs={},Li=ln("en"),_c=()=>At(Gs,Li.get()),_o={getData:()=>pi(Gs,e=>({...e})),setCode:e=>{e&&Li.set(e)},getCode:()=>Li.get(),add:(e,t)=>{let n=Gs[e];n||(Gs[e]=n={});const o=Me(In(t),r=>r.toLowerCase());Ct(t,(r,s)=>{const i=s.toLowerCase();i!==s&&((a,l)=>{const c=a.indexOf(l);return c!==-1&&a.indexOf(l,c+1)>c})(o,i)?(Re(t,i)||(n[i]=r),n[s]=r):n[i]=r})},translate:e=>{const t=_c().getOr({}),n=a=>Ge(a)?Object.prototype.toString.call(a):o(a)?"":""+a,o=a=>a===""||a==null,r=a=>{const l=n(a);return Re(t,l)?n(t[l]):At(t,l.toLowerCase()).map(n).getOr(l)},s=a=>a.replace(/{context:\w+}$/,"");if(o(e))return"";if(dt(i=e)&&Re(i,"raw"))return n(e.raw);var i;if((a=>Xe(a)&&a.length>1)(e)){const a=e.slice(1);return s(r(e[0]).replace(/\{([0-9]+)\}/g,(l,c)=>Re(a,c)?n(a[c]):l))}return s(r(e))},isRtl:()=>_c().bind(e=>At(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Re(Gs,e)},Sn=()=>{const e=[],t={},n={},o=[],r=(l,c)=>{const d=ue(o,u=>u.name===l&&u.state===c);W(d,u=>u.resolve())},s=l=>Re(t,l),i=(l,c)=>{const d=_o.getCode();!d||c&&(","+(c||"")+",").indexOf(","+d+",")===-1||or.ScriptLoader.add(t[l]+"/langs/"+d+".js")},a=(l,c="added")=>c==="added"&&(d=>Re(n,d))(l)||c==="loaded"&&s(l)?Promise.resolve():new Promise(d=>{o.push({name:l,state:c,resolve:d})});return{items:e,urls:t,lookup:n,get:l=>{if(n[l])return n[l].instance},requireLangPack:(l,c)=>{Sn.languageLoad!==!1&&(s(l)?i(l,c):a(l,"loaded").then(()=>i(l,c)))},add:(l,c)=>(e.push(c),n[l]={instance:c},r(l,"added"),c),remove:l=>{delete t[l],delete n[l]},createUrl:(l,c)=>se(c)?se(l)?{prefix:"",resource:c,suffix:""}:{prefix:l.prefix,resource:c,suffix:l.suffix}:c,load:(l,c)=>{if(t[l])return Promise.resolve();let d=se(c)?c:c.prefix+c.resource+c.suffix;d.indexOf("/")!==0&&d.indexOf("://")===-1&&(d=Sn.baseURL+"/"+d),t[l]=d.substring(0,d.lastIndexOf("/"));const u=()=>(r(l,"loaded"),Promise.resolve());return n[l]?u():or.ScriptLoader.add(d).then(u)},waitFor:a}};Sn.languageLoad=!0,Sn.baseURL="",Sn.PluginManager=Sn(),Sn.ThemeManager=Sn(),Sn.ModelManager=Sn();const Mi=(e,t)=>{let n=null;return{cancel:()=>{mt(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{mt(n)&&(n=setTimeout(()=>{n=null,e.apply(null,o)},t))}}},Cc=(e,t)=>{let n=null;const o=()=>{mt(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...r)=>{o(),n=setTimeout(()=>{n=null,e.apply(null,r)},t)}}},Ii=K("mce-annotation"),_r=K("data-mce-annotation"),Cs=K("data-mce-annotation-uid"),wc=K("data-mce-annotation-active"),Ec=K("data-mce-annotation-classes"),xc=K("data-mce-annotation-attrs"),Hh=e=>t=>tt(t,e),qh=(e,t)=>{const n=e.selection.getRng(),o=B(n.startContainer),r=B(e.getBody()),s=t.fold(()=>"."+Ii(),a=>`[${_r()}="${a}"]`),i=$s(o,n.startOffset).getOr(o);return cs(i,s,Hh(r)).bind(a=>Xn(a,`${Cs()}`).bind(l=>Xn(a,`${_r()}`).map(c=>{const d=Vh(e,l);return{uid:l,name:c,elements:d}})))},Wh=(e,t)=>Ci(e,"data-mce-bogus")||((n,o,r)=>ki(n,'[data-mce-bogus="all"]',r).isSome())(e,0,Hh(t)),Vh=(e,t)=>{const n=B(e.getBody()),o=vn(n,`[${Cs()}="${t}"]`);return ue(o,r=>!Wh(r,n))},Kh=(e,t)=>{const n=B(e.getBody()),o=vn(n,`[${_r()}="${t}"]`),r={};return W(o,s=>{if(!Wh(s,n)){const i=Un(s,Cs()),a=At(r,i).getOr([]);r[i]=a.concat([s])}}),r},Yh=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Xh=0;const kc=e=>{const t=new Date().getTime(),n=Math.floor(1e9*Yh());return Xh++,e+"_"+n+Xh+String(t)},Gh=(e,t)=>B(e.dom.cloneNode(t)),Fi=e=>Gh(e,!1),Qh=e=>Gh(e,!0),Zh=(e,t,n=ft)=>{const o=new an(e,t),r=s=>{let i;do i=o[s]();while(i&&!X(i)&&!n(i));return w.from(i).filter(X)};return{current:()=>w.from(o.current()).filter(X),next:()=>r("next"),prev:()=>r("prev"),prev2:()=>r("prev2")}},ji=(e,t)=>{const n=t||(r=>e.isBlock(r)||Tt(r)||wt(r)),o=(r,s,i,a)=>{if(X(r)){const l=a(r,s,r.data);if(l!==-1)return w.some({container:r,offset:l})}return i().bind(l=>o(l.container,l.offset,i,a))};return{backwards:(r,s,i,a)=>{const l=Zh(r,a??e.getRoot(),n);return o(r,s,()=>l.prev().map(c=>({container:c,offset:c.length})),i).getOrNull()},forwards:(r,s,i,a)=>{const l=Zh(r,a??e.getRoot(),n);return o(r,s,()=>l.next().map(c=>({container:c,offset:0})),i).getOrNull()}}},lf=((e,t)=>{const n=o=>e(o)?w.from(o.dom.nodeValue):w.none();return{get:o=>{if(!e(o))throw new Error("Can only get text value of a text node");return n(o).getOr("")},getOption:n,set:(o,r)=>{if(!e(o))throw new Error("Can only set raw text value of a text node");o.dom.nodeValue=r}}})(En),Sc=e=>lf.get(e),Jh=(e,t)=>lf.set(e,t),ja=e=>{let t;return n=>(t=t||Xo(e,St),Re(t,We(n)))},$i=e=>zn(e)&&We(e)==="br",eb=ja(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),cf=ja(["ul","ol","dl"]),$a=ja(["li","dd","dt"]),gk=ja(["thead","tbody","tfoot"]),Ac=ja(["td","th"]),lu=ja(["pre","script","textarea","style"]),za=()=>{const e=sn("br");return tn(e,"data-mce-bogus","1"),e},Qs=e=>{Hs(e),Xt(e,za())},yn=Si,cu=Po,Co=e=>e.replace(/\uFEFF/g,""),pk=he,Ua=X,Ha=e=>(Ua(e)&&(e=e.parentNode),pk(e)&&e.hasAttribute("data-mce-caret")),Zs=e=>Ua(e)&&cu(e.data),Io=e=>Ha(e)||Zs(e),tb=e=>e.firstChild!==e.lastChild||!Tt(e.firstChild),df=e=>{const t=e.container();return!!X(t)&&(t.data.charAt(e.offset())===yn||e.isAtStart()&&Zs(t.previousSibling))},uf=e=>{const t=e.container();return!!X(t)&&(t.data.charAt(e.offset()-1)===yn||e.isAtEnd()&&Zs(t.nextSibling))},du=e=>Ua(e)&&e.data[0]===yn,uu=e=>Ua(e)&&e.data[e.data.length-1]===yn,mf=e=>e&&e.hasAttribute("data-mce-caret")?((t=>{var n;const o=t.getElementsByTagName("br"),r=o[o.length-1];Fr(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))})(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,nb=e=>Ha(e.startContainer),qa=Math.round,zi=e=>e?{left:qa(e.left),top:qa(e.top),bottom:qa(e.bottom),right:qa(e.right),width:qa(e.width),height:qa(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},ob=(e,t)=>(e=zi(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),rb=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,Nc=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top||!(e.top>t.bottom)&&rb(t.top-e.bottom,e,t)},Tc=(e,t)=>e.top>t.bottom||!(e.bottom<t.top)&&rb(t.bottom-e.top,e,t),sb=(e,t,n)=>{const o=Math.max(Math.min(t,e.left+e.width),e.left),r=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-o)*(t-o)+(n-r)*(n-r))},mu=e=>{const t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Js=(e,t)=>{if(he(e)&&e.hasChildNodes()){const n=e.childNodes,o=((r,s,i)=>Math.min(Math.max(r,0),i))(t,0,n.length-1);return n[o]}return e},hk=new RegExp("[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B57\u0B62-\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC-\u0CCD\u0CD5-\u0CD6\u0CE2-\u0CE3\u0D01\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62-\u0D63\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1ABE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u200C-\u200D\u20D0-\u20DC\u20DD-\u20E0\u20E1\u20E2-\u20E4\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u302E-\u302F\u3099-\u309A\uA66F\uA670-\uA672\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E-\uFF9F]"),ib=e=>se(e)&&e.charCodeAt(0)>=768&&hk.test(e),ab=vo,bk=wt,vk=Tt,yk=X,_k=ao(["script","style","textarea"]),lb=ao(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Ck=ao(["table"]),wk=Io,Cr=e=>!wk(e)&&(yk(e)?!_k(e.parentNode):lb(e)||vk(e)||Ck(e)||ff(e)),ff=e=>!(t=>he(t)&&t.getAttribute("unselectable")==="true")(e)&&bk(e),cb=(e,t)=>Cr(e)&&((n,o)=>{for(let r=n.parentNode;r&&r!==o;r=r.parentNode){if(ff(r))return!1;if(ab(r))return!0}return!0})(e,t),db=he,Ek=Cr,ub=hs("display","block table"),xk=hs("float","left right"),Oc=((...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0})(db,Ek,On(xk)),kk=On(hs("white-space","pre pre-line pre-wrap")),Rc=X,gf=Tt,mb=ot.nodeIndex,fu=(e,t)=>t<0&&he(e)&&e.hasChildNodes()?void 0:Js(e,t),pf=e=>e?e.createRange():ot.DOM.createRng(),hf=e=>se(e)&&/[\r\n\t ]/.test(e),fb=e=>!!e.setStart&&!!e.setEnd,bf=e=>{const t=e.startContainer,n=e.startOffset;if(hf(e.toString())&&kk(t.parentNode)&&X(t)){const o=t.data;if(hf(o[n-1])||hf(o[n+1]))return!0}return!1},gb=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,ei=e=>{var t;let n;const o=e.getClientRects();return n=o.length>0?zi(o[0]):zi(e.getBoundingClientRect()),!fb(e)&&gf(e)&&gb(n)?(r=>{const s=r.ownerDocument,i=pf(s),a=s.createTextNode(nn),l=r.parentNode;l.insertBefore(a,r),i.setStart(a,0),i.setEnd(a,1);const c=zi(i.getBoundingClientRect());return l.removeChild(a),c})(e):gb(n)&&fb(e)&&(t=(r=>{const s=r.startContainer,i=r.endContainer,a=r.startOffset,l=r.endOffset;if(s===i&&X(i)&&a===0&&l===1){const c=r.cloneRange();return c.setEndAfter(i),ei(c)}return null})(e))!==null&&t!==void 0?t:n},Ui=(e,t)=>{const n=ob(e,t);return n.width=1,n.right=n.left+1,n},U=(e,t,n)=>{const o=()=>(n||(n=(r=>{const s=[],i=d=>{var u,f;d.height!==0&&(s.length>0&&(u=d,f=s[s.length-1],u.left===f.left&&u.top===f.top&&u.bottom===f.bottom&&u.right===f.right)||s.push(d))},a=(d,u)=>{const f=pf(d.ownerDocument);if(u<d.data.length){if(ib(d.data[u]))return;if(ib(d.data[u-1])&&(f.setStart(d,u),f.setEnd(d,u+1),!bf(f)))return void i(Ui(ei(f),!1))}u>0&&(f.setStart(d,u-1),f.setEnd(d,u),bf(f)||i(Ui(ei(f),!1))),u<d.data.length&&(f.setStart(d,u),f.setEnd(d,u+1),bf(f)||i(Ui(ei(f),!0)))},l=r.container(),c=r.offset();if(Rc(l))return a(l,c),s;if(db(l))if(r.isAtEnd()){const d=fu(l,c);Rc(d)&&a(d,d.data.length),Oc(d)&&!gf(d)&&i(Ui(ei(d),!1))}else{const d=fu(l,c);if(Rc(d)&&a(d,0),Oc(d)&&r.isAtEnd())return i(Ui(ei(d),!1)),s;const u=fu(r.container(),r.offset()-1);Oc(u)&&!gf(u)&&(ub(u)||ub(d)||!Oc(d))&&i(Ui(ei(u),!1)),Oc(d)&&i(Ui(ei(d),!0))}return s})(U(e,t))),n);return{container:K(e),offset:K(t),toRange:()=>{const r=pf(e.ownerDocument);return r.setStart(e,t),r.setEnd(e,t),r},getClientRects:o,isVisible:()=>o().length>0,isAtStart:()=>(Rc(e),t===0),isAtEnd:()=>Rc(e)?t>=e.data.length:t>=e.childNodes.length,isEqual:r=>r&&e===r.container()&&t===r.offset(),getNode:r=>fu(e,r?t-1:t)}};U.fromRangeStart=e=>U(e.startContainer,e.startOffset),U.fromRangeEnd=e=>U(e.endContainer,e.endOffset),U.after=e=>U(e.parentNode,mb(e)+1),U.before=e=>U(e.parentNode,mb(e)),U.isAbove=(e,t)=>bn(on(t.getClientRects()),oo(e.getClientRects()),Nc).getOr(!1),U.isBelow=(e,t)=>bn(oo(t.getClientRects()),on(e.getClientRects()),Tc).getOr(!1),U.isAtStart=e=>!!e&&e.isAtStart(),U.isAtEnd=e=>!!e&&e.isAtEnd(),U.isTextPosition=e=>!!e&&X(e.container()),U.isElementPosition=e=>!U.isTextPosition(e);const gu=(e,t)=>{X(t)&&t.data.length===0&&e.remove(t)},vf=(e,t,n)=>{oc(n)?((o,r,s)=>{const i=w.from(s.firstChild),a=w.from(s.lastChild);r.insertNode(s),i.each(l=>gu(o,l.previousSibling)),a.each(l=>gu(o,l.nextSibling))})(e,t,n):((o,r,s)=>{r.insertNode(s),gu(o,s.previousSibling),gu(o,s.nextSibling)})(e,t,n)},wr=X,pb=Fr,hb=ot.nodeIndex,bb=e=>{const t=e.parentNode;return pb(t)?bb(t):t},yf=e=>e?ma(e.childNodes,(t,n)=>(pb(n)&&n.nodeName!=="BR"?t=t.concat(yf(n)):t.push(n),t),[]):[],vb=e=>t=>e===t,yb=e=>(wr(e)?"text()":e.nodeName.toLowerCase())+"["+(t=>{let n,o;n=yf(bb(t)),o=Ad(n,vb(t),t),n=n.slice(0,o+1);const r=ma(n,(s,i,a)=>(wr(i)&&wr(n[a-1])&&s++,s),0);return n=bi(n,ao([t.nodeName])),o=Ad(n,vb(t),t),o-r})(e)+"]",_b=(e,t)=>{let n,o=[],r=t.container(),s=t.offset();if(wr(r))n=((a,l)=>{let c=a;for(;(c=c.previousSibling)&&wr(c);)l+=c.data.length;return l})(r,s);else{const a=r.childNodes;s>=a.length?(n="after",s=a.length-1):n="before",r=a[s]}o.push(yb(r));let i=((a,l,c)=>{const d=[];for(let u=l.parentNode;u&&u!==a;u=u.parentNode)d.push(u);return d})(e,r);return i=bi(i,On(Fr)),o=o.concat(El(i,a=>yb(a))),o.reverse().join("/")+","+n},Cb=(e,t)=>{if(!t)return null;const n=t.split(","),o=n[0].split("/"),r=n.length>1?n[1]:"before",s=ma(o,(i,a)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(a);return l?(l[1]==="text()"&&(l[1]="#text"),((c,d,u)=>{let f=yf(c);return f=bi(f,(h,g)=>!wr(h)||!wr(f[g-1])),f=bi(f,ao([d])),f[u]})(i,l[1],parseInt(l[2],10))):null},e);if(!s)return null;if(!wr(s)&&s.parentNode){let i;return i=r==="after"?hb(s)+1:hb(s),U(s.parentNode,i)}return((i,a)=>{let l=i,c=0;for(;wr(l);){const d=l.data.length;if(a>=c&&a<=c+d){i=l,a-=c;break}if(!wr(l.nextSibling)){i=l,a=d;break}c+=d,l=l.nextSibling}return wr(i)&&a>i.data.length&&(a=i.data.length),U(i,a)})(s,parseInt(r,10))},pu=wt,wb=(e,t,n,o,r)=>{const s=r?o.startContainer:o.endContainer;let i=r?o.startOffset:o.endOffset;const a=[],l=e.getRoot();if(X(s))a.push(n?((c,d,u)=>{let f=c(d.data.slice(0,u)).length;for(let h=d.previousSibling;h&&X(h);h=h.previousSibling)f+=c(h.data).length;return f})(t,s,i):i);else{let c=0;const d=s.childNodes;i>=d.length&&d.length&&(c=1,i=Math.max(0,d.length-1)),a.push(e.nodeIndex(d[i],n)+c)}for(let c=s;c&&c!==l;c=c.parentNode)a.push(e.nodeIndex(c,n));return a},_f=(e,t,n)=>{let o=0;return Q.each(e.select(t),r=>r.getAttribute("data-mce-bogus")==="all"?void 0:r!==n&&void o++),o},Eb=(e,t)=>{let n=t?e.startContainer:e.endContainer,o=t?e.startOffset:e.endOffset;if(he(n)&&n.nodeName==="TR"){const r=n.childNodes;n=r[Math.min(t?o:o-1,r.length-1)],n&&(o=t?0:n.childNodes.length,t?e.setStart(n,o):e.setEnd(n,o))}},xb=e=>(Eb(e,!0),Eb(e,!1),e),kb=(e,t)=>{if(he(e)&&(e=Js(e,t),pu(e)))return e;if(Io(e)){X(e)&&Ha(e)&&(e=e.parentNode);let n=e.previousSibling;if(pu(n)||(n=e.nextSibling,pu(n)))return n}},Sb=(e,t,n)=>{const o=n.getNode(),r=n.getRng();if(o.nodeName==="IMG"||pu(o)){const i=o.nodeName;return{name:i,index:_f(n.dom,i,o)}}const s=(i=>kb(i.startContainer,i.startOffset)||kb(i.endContainer,i.endOffset))(r);if(s){const i=s.tagName;return{name:i,index:_f(n.dom,i,s)}}return((i,a,l,c)=>{const d=a.dom,u=wb(d,i,l,c,!0),f=a.isForward(),h=nb(c)?{isFakeCaret:!0}:{};return a.isCollapsed()?{start:u,forward:f,...h}:{start:u,end:wb(d,i,l,c,!1),forward:f,...h}})(e,n,t,r)},Ab=(e,t,n)=>{const o={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",o,"&#xFEFF;"):e.create("span",o)},Nb=(e,t)=>{const n=e.dom;let o=e.getRng();const r=n.uniqueId(),s=e.isCollapsed(),i=e.getNode(),a=i.nodeName,l=e.isForward();if(a==="IMG")return{name:a,index:_f(n,a,i)};const c=xb(o.cloneRange());if(!s){c.collapse(!1);const u=Ab(n,r+"_end",t);vf(n,c,u)}o=xb(o),o.collapse(!0);const d=Ab(n,r+"_start",t);return vf(n,o,d),e.moveToBookmark({id:r,keep:!0,forward:l}),{id:r,forward:l}},Cf=ae(Sb,Be,!0),Tb=e=>{const t=s=>s(e),n=K(e),o=()=>r,r={tag:!0,inner:e,fold:(s,i)=>i(e),isValue:St,isError:ft,map:s=>Zn.value(s(e)),mapError:o,bind:t,exists:t,forall:t,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:s=>{s(e)},toOptional:()=>w.some(e)};return r},Ob=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(o,r)=>o(e),isValue:ft,isError:St,map:t,mapError:o=>Zn.error(o(e)),bind:t,exists:ft,forall:St,getOr:Be,or:Be,getOrThunk:po,orThunk:po,getOrDie:Yo(String(e)),each:Te,toOptional:w.none};return n},Zn={value:Tb,error:Ob,fromOption:(e,t)=>e.fold(()=>Ob(t),Tb)},Ur=e=>{if(!Xe(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const t=[],n={};return W(e,(o,r)=>{const s=In(o);if(s.length!==1)throw new Error("one and only one name per case");const i=s[0],a=o[i];if(n[i]!==void 0)throw new Error("duplicate key detected:"+i);if(i==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Xe(a))throw new Error("case arguments must be an array");t.push(i),n[i]=(...l)=>{const c=l.length;if(c!==a.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+a.length+" ("+a+"), got "+c);return{fold:(...d)=>{if(d.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+d.length);return d[r].apply(null,l)},match:d=>{const u=In(d);if(t.length!==u.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+u.join(","));if(!cr(t,f=>ee(u,f)))throw new Error("Not all branches were specified when using match. Specified: "+u.join(", ")+`
Required: `+t.join(", "));return d[i].apply(null,l)},log:d=>{console.log(d,{constructors:t,constructor:i,params:l})}}}}),n};Ur([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Sk=e=>e.type==="inline-command"||e.type==="inline-format",Ak=e=>e.type==="block-command"||e.type==="block-format",Nk=e=>{var t;const n=r=>Zn.error({message:r,pattern:e}),o=(r,s,i)=>{if(e.format!==void 0){let a;if(Xe(e.format)){if(!cr(e.format,se))return n(r+" pattern has non-string items in the `format` array");a=e.format}else{if(!se(e.format))return n(r+" pattern has non-string `format` parameter");a=[e.format]}return Zn.value(s(a))}return e.cmd!==void 0?se(e.cmd)?Zn.value(i(e.cmd,e.value)):n(r+" pattern has non-string `cmd` parameter"):n(r+" pattern is missing both `format` and `cmd` parameters")};if(!dt(e))return n("Raw pattern is not an object");if(!se(e.start))return n("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!se(e.end))return n("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return n("Inline pattern has empty `start` and `end` parameters");let r=e.start,s=e.end;return s.length===0&&(s=r,r=""),o("Inline",i=>({type:"inline-format",start:r,end:s,format:i}),(i,a)=>({type:"inline-command",start:r,end:s,cmd:i,value:a}))}if(e.replacement!==void 0)return se(e.replacement)?e.start.length===0?n("Replacement pattern has empty `start` parameter"):Zn.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):n("Replacement pattern has non-string `replacement` parameter");{const r=(t=e.trigger)!==null&&t!==void 0?t:"space";return e.start.length===0?n("Block pattern has empty `start` parameter"):o("Block",s=>({type:"block-format",start:e.start,format:s[0],trigger:r}),(s,i)=>({type:"block-command",start:e.start,cmd:s,value:i,trigger:r}))}},Rb=e=>ue(e,Ak),Bb=e=>ue(e,Sk),wf=(e,t)=>({...e,blockPatterns:ue(e.blockPatterns,n=>((o,r)=>(o.type==="block-command"||o.type==="block-format")&&o.trigger===r)(n,t))}),Db=e=>{const t=(n=>{const o=[],r=[];return W(n,s=>{s.fold(i=>{o.push(i)},i=>{r.push(i)})}),{errors:o,values:r}})(Me(e,Nk));return W(t.errors,n=>console.error(n.message,n.pattern)),t.values},Ef=Ao().deviceType,Tk=Ef.isTouch(),Ok=ot.DOM,Pb=e=>Je(e,RegExp),de=e=>t=>t.options.get(e),hu=e=>se(e)||dt(e),Lb=(e,t="")=>n=>{const o=se(n);if(o){if(n.indexOf("=")!==-1){const r=(s=>{const i=s.indexOf("=")>0?s.split(/[;,](?![^=;,]*(?:[;,]|$))/):s.split(",");return Lt(i,(a,l)=>{const c=l.split("="),d=c[0],u=c.length>1?c[1]:d;return a[mr(d)]=mr(u),a},{})})(n);return{value:At(r,e.id).getOr(t),valid:o}}return{value:n,valid:o}}return{valid:!1,message:"Must be a string."}},Rk=de("iframe_attrs"),Bk=de("doctype"),Mb=de("document_base_url"),Dk=de("body_id"),Pk=de("body_class"),Ib=de("content_security_policy"),Lk=de("br_in_pre"),Pn=de("forced_root_block"),Bc=de("forced_root_block_attrs"),Mk=de("newline_behavior"),Ik=de("br_newline_selector"),Fk=de("no_newline_selector"),jk=de("keep_styles"),$k=de("end_container_on_empty_block"),Fb=de("automatic_uploads"),jb=de("images_reuse_filename"),zk=de("images_replace_blob_uris"),$b=de("icons"),Uk=de("icons_url"),Hk=de("images_upload_url"),qk=de("images_upload_base_path"),Wk=de("images_upload_credentials"),Vk=de("images_upload_handler"),Kk=de("content_css_cors"),xf=de("referrer_policy"),zb=de("language"),Yk=de("language_url"),Ub=de("indent_use_margin"),Xk=de("indentation"),Gk=de("content_css"),Qk=de("content_style"),Hb=de("font_css"),Zk=de("directionality"),Jk=de("inline_boundaries_selector"),qb=de("object_resizing"),eS=de("resize_img_proportional"),tS=de("placeholder"),Wb=de("event_root"),nS=de("service_message"),Wa=de("theme"),oS=de("theme_url"),kf=de("model"),rS=de("model_url"),Dc=de("inline_boundaries"),sS=de("formats"),iS=de("preview_styles"),aS=de("format_empty_lines"),lS=de("format_noneditable_selector"),cS=de("custom_ui_selector"),Sf=de("inline"),dS=de("hidden_input"),uS=de("submit_patch"),mS=de("add_form_submit_trigger"),fS=de("add_unload_trigger"),gS=de("custom_undo_redo_levels"),pS=de("disable_nodechange"),Vb=de("readonly"),hS=de("editable_root"),Kb=de("content_css_cors"),bu=de("plugins"),bS=de("external_plugins"),vS=de("block_unsupported_drop"),yS=de("visual"),_S=de("visual_table_class"),Yb=de("visual_anchor_class"),Xb=de("iframe_aria_text"),CS=de("setup"),wS=de("init_instance_callback"),ES=de("urlconverter_callback"),xS=de("auto_focus"),kS=de("browser_spellcheck"),SS=de("protect"),AS=de("paste_block_drop"),vu=de("paste_data_images"),NS=de("paste_preprocess"),TS=de("paste_postprocess"),OS=de("newdocument_content"),RS=de("paste_webkit_styles"),BS=de("paste_remove_styles_if_webkit"),DS=de("paste_merge_formats"),PS=de("smart_paste"),LS=de("paste_as_text"),MS=de("paste_tab_spaces"),IS=de("allow_html_data_urls"),FS=de("text_patterns"),jS=de("text_patterns_lookup"),Gb=de("noneditable_class"),$S=de("editable_class"),zS=de("noneditable_regexp"),US=de("preserve_cdata"),HS=de("highlight_on_focus"),Qb=de("xss_sanitization"),qS=de("init_content_sync"),Zb=e=>Q.explode(e.options.get("images_file_types")),WS=de("table_tab_navigation"),VS=de("details_initial_state"),KS=de("details_serialized_state"),Jb=de("sandbox_iframes"),Af=e=>e.options.get("sandbox_iframes_exclusions"),YS=de("convert_unsafe_embeds"),XS=de("license_key"),GS=de("api_key"),QS=he,ev=X,tv=e=>{const t=e.parentNode;t&&t.removeChild(e)},nv=e=>{const t=Co(e);return{count:e.length-t.length,text:t}},ov=e=>{let t;for(;(t=e.data.lastIndexOf(yn))!==-1;)e.deleteData(t,1)},rv=(e,t)=>(Hi(e),t),ZS=(e,t)=>U.isTextPosition(t)?((n,o)=>ev(n)&&o.container()===n?((r,s)=>{const i=nv(r.data.substr(0,s.offset())),a=nv(r.data.substr(s.offset()));return(i.text+a.text).length>0?(ov(r),U(r,s.offset()-i.count)):s})(n,o):rv(n,o))(e,t):((n,o)=>o.container()===n.parentNode?((r,s)=>{const i=s.container(),a=((l,c)=>{const d=Jt(l,c);return d===-1?w.none():w.some(d)})(An(i.childNodes),r).map(l=>l<s.offset()?U(i,s.offset()-1):s).getOr(s);return Hi(r),a})(n,o):rv(n,o))(e,t),Hi=e=>{QS(e)&&Io(e)&&(tb(e)?e.removeAttribute("data-mce-caret"):tv(e)),ev(e)&&(ov(e),e.data.length===0&&tv(e))},JS=wt,eA=yo,tA=Da,sv=(e,t,n)=>{const o=ob(t.getBoundingClientRect(),n);let r,s;if(e.tagName==="BODY"){const a=e.ownerDocument.documentElement;r=e.scrollLeft||a.scrollLeft,s=e.scrollTop||a.scrollTop}else{const a=e.getBoundingClientRect();r=e.scrollLeft-a.left,s=e.scrollTop-a.top}o.left+=r,o.right+=r,o.top+=s,o.bottom+=s,o.width=1;let i=t.offsetWidth-t.clientWidth;return i>0&&(n&&(i*=-1),o.left+=i,o.right+=i),o},nA=(e,t,n,o)=>{const r=br();let s,i;const a=Pn(e),l=e.dom,c=()=>{(d=>{var u,f;const h=vn(B(d),"*[contentEditable=false],video,audio,embed,object");for(let g=0;g<h.length;g++){const b=h[g].dom;let p=b.previousSibling;if(uu(p)){const v=p.data;v.length===1?(u=p.parentNode)===null||u===void 0||u.removeChild(p):p.deleteData(v.length-1,1)}p=b.nextSibling,du(p)&&(p.data.length===1?(f=p.parentNode)===null||f===void 0||f.removeChild(p):p.deleteData(0,1))}})(t),i&&(Hi(i),i=null),r.on(d=>{l.remove(d.caret),r.clear()}),s&&(clearInterval(s),s=void 0)};return{show:(d,u)=>{let f;if(c(),tA(u))return null;if(!n(u))return i=((h,g)=>{var b;const p=((b=h.ownerDocument)!==null&&b!==void 0?b:document).createTextNode(yn),v=h.parentNode;if(g){const _=h.previousSibling;if(Ua(_)){if(Io(_))return _;if(uu(_))return _.splitText(_.data.length-1)}v?.insertBefore(p,h)}else{const _=h.nextSibling;if(Ua(_)){if(Io(_))return _;if(du(_))return _.splitText(1),_}h.nextSibling?v?.insertBefore(p,h.nextSibling):v?.appendChild(p)}return p})(u,d),f=u.ownerDocument.createRange(),Pc(i.nextSibling)?(f.setStart(i,0),f.setEnd(i,0)):(f.setStart(i,1),f.setEnd(i,1)),f;{const h=((p,v,_)=>{var C;const E=((C=v.ownerDocument)!==null&&C!==void 0?C:document).createElement(p);E.setAttribute("data-mce-caret",_?"before":"after"),E.setAttribute("data-mce-bogus","all"),E.appendChild(za().dom);const x=v.parentNode;return _?x?.insertBefore(E,v):v.nextSibling?x?.insertBefore(E,v.nextSibling):x?.appendChild(E),E})(a,u,d),g=sv(t,u,d);l.setStyle(h,"top",g.top),l.setStyle(h,"caret-color","transparent"),i=h;const b=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(b,{...g}),l.add(t,b),r.set({caret:b,element:u,before:d}),d&&l.addClass(b,"mce-visual-caret-before"),s=setInterval(()=>{r.on(p=>{o()?l.toggleClass(p.caret,"mce-visual-caret-hidden"):l.addClass(p.caret,"mce-visual-caret-hidden")})},500),f=u.ownerDocument.createRange(),f.setStart(h,0),f.setEnd(h,0)}return f},hide:c,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{r.on(d=>{const u=sv(t,d.element,d.before);l.setStyles(d.caret,{...u})})},destroy:()=>clearInterval(s)}},iv=()=>qe.browser.isFirefox(),Pc=e=>JS(e)||eA(e),Lc=e=>(Pc(e)||Lo(e)&&iv())&&Ei(B(e)).exists(ds),oA=vo,Nf=wt,rA=yo,av=hs("display","block table table-cell table-caption list-item"),lv=Io,cv=Ha,sA=he,iA=X,aA=Cr,Va=e=>e>0,qi=e=>e<0,yu=(e,t)=>{let n;for(;n=e(t);)if(!cv(n))return n;return null},Mc=(e,t,n,o,r)=>{const s=new an(e,o),i=Nf(e)||cv(e);let a;if(qi(t)){if(i&&(a=yu(s.prev.bind(s),!0),n(a)))return a;for(;a=yu(s.prev.bind(s),r);)if(n(a))return a}if(Va(t)){if(i&&(a=yu(s.next.bind(s),!0),n(a)))return a;for(;a=yu(s.next.bind(s),r);)if(n(a))return a}return null},ti=(e,t)=>{for(;e&&e!==t;){if(av(e))return e;e=e.parentNode}return null},Hr=(e,t,n)=>ti(e.container(),n)===ti(t.container(),n),Tf=(e,t)=>{if(!t)return w.none();const n=t.container(),o=t.offset();return sA(n)?w.from(n.childNodes[o+e]):w.none()},dv=(e,t)=>{var n;const o=((n=t.ownerDocument)!==null&&n!==void 0?n:document).createRange();return e?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)),o},lA=(e,t,n)=>ti(t,e)===ti(n,e),uv=(e,t,n)=>{const o=e?"previousSibling":"nextSibling";let r=n;for(;r&&r!==t;){let s=r[o];if(s&&lv(s)&&(s=s[o]),Nf(s)||rA(s)){if(lA(t,s,r))return s;break}if(aA(s))break;r=r.parentNode}return null},Ic=ae(dv,!0),Fc=ae(dv,!1),Of=(e,t,n)=>{let o;const r=ae(uv,!0,t),s=ae(uv,!1,t),i=n.startContainer,a=n.startOffset;if(Ha(i)){const l=iA(i)?i.parentNode:i,c=l.getAttribute("data-mce-caret");if(c==="before"&&(o=l.nextSibling,Lc(o)))return Ic(o);if(c==="after"&&(o=l.previousSibling,Lc(o)))return Fc(o)}if(!n.collapsed)return n;if(X(i)){if(lv(i)){if(e===1){if(o=s(i),o)return Ic(o);if(o=r(i),o)return Fc(o)}if(e===-1){if(o=r(i),o)return Fc(o);if(o=s(i),o)return Ic(o)}return n}if(uu(i)&&a>=i.data.length-1)return e===1&&(o=s(i),o)?Ic(o):n;if(du(i)&&a<=1)return e===-1&&(o=r(i),o)?Fc(o):n;if(a===i.data.length)return o=s(i),o?Ic(o):n;if(a===0)return o=r(i),o?Fc(o):n}return n},mv=(e,t)=>Tf(e?0:-1,t).filter(Nf),jc=(e,t,n)=>{const o=Of(e,t,n);return e===-1?U.fromRangeStart(o):U.fromRangeEnd(o)},_u=e=>w.from(e.getNode()).map(B),Rf=(e,t)=>{let n=t;for(;n=e(n);)if(n.isVisible())return n;return n},Cu=(e,t)=>{const n=Hr(e,t);return!(n||!Tt(e.getNode()))||n};var _n;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(_n||(_n={}));const cA=wt,qr=X,fv=he,Bf=Tt,Ka=Cr,gv=e=>lb(e)||(t=>!!ff(t)&&!Lt(An(t.getElementsByTagName("*")),(n,o)=>n||ab(o),!1))(e),wu=cb,pv=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,hv=(e,t)=>{if(Va(e)){if(Ka(t.previousSibling)&&!qr(t.previousSibling))return U.before(t);if(qr(t))return U(t,0)}if(qi(e)){if(Ka(t.nextSibling)&&!qr(t.nextSibling))return U.after(t);if(qr(t))return U(t,t.data.length)}return qi(e)?Bf(t)?U.before(t):U.after(t):U.before(t)},Df=(e,t,n)=>{let o,r,s,i;if(!fv(n)||!t)return null;if(t.isEqual(U.after(n))&&n.lastChild){if(i=U.after(n.lastChild),qi(e)&&Ka(n.lastChild)&&fv(n.lastChild))return Bf(n.lastChild)?U.before(n.lastChild):i}else i=t;const a=i.container();let l=i.offset();if(qr(a)){if(qi(e)&&l>0)return U(a,--l);if(Va(e)&&l<a.length)return U(a,++l);o=a}else{if(qi(e)&&l>0&&(r=pv(a,l-1),Ka(r)))return!gv(r)&&(s=Mc(r,e,wu,r),s)?qr(s)?U(s,s.data.length):U.after(s):qr(r)?U(r,r.data.length):U.before(r);if(Va(e)&&l<a.childNodes.length&&(r=pv(a,l),Ka(r)))return Bf(r)?((d,u)=>{const f=u.nextSibling;return f&&Ka(f)?qr(f)?U(f,0):U.before(f):Df(_n.Forwards,U.after(u),d)})(n,r):!gv(r)&&(s=Mc(r,e,wu,r),s)?qr(s)?U(s,0):U.before(s):qr(r)?U(r,0):U.after(r);o=r||i.getNode()}if(o&&(Va(e)&&i.isAtEnd()||qi(e)&&i.isAtStart())&&(o=Mc(o,e,St,n,!0),wu(o,n)))return hv(e,o);r=o&&Mc(o,e,wu,n);const c=ur(ue(((d,u)=>{const f=[];let h=d;for(;h&&h!==u;)f.push(h),h=h.parentNode;return f})(a,n),cA));return!c||r&&c.contains(r)?r?hv(e,r):null:(i=Va(e)?U.after(c):U.before(c),i)},Wr=e=>({next:t=>Df(_n.Forwards,t,e),prev:t=>Df(_n.Backwards,t,e)}),bv=e=>U.isTextPosition(e)?e.offset()===0:Cr(e.getNode()),vv=e=>{if(U.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}return Cr(e.getNode(!0))},yv=(e,t)=>!U.isTextPosition(e)&&!U.isTextPosition(t)&&e.getNode()===t.getNode(!0),Fo=(e,t,n)=>{const o=Wr(t);return w.from(e?o.next(n):o.prev(n))},Ya=(e,t,n)=>Fo(e,t,n).bind(o=>Hr(n,o,t)&&((r,s,i)=>{return r?!yv(s,i)&&(a=s,!(!U.isTextPosition(a)&&Tt(a.getNode())))&&vv(s)&&bv(i):!yv(i,s)&&bv(s)&&vv(i);var a})(e,n,o)?Fo(e,t,o):w.some(o)),_v=(e,t,n,o)=>Ya(e,t,n).bind(r=>o(r)?_v(e,t,r,o):w.some(r)),Xa=(e,t)=>{const n=e?t.firstChild:t.lastChild;return X(n)?w.some(U(n,e?0:n.data.length)):n?Cr(n)?w.some(e?U.before(n):Tt(o=n)?U.before(o):U.after(o)):((r,s,i)=>{const a=r?U.before(i):U.after(i);return Fo(r,s,a)})(e,t,n):w.none();var o},Jn=ae(Fo,!0),mo=ae(Fo,!1),Ln=ae(Xa,!0),rr=ae(Xa,!1),Pf="_mce_caret",jo=e=>he(e)&&e.id===Pf,Wi=(e,t)=>{let n=t;for(;n&&n!==e;){if(jo(n))return n;n=n.parentNode}return null},Cv=e=>Re(e,"name"),wv=e=>Q.isArray(e.start),Eu=e=>!(!Cv(e)&&Tn(e.forward))||e.forward,Ev=(e,t)=>(he(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),dA=(e,t)=>rr(e).fold(ft,n=>(t.setStart(n.container(),n.offset()),t.setEnd(n.container(),n.offset()),!0)),xv=(e,t,n)=>!(!(o=>!o.hasChildNodes())(t)||!Wi(e,t)||(((o,r)=>{var s;const i=((s=o.ownerDocument)!==null&&s!==void 0?s:document).createTextNode(yn);o.appendChild(i),r.setStart(i,0),r.setEnd(i,0)})(t,n),0)),kv=(e,t,n,o)=>{const r=n[t?"start":"end"],s=e.getRoot();if(r){let i=s,a=r[0];for(let l=r.length-1;i&&l>=1;l--){const c=i.childNodes;if(xv(s,i,o))return!0;if(r[l]>c.length-1)return!!xv(s,i,o)||dA(i,o);i=c[r[l]]}X(i)&&(a=Math.min(r[0],i.data.length)),he(i)&&(a=Math.min(r[0],i.childNodes.length)),t?o.setStart(i,a):o.setEnd(i,a)}return!0},Lf=e=>X(e)&&e.data.length>0,Sv=(e,t,n)=>{const o=e.get(n.id+"_"+t),r=o?.parentNode,s=n.keep;if(o&&r){let i,a;if(t==="start"?s?o.hasChildNodes()?(i=o.firstChild,a=1):Lf(o.nextSibling)?(i=o.nextSibling,a=0):Lf(o.previousSibling)?(i=o.previousSibling,a=o.previousSibling.data.length):(i=r,a=e.nodeIndex(o)+1):(i=r,a=e.nodeIndex(o)):s?o.hasChildNodes()?(i=o.firstChild,a=1):Lf(o.previousSibling)?(i=o.previousSibling,a=o.previousSibling.data.length):(i=r,a=e.nodeIndex(o)):(i=r,a=e.nodeIndex(o)),!s){const l=o.previousSibling,c=o.nextSibling;let d;for(Q.each(Q.grep(o.childNodes),u=>{X(u)&&(u.data=u.data.replace(/\uFEFF/g,""))});d=e.get(n.id+"_"+t);)e.remove(d,!0);if(X(c)&&X(l)&&!qe.browser.isOpera()){const u=l.data.length;l.appendData(c.data),e.remove(c),i=l,a=u}}return w.some(U(i,a))}return w.none()},uA=(e,t,n)=>((o,r,s=!1)=>r===2?Sb(Co,s,o):r===3?(i=>{const a=i.getRng();return{start:_b(i.dom.getRoot(),U.fromRangeStart(a)),end:_b(i.dom.getRoot(),U.fromRangeEnd(a)),forward:i.isForward()}})(o):r?(i=>({rng:i.getRng(),forward:i.isForward()}))(o):Nb(o,!1))(e,t,n),mA=(e,t)=>{((n,o)=>{const r=n.dom;if(o){if(wv(o))return((s,i)=>{const a=s.createRng();return kv(s,!0,i,a)&&kv(s,!1,i,a)?w.some({range:a,forward:Eu(i)}):w.none()})(r,o);if((s=>se(s.start))(o))return((s,i)=>{const a=w.from(Cb(s.getRoot(),i.start)),l=w.from(Cb(s.getRoot(),i.end));return bn(a,l,(c,d)=>{const u=s.createRng();return u.setStart(c.container(),c.offset()),u.setEnd(d.container(),d.offset()),{range:u,forward:Eu(i)}})})(r,o);if((s=>Re(s,"id"))(o))return((s,i)=>{const a=Sv(s,"start",i),l=Sv(s,"end",i);return bn(a,l.or(a),(c,d)=>{const u=s.createRng();return u.setStart(Ev(s,c.container()),c.offset()),u.setEnd(Ev(s,d.container()),d.offset()),{range:u,forward:Eu(i)}})})(r,o);if(Cv(o))return((s,i)=>w.from(s.select(i.name)[i.index]).map(a=>{const l=s.createRng();return l.selectNode(a),{range:l,forward:!0}}))(r,o);if((s=>Re(s,"rng"))(o))return w.some({range:o.rng,forward:Eu(o)})}return w.none()})(e,t).each(({range:n,forward:o})=>{e.setRng(n,o)})},$o=e=>he(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",xu=(Av=nn,e=>Av===e);var Av;const Vi=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,Mf=e=>!Vi(e)&&!xu(e)&&!Po(e),If=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},Nv=(e,t)=>{const n=vn(t,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:(o=>ue((r=>no(r,s=>{const i=mu(s);return i?[B(i)]:[]}))(o),Ac))(e)},Ga=e=>Nv(If(e.selection.getSel()),B(e.getBody())),$c=(e,t)=>ki(e,"table",t),Tv=e=>ql(e).fold(K([e]),t=>[e].concat(Tv(t))),Ff=e=>Wl(e).fold(K([e]),t=>We(t)==="br"?io(t).map(n=>[e].concat(Ff(n))).getOr([]):[e].concat(Ff(t))),jf=(e,t)=>bn((n=>{const o=n.startContainer,r=n.startOffset;return X(o)?r===0?w.some(B(o)):w.none():w.from(o.childNodes[r]).map(B)})(t),(n=>{const o=n.endContainer,r=n.endOffset;return X(o)?r===o.data.length?w.some(B(o)):w.none():w.from(o.childNodes[r-1]).map(B)})(t),(n,o)=>{const r=en(Tv(e),ae(tt,n)),s=en(Ff(e),ae(tt,o));return r.isSome()&&s.isSome()}).getOr(!1),$f=(e,t,n,o)=>{const r=n,s=new an(n,r),i=Ar(e.schema.getMoveCaretBeforeOnEnterElements(),(l,c)=>!ee(["td","th","table"],c.toLowerCase()));let a=n;do{if(X(a)&&Q.trim(a.data).length!==0)return void(o?t.setStart(a,0):t.setEnd(a,a.data.length));if(i[a.nodeName])return void(o?t.setStartBefore(a):a.nodeName==="BR"?t.setEndBefore(a):t.setEndAfter(a))}while(a=o?s.next():s.prev());r.nodeName==="BODY"&&(o?t.setStart(r,0):t.setEnd(r,r.childNodes.length))},ku=e=>{const t=e.selection.getSel();return Z(t)&&t.rangeCount>0},zf=(e,t)=>{const n=Ga(e);n.length>0?W(n,o=>{const r=o.dom,s=e.dom.createRng();s.setStartBefore(r),s.setEndAfter(r),t(s,!0)}):t(e.selection.getRng(),!1)},Ov=(e,t,n)=>{const o=Nb(e,t);n(o),e.moveToBookmark(o)},zc=e=>st(e?.nodeType),Uf=e=>he(e)&&!$o(e)&&!jo(e)&&!Fr(e),Rv=(e,t,n)=>{const{selection:o,dom:r}=e,s=o.getNode(),i=wt(s);Ov(o,!0,()=>{t()}),i&&wt(s)&&r.isChildOf(s,e.getBody())?e.selection.select(s):n(o.getStart())&&fA(r,o)},fA=(e,t)=>{var n,o;const r=t.getRng(),{startContainer:s,startOffset:i}=r;if(!((a,l)=>{if(Uf(l)&&!/^(TD|TH)$/.test(l.nodeName)){const c=a.getAttrib(l,"data-mce-selected"),d=parseInt(c,10);return!isNaN(d)&&d>0}return!1})(e,t.getNode())&&he(s)){const a=s.childNodes,l=e.getRoot();let c;if(i<a.length){const d=a[i];c=new an(d,(n=e.getParent(d,e.isBlock))!==null&&n!==void 0?n:l)}else{const d=a[a.length-1];c=new an(d,(o=e.getParent(d,e.isBlock))!==null&&o!==void 0?o:l),c.next(!0)}for(let d=c.current();d;d=c.next()){if(e.getContentEditable(d)==="false")return;if(X(d)&&!qf(d))return r.setStart(d,0),void t.setRng(r)}}},Bv=(e,t,n)=>{if(e){const o=t?"nextSibling":"previousSibling";for(e=n?e:e[o];e;e=e[o])if(he(e)||!qf(e))return e}},Hf=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||vs(e,t),Qa=(e,t,n)=>e.schema.isValidChild(t,n),qf=(e,t=!1)=>{if(Z(e)&&X(e)){const n=t?e.data.replace(/ /g,"\xA0"):e.data;return qs(n)}return!1},Dv=(e,t)=>{const n=e.dom;return Uf(t)&&n.getContentEditable(t)==="false"&&((o,r)=>{const s="[data-mce-cef-wrappable]",i=lS(o),a=Rs(i)?s:`${s},${i}`;return so(B(r),a)})(e,t)&&n.select('[contenteditable="true"]',t).length===0},ni=(e,t)=>Ge(e)?e(t):(Z(t)&&(e=e.replace(/%(\w+)/g,(n,o)=>t[o]||n)),e),Wf=(e,t)=>(t=t||"",e=""+((e=e||"").nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),Vf=(e,t)=>{if(Rt(e))return null;{let n=String(e);return t!=="color"&&t!=="backgroundColor"||(n=nr(n)),t==="fontWeight"&&e===700&&(n="bold"),t==="fontFamily"&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},Su=(e,t,n)=>{const o=e.getStyle(t,n);return Vf(o,n)},Pv=(e,t)=>{let n;return e.getParent(t,o=>!!he(o)&&(n=e.getStyle(o,"text-decoration"),!!n&&n!=="none")),n},Au=(e,t,n)=>e.getParents(t,n,e.getRoot()),Kf=(e,t,n)=>{const o=e.formatter.get(t);return Z(o)&&Ve(o,n)},Vr=e=>Ts(e,"block"),zo=e=>Ts(e,"selector"),pn=e=>Ts(e,"inline"),Yf=e=>zo(e)&&e.expand!==!1&&!pn(e),Lv=e=>(t=>{const n=[];let o=t;for(;o;){if(X(o)&&o.data!==yn||o.childNodes.length>1)return[];he(o)&&n.push(o),o=o.firstChild}return n})(e).length>0,Xf=e=>jo(e.dom)&&Lv(e.dom),Za=$o,Mv=Au,Iv=qf,gA=Hf,Fv=(e,t)=>{let n=t;for(;n;){if(he(n)&&e.getContentEditable(n))return e.getContentEditable(n)==="false"?n:t;n=n.parentNode}return t},jv=(e,t,n,o)=>{const r=t.data;if(e){for(let s=n;s>0;s--)if(o(r.charAt(s-1)))return s}else for(let s=n;s<r.length;s++)if(o(r.charAt(s)))return s;return-1},pA=(e,t,n)=>jv(e,t,n,o=>xu(o)||Vi(o)),hA=(e,t,n)=>jv(e,t,n,Mf),$v=(e,t,n,o,r,s)=>{let i;const a=e.getParent(n,e.isBlock)||t,l=(c,d,u)=>{const f=ji(e),h=r?f.backwards:f.forwards;return w.from(h(c,d,(g,b)=>Za(g.parentNode)?-1:(i=g,u(r,g,b)),a))};return l(n,o,pA).bind(c=>s?l(c.container,c.offset+(r?-1:0),hA):w.some(c)).orThunk(()=>i?w.some({container:i,offset:r?0:i.length}):w.none())},zv=(e,t,n,o,r)=>{const s=o[r];X(o)&&Rs(o.data)&&s&&(o=s);const i=Mv(e,o);for(let a=0;a<i.length;a++)for(let l=0;l<t.length;l++){const c=t[l];if((!Z(c.collapsed)||c.collapsed===n.collapsed)&&zo(c)&&e.is(i[a],c.selector))return i[a]}return o},Uv=(e,t,n,o)=>{var r;let s=n;const i=e.getRoot(),a=t[0];if(Vr(a)&&(s=a.wrapper?null:e.getParent(n,a.block,i)),!s){const l=(r=e.getParent(n,"LI,TD,TH,SUMMARY"))!==null&&r!==void 0?r:i;s=e.getParent(X(n)?n.parentNode:n,c=>c!==i&&gA(e.schema,c),l)}if(s&&Vr(a)&&a.wrapper&&(s=Mv(e,s,"ul,ol").reverse()[0]||s),!s)for(s=n;s&&s[o]&&!e.isBlock(s[o])&&(s=s[o],!Wf(s,"br")););return s||n},Hv=(e,t,n,o)=>{const r=n.parentNode;return!Z(n[o])&&(!(r!==t&&!Rt(r)&&!e.isBlock(r))||Hv(e,t,r,o))},Nu=(e,t,n,o,r)=>{let s=n;const i=r?"previousSibling":"nextSibling",a=e.getRoot();if(X(n)&&!Iv(n)&&(r?o>0:o<n.data.length))return n;for(;s;){if(!t[0].block_expand&&e.isBlock(s))return s;for(let c=s[i];c;c=c[i]){const d=X(c)&&!Hv(e,a,c,i);if(!Za(c)&&(!Tt(l=c)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!Iv(c,d))return s}if(s===a||s.parentNode===a){n=s;break}s=s.parentNode}var l;return n},qv=e=>Za(e.parentNode)||Za(e),Ki=(e,t,n,o=!1)=>{let{startContainer:r,startOffset:s,endContainer:i,endOffset:a}=t;const l=n[0];return he(r)&&r.hasChildNodes()&&(r=Js(r,s),X(r)&&(s=0)),he(i)&&i.hasChildNodes()&&(i=Js(i,t.collapsed?a:a-1),X(i)&&(a=i.data.length)),r=Fv(e,r),i=Fv(e,i),qv(r)&&(r=Za(r)?r:r.parentNode,r=t.collapsed?r.previousSibling||r:r.nextSibling||r,X(r)&&(s=t.collapsed?r.length:0)),qv(i)&&(i=Za(i)?i:i.parentNode,i=t.collapsed?i.nextSibling||i:i.previousSibling||i,X(i)&&(a=t.collapsed?0:i.length)),t.collapsed&&($v(e,e.getRoot(),r,s,!0,o).each(({container:c,offset:d})=>{r=c,s=d}),$v(e,e.getRoot(),i,a,!1,o).each(({container:c,offset:d})=>{i=c,a=d})),(pn(l)||l.block_expand)&&(pn(l)&&X(r)&&s!==0||(r=Nu(e,n,r,s,!0)),pn(l)&&X(i)&&a!==i.data.length||(i=Nu(e,n,i,a,!1))),Yf(l)&&(r=zv(e,n,t,r,"previousSibling"),i=zv(e,n,t,i,"nextSibling")),(Vr(l)||zo(l))&&(r=Uv(e,n,r,"previousSibling"),i=Uv(e,n,i,"nextSibling"),Vr(l)&&(e.isBlock(r)||(r=Nu(e,n,r,s,!0),X(r)&&(s=0)),e.isBlock(i)||(i=Nu(e,n,i,a,!1),X(i)&&(a=i.data.length)))),he(r)&&r.parentNode&&(s=e.nodeIndex(r),r=r.parentNode),he(i)&&i.parentNode&&(a=e.nodeIndex(i)+1,i=i.parentNode),{startContainer:r,startOffset:s,endContainer:i,endOffset:a}},Uc=(e,t,n)=>{var o;const r=t.startOffset,s=Js(t.startContainer,r),i=t.endOffset,a=Js(t.endContainer,i-1),l=p=>{const v=p[0];X(v)&&v===s&&r>=v.data.length&&p.splice(0,1);const _=p[p.length-1];return i===0&&p.length>0&&_===a&&X(_)&&p.splice(p.length-1,1),p},c=(p,v,_)=>{const C=[];for(;p&&p!==_;p=p[v])C.push(p);return C},d=(p,v)=>e.getParent(p,_=>_.parentNode===v,v),u=(p,v,_)=>{const C=_?"nextSibling":"previousSibling";for(let E=p,x=E.parentNode;E&&E!==v;E=x){x=E.parentNode;const S=c(E===p?E:E[C],C);S.length&&(_||S.reverse(),n(l(S)))}};if(s===a)return n(l([s]));const f=(o=e.findCommonAncestor(s,a))!==null&&o!==void 0?o:e.getRoot();if(e.isChildOf(s,a))return u(s,f,!0);if(e.isChildOf(a,s))return u(a,f);const h=d(s,f)||s,g=d(a,f)||a;u(s,h,!0);const b=c(h===s?h:h.nextSibling,"nextSibling",g===a?g.nextSibling:g);b.length&&n(l(b)),u(a,g)},bA=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],Wv=(e,t,n,o,r,s)=>{const{uid:i=t,...a}=n;Fs(e,Ii()),tn(e,`${Cs()}`,i),tn(e,`${_r()}`,o);const{attributes:l={},classes:c=[]}=r(i,a);if(Qo(e,l),((d,u)=>{W(u,f=>{Fs(d,f)})})(e,c),s){c.length>0&&tn(e,`${Ec()}`,c.join(","));const d=In(l);d.length>0&&tn(e,`${xc()}`,d.join(","))}},Vv=(e,t,n,o,r)=>{const s=sn("span",e);return Wv(s,t,n,o,r,!1),s},vA=(e,t,n,o,r,s)=>{const i=[],a=Vv(e.getDoc(),n,s,o,r),l=br(),c=()=>{l.clear()},d=f=>{W(f,u)},u=f=>{switch(((h,g,b,p)=>bo(g).fold(()=>"skipping",v=>p==="br"||(_=>En(_)&&Sc(_)===yn)(g)?"valid":(_=>zn(_)&&Ca(_,Ii()))(g)?"existing":jo(g.dom)?"caret":Ve(bA,_=>so(g,_))?"valid-block":Qa(h,b,p)&&Qa(h,We(v),b)?"valid":"invalid-child"))(e,f,"span",We(f))){case"invalid-child":{c();const h=xn(f);d(h),c();break}case"valid-block":c(),Wv(f,n,s,o,r,!0);break;case"valid":{const h=l.get().getOrThunk(()=>{const g=Fi(a);return i.push(g),l.set(g),g});Hd(f,h);break}}};return Uc(e.dom,t,f=>{c(),(h=>{const g=Me(h,B);d(g)})(f)}),i},Kv=e=>{const t=(()=>{const s={};return{register:(i,a)=>{s[i]={name:i,settings:a}},lookup:i=>At(s,i).map(a=>a.settings),getNames:()=>In(s)}})();((s,i)=>{const a=_r(),l=d=>w.from(d.attr(a)).bind(i.lookup),c=d=>{var u,f;d.attr(Cs(),null),d.attr(_r(),null),d.attr(wc(),null);const h=w.from(d.attr(xc())).map(v=>v.split(",")).getOr([]),g=w.from(d.attr(Ec())).map(v=>v.split(",")).getOr([]);W(h,v=>d.attr(v,null));const b=(f=(u=d.attr("class"))===null||u===void 0?void 0:u.split(" "))!==null&&f!==void 0?f:[],p=Jr(b,[Ii()].concat(g));d.attr("class",p.length>0?p.join(" "):null),d.attr(Ec(),null),d.attr(xc(),null)};s.serializer.addTempAttr(wc()),s.serializer.addAttributeFilter(a,d=>{for(const u of d)l(u).each(f=>{f.persistent===!1&&(u.name==="span"?u.unwrap():c(u))})})})(e,t);const n=((s,i)=>{const a=ln({}),l=()=>({listeners:[],previous:br()}),c=(h,g)=>{d(h,b=>(g(b),b))},d=(h,g)=>{const b=a.get(),p=g(At(b,h).getOrThunk(l));b[h]=p,a.set(b)},u=(h,g)=>{W(Vh(s,h),b=>{g?tn(b,wc(),"true"):rn(b,wc())})},f=Cc(()=>{const h=Sr(i.getNames());W(h,g=>{d(g,b=>{const p=b.previous.get();return qh(s,w.some(g)).fold(()=>{p.each(v=>{(_=>{c(_,C=>{W(C.listeners,E=>E(!1,_))})})(g),b.previous.clear(),u(v,!1)})},({uid:v,name:_,elements:C})=>{is(p,v)||(p.each(E=>u(E,!1)),((E,x,S)=>{c(E,O=>{W(O.listeners,T=>T(!0,E,{uid:x,nodes:Me(S,L=>L.dom)}))})})(_,v,C),b.previous.set(v),u(v,!0))}),{previous:b.previous,listeners:b.listeners}})})},30);return s.on("remove",()=>{f.cancel()}),s.on("NodeChange",()=>{f.throttle()}),{addListener:(h,g)=>{d(h,b=>({previous:b.previous,listeners:b.listeners.concat([g])}))}}})(e,t),o=_i("span"),r=s=>{W(s,i=>{o(i)?gr(i):(a=>{js(a,Ii()),rn(a,`${Cs()}`),rn(a,`${_r()}`),rn(a,`${wc()}`);const l=Xn(a,`${xc()}`).map(u=>u.split(",")).getOr([]),c=Xn(a,`${Ec()}`).map(u=>u.split(",")).getOr([]);var d;W(l,u=>rn(a,u)),d=a,W(c,u=>{js(d,u)}),rn(a,`${Ec()}`),rn(a,`${xc()}`)})(i)})};return{register:(s,i)=>{t.register(s,i)},annotate:(s,i)=>{t.lookup(s).each(a=>{((l,c,d,u)=>{l.undoManager.transact(()=>{const f=l.selection,h=f.getRng(),g=Ga(l).length>0,b=kc("mce-annotation");if(h.collapsed&&!g&&((p,v)=>{const _=Ki(p.dom,v,[{inline:"span"}]);v.setStart(_.startContainer,_.startOffset),v.setEnd(_.endContainer,_.endOffset),p.selection.setRng(v)})(l,h),f.getRng().collapsed&&!g){const p=Vv(l.getDoc(),b,u,c,d.decorate);Aa(p,nn),f.getRng().insertNode(p.dom),f.select(p.dom)}else Ov(f,!1,()=>{zf(l,p=>{vA(l,p,b,c,d.decorate,u)})})})})(e,s,a,i)})},annotationChanged:(s,i)=>{n.addListener(s,i)},remove:s=>{qh(e,w.some(s)).each(({elements:i})=>{const a=e.selection.getBookmark();r(i),e.selection.moveToBookmark(a)})},removeAll:s=>{const i=e.selection.getBookmark();Ct(Kh(e,s),(a,l)=>{r(a)}),e.selection.moveToBookmark(i)},getAll:s=>{const i=Kh(e,s);return pi(i,a=>Me(a,l=>l.dom))}}},Hc=e=>({getBookmark:ae(uA,e),moveToBookmark:ae(mA,e)});Hc.isBookmarkNode=$o;const Yv=(e,t,n)=>!n.collapsed&&Ve(n.getClientRects(),o=>((r,s,i)=>s>=r.left&&s<=r.right&&i>=r.top&&i<=r.bottom)(o,e,t)),Xv=(e,t,n)=>{e.dispatch(t,n)},Gv=(e,t,n,o)=>{e.dispatch("FormatApply",{format:t,node:n,vars:o})},Qv=(e,t,n,o)=>{e.dispatch("FormatRemove",{format:t,node:n,vars:o})},Zv=(e,t)=>e.dispatch("SetContent",t),Jv=(e,t)=>e.dispatch("GetContent",t),Gf=(e,t)=>{e.dispatch("AutocompleterUpdateActiveRange",t)},e0=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),le={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||le.metaKeyPressed(e),metaKeyPressed:e=>qe.os.isMacOS()||qe.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Yi="data-mce-selected",t0=Math.abs,Tu=Math.round,Qf={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},n0=(e,t)=>{const n=t.dom,o=t.getDoc(),r=document,s=t.getBody();let i,a,l,c,d,u,f,h,g,b,p,v,_,C,E;const x=oe=>Z(oe)&&(Ba(oe)||n.is(oe,"figure.image")),S=oe=>yo(oe)||n.hasClass(oe,"mce-preview-object"),O=oe=>{const pe=oe.target;((D,M)=>{if(($=>$.type==="longpress"||$.type.indexOf("touch")===0)(D)){const $=D.touches[0];return x(D.target)&&!Yv($.clientX,$.clientY,M)}return x(D.target)&&!Yv(D.clientX,D.clientY,M)})(oe,t.selection.getRng())&&!oe.isDefaultPrevented()&&t.selection.select(pe)},T=oe=>n.hasClass(oe,"mce-preview-object")&&Z(oe.firstElementChild)?[oe,oe.firstElementChild]:n.is(oe,"figure.image")?[oe.querySelector("img")]:[oe],L=oe=>{const pe=qb(t);return!!pe&&oe.getAttribute("data-mce-resize")!=="false"&&oe!==t.getBody()&&(n.hasClass(oe,"mce-preview-object")&&Z(oe.firstElementChild)?so(B(oe.firstElementChild),pe):so(B(oe),pe))},I=(oe,pe,D)=>{if(Z(D)){const M=T(oe);W(M,$=>{$.style[pe]||!t.schema.isValid($.nodeName.toLowerCase(),pe)?n.setStyle($,pe,D):n.setAttrib($,pe,""+D)})}},N=(oe,pe,D)=>{I(oe,"width",pe),I(oe,"height",D)},R=oe=>{let pe,D,M,$,q;pe=oe.screenX-u,D=oe.screenY-f,v=pe*c[2]+h,_=D*c[3]+g,v=v<5?5:v,_=_<5?5:_,M=(x(i)||S(i))&&eS(t)!==!1?!le.modifierPressed(oe):le.modifierPressed(oe),M&&(t0(pe)>t0(D)?(_=Tu(v*b),v=Tu(_/b)):(v=Tu(_/b),_=Tu(v*b))),N(a,v,_),$=c.startPos.x+pe,q=c.startPos.y+D,$=$>0?$:0,q=q>0?q:0,n.setStyles(l,{left:$,top:q,display:"block"}),l.innerHTML=v+" &times; "+_,c[2]<0&&a.clientWidth<=v&&n.setStyle(a,"left",void 0+(h-v)),c[3]<0&&a.clientHeight<=_&&n.setStyle(a,"top",void 0+(g-_)),pe=s.scrollWidth-C,D=s.scrollHeight-E,pe+D!==0&&n.setStyles(l,{left:$-pe,top:q-D}),p||(((re,J,Ce,Ee,Oe)=>{re.dispatch("ObjectResizeStart",{target:J,width:Ce,height:Ee,origin:Oe})})(t,i,h,g,"corner-"+c.name),p=!0)},P=()=>{const oe=p;p=!1,oe&&(I(i,"width",v),I(i,"height",_)),n.unbind(o,"mousemove",R),n.unbind(o,"mouseup",P),r!==o&&(n.unbind(r,"mousemove",R),n.unbind(r,"mouseup",P)),n.remove(a),n.remove(l),n.remove(d),H(i),oe&&(((pe,D,M,$,q)=>{pe.dispatch("ObjectResized",{target:D,width:M,height:$,origin:q})})(t,i,v,_,"corner-"+c.name),n.setAttrib(i,"style",n.getAttrib(i,"style"))),t.nodeChanged()},H=oe=>{ye();const pe=n.getPos(oe,s),D=pe.x,M=pe.y,$=oe.getBoundingClientRect(),q=$.width||$.right-$.left,re=$.height||$.bottom-$.top;i!==oe&&(Y(),i=oe,v=_=0);const J=t.dispatch("ObjectSelected",{target:oe});L(oe)&&!J.isDefaultPrevented()?Ct(Qf,(Ce,Ee)=>{let Oe=n.get("mceResizeHandle"+Ee);Oe&&n.remove(Oe),Oe=n.add(s,"div",{id:"mceResizeHandle"+Ee,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Ee+"-resize; margin:0; padding:0"}),n.bind(Oe,"mousedown",bt=>{bt.stopImmediatePropagation(),bt.preventDefault(),(Ut=>{const Eo=T(i)[0];u=Ut.screenX,f=Ut.screenY,h=Eo.clientWidth,g=Eo.clientHeight,b=g/h,c=Ce,c.name=Ee,c.startPos={x:q*Ce[0]+D,y:re*Ce[1]+M},C=s.scrollWidth,E=s.scrollHeight,d=n.add(s,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(d,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),a=((ce,De)=>{if(S(De))return ce.create("img",{src:qe.transparentSrc});if(Lo(De)){const Ie=_t(c.name,"n")?on:oo,Pe=De.cloneNode(!0);return Ie(ce.select("tr",Pe)).each(rt=>{const xt=ce.select("td,th",rt);ce.setStyle(rt,"height",null),W(xt,ie=>ce.setStyle(ie,"height",null))}),Pe}return De.cloneNode(!0)})(n,i),n.addClass(a,"mce-clonedresizable"),n.setAttrib(a,"data-mce-bogus","all"),a.contentEditable="false",n.setStyles(a,{left:D,top:M,margin:0}),N(a,q,re),a.removeAttribute(Yi),s.appendChild(a),n.bind(o,"mousemove",R),n.bind(o,"mouseup",P),r!==o&&(n.bind(r,"mousemove",R),n.bind(r,"mouseup",P)),l=n.add(s,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},h+" &times; "+g)})(bt)}),Ce.elm=Oe,n.setStyles(Oe,{left:q*Ce[0]+D-Oe.offsetWidth/2,top:re*Ce[1]+M-Oe.offsetHeight/2})}):Y(!1)},G=Mi(H,0),Y=(oe=!0)=>{G.cancel(),ye(),i&&oe&&i.removeAttribute(Yi),Ct(Qf,(pe,D)=>{const M=n.get("mceResizeHandle"+D);M&&(n.unbind(M),n.remove(M))})},me=(oe,pe)=>n.isChildOf(oe,pe),be=oe=>{if(p||t.removed||t.composing)return;const pe=oe.type==="mousedown"?oe.target:e.getNode(),D=cs(B(pe),"table,img,figure.image,hr,video,span.mce-preview-object,details").map($=>$.dom).filter($=>n.isEditable($.parentElement)||$.nodeName==="IMG"&&n.isEditable($)).getOrUndefined(),M=Z(D)?n.getAttrib(D,Yi,"1"):"1";if(W(n.select(`img[${Yi}],hr[${Yi}]`),$=>{$.removeAttribute(Yi)}),Z(D)&&me(D,s)&&t.hasFocus()){fe();const $=e.getStart(!0);if(me($,D)&&me(e.getEnd(!0),D))return n.setAttrib(D,Yi,M),void G.throttle(D)}Y()},ye=()=>{Ct(Qf,oe=>{oe.elm&&(n.unbind(oe.elm),delete oe.elm)})},fe=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",()=>{fe(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",be),t.on("keyup compositionend",oe=>{i&&i.nodeName==="TABLE"&&be(oe)}),t.on("hide blur",Y),t.on("contextmenu longpress",O,!0)}),t.on("remove",ye),{isResizable:L,showResizeRect:H,hideResizeRect:Y,updateResizeRect:be,destroy:()=>{G.cancel(),i=a=d=null}}},o0=(e,t,n)=>{const o=e.document.createRange();var r;return r=o,t.fold(s=>{r.setStartBefore(s.dom)},(s,i)=>{r.setStart(s.dom,i)},s=>{r.setStartAfter(s.dom)}),((s,i)=>{i.fold(a=>{s.setEndBefore(a.dom)},(a,l)=>{s.setEnd(a.dom,l)},a=>{s.setEndAfter(a.dom)})})(o,n),o},Zf=(e,t,n,o,r)=>{const s=e.document.createRange();return s.setStart(t.dom,n),s.setEnd(o.dom,r),s},qc=Ur([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),r0=(e,t,n)=>t(B(n.startContainer),n.startOffset,B(n.endContainer),n.endOffset);qc.ltr,qc.rtl;const s0=(e,t,n,o)=>({start:e,soffset:t,finish:n,foffset:o}),Jf=Ur([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),ws={before:Jf.before,on:Jf.on,after:Jf.after,cata:(e,t,n,o)=>e.fold(t,n,o),getStart:e=>e.fold(Be,Be,Be)},Ou=Ur([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Ja={domRange:Ou.domRange,relative:Ou.relative,exact:Ou.exact,exactFromRange:e=>Ou.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const t=(n=>n.match({domRange:o=>B(o.startContainer),relative:(o,r)=>ws.getStart(o),exact:(o,r,s,i)=>o}))(e);return wi(t)},range:s0},Ru=(e,t)=>{const n=We(e);return n==="input"?ws.after(e):ee(["br","img"],n)?t===0?ws.before(e):ws.after(e):ws.on(e,t)},yA=(e,t)=>{const n=e.fold(ws.before,Ru,ws.after),o=t.fold(ws.before,Ru,ws.after);return Ja.relative(n,o)},i0=(e,t,n,o)=>{const r=Ru(e,t),s=Ru(n,o);return Ja.relative(r,s)},eg=(e,t)=>{const n=(t||document).createDocumentFragment();return W(e,o=>{n.appendChild(o.dom)}),B(n)},_A=e=>{const t=Ja.getWin(e).dom,n=(r,s,i,a)=>Zf(t,r,s,i,a),o=(r=>r.match({domRange:s=>{const i=B(s.startContainer),a=B(s.endContainer);return i0(i,s.startOffset,a,s.endOffset)},relative:yA,exact:i0}))(e);return((r,s)=>{const i=((a,l)=>l.match({domRange:c=>({ltr:K(c),rtl:w.none}),relative:(c,d)=>({ltr:Fn(()=>o0(a,c,d)),rtl:Fn(()=>w.some(o0(a,d,c)))}),exact:(c,d,u,f)=>({ltr:Fn(()=>Zf(a,c,d,u,f)),rtl:Fn(()=>w.some(Zf(a,u,f,c,d)))})}))(r,s);return((a,l)=>{const c=l.ltr();return c.collapsed?l.rtl().filter(d=>d.collapsed===!1).map(d=>qc.rtl(B(d.endContainer),d.endOffset,B(d.startContainer),d.startOffset)).getOrThunk(()=>r0(0,qc.ltr,c)):r0(0,qc.ltr,c)})(0,i)})(t,o).match({ltr:n,rtl:n})},CA=(e,t,n)=>((o,r,s)=>((i,a,l)=>i.caretPositionFromPoint?((c,d,u)=>{var f;return w.from((f=c.caretPositionFromPoint)===null||f===void 0?void 0:f.call(c,d,u)).bind(h=>{if(h.offsetNode===null)return w.none();const g=c.createRange();return g.setStart(h.offsetNode,h.offset),g.collapse(),w.some(g)})})(i,a,l):i.caretRangeFromPoint?((c,d,u)=>{var f;return w.from((f=c.caretRangeFromPoint)===null||f===void 0?void 0:f.call(c,d,u))})(i,a,l):w.none())(o.document,r,s).map(i=>s0(B(i.startContainer),i.startOffset,B(i.endContainer),i.endOffset)))(e,t,n),a0=(e,t,n)=>{const o=wi(B(n));return CA(o.dom,e,t).map(r=>{const s=n.createRange();return s.setStart(r.start.dom,r.soffset),s.setEnd(r.finish.dom,r.foffset),s}).getOrUndefined()},tg=(e,t)=>Z(e)&&Z(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,l0=(e,t,n)=>((o,r,s)=>{let i=o;for(;i&&i!==r;){if(s(i))return i;i=i.parentNode}return null})(e,t,n)!==null,wA=(e,t,n)=>l0(e,t,o=>o.nodeName===n),EA=(e,t)=>Io(e)&&!l0(e,t,jo),c0=(e,t,n)=>{const o=t.parentNode;if(o){const r=new an(t,e.getParent(o,e.isBlock)||e.getRoot());let s;for(;s=r[n?"prev":"next"]();)if(Tt(s))return!0}return!1},ng=(e,t,n,o,r)=>{const s=e.getRoot(),i=e.schema.getNonEmptyElements(),a=r.parentNode;let l,c;if(!a)return w.none();const d=e.getParent(a,e.isBlock)||s;if(o&&Tt(r)&&t&&e.isEmpty(d))return w.some(U(a,e.nodeIndex(r)));const u=new an(r,d);for(;c=u[o?"prev":"next"]();){if(e.getContentEditableParent(c)==="false"||EA(c,s))return w.none();if(X(c)&&c.data.length>0)return wA(c,s,"A")?w.none():w.some(U(c,o?c.data.length:0));if(e.isBlock(c)||i[c.nodeName.toLowerCase()])return w.none();l=c}return Gn(l)?w.none():n&&l?w.some(U(l,0)):w.none()},d0=(e,t,n,o)=>{const r=e.getRoot();let s,i=!1,a=n?o.startContainer:o.endContainer,l=n?o.startOffset:o.endOffset;const c=he(a)&&l===a.childNodes.length,d=e.schema.getNonEmptyElements();let u=n;if(Io(a))return w.none();if(he(a)&&l>a.childNodes.length-1&&(u=!1),Ti(a)&&(a=r,l=0),a===r){if(u&&(s=a.childNodes[l>0?l-1:0],s)&&(Io(s)||d[s.nodeName]||Lo(s)))return w.none();if(a.hasChildNodes()){if(l=Math.min(!u&&l>0?l-1:l,a.childNodes.length-1),a=a.childNodes[l],l=X(a)&&c?a.data.length:0,!t&&a===r.lastChild&&Lo(a)||((f,h)=>{let g=h;for(;g&&g!==f;){if(wt(g))return!0;g=g.parentNode}return!1})(r,a)||Io(a)||rc(a))return w.none();if(a.hasChildNodes()&&!Lo(a)){s=a;const f=new an(a,r);do{if(wt(s)||Io(s)){i=!1;break}if(X(s)&&s.data.length>0){l=u?0:s.data.length,a=s,i=!0;break}if(d[s.nodeName.toLowerCase()]&&!Vs(s)){l=e.nodeIndex(s),a=s.parentNode,u||l++,i=!0;break}}while(s=u?f.next():f.prev())}}}return t&&(X(a)&&l===0&&ng(e,c,t,!0,a).each(f=>{a=f.container(),l=f.offset(),i=!0}),he(a)&&(s=a.childNodes[l],s||(s=a.childNodes[l-1]),!s||!Tt(s)||((f,h)=>{var g;return((g=f.previousSibling)===null||g===void 0?void 0:g.nodeName)==="A"})(s)||c0(e,s,!1)||c0(e,s,!0)||ng(e,c,t,!0,s).each(f=>{a=f.container(),l=f.offset(),i=!0}))),u&&!t&&X(a)&&l===a.data.length&&ng(e,c,t,!1,a).each(f=>{a=f.container(),l=f.offset(),i=!0}),i&&a?w.some(U(a,l)):w.none()},Bu=(e,t)=>{const n=t.collapsed,o=t.cloneRange(),r=U.fromRangeStart(t);return d0(e,n,!0,o).each(s=>{n&&U.isAbove(r,s)||o.setStart(s.container(),s.offset())}),n||d0(e,n,!1,o).each(s=>{o.setEnd(s.container(),s.offset())}),n&&o.collapse(!0),tg(t,o)?w.none():w.some(o)},Du=(e,t)=>e.splitText(t),Pu=e=>{let t=e.startContainer,n=e.startOffset,o=e.endContainer,r=e.endOffset;if(t===o&&X(t)){if(n>0&&n<t.data.length)if(o=Du(t,n),t=o.previousSibling,r>n){r-=n;const s=Du(o,r).previousSibling;t=o=s,r=s.data.length,n=0}else r=0}else if(X(t)&&n>0&&n<t.data.length&&(t=Du(t,n),n=0),X(o)&&r>0&&r<o.data.length){const s=Du(o,r).previousSibling;o=s,r=s.data.length}return{startContainer:t,startOffset:n,endContainer:o,endOffset:r}},Xi=e=>({walk:(t,n)=>Uc(e,t,n),split:Pu,expand:(t,n={type:"word"})=>{if(n.type==="word"){const o=Ki(e,t,[{inline:"span"}]),r=e.createRng();return r.setStart(o.startContainer,o.startOffset),r.setEnd(o.endContainer,o.endOffset),r}return t},normalize:t=>Bu(e,t).fold(ft,n=>(t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),!0))});Xi.compareRanges=tg,Xi.getCaretRangeFromPoint=a0,Xi.getSelectedNode=mu,Xi.getNode=Js;const xA=((e,t)=>{const n=r=>{const s=(i=>{const a=i.dom;return ls(i)?a.getBoundingClientRect().height:a.offsetHeight})(r);if(s<=0||s===null){const i=Do(r,e);return parseFloat(i)||0}return s},o=(r,s)=>Lt(s,(i,a)=>{const l=Do(r,a),c=l===void 0?0:parseInt(l,10);return isNaN(c)?i:i+c},0);return{set:(r,s)=>{if(!st(s)&&!s.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+s);const i=r.dom;Us(i)&&(i.style[e]=s+"px")},get:n,getOuter:n,aggregate:o,max:(r,s,i)=>{const a=o(r,i);return s>a?s-a:0}}})("height"),u0=()=>B(document),m0=(e,t)=>e.view(t).fold(K([]),n=>{const o=e.owner(n),r=m0(e,o);return[n].concat(r)});var kA=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?w.none():w.from((t=e.dom.defaultView)===null||t===void 0?void 0:t.frameElement)).map(B)},owner:e=>Lr(e)});const og=e=>We(e)==="textarea",f0=(e,t)=>{const n=(r=>{const s=r.dom.ownerDocument,i=s.body,a=s.defaultView,l=s.documentElement;if(i===r.dom)return gs(i.offsetLeft,i.offsetTop);const c=Na(a?.pageYOffset,l.scrollTop),d=Na(a?.pageXOffset,l.scrollLeft),u=Na(l.clientTop,i.clientTop),f=Na(l.clientLeft,i.clientLeft);return Ta(r).translate(d-f,c-u)})(e),o=(r=>xA.get(r))(e);return{element:e,bottom:n.top+o,height:o,pos:n,cleanup:t}},g0=(e,t,n,o)=>{AA(e,(r,s)=>SA(e,t,n,o),n)},p0=(e,t,n,o,r)=>{const s={elm:o.element.dom,alignToTop:r};((i,a)=>i.dispatch("ScrollIntoView",a).isDefaultPrevented())(e,s)||(n(e,t,Oa(t).top,o,r),((i,a)=>{i.dispatch("AfterScrollIntoView",a)})(e,s))},SA=(e,t,n,o)=>{const r=B(e.getBody()),s=B(e.getDoc());r.dom.offsetWidth;const i=((a,l)=>{const c=((u,f)=>{const h=xn(u);if(h.length===0||og(u))return{element:u,offset:f};if(f<h.length&&!og(h[f]))return{element:h[f],offset:0};{const g=h[h.length-1];return og(g)?{element:u,offset:f}:We(g)==="img"?{element:g,offset:1}:En(g)?{element:g,offset:Sc(g).length}:{element:g,offset:xn(g).length}}})(a,l),d=wa('<span data-mce-bogus="all" style="display: inline-block;">\uFEFF</span>');return Bn(c.element,d),f0(d,()=>Nt(d))})(B(n.startContainer),n.startOffset);p0(e,s,t,i,o),i.cleanup()},h0=(e,t,n,o)=>{const r=B(e.getDoc());p0(e,r,n,(s=>f0(B(s),Te))(t),o)},AA=(e,t,n)=>{const o=n.startContainer,r=n.startOffset,s=n.endContainer,i=n.endOffset;t(B(o),B(s));const a=e.dom.createRng();a.setStart(o,r),a.setEnd(s,i),e.selection.setRng(n)},rg=(e,t,n,o,r)=>{const s=t.pos;if(o)ec(s.left,s.top,r);else{const i=s.top-n+t.height;ec(-e.getBody().getBoundingClientRect().left,i,r)}},b0=(e,t,n,o,r,s)=>{const i=o+n,a=r.pos.top,l=r.bottom,c=l-a>=o;a<n?rg(e,r,o,s!==!1,t):a>i?rg(e,r,o,c?s!==!1:s===!0,t):l>i&&!c&&rg(e,r,o,s===!0,t)},v0=(e,t,n,o,r)=>{const s=wi(t).dom.innerHeight;b0(e,t,n,s,o,r)},y0=(e,t,n,o,r)=>{const s=wi(t).dom.innerHeight;b0(e,t,n,s,o,r);const i=(l=>{const c=u0(),d=Oa(c),u=((g,b)=>{const p=b.owner(g);return m0(b,p)})(l,kA),f=Ta(l),h=Kt(u,(g,b)=>{const p=Ta(b);return{left:g.left+p.left,top:g.top+p.top}},{left:0,top:0});return gs(h.left+f.left+d.left,h.top+f.top+d.top)})(o.element),a=Wd(window);i.top<a.y?tc(o.element,r!==!1):i.top>a.bottom&&tc(o.element,r===!0)},NA=(e,t,n)=>g0(e,v0,t,n),TA=(e,t,n)=>h0(e,t,v0,n),OA=(e,t,n)=>g0(e,y0,t,n),RA=(e,t,n)=>h0(e,t,y0,n),Wc=(e,t,n)=>{(e.inline?NA:OA)(e,t,n)},_0=(e,t=!1)=>e.dom.focus({preventScroll:t}),C0=e=>{const t=Mr(e).dom;return e.dom===t.activeElement},sg=(e=u0())=>w.from(e.dom.activeElement).map(B),w0=(e,t)=>{const n=En(t)?Sc(t).length:xn(t).length+1;return e>n?n:e<0?0:e},BA=e=>Ja.range(e.start,w0(e.soffset,e.start),e.finish,w0(e.foffset,e.finish)),E0=(e,t)=>!Ra(t.dom)&&(Oo(e,t)||tt(e,t)),x0=e=>t=>E0(e,t.start)&&E0(e,t.finish),DA=e=>Ja.range(B(e.startContainer),e.startOffset,B(e.endContainer),e.endOffset),PA=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),w.some(t)}catch{return w.none()}},Lu=e=>{const t=(o=>o.inline||qe.browser.isFirefox())(e)?(n=B(e.getBody()),(o=>{const r=o.getSelection();return(r&&r.rangeCount!==0?w.from(r.getRangeAt(0)):w.none()).map(DA)})(wi(n).dom).filter(x0(n))):w.none();var n;e.bookmark=t.isSome()?t:e.bookmark},ig=e=>(e.bookmark?e.bookmark:w.none()).bind(t=>{return n=B(e.getBody()),o=t,w.from(o).filter(x0(n)).map(BA);var n,o}).bind(PA),k0={isEditorUIElement:e=>{const t=e.className.toString();return t.indexOf("tox-")!==-1||t.indexOf("mce-")!==-1}},Uo={setEditorTimeout:(e,t,n)=>((o,r)=>(st(r)||(r=0),setTimeout(o,r)))(()=>{e.removed||t()},n),setEditorInterval:(e,t,n)=>{const o=((r,s)=>(st(s)||(s=0),setInterval(r,s)))(()=>{e.removed?clearInterval(o):t()},n);return o}};let el;const ag=ot.DOM,lg=e=>{const t=e.classList;return t!==void 0&&(t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"))},Mu=(e,t)=>{const n=cS(e);return ag.getParent(t,r=>(s=>he(s)&&k0.isEditorUIElement(s))(r)||!!n&&e.dom.is(r,n))!==null},cg=e=>{try{const t=Mr(B(e.getElement()));return sg(t).fold(()=>document.body,n=>n.dom)}catch{return document.body}},LA=(e,t)=>{const n=t.editor;(r=>{const s=Mi(()=>{Lu(r)},0);r.on("init",()=>{r.inline&&((i,a)=>{const l=()=>{a.throttle()};ot.DOM.bind(document,"mouseup",l),i.on("remove",()=>{ot.DOM.unbind(document,"mouseup",l)})})(r,s),((i,a)=>{((l,c)=>{l.on("mouseup touchend",d=>{c.throttle()})})(i,a),i.on("keyup NodeChange AfterSetSelectionRange",l=>{(c=>c.type==="nodechange"&&c.selectionChange)(l)||Lu(i)})})(r,s)}),r.on("remove",()=>{s.cancel()})})(n);const o=(r,s)=>{HS(r)&&r.inline!==!0&&s(B(r.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const r=e.focusedEditor;lg(cg(n))&&o(n,Fs),r!==n&&(r&&r.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:r}),n.focus(!0))}),n.on("focusout",()=>{Uo.setEditorTimeout(n,()=>{const r=e.focusedEditor;lg(cg(n))&&r===n||o(n,js),Mu(n,cg(n))||r!==n||(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),el||(el=r=>{const s=e.activeEditor;s&&Xl(r).each(i=>{const a=i;a.ownerDocument===document&&(a===document.body||Mu(s,a)||e.focusedEditor!==s||(s.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null))})},ag.bind(document,"focusin",el))},MA=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&el&&(ag.unbind(document,"focusin",el),el=null)},S0=(e,t)=>{((n,o)=>(r=>r.collapsed?w.from(Js(r.startContainer,r.startOffset)).map(B):w.none())(o).bind(r=>gk(r)?w.some(r):Oo(n,r)?w.none():w.some(n)))(B(e.getBody()),t).bind(n=>Ln(n.dom)).fold(()=>{e.selection.normalize()},n=>e.selection.setRng(n.toRange()))},Iu=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},tl=e=>e.inline?(t=>{const n=t.getBody();return n&&(o=B(n),C0(o)||(r=o,sg(Mr(r)).filter(s=>r.dom.contains(s.dom))).isSome());var o,r})(e):(t=>Z(t.iframeElement)&&C0(B(t.iframeElement)))(e),A0=e=>tl(e)||(t=>{const n=Mr(B(t.getElement()));return sg(n).filter(o=>!lg(o.dom)&&Mu(t,o.dom)).isSome()})(e),dg=e=>e.editorManager.setActive(e),N0=(e,t)=>t.collapsed?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer),T0=(e,t,n,o,r)=>{const s=n?t.startContainer:t.endContainer,i=n?t.startOffset:t.endOffset;return w.from(s).map(B).map(a=>o&&t.collapsed?a:$s(a,r(a,i)).getOr(a)).bind(a=>zn(a)?w.some(a):bo(a).filter(zn)).map(a=>a.dom).getOr(e)},O0=(e,t,n=!1)=>T0(e,t,!0,n,(o,r)=>Math.min(Vl(o),r)),R0=(e,t,n=!1)=>T0(e,t,!1,n,(o,r)=>r>0?r-1:r),B0=(e,t)=>{const n=e;for(;e&&X(e)&&e.length===0;)e=t?e.nextSibling:e.previousSibling;return e||n},ug=(e,t)=>Me(t,n=>{const o=e.dispatch("GetSelectionRange",{range:n});return o.range!==n?o.range:n}),IA={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Fu=(e,t,n)=>{const o=n?"lastChild":"firstChild",r=n?"prev":"next";if(e[o])return e[o];if(e!==t){let s=e[r];if(s)return s;for(let i=e.parent;i&&i!==t;i=i.parent)if(s=i[r],s)return s}},FA=e=>{var t;const n=(t=e.value)!==null&&t!==void 0?t:"";if(!qs(n))return!1;const o=e.parent;return!o||o.name==="span"&&!o.attr("style")||!/^[ ]+$/.test(n)},D0=e=>{const t=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class Wn{static create(t,n){const o=new Wn(t,IA[t]||1);return n&&Ct(n,(r,s)=>{o.attr(s,r)}),o}constructor(t,n){this.name=t,this.type=n,n===1&&(this.attributes=[],this.attributes.map={})}replace(t){const n=this;return t.parent&&t.remove(),n.insert(t,n),n.remove(),n}attr(t,n){const o=this;if(!se(t))return Z(t)&&Ct(t,(s,i)=>{o.attr(i,s)}),o;const r=o.attributes;if(r){if(n!==void 0){if(n===null){if(t in r.map){delete r.map[t];let s=r.length;for(;s--;)if(r[s].name===t)return r.splice(s,1),o}return o}if(t in r.map){let s=r.length;for(;s--;)if(r[s].name===t){r[s].value=n;break}}else r.push({name:t,value:n});return r.map[t]=n,o}return r.map[t]}}clone(){const t=this,n=new Wn(t.name,t.type),o=t.attributes;if(o){const r=[];r.map={};for(let s=0,i=o.length;s<i;s++){const a=o[s];a.name!=="id"&&(r[r.length]={name:a.name,value:a.value},r.map[a.name]=a.value)}n.attributes=r}return n.value=t.value,n}wrap(t){const n=this;return n.parent&&(n.parent.insert(t,n),t.append(n)),n}unwrap(){const t=this;for(let n=t.firstChild;n;){const o=n.next;t.insert(n,t,!0),n=o}t.remove()}remove(){const t=this,n=t.parent,o=t.next,r=t.prev;return n&&(n.firstChild===t?(n.firstChild=o,o&&(o.prev=null)):r&&(r.next=o),n.lastChild===t?(n.lastChild=r,r&&(r.next=null)):o&&(o.prev=r),t.parent=t.next=t.prev=null),t}append(t){const n=this;t.parent&&t.remove();const o=n.lastChild;return o?(o.next=t,t.prev=o,n.lastChild=t):n.lastChild=n.firstChild=t,t.parent=n,t}insert(t,n,o){t.parent&&t.remove();const r=n.parent||this;return o?(n===r.firstChild?r.firstChild=t:n.prev&&(n.prev.next=t),t.prev=n.prev,t.next=n,n.prev=t):(n===r.lastChild?r.lastChild=t:n.next&&(n.next.prev=t),t.next=n.next,t.prev=n,n.next=t),t.parent=r,t}getAll(t){const n=this,o=[];for(let r=n.firstChild;r;r=Fu(r,n))r.name===t&&o.push(r);return o}children(){const t=[];for(let n=this.firstChild;n;n=n.next)t.push(n);return t}empty(){const t=this;if(t.firstChild){const n=[];for(let r=t.firstChild;r;r=Fu(r,t))n.push(r);let o=n.length;for(;o--;){const r=n[o];r.parent=r.firstChild=r.lastChild=r.next=r.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,n={},o){var r;const s=this;let i=s.firstChild;if(D0(s))return!1;if(i)do{if(i.type===1){if(i.attr("data-mce-bogus"))continue;if(t[i.name]||D0(i))return!1}if(i.type===8||i.type===3&&!FA(i)||i.type===3&&i.parent&&n[i.parent.name]&&qs((r=i.value)!==null&&r!==void 0?r:"")||o&&o(i))return!1}while(i=Fu(i,s));return!0}walk(t){return Fu(this,null,t)}}const jA=Q.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),P0=e=>se(e.nodeValue)&&e.nodeValue.includes(yn),L0=e=>(e.length===0?"":`${Me(e,t=>`[${t}]`).join(",")},`)+'[data-mce-bogus="all"]',M0=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,t=>P0(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),I0=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,t=>{if(P0(t)){const n=t.parentNode;return n&&Re(jA,n.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP}),$A=e=>M0(e).nextNode()!==null,zA=e=>I0(e).nextNode()!==null,UA=(e,t)=>t.querySelector(L0(e))!==null,HA=(e,t)=>{W(((n,o)=>o.querySelectorAll(L0(n)))(e,t),n=>{const o=B(n);Un(o,"data-mce-bogus")==="all"?Nt(o):W(e,r=>{Ci(o,r)&&rn(o,r)})})},F0=e=>{let t=e.nextNode();for(;t!==null;)t.nodeValue=null,t=e.nextNode()},qA=Le(F0,M0),WA=Le(F0,I0),j0=(e,t)=>{const n=[{condition:ae(UA,t),action:ae(HA,t)},{condition:$A,action:qA},{condition:zA,action:WA}];let o=e,r=!1;return W(n,({condition:s,action:i})=>{s(o)&&(r||(o=e.cloneNode(!0),r=!0),i(o))}),o},$0=e=>{const t=vn(e,"[data-mce-bogus]");W(t,n=>{Un(n,"data-mce-bogus")==="all"?Nt(n):$i(n)?(Bn(n,Dr(Si)),Nt(n)):gr(n)})},z0=e=>{const t=vn(e,"input");W(t,n=>{rn(n,"name")})},VA=(e,t,n)=>{let o;return o=t.format==="raw"?Q.trim(Co(j0(n,e.serializer.getTempAttrs()).innerHTML)):t.format==="text"?((r,s)=>{const i=r.getDoc(),a=Mr(B(r.getBody())),l=sn("div",i);tn(l,"data-mce-bogus","all"),us(l,{position:"fixed",left:"-9999999px",top:"0"}),Aa(l,s.innerHTML),$0(l),z0(l);const c=(u=>Kl(u)?u:B(Lr(u).dom.body))(a);Xt(c,l);const d=Co(l.dom.innerText);return Nt(l),d})(e,n):t.format==="tree"?e.serializer.serialize(n,t):((r,s)=>{const i=Pn(r),a=new RegExp(`^(<${i}[^>]*>(&nbsp;|&#160;|\\s|\xA0|<br \\/>|)<\\/${i}>[\r
]*|<br \\/>[\r
]*)$`);return s.replace(a,"")})(e,e.serializer.serialize(n,t)),t.format!=="text"&&!lu(B(n))&&se(o)?Q.trim(o):o},U0=Q.makeMap,H0=e=>{const t=[],n=(e=e||{}).indent,o=U0(e.indent_before||""),r=U0(e.indent_after||""),s=xe.getEncodeFunc(e.entity_encoding||"raw",e.entities),i=e.element_format!=="xhtml";return{start:(a,l,c)=>{if(n&&o[a]&&t.length>0){const d=t[t.length-1];d.length>0&&d!==`
`&&t.push(`
`)}if(t.push("<",a),l)for(let d=0,u=l.length;d<u;d++){const f=l[d];t.push(" ",f.name,'="',s(f.value,!0),'"')}if(t[t.length]=!c||i?">":" />",c&&n&&r[a]&&t.length>0){const d=t[t.length-1];d.length>0&&d!==`
`&&t.push(`
`)}},end:a=>{let l;t.push("</",a,">"),n&&r[a]&&t.length>0&&(l=t[t.length-1],l.length>0&&l!==`
`&&t.push(`
`))},text:(a,l)=>{a.length>0&&(t[t.length]=l?a:s(a))},cdata:a=>{t.push("<![CDATA[",a,"]]>")},comment:a=>{t.push("<!--",a,"-->")},pi:(a,l)=>{l?t.push("<?",a," ",s(l),"?>"):t.push("<?",a,"?>"),n&&t.push(`
`)},doctype:a=>{t.push("<!DOCTYPE",a,">",n?`
`:"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},oi=(e={},t=fn())=>{const n=H0(e);return e.validate=!("validate"in e)||e.validate,{serialize:o=>{const r=e.validate,s={3:a=>{var l;n.text((l=a.value)!==null&&l!==void 0?l:"",a.raw)},8:a=>{var l;n.comment((l=a.value)!==null&&l!==void 0?l:"")},7:a=>{n.pi(a.name,a.value)},10:a=>{var l;n.doctype((l=a.value)!==null&&l!==void 0?l:"")},4:a=>{var l;n.cdata((l=a.value)!==null&&l!==void 0?l:"")},11:a=>{let l=a;if(l=l.firstChild)do i(l);while(l=l.next)}};n.reset();const i=a=>{var l;const c=s[a.type];if(c)c(a);else{const d=a.name,u=d in t.getVoidElements();let f=a.attributes;if(r&&f&&f.length>1){const h=[];h.map={};const g=t.getElementRule(a.name);if(g){for(let b=0,p=g.attributesOrder.length;b<p;b++){const v=g.attributesOrder[b];if(v in f.map){const _=f.map[v];h.map[v]=_,h.push({name:v,value:_})}}for(let b=0,p=f.length;b<p;b++){const v=f[b].name;if(!(v in h.map)){const _=f.map[v];h.map[v]=_,h.push({name:v,value:_})}}f=h}}if(n.start(d,f,u),jr(d))se(a.value)&&n.text(a.value,!0),n.end(d);else if(!u){let h=a.firstChild;if(h){d!=="pre"&&d!=="textarea"||h.type!==3||((l=h.value)===null||l===void 0?void 0:l[0])!==`
`||n.text(`
`,!0);do i(h);while(h=h.next)}n.end(d)}}};return o.type!==1||e.inner?o.type===3?s[3](o):s[11](o):i(o),n.getContent()}}},q0=new Set;W(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],e=>{q0.add(e)});const W0=new Set;W(["background-color"],e=>{W0.add(e)});const V0=["font","text-decoration","text-emphasis"],nl=(e,t)=>In(((n,o)=>n.parseStyle(n.getAttrib(o,"style")))(e,t)),K0=(e,t)=>Ve(nl(e,t),n=>(o=>q0.has(o))(n)),Y0=(e,t,n)=>w.from(n.container()).filter(X).exists(o=>{const r=e?0:-1;return t(o.data.charAt(n.offset()+r))}),mg=ae(Y0,!0,Vi),fg=ae(Y0,!1,Vi),KA=e=>{const t=e.container();return X(t)&&(t.data.length===0||cu(t.data)&&Hc.isBookmarkNode(t.parentNode))},ri=(e,t)=>n=>Tf(e?0:-1,n).filter(t).isSome(),X0=e=>Ba(e)&&Do(B(e),"display")==="block",G0=e=>wt(e)&&!(t=>he(t)&&t.getAttribute("data-mce-bogus")==="all")(e),YA=ri(!0,X0),XA=ri(!1,X0),Vc=ri(!0,yo),Kc=ri(!1,yo),Q0=ri(!0,Lo),gg=ri(!1,Lo),si=ri(!0,G0),ii=ri(!1,G0),Z0=(e,t)=>((n,o,r)=>Oo(o,n)?Fd(n,s=>r(s)||tt(s,o)).slice(0,-1):[])(e,t,ft),Es=(e,t)=>[e].concat(Z0(e,t)),pg=(e,t,n)=>_v(e,t,n,KA),J0=(e,t,n)=>en(Es(B(t.container()),e),(o=>r=>o.isBlock(We(r)))(n)),ey=(e,t,n,o)=>pg(e,t.dom,n).forall(r=>J0(t,n,o).fold(()=>!Hr(r,n,t.dom),s=>!Hr(r,n,t.dom)&&Oo(s,B(r.container())))),ty=(e,t,n,o)=>J0(t,n,o).fold(()=>pg(e,t.dom,n).forall(r=>!Hr(r,n,t.dom)),r=>pg(e,r.dom,n).isNone()),hg=ae(ty,!1),ny=ae(ty,!0),GA=ae(ey,!1),QA=ae(ey,!0),ZA=e=>_u(e).exists($i),ju=(e,t,n,o)=>{const r=ue(Es(B(n.container()),t),i=>o.isBlock(We(i))),s=on(r).getOr(t);return Fo(e,s.dom,n).filter(ZA)},bg=(e,t,n)=>_u(t).exists($i)||ju(!0,e,t,n).isSome(),$u=(e,t,n)=>(o=>w.from(o.getNode(!0)).map(B))(t).exists($i)||ju(!1,e,t,n).isSome(),oy=ae(ju,!1),JA=ae(ju,!0),ry=e=>U.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),sy=(e,t,n)=>{const o=ue(Es(B(t.container()),e),r=>n.isBlock(We(r)));return on(o).getOr(e)},iy=(e,t,n)=>ry(t)?fg(t):fg(t)||mo(sy(e,t,n).dom,t).exists(fg),ay=(e,t,n)=>ry(t)?mg(t):mg(t)||Jn(sy(e,t,n).dom,t).exists(mg),vg=e=>_u(e).bind(t=>Ir(t,zn)).exists(t=>(n=>ee(["pre","pre-wrap"],n))(Do(t,"white-space"))),ly=(e,t)=>n=>{return o=new an(n,e)[t](),Z(o)&&wt(o)&&av(o);var o},cy=(e,t,n)=>!vg(t)&&(((o,r,s)=>((i,a)=>mo(i.dom,a).isNone())(o,r)||((i,a)=>Jn(i.dom,a).isNone())(o,r)||hg(o,r,s)||ny(o,r,s)||$u(o,r,s)||bg(o,r,s))(e,t,n)||iy(e,t,n)||ay(e,t,n)),Yc=(e,t,n)=>!vg(t)&&(hg(e,t,n)||GA(e,t,n)||$u(e,t,n)||iy(e,t,n)||((o,r)=>{const s=mo(o.dom,r).getOr(r),i=ly(o.dom,"prev");return r.isAtStart()&&(i(r.container())||i(s.container()))})(e,t)),Xc=(e,t,n)=>!vg(t)&&(ny(e,t,n)||QA(e,t,n)||bg(e,t,n)||ay(e,t,n)||((o,r)=>{const s=Jn(o.dom,r).getOr(r),i=ly(o.dom,"next");return r.isAtEnd()&&(i(r.container())||i(s.container()))})(e,t)),yg=(e,t,n)=>Yc(e,t,n)||Xc(e,(o=>{const r=o.container(),s=o.offset();return X(r)&&s<r.data.length?U(r,s+1):o})(t),n),dy=(e,t)=>xu(e.charAt(t)),uy=(e,t)=>Vi(e.charAt(t)),my=(e,t,n,o)=>{const r=t.data,s=U(t,0);return n||!dy(r,0)||yg(e,s,o)?!!(n&&uy(r,0)&&Yc(e,s,o))&&(t.data=nn+r.slice(1),!0):(t.data=" "+r.slice(1),!0)},fy=(e,t,n,o)=>{const r=t.data,s=U(t,r.length-1);return n||!dy(r,r.length-1)||yg(e,s,o)?!!(n&&uy(r,r.length-1)&&Xc(e,s,o))&&(t.data=r.slice(0,-1)+nn,!0):(t.data=r.slice(0,-1)+" ",!0)},eN=(e,t,n)=>{const o=t.container();if(!X(o))return w.none();if((r=>{const s=r.container();return X(s)&&Et(s.data,nn)})(t)){const r=my(e,o,!1,n)||(s=>{const i=s.data,a=(l=>{const c=l.split("");return Me(c,(d,u)=>xu(d)&&u>0&&u<c.length-1&&Mf(c[u-1])&&Mf(c[u+1])?" ":d).join("")})(i);return a!==i&&(s.data=a,!0)})(o)||fy(e,o,!1,n);return To(r,t)}if(yg(e,t,n)){const r=my(e,o,!0,n)||fy(e,o,!0,n);return To(r,t)}return w.none()},gy=(e,t,n,o)=>{if(n===0)return;const r=B(e),s=fr(r,c=>o.isBlock(We(c))).getOr(r),i=e.data.slice(t,t+n),a=t+n>=e.data.length&&Xc(s,U(e,e.data.length),o),l=t===0&&Yc(s,U(e,0),o);e.replaceData(t,n,Gd(i,4,l,a))},zu=(e,t,n)=>{const o=e.data.slice(t),r=o.length-Os(o).length;gy(e,t,r,n)},_g=(e,t,n)=>{const o=e.data.slice(0,t),r=o.length-Nr(o).length;gy(e,t-r,r,n)},Cg=(e,t,n,o,r=!0)=>{const s=Nr(e.data).length,i=r?e:t,a=r?t:e;return r?i.appendData(a.data):i.insertData(0,a.data),Nt(B(a)),o&&zu(i,s,n),i},tN=(e,t)=>((n,o)=>{const r=n.container(),s=n.offset();return!U.isTextPosition(n)&&r===o.parentNode&&s>U.before(o).offset()})(t,e)?U(t.container(),t.offset()-1):t,py=e=>{return Cr(e.previousSibling)?w.some((t=e.previousSibling,X(t)?U(t,t.data.length):U.after(t))):e.previousSibling?rr(e.previousSibling):w.none();var t},hy=e=>{return Cr(e.nextSibling)?w.some((t=e.nextSibling,X(t)?U(t,0):U.before(t))):e.nextSibling?Ln(e.nextSibling):w.none();var t},nN=(e,t,n)=>((o,r,s)=>o?((i,a)=>hy(a).orThunk(()=>py(a)).orThunk(()=>((l,c)=>Jn(l,U.after(c)).orThunk(()=>mo(l,U.before(c))))(i,a)))(r,s):((i,a)=>py(a).orThunk(()=>hy(a)).orThunk(()=>((l,c)=>w.from(c.previousSibling?c.previousSibling:c.parentNode).bind(d=>mo(l,U.before(d))).orThunk(()=>Jn(l,U.after(c))))(i,a)))(r,s))(e,t,n).map(ae(tN,n)),by=(e,t,n)=>{n.fold(()=>{e.focus()},o=>{e.selection.setRng(o.toRange(),t)})},oN=(e,t)=>t&&Re(e.schema.getBlockElements(),We(t)),Gi=(e,t,n,o=!0,r=!1)=>{const s=nN(t,e.getBody(),n.dom),i=fr(n,ae(oN,e),(a=e.getBody(),c=>c.dom===a));var a;const l=((c,d,u,f)=>{const h=io(c).filter(En),g=Ro(c).filter(En);return Nt(c),(b=h,p=g,v=d,_=(C,E,x)=>{const S=C.dom,O=E.dom,T=S.data.length;return Cg(S,O,u,f),x.container()===O?U(S,T):x},b.isSome()&&p.isSome()&&v.isSome()?w.some(_(b.getOrDie(),p.getOrDie(),v.getOrDie())):w.none()).orThunk(()=>(f&&(h.each(C=>_g(C.dom,C.dom.length,u)),g.each(C=>zu(C.dom,0,u))),d));var b,p,v,_})(n,s,e.schema,((c,d)=>Re(c.schema.getTextInlineElements(),We(d)))(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):i.bind(c=>((d,u,f)=>{if(kn(d,u)){const h=wa('<br data-mce-bogus="1">');return f?W(xn(u),g=>{Xf(g)||Nt(g)}):Hs(u),Xt(u,h),w.some(U.before(h.dom))}return w.none()})(e.schema,c,r)).fold(()=>{o&&by(e,t,l)},c=>{o&&by(e,t,w.some(c))})},rN=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Qi=(e,t)=>so(B(t),Jk(e))&&!vs(e.schema,t)&&e.dom.isEditable(t),vy=e=>{var t;return ot.DOM.getStyle(e,"direction",!0)==="rtl"||(n=>rN.test(n))((t=e.textContent)!==null&&t!==void 0?t:"")},ai=(e,t,n)=>{const o=((r,s,i)=>ue(ot.DOM.getParents(i.container(),"*",s),r))(e,t,n);return w.from(o[o.length-1])},Ho=(e,t)=>{const n=t.container(),o=t.offset();return e?Zs(n)?X(n.nextSibling)?U(n.nextSibling,0):U.after(n):df(t)?U(n,o+1):t:Zs(n)?X(n.previousSibling)?U(n.previousSibling,n.previousSibling.data.length):U.before(n):uf(t)?U(n,o-1):t},yy=ae(Ho,!0),_y=ae(Ho,!1),Cy=(e,t)=>{const n=o=>o.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},Uu=e=>Cy(e,"Delete"),wy=e=>Cy(e,"ForwardDelete"),sN=e=>eb(e)||$a(e),Hu=(e,t)=>Oo(e,t)?Ir(t,sN,(n=>o=>is(bo(o),n,tt))(e)):w.none(),wg=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},Ey=(e,t,n)=>bn(Ln(n),rr(n),(o,r)=>{const s=Ho(!0,o),i=Ho(!1,r),a=Ho(!1,t);return e?Jn(n,a).exists(l=>l.isEqual(i)&&t.isEqual(s)):mo(n,a).exists(l=>l.isEqual(s)&&t.isEqual(i))}).getOr(!0),xy=e=>{var t;return(Dd(t=e)===8||We(t)==="#comment"?io(e):Wl(e)).bind(xy).orThunk(()=>w.some(e))},ky=(e,t,n,o=!0)=>{var r;t.deleteContents();const s=xy(n).getOr(n),i=B((r=e.dom.getParent(s.dom,e.dom.isBlock))!==null&&r!==void 0?r:n.dom);if(i.dom===e.getBody()?wg(e,o):kn(e.schema,i,{checkRootAsContent:!1})&&(Qs(i),o&&e.selection.setCursorLocation(i.dom,0)),!tt(n,i)){const l=is(bo(i),n)?[]:bo(a=i).map(xn).map(c=>ue(c,d=>!tt(a,d))).getOr([]);W(l.concat(xn(n)),c=>{tt(c,i)||Oo(c,i)||!kn(e.schema,c)||Nt(c)})}var a},Eg=e=>vn(e,"td,th"),Sy=(e,t)=>$c(B(e),t),xg=(e,t)=>({start:e,end:t}),Gc=Ur([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),qu=(e,t)=>cs(B(e),"td,th",t),Ay=e=>!tt(e.start,e.end),Ny=(e,t)=>$c(e.start,t).bind(n=>$c(e.end,t).bind(o=>To(tt(n,o),n))),kg=e=>t=>Ny(t,e).map(n=>((o,r,s)=>({rng:o,table:r,cells:s}))(t,n,Eg(n))),Ty=(e,t,n,o)=>{if(n.collapsed||!e.forall(Ay))return w.none();if(t.isSameTable){const r=e.bind(kg(o));return w.some({start:r,end:r})}{const r=qu(n.startContainer,o),s=qu(n.endContainer,o),i=r.bind((l=>c=>$c(c,l).bind(d=>oo(Eg(d)).map(u=>xg(c,u))))(o)).bind(kg(o)),a=s.bind((l=>c=>$c(c,l).bind(d=>on(Eg(d)).map(u=>xg(u,c))))(o)).bind(kg(o));return w.some({start:i,end:a})}},Oy=(e,t)=>fi(e,n=>tt(n,t)),Sg=e=>bn(Oy(e.cells,e.rng.start),Oy(e.cells,e.rng.end),(t,n)=>e.cells.slice(t,n+1)),Ry=(e,t)=>{const{startTable:n,endTable:o}=t,r=e.cloneRange();return n.each(s=>r.setStartAfter(s.dom)),o.each(s=>r.setEndBefore(s.dom)),r},iN=(e,t)=>{const n=(s=>i=>tt(s,i))(e),o=((s,i)=>{const a=qu(s.startContainer,i),l=qu(s.endContainer,i);return bn(a,l,xg)})(t,n),r=((s,i)=>{const a=Sy(s.startContainer,i),l=Sy(s.endContainer,i),c=a.isSome(),d=l.isSome(),u=bn(a,l,tt).getOr(!1);return(f=>bn(f.startTable,f.endTable,(h,g)=>{const b=Kd(h,v=>tt(v,g)),p=Kd(g,v=>tt(v,h));return b||p?{...f,startTable:b?w.none():f.startTable,endTable:p?w.none():f.endTable,isSameTable:!1,isMultiTable:!1}:f}).getOr(f))({startTable:a,endTable:l,isStartInTable:c,isEndInTable:d,isSameTable:u,isMultiTable:!u&&c&&d})})(t,n);return((s,i,a)=>s.exists(l=>((c,d)=>!Ay(c)&&Ny(c,d).exists(u=>{const f=u.dom.rows;return f.length===1&&f[0].cells.length===1}))(l,a)&&jf(l.start,i)))(o,t,n)?o.map(s=>Gc.singleCellTable(t,s.start)):r.isMultiTable?((s,i,a,l)=>Ty(s,i,a,l).bind(({start:c,end:d})=>{const u=c.bind(Sg).getOr([]),f=d.bind(Sg).getOr([]);if(u.length>0&&f.length>0){const h=Ry(a,i);return w.some(Gc.multiTable(u,f,h))}return w.none()}))(o,r,t,n):((s,i,a,l)=>Ty(s,i,a,l).bind(({start:c,end:d})=>c.or(d)).bind(c=>{const{isSameTable:d}=i,u=Sg(c).getOr([]);if(d&&c.cells.length===u.length)return w.some(Gc.fullTable(c.table));if(u.length>0){if(d)return w.some(Gc.partialTable(u,w.none()));{const f=Ry(a,i);return w.some(Gc.partialTable(u,w.some({...i,rng:f})))}}return w.none()}))(o,r,t,n)},By=e=>W(e,t=>{rn(t,"contenteditable"),Qs(t)}),Ag=(e,t,n,o)=>{const r=n.cloneRange();o?(r.setStart(n.startContainer,n.startOffset),r.setEndAfter(t.dom.lastChild)):(r.setStartBefore(t.dom.firstChild),r.setEnd(n.endContainer,n.endOffset)),Ng(e,r,t,!1).each(s=>s())},Dy=e=>{const t=Ga(e),n=B(e.selection.getNode());Da(n.dom)&&kn(e.schema,n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&Ve(t,o=>tt(o,n))&&tn(n,"data-mce-selected","1")},Py=(e,t,n)=>w.some(()=>{const o=e.selection.getRng(),r=n.bind(({rng:s,isStartInTable:i})=>{const a=((c,d)=>w.from(c.dom.getParent(d,c.dom.isBlock)).map(B))(e,i?s.endContainer:s.startContainer);s.deleteContents(),((c,d,u)=>{u.each(f=>{d?Nt(f):(Qs(f),c.selection.setCursorLocation(f.dom,0))})})(e,i,a.filter(ae(kn,e.schema)));const l=i?t[0]:t[t.length-1];return Ag(e,l,o,i),kn(e.schema,l)?w.none():w.some(i?t.slice(1):t.slice(0,-1))}).getOr(t);By(r),Dy(e)}),aN=(e,t,n,o)=>w.some(()=>{const r=e.selection.getRng(),s=t[0],i=n[n.length-1];Ag(e,s,r,!0),Ag(e,i,r,!1);const a=kn(e.schema,s)?t:t.slice(1),l=kn(e.schema,i)?n:n.slice(0,-1);By(a.concat(l)),o.deleteContents(),Dy(e)}),Ng=(e,t,n,o=!0)=>w.some(()=>{ky(e,t,n,o)}),lN=(e,t)=>w.some(()=>Gi(e,!1,t)),Ly=(e,t)=>en(Es(t,e),Ac),Tg=(e,t)=>en(Es(t,e),_i("caption")),Wu=(e,t)=>w.some(()=>{Qs(t),e.selection.setCursorLocation(t.dom,0)}),My=(e,t)=>e?Q0(t):gg(t),cN=(e,t,n)=>{const o=B(e.getBody());return Tg(o,n).fold(()=>((r,s,i,a)=>{const l=U.fromRangeStart(r.selection.getRng());return Ly(i,a).bind(c=>kn(r.schema,c,{checkRootAsContent:!1})?Wu(r,c):((d,u,f,h,g)=>Ya(f,d.getBody(),g).bind(b=>Ly(u,B(b.getNode())).bind(p=>tt(p,h)?w.none():w.some(Te))))(r,i,s,c,l))})(e,t,o,n).orThunk(()=>To(((r,s)=>{const i=U.fromRangeStart(r.selection.getRng());return My(s,i)||Fo(s,r.getBody(),i).exists(a=>My(s,a))})(e,t),Te)),r=>((s,i,a,l)=>{const c=U.fromRangeStart(s.selection.getRng());return kn(s.schema,l)?Wu(s,l):((d,u,f,h,g)=>Ya(f,d.getBody(),g).fold(()=>w.some(Te),b=>((p,v,_,C)=>Ln(p.dom).bind(E=>rr(p.dom).map(x=>v?_.isEqual(E)&&C.isEqual(x):_.isEqual(x)&&C.isEqual(E))).getOr(!0))(h,f,g,b)?((p,v)=>Wu(p,v))(d,h):((p,v,_)=>Tg(p,B(_.getNode())).fold(()=>w.some(Te),C=>To(!tt(C,v),Te)))(u,h,b)))(s,a,i,l,c)})(e,t,o,r))},Og=(e,t)=>{const n=B(e.selection.getStart(!0)),o=Ga(e);return e.selection.isCollapsed()&&o.length===0?cN(e,t,n):((r,s,i)=>{const a=B(r.getBody()),l=r.selection.getRng();return i.length!==0?Py(r,i,w.none()):((c,d,u,f)=>Tg(d,f).fold(()=>((h,g,b)=>iN(g,b).bind(p=>p.fold(ae(Ng,h),ae(lN,h),ae(Py,h),ae(aN,h))))(c,d,u),h=>((g,b)=>Wu(g,b))(c,h)))(r,a,l,s)})(e,n,o)},Zi=(e,t)=>{let n=t;for(;n&&n!==e;){if(vo(n)||wt(n))return n;n=n.parentNode}return null},dN=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],uN=Q.each,Rg=e=>{const t=e.dom,n=new Set(e.serializer.getTempAttrs()),o=r=>Ve(dN,s=>_t(r,s))||n.has(r);return{compare:(r,s)=>{if(r.nodeName!==s.nodeName||r.nodeType!==s.nodeType)return!1;const i=l=>{const c={};return uN(t.getAttribs(l),d=>{const u=d.nodeName.toLowerCase();u==="style"||o(u)||(c[u]=t.getAttrib(l,u))}),c},a=(l,c)=>{for(const d in l)if(Re(l,d)){const u=c[d];if(Ft(u)||l[d]!==u)return!1;delete c[d]}for(const d in c)if(Re(c,d))return!1;return!0};return he(r)&&he(s)&&(!a(i(r),i(s))||!a(t.parseStyle(t.getAttrib(r,"style")),t.parseStyle(t.getAttrib(s,"style"))))?!1:!$o(r)&&!$o(s)},isAttributeInternal:o}},Iy=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),Fy=(e,t,n,o)=>{const r=n.name;for(let s=0,i=e.length;s<i;s++){const a=e[s];if(a.name===r){const l=o.nodes[r];l?l.nodes.push(n):o.nodes[r]={filter:a,nodes:[n]}}}if(n.attributes)for(let s=0,i=t.length;s<i;s++){const a=t[s],l=a.name;if(l in n.attributes.map){const c=o.attributes[l];c?c.nodes.push(n):o.attributes[l]={filter:a,nodes:[n]}}}},jy=(e,t)=>{const n=(o,r)=>{Ct(o,s=>{const i=An(s.nodes);W(s.filter.callbacks,a=>{for(let l=i.length-1;l>=0;l--){const c=i[l];(r?c.attr(s.filter.name)!==void 0:c.name===s.filter.name)&&!Rt(c.parent)||i.splice(l,1)}i.length>0&&a(i,s.filter.name,t)})})};n(e.nodes,!1),n(e.attributes,!0)},$y=(e,t,n,o={})=>{const r=((s,i,a)=>{const l={nodes:{},attributes:{}};return a.firstChild&&((c,d)=>{let u=c;for(;u=u.walk();)Fy(s,i,u,l)})(a),l})(e,t,n);jy(r,o)},Bg=(e,t,n,o)=>{if((e.pad_empty_with_br||t.insert)&&n(o)){const r=new Wn("br",1);t.insert&&r.attr("data-mce-bogus","1"),o.empty().append(r)}else o.empty().append(new Wn("#text",3)).value=nn},zy=(e,t)=>{const n=e?.firstChild;return Z(n)&&n===e.lastChild&&n.name===t},Qc=(e,t,n,o)=>o.isEmpty(t,n,r=>((s,i)=>{const a=s.getElementRule(i.name);return a?.paddEmpty===!0})(e,r)),mN=e=>{let t;for(let n=e;n;n=n.parent){const o=n.attr("contenteditable");if(o==="false")break;o==="true"&&(t=n)}return w.from(t)},Dg=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const o=e.children();for(const r of o)n&&!t.isValidChild(n.name,r.name)&&Dg(r,t,n);e.unwrap()}},Pg=(e,t,n,o=Te)=>{const r=t.getTextBlockElements(),s=t.getNonEmptyElements(),i=t.getWhitespaceElements(),a=Q.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),l=new Set,c=d=>d!==n&&!a[d.name];for(let d=0;d<e.length;d++){const u=e[d];let f,h,g;if(!u.parent||l.has(u))continue;if(r[u.name]&&u.parent.name==="li"){let p=u.next;for(;p&&r[p.name];)p.name="li",l.add(p),u.parent.insert(p,u.parent),p=p.next;u.unwrap();continue}const b=[u];for(f=u.parent;f&&!t.isValidChild(f.name,u.name)&&c(f);f=f.parent)b.push(f);if(f&&b.length>1)if(Lg(t,u,f))Dg(u,t);else{b.reverse(),h=b[0].clone(),o(h);let p=h;for(let v=0;v<b.length-1;v++){t.isValidChild(p.name,b[v].name)&&v>0?(g=b[v].clone(),o(g),p.append(g)):g=p;for(let _=b[v].firstChild;_&&_!==b[v+1];){const C=_.next;g.append(_),_=C}p=g}Qc(t,s,i,h)?f.insert(u,b[0],!0):(f.insert(h,b[0],!0),f.insert(u,h)),f=b[0],(Qc(t,s,i,f)||zy(f,"br"))&&f.empty().remove()}else if(u.parent){if(u.name==="li"){let p=u.prev;if(p&&(p.name==="ul"||p.name==="ol")){p.append(u);continue}if(p=u.next,p&&(p.name==="ul"||p.name==="ol")&&p.firstChild){p.insert(u,p.firstChild,!0);continue}const v=new Wn("ul",1);o(v),u.wrap(v);continue}if(t.isValidChild(u.parent.name,"div")&&t.isValidChild("div",u.name)){const p=new Wn("div",1);o(p),u.wrap(p)}else Dg(u,t)}}},Lg=(e,t,n=t.parent)=>!(!n||(!e.children[t.name]||e.isValidChild(n.name,t.name))&&(t.name!=="a"||!((o,r)=>{let s=o;for(;s;){if(s.name==="a")return!0;s=s.parent}return!1})(n))&&(!(o=>o.name==="summary")(n)||!Iy(t)||n?.firstChild===t&&n?.lastChild===t)),Mg=e=>e.collapsed?e:(t=>{const n=U.fromRangeStart(t),o=U.fromRangeEnd(t),r=t.commonAncestorContainer;return Fo(!1,r,o).map(s=>!Hr(n,o,r)&&Hr(n,s,r)?((i,a,l,c)=>{const d=document.createRange();return d.setStart(i,a),d.setEnd(l,c),d})(n.container(),n.offset(),s.container(),s.offset()):t).getOr(t)})(e),fN=(e,t)=>{let n=t.firstChild,o=t.lastChild;return n&&n.name==="meta"&&(n=n.next),o&&o.attr("id")==="mce_marker"&&(o=o.prev),((r,s)=>{const i=r.getNonEmptyElements();return Z(s)&&(s.isEmpty(i)||((a,l)=>a.getBlockElements()[l.name]&&(c=>Z(c.firstChild)&&c.firstChild===c.lastChild)(l)&&(c=>c.name==="br"||c.value===nn)(l.firstChild))(r,s))})(e,o)&&(o=o?.prev),!(!n||n!==o||n.name!=="ul"&&n.name!=="ol")},gN=e=>{return e.length>0&&(!(n=e[e.length-1]).firstChild||Z((t=n)==null?void 0:t.firstChild)&&t.firstChild===t.lastChild&&(o=>o.data===nn||Tt(o))(t.firstChild))?e.slice(0,-1):e;var t,n},Ig=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&n.nodeName==="LI"?n:null},Uy=(e,t)=>{const n=U.after(e),o=Wr(t).prev(n);return o?o.toRange():null},pN=(e,t,n,o)=>{const r=((u,f,h)=>{const g=f.serialize(h);return(b=>{var p,v;const _=b.firstChild,C=b.lastChild;return _&&_.nodeName==="META"&&((p=_.parentNode)===null||p===void 0||p.removeChild(_)),C&&C.id==="mce_marker"&&((v=C.parentNode)===null||v===void 0||v.removeChild(C)),b})(u.createFragment(g))})(t,e,o),s=Ig(t,n.startContainer),i=gN((a=r.firstChild,ue((l=a?.childNodes)!==null&&l!==void 0?l:[],u=>u.nodeName==="LI")));var a,l;const c=t.getRoot(),d=u=>{const f=U.fromRangeStart(n),h=Wr(t.getRoot()),g=u===1?h.prev(f):h.next(f),b=g?.getNode();return!b||Ig(t,b)!==s};return s?d(1)?((u,f,h)=>{const g=u.parentNode;return g&&Q.each(f,b=>{g.insertBefore(b,u)}),((b,p)=>{const v=U.before(b),_=Wr(p).next(v);return _?_.toRange():null})(u,h)})(s,i,c):d(2)?((u,f,h,g)=>(g.insertAfter(f.reverse(),u),Uy(f[0],h)))(s,i,c,t):((u,f,h,g)=>{const b=((v,_)=>{const C=_.cloneRange(),E=_.cloneRange();return C.setStartBefore(v),E.setEndAfter(v),[C.cloneContents(),E.cloneContents()]})(u,g),p=u.parentNode;return p&&(p.insertBefore(b[0],u),Q.each(f,v=>{p.insertBefore(v,u)}),p.insertBefore(b[1],u),p.removeChild(u)),Uy(f[f.length-1],h)})(s,i,c,n):null},hN=["pre"],Fg=Da,bN=(e,t,n)=>{var o,r;const s=e.selection,i=e.dom,a=e.parser,l=n.merge,c=oi({validate:!0},e.schema),d='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(t=Co(t)),t.indexOf("{$caret}")===-1&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,d);let u=s.getRng();const f=u.startContainer,h=e.getBody();f===h&&s.isCollapsed()&&i.isBlock(h.firstChild)&&((C,E)=>Z(E)&&!C.schema.getVoidElements()[E.nodeName])(e,h.firstChild)&&i.isEmpty(h.firstChild)&&(u=i.createRng(),u.setStart(h.firstChild,0),u.setEnd(h.firstChild,0),s.setRng(u)),s.isCollapsed()||(C=>{const E=C.dom,x=Mg(C.selection.getRng());C.selection.setRng(x);const S=E.getParent(x.startContainer,Fg);((O,T,L)=>!!Z(L)&&L===O.getParent(T.endContainer,Fg)&&jf(B(L),T))(E,x,S)?Ng(C,x,B(S)):x.startContainer===x.endContainer&&x.endOffset-x.startOffset==1&&X(x.startContainer.childNodes[x.startOffset])?x.deleteContents():C.getDoc().execCommand("Delete",!1)})(e);const g=s.getNode(),b={context:g.nodeName.toLowerCase(),data:n.data,insert:!0},p=a.parse(t,b);if(n.paste===!0&&fN(e.schema,p)&&((C,E)=>!!Ig(C,E))(i,g))return u=pN(c,i,s.getRng(),p),u&&s.setRng(u),t;n.paste===!0&&((C,E,x,S)=>{var O;const T=E.firstChild,L=E.lastChild,I=T===(L.attr("data-mce-type")==="bookmark"?L.prev:L),N=ee(hN,T.name);if(I&&N){const R=T.attr("contenteditable")!=="false",P=((O=C.getParent(x,C.isBlock))===null||O===void 0?void 0:O.nodeName.toLowerCase())===T.name,H=w.from(Zi(S,x)).forall(vo);return R&&P&&H}return!1})(i,p,g,e.getBody())&&((o=p.firstChild)===null||o===void 0||o.unwrap()),(C=>{let E=C;for(;E=E.walk();)E.type===1&&E.attr("data-mce-fragment","1")})(p);let v=p.lastChild;if(v&&v.attr("id")==="mce_marker"){const C=v;for(v=v.prev;v;v=v.walk(!0))if(v.type===3||!i.isBlock(v.name)){v.parent&&e.schema.isValidChild(v.parent.name,"span")&&v.parent.insert(C,v,v.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(g),b.invalid||((C,E,x)=>{var S;return Ve(x.children(),Iy)&&((S=C.getParent(E,C.isBlock))===null||S===void 0?void 0:S.nodeName)==="SUMMARY"})(i,g,p)){e.selection.setContent(d);let C,E=s.getNode();const x=e.getBody();for(Ti(E)?E=C=x:C=E;C&&C!==x;)E=C,C=C.parentNode;t=E===x?x.innerHTML:i.getOuterHTML(E);const S=a.parse(t),O=(R=>{for(let P=R;P;P=P.walk())if(P.attr("id")==="mce_marker")return w.some(P);return w.none()})(S),T=O.bind(mN).getOr(S);O.each(R=>R.replace(p));const L=p.children(),I=(r=p.parent)!==null&&r!==void 0?r:S;p.unwrap();const N=ue(L,R=>Lg(e.schema,R,I));Pg(N,e.schema,T),$y(a.getNodeFilters(),a.getAttributeFilters(),S),t=c.serialize(S),E===x?i.setHTML(x,t):i.setOuterHTML(E,t)}else t=c.serialize(p),((C,E,x)=>{var S;if(x.getAttribute("data-mce-bogus")==="all")(S=x.parentNode)===null||S===void 0||S.insertBefore(C.dom.createFragment(E),x);else{const O=x.firstChild,T=x.lastChild;!O||O===T&&O.nodeName==="BR"?C.dom.setHTML(x,E):C.selection.setContent(E,{no_events:!0})}})(e,t,g);var _;return((C,E)=>{const x=C.schema.getTextInlineElements(),S=C.dom;if(E){const O=C.getBody(),T=Rg(C),L="*[data-mce-fragment]",I=S.select(L);Q.each(I,N=>{const R=G=>Z(x[G.nodeName.toLowerCase()]),P=G=>G.childNodes.length===1;if(!K0(S,H=N)&&!((G,Y)=>K0(G,Y)&&Ve(nl(G,Y),me=>(be=>W0.has(be))(me)))(S,H)&&R(N)&&P(N)){const G=nl(S,N),Y=(fe,oe)=>cr(fe,pe=>ee(oe,pe)),me=fe=>P(N)&&S.is(fe,L)&&R(fe)&&(fe.nodeName===N.nodeName&&Y(G,nl(S,fe))||me(fe.children[0])),be=fe=>Z(fe)&&fe!==O&&(T.compare(N,fe)||be(fe.parentElement)),ye=fe=>Z(fe)&&fe!==O&&S.is(fe,L)&&(((oe,pe,D)=>{const M=nl(oe,pe),$=nl(oe,D),q=re=>{var J,Ce;const Ee=(J=oe.getStyle(pe,re))!==null&&J!==void 0?J:"",Oe=(Ce=oe.getStyle(D,re))!==null&&Ce!==void 0?Ce:"";return $n(Ee)&&$n(Oe)&&Ee!==Oe};return Ve(M,re=>{const J=Ce=>Ve(Ce,Ee=>Ee===re);if(!J($)&&J(V0)){const Ce=ue($,Ee=>Ve(V0,Oe=>_t(Ee,Oe)));return Ve(Ce,q)}return q(re)})})(S,N,fe)||ye(fe.parentElement));(me(N.children[0])||be(N.parentElement)&&!ye(N.parentElement))&&S.remove(N,!0)}var H})}})(e,l),((C,E)=>{var x,S,O;let T;const L=C.dom,I=C.selection;if(!E)return;I.scrollIntoView(E);const N=Zi(C.getBody(),E);if(N&&L.getContentEditable(N)==="false")return L.remove(E),void I.select(N);let R=L.createRng();const P=E.previousSibling;if(X(P)){R.setStart(P,(S=(x=P.nodeValue)===null||x===void 0?void 0:x.length)!==null&&S!==void 0?S:0);const G=E.nextSibling;X(G)&&(P.appendData(G.data),(O=G.parentNode)===null||O===void 0||O.removeChild(G))}else R.setStartBefore(E),R.setEndBefore(E);const H=L.getParent(E,L.isBlock);if(L.remove(E),H&&L.isEmpty(H)){const G=Fg(H);Hs(B(H)),R.setStart(H,0),R.setEnd(H,0),G||(Y=>!!Y.getAttribute("data-mce-fragment"))(H)||!(T=(Y=>{let me=U.fromRangeStart(Y);return me=Wr(C.getBody()).next(me),me?.toRange()})(R))?L.add(H,L.create("br",G?{}:{"data-mce-bogus":"1"})):(R=T,L.remove(H))}I.setRng(R)})(e,i.get("mce_marker")),_=e.getBody(),Q.each(_.getElementsByTagName("*"),C=>{C.removeAttribute("data-mce-fragment")}),((C,E,x)=>{w.from(C.getParent(E,"td,th")).map(B).each(S=>((O,T)=>{Wl(O).each(L=>{io(L).each(I=>{T.isBlock(We(O))&&$i(L)&&T.isBlock(We(I))&&Nt(L)})})})(S,x))})(i,s.getStart(),e.schema),((C,E,x)=>{const S=Fd(B(x),O=>tt(O,B(E)));dr(S,S.length-2).filter(zn).fold(()=>La(C,E),O=>La(C,O.dom))})(e.schema,e.getBody(),s.getStart()),t},Vu=e=>e instanceof Wn,jg=(e,t,n)=>{e.dom.setHTML(e.getBody(),t),n!==!0&&(o=>{tl(o)&&Ln(o.getBody()).each(r=>{const s=r.getNode(),i=Lo(s)?Ln(s).getOr(r):r;o.selection.setRng(i.toRange())})})(e)},Hy=e=>Ge(e)?e:ft,$g=(e,t,n)=>{const o=t(e),r=Hy(n);return o.orThunk(()=>r(e)?w.none():((s,i,a)=>{let l=s.dom;const c=Hy(a);for(;l.parentNode;){l=l.parentNode;const d=B(l),u=i(d);if(u.isSome())return u;if(c(d))break}return w.none()})(e,t,r))},zg=Wf,qy=(e,t,n)=>{const o=e.formatter.get(n);if(o)for(let r=0;r<o.length;r++){const s=o[r];if(zo(s)&&s.inherit===!1&&e.dom.is(t,s.selector))return!0}return!1},Ug=(e,t,n,o,r)=>{const s=e.dom.getRoot();if(t===s)return!1;const i=e.dom.getParent(t,a=>!!qy(e,a,n)||a.parentNode===s||!!Kr(e,a,n,o,!0));return!!Kr(e,i,n,o,r)},Ku=(e,t,n)=>!(!pn(n)||!zg(t,n.inline))||!(!Vr(n)||!zg(t,n.block))||!!zo(n)&&he(t)&&e.is(t,n.selector),Wy=(e,t,n,o,r,s)=>{const i=n[o],a=o==="attributes";if(Ge(n.onmatch))return n.onmatch(t,n,o);if(i){if(es(i)){for(let l=0;l<i.length;l++)if(a?e.getAttrib(t,i[l]):Su(e,t,i[l]))return!0}else for(const l in i)if(Re(i,l)){const c=a?e.getAttrib(t,l):Su(e,t,l),d=ni(i[l],s),u=Rt(c)||Rs(c);if(u&&Rt(d))continue;if(r&&u&&!n.exact||(!r||n.exact)&&!zg(c,Vf(d,l)))return!1}}return!0},Kr=(e,t,n,o,r)=>{const s=e.formatter.get(n),i=e.dom;if(s&&he(t))for(let a=0;a<s.length;a++){const l=s[a];if(Ku(e.dom,t,l)&&Wy(i,t,l,"attributes",r,o)&&Wy(i,t,l,"styles",r,o)){const c=l.classes;if(c){for(let d=0;d<c.length;d++)if(!e.dom.hasClass(t,ni(c[d],o)))return}return l}}},Hg=(e,t,n,o,r)=>{if(o)return Ug(e,o,t,n,r);if(o=e.selection.getNode(),Ug(e,o,t,n,r))return!0;const s=e.selection.getStart();return!(s===o||!Ug(e,s,t,n,r))},Zc=yn,Vy=e=>{if(e){const t=new an(e,e);for(let n=t.current();n;n=t.next())if(X(n))return n}return null},qg=e=>{const t=sn("span");return Qo(t,{id:Pf,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Xt(t,Dr(Zc)),t},Wg=(e,t,n)=>{const o=e.dom,r=e.selection;if(Lv(t))Gi(e,!1,B(t),n,!0);else{const s=r.getRng(),i=o.getParent(t,o.isBlock),a=s.startContainer,l=s.startOffset,c=s.endContainer,d=s.endOffset,u=(f=>{const h=Vy(f);return h&&h.data.charAt(0)===Zc&&h.deleteData(0,1),h})(t);o.remove(t,!0),a===u&&l>0&&s.setStart(u,l-1),c===u&&d>0&&s.setEnd(u,d-1),i&&o.isEmpty(i)&&Qs(B(i)),r.setRng(s)}},Vg=(e,t,n)=>{const o=e.dom,r=e.selection;if(t)Wg(e,t,n);else if(!(t=Wi(e.getBody(),r.getStart())))for(;t=o.get(Pf);)Wg(e,t,n)},Ky=(e,t)=>(e.appendChild(t),t),Yy=(e,t)=>{var n;const o=Kt(e,(s,i)=>Ky(s,i.cloneNode(!1)),t),r=(n=o.ownerDocument)!==null&&n!==void 0?n:document;return Ky(o,r.createTextNode(Zc))},Xy=e=>Jh(e,Sc(e).replace(new RegExp(`${nn}$`)," ")),Gy=(e,t)=>{const n=()=>{t===null||e.dom.isEmpty(t)||io(B(t)).each(o=>{En(o)?Xy(o):zs(o,r=>En(r)).each(r=>{En(r)&&Xy(r)})})};e.once("input",o=>{o.data&&!Vi(o.data)&&(o.isComposing?e.once("compositionend",()=>{n()}):n())})},vN=(e,t,n,o)=>{const r=e.dom,s=e.selection;let i=!1;const a=e.formatter.get(t);if(!a)return;const l=s.getRng(),c=l.startContainer,d=l.startOffset;let u=c;X(c)&&(d!==c.data.length&&(i=!0),u=u.parentNode);const f=[];let h;for(;u;){if(Kr(e,u,t,n,o)){h=u;break}u.nextSibling&&(i=!0),f.push(u),u=u.parentNode}if(h)if(i){const g=s.getBookmark();l.collapse(!0);let b=Ki(r,l,a,!0);b=Pu(b),e.formatter.remove(t,n,b,o),s.moveToBookmark(g)}else{const g=Wi(e.getBody(),h),b=Z(g)?r.getParents(h.parentNode,St,g):[],p=qg(!1).dom;((C,E,x)=>{var S,O;const T=C.dom,L=T.getParent(x,ae(Hf,C.schema));L&&T.isEmpty(L)?(S=x.parentNode)===null||S===void 0||S.replaceChild(E,x):((I=>{const N=vn(I,"br"),R=ue((P=>{const H=[];let G=P.dom;for(;G;)H.push(B(G)),G=G.lastChild;return H})(I).slice(-1),$i);N.length===R.length&&W(R,Nt)})(B(x)),T.isEmpty(x)?(O=x.parentNode)===null||O===void 0||O.replaceChild(E,x):T.insertAfter(E,x))})(e,p,g??h);const v=((C,E,x,S,O,T)=>{const L=C.formatter,I=C.dom,N=ue(In(L.get()),P=>P!==S&&!Et(P,"removeformat")),R=((P,H,G)=>Lt(G,(Y,me)=>{const be=((ye,fe)=>Kf(ye,fe,oe=>{const pe=D=>Ge(D)||D.length>1&&D.charAt(0)==="%";return Ve(["styles","attributes"],D=>At(oe,D).exists(M=>{const $=Xe(M)?M:da(M);return Ve($,pe)}))}))(P,me);return P.formatter.matchNode(H,me,{},be)?Y.concat([me]):Y},[]))(C,x,N);if(ue(R,P=>!((H,G,Y)=>{const me=["inline","block","selector","attributes","styles","classes"],be=ye=>Ar(ye,(fe,oe)=>Ve(me,pe=>pe===oe));return Kf(H,G,ye=>{const fe=be(ye);return Kf(H,Y,oe=>{const pe=be(oe);return((D,M,$=pt)=>at($).eq(D,M))(fe,pe)})})})(C,P,S)).length>0){const P=x.cloneNode(!1);return I.add(E,P),L.remove(S,O,P,T),I.remove(P),w.some(P)}return w.none()})(e,p,h,t,n,o),_=Yy([...f,...v.toArray(),...b],p);g&&Wg(e,g,Z(g)),s.setCursorLocation(_,1),Gy(e,p),r.isEmpty(h)&&r.remove(h)}},Qy=e=>{const t=qg(!1),n=Yy(e,t.dom);return{caretContainer:t,caretPosition:U(n,0)}},Zy=(e,t)=>{const{caretContainer:n,caretPosition:o}=Qy(t);return Bn(B(e),n),Nt(B(e)),o},Jy=(e,t)=>{if(jo(t.dom))return!1;const n=e.schema.getTextInlineElements();return Re(n,We(t))&&!jo(t.dom)&&!Fr(t.dom)},Jc={},e_=ao(["pre"]);((e,t)=>{Jc[e]||(Jc[e]=[]),Jc[e].push(n=>{if(!n.selection.getRng().collapsed){const o=n.selection.getSelectedBlocks(),r=ue(ue(o,e_),(s=>i=>{const a=i.previousSibling;return e_(a)&&ee(s,a)})(o));W(r,s=>{((i,a)=>{const l=B(a),c=Lr(l).dom;Nt(l),ms(B(i),[sn("br",c),sn("br",c),...xn(l)])})(s.previousSibling,s)})}})})("pre");const t_=["fontWeight","fontStyle","color","fontSize","fontFamily"],n_=(e,t)=>{const n=e.get(t);return Xe(n)?en(n,o=>pn(o)&&o.inline==="span"&&(r=>dt(r.styles)&&Ve(In(r.styles),s=>ee(t_,s)))(o)):w.none()},o_=(e,t)=>mo(t,U.fromRangeStart(e)).isNone(),r_=(e,t)=>Jn(t,U.fromRangeEnd(e)).exists(n=>!Tt(n.getNode())||Jn(t,n).isSome())===!1,s_=e=>t=>Qd(t)&&e.isEditable(t),i_=e=>ue(e.getSelectedBlocks(),s_(e.dom)),Kg=Q.each,Yg=e=>he(e)&&!$o(e)&&!jo(e)&&!Fr(e),a_=(e,t)=>{for(let n=e;n;n=n[t]){if(X(n)&&$n(n.data))return e;if(he(n)&&!$o(n))return n}return e},l_=(e,t,n)=>{const o=Rg(e),r=pr(t)&&e.dom.isEditable(t),s=pr(n)&&e.dom.isEditable(n);if(r&&s){const i=a_(t,"previousSibling"),a=a_(n,"nextSibling");if(o.compare(i,a)){for(let l=i.nextSibling;l&&l!==a;){const c=l;l=l.nextSibling,i.appendChild(c)}return e.dom.remove(a),Q.each(Q.grep(a.childNodes),l=>{i.appendChild(l)}),i}}return n},c_=(e,t,n,o)=>{var r;if(o&&t.merge_siblings!==!1){const s=(r=l_(e,Bv(o),o))!==null&&r!==void 0?r:o;l_(e,s,Bv(s,!0))}},Xg=(e,t,n)=>{Kg(e.childNodes,o=>{Yg(o)&&(t(o)&&n(o),o.hasChildNodes()&&Xg(o,t,n))})},d_=(e,t)=>n=>!(!n||!Su(e,n,t)),u_=(e,t,n)=>o=>{e.setStyle(o,t,n),o.getAttribute("style")===""&&o.removeAttribute("style"),((r,s)=>{s.nodeName==="SPAN"&&r.getAttribs(s).length===0&&r.remove(s,!0)})(e,o)},Ji=Ur([{keep:[]},{rename:["name"]},{removed:[]}]),yN=/^(src|href|style)$/,Gg=Q.each,Yu=Wf,m_=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),f_=(e,t,n)=>{let o=t[n?"startContainer":"endContainer"],r=t[n?"startOffset":"endOffset"];if(he(o)){const s=o.childNodes.length-1;!n&&r&&r--,o=o.childNodes[r>s?s:r]}return X(o)&&n&&r>=o.data.length&&(o=new an(o,e.getBody()).next()||o),X(o)&&!n&&r===0&&(o=new an(o,e.getBody()).prev()||o),o},g_=(e,t)=>{const n=t?"firstChild":"lastChild",o=e[n];return(r=>/^(TR|TH|TD)$/.test(r.nodeName))(e)&&o?e.nodeName==="TR"&&o[n]||o:e},Qg=(e,t,n,o)=>{var r;const s=e.create(n,o);return(r=t.parentNode)===null||r===void 0||r.insertBefore(s,t),s.appendChild(t),s},p_=(e,t,n,o,r)=>{const s=B(t),i=B(e.create(o,r)),a=n?xi(s):jd(s);return ms(i,a),n?(Bn(s,i),Jl(i,s)):(Zo(s,i),Xt(i,s)),i.dom},h_=(e,t,n)=>{const o=t.parentNode;let r;const s=e.dom,i=Pn(e);Vr(n)&&o===s.getRoot()&&(n.list_block&&Yu(t,n.list_block)||W(An(t.childNodes),a=>{Qa(e,i,a.nodeName.toLowerCase())?r?r.appendChild(a):(r=Qg(s,a,i),s.setAttribs(r,Bc(e))):r=null})),(a=>zo(a)&&pn(a)&&is(At(a,"mixed"),!0))(n)&&!Yu(n.inline,t)||s.remove(t,!0)},b_=(e,t,n)=>st(e)?{name:t,value:null}:{name:e,value:ni(t,n)},v_=(e,t)=>{e.getAttrib(t,"style")===""&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},y_=(e,t,n,o,r)=>{let s=!1;Gg(n.styles,(i,a)=>{const{name:l,value:c}=b_(a,i,o),d=Vf(c,l);(n.remove_similar||mt(c)||!he(r)||Yu(Su(e,r,l),d))&&e.setStyle(t,l,""),s=!0}),s&&v_(e,t)},__=(e,t,n,o,r)=>{const s=e.dom,i=Rg(e),a=e.schema;if(pn(t)&&yr(a,t.inline)&&vs(a,o)&&o.parentElement===e.getBody())return h_(e,o,t),Ji.removed();if(!t.ceFalseOverride&&o&&s.getContentEditableParent(o)==="false"||o&&!Ku(s,o,t)&&!((d,u)=>u.links&&d.nodeName==="A")(o,t))return Ji.keep();const l=o,c=t.preserve_attributes;if(pn(t)&&t.remove==="all"&&Xe(c)){const d=ue(s.getAttribs(l),u=>ee(c,u.name.toLowerCase()));if(s.removeAllAttribs(l),W(d,u=>s.setAttrib(l,u.name,u.value)),d.length>0)return Ji.rename("span")}if(t.remove!=="all"){y_(s,l,t,n,r),Gg(t.attributes,(u,f)=>{const{name:h,value:g}=b_(f,u,n);if(t.remove_similar||mt(g)||!he(r)||Yu(s.getAttrib(r,h),g)){if(h==="class"){const b=s.getAttrib(l,h);if(b){let p="";if(W(b.split(/\s+/),v=>{/mce\-\w+/.test(v)&&(p+=(p?" ":"")+v)}),p)return void s.setAttrib(l,h,p)}}if(yN.test(h)&&l.removeAttribute("data-mce-"+h),h==="style"&&ao(["li"])(l)&&s.getStyle(l,"list-style-type")==="none")return l.removeAttribute(h),void s.setStyle(l,"list-style-type","none");h==="class"&&l.removeAttribute("className"),l.removeAttribute(h)}}),Gg(t.classes,u=>{u=ni(u,n),he(r)&&!s.hasClass(r,u)||s.removeClass(l,u)});const d=s.getAttribs(l);for(let u=0;u<d.length;u++){const f=d[u].nodeName;if(!i.isAttributeInternal(f))return Ji.keep()}}return t.remove!=="none"?(h_(e,l,t),Ji.removed()):Ji.keep()},_N=(e,t,n,o)=>__(e,t,n,o,o).fold(K(o),r=>(e.dom.createFragment().appendChild(o),e.dom.rename(o,r)),K(null)),C_=(e,t,n,o,r)=>{(o||e.selection.isEditable())&&((s,i,a,l,c)=>{const d=s.formatter.get(i),u=d[0],f=s.dom,h=s.selection,g=C=>{const E=((x,S,O,T,L)=>{let I;return S.parentNode&&W(Au(x.dom,S.parentNode).reverse(),N=>{if(!I&&he(N)&&N.id!=="_start"&&N.id!=="_end"){const R=Kr(x,N,O,T,L);R&&R.split!==!1&&(I=N)}}),I})(s,C,i,a,c);return((x,S,O,T,L,I,N,R)=>{var P,H;let G,Y;const me=x.dom;if(O){const be=O.parentNode;for(let ye=T.parentNode;ye&&ye!==be;ye=ye.parentNode){let fe=me.clone(ye,!1);for(let oe=0;oe<S.length&&(fe=_N(x,S[oe],R,fe),fe!==null);oe++);fe&&(G&&fe.appendChild(G),Y||(Y=fe),G=fe)}N.mixed&&me.isBlock(O)||(T=(P=me.split(O,T))!==null&&P!==void 0?P:T),G&&Y&&((H=L.parentNode)===null||H===void 0||H.insertBefore(G,L),Y.appendChild(L),pn(N)&&c_(x,N,0,G))}return T})(s,d,E,C,C,0,u,a)},b=C=>Ve(d,E=>ed(s,E,a,C,C)),p=C=>{const E=An(C.childNodes),x=b(C)||Ve(d,O=>Ku(f,C,O)),S=C.parentNode;if(!x&&Z(S)&&Yf(u)&&b(S),u.deep&&E.length)for(let O=0;O<E.length;O++)p(E[O]);W(["underline","line-through","overline"],O=>{he(C)&&s.dom.getStyle(C,"text-decoration")===O&&C.parentNode&&Pv(f,C.parentNode)===O&&ed(s,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:O}},void 0,C)})},v=C=>{const E=f.get(C?"_start":"_end");if(E){let x=E[C?"firstChild":"lastChild"];return(S=>$o(S)&&he(S)&&(S.id==="_start"||S.id==="_end"))(x)&&(x=x[C?"firstChild":"lastChild"]),X(x)&&x.data.length===0&&(x=C?E.previousSibling||E.nextSibling:E.nextSibling||E.previousSibling),f.remove(E,!0),x}return null},_=C=>{let E,x,S=Ki(f,C,d,C.collapsed);if(u.split){if(S=Pu(S),E=f_(s,S,!0),x=f_(s,S),E!==x){if(E=g_(E,!0),x=g_(x,!1),m_(f,E,x)){const T=w.from(E.firstChild).getOr(E);return g(p_(f,T,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void v(!0)}if(m_(f,x,E)){const T=w.from(x.lastChild).getOr(x);return g(p_(f,T,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void v(!1)}E=Qg(f,E,"span",{id:"_start","data-mce-type":"bookmark"}),x=Qg(f,x,"span",{id:"_end","data-mce-type":"bookmark"});const O=f.createRng();O.setStartAfter(E),O.setEndBefore(x),Uc(f,O,T=>{W(T,L=>{$o(L)||$o(L.parentNode)||g(L)})}),g(E),g(x),E=v(!0),x=v()}else E=x=g(E);S.startContainer=E.parentNode?E.parentNode:E,S.startOffset=f.nodeIndex(E),S.endContainer=x.parentNode?x.parentNode:x,S.endOffset=f.nodeIndex(x)+1}Uc(f,S,O=>{W(O,p)})};if(l){if(zc(l)){const C=f.createRng();C.setStartBefore(l),C.setEndAfter(l),_(C)}else _(l);Qv(s,i,l,a)}else h.isCollapsed()&&pn(u)&&!Ga(s).length?vN(s,i,a,c):(Rv(s,()=>zf(s,_),C=>pn(u)&&Hg(s,i,a,C)),s.nodeChanged()),((C,E,x)=>{E==="removeformat"?W(i_(C.selection),S=>{W(t_,O=>C.dom.setStyle(S,O,"")),v_(C.dom,S)}):n_(C.formatter,E).each(S=>{W(i_(C.selection),O=>y_(C.dom,O,S,x,null))})})(s,i,a),Qv(s,i,l,a)})(e,t,n,o,r)},ed=(e,t,n,o,r)=>__(e,t,n,o,r).fold(ft,s=>(e.dom.rename(o,s),!0),St),w_=Q.each,Xu=Q.each,E_=(e,t,n,o)=>{if(Xu(n.styles,(r,s)=>{e.setStyle(t,s,ni(r,o))}),n.styles){const r=e.getAttrib(t,"style");r&&e.setAttrib(t,"data-mce-style",r)}},CN=(e,t,n,o)=>{const r=e.formatter.get(t),s=r[0],i=!o&&e.selection.isCollapsed(),a=e.dom,l=e.selection,c=(g,b=s)=>{Ge(b.onformat)&&b.onformat(g,b,n,o),E_(a,g,b,n),Xu(b.attributes,(p,v)=>{a.setAttrib(g,v,ni(p,n))}),Xu(b.classes,p=>{const v=ni(p,n);a.hasClass(g,v)||a.addClass(g,v)})},d=(g,b)=>{let p=!1;return Xu(g,v=>!(!zo(v)||(a.getContentEditable(b)!=="false"||v.ceFalseOverride)&&(!Z(v.collapsed)||v.collapsed===i)&&a.is(b,v.selector)&&!jo(b)&&(c(b,v),p=!0,1))),p},u=g=>{if(se(g)){const b=a.create(g);return c(b),b}return null},f=(g,b,p)=>{const v=[];let _=!0;const C=s.inline||s.block,E=u(C);Uc(g,b,x=>{let S;const O=T=>{let L=!1,I=_,N=!1;const R=T.parentNode,P=R.nodeName.toLowerCase(),H=g.getContentEditable(T);Z(H)&&(I=_,_=H==="true",L=!0,N=Dv(e,T));const G=_&&!L;if(Tt(T)&&!((Y,me,be,ye)=>{if(aS(Y)&&pn(me)&&be.parentNode){const fe=Dt(Y.schema),oe=Jm(B(be),pe=>jo(pe.dom));return Ts(fe,ye)&&hr(Y.schema,be.parentNode,{skipBogus:!1,includeZwsp:!0})&&!oe}return!1})(e,s,T,P))return S=null,void(Vr(s)&&g.remove(T));if((Y=>(me=>Vr(me)&&me.wrapper===!0)(s)&&Kr(e,Y,t,n))(T))S=null;else{if(((Y,me,be)=>{const ye=(fe=>Vr(fe)&&fe.wrapper!==!0)(s)&&Hf(e.schema,Y)&&Qa(e,me,C);return be&&ye})(T,P,G)){const Y=g.rename(T,C);return c(Y),v.push(Y),void(S=null)}if(zo(s)){let Y=d(r,T);if(!Y&&Z(R)&&Yf(s)&&(Y=d(r,R)),!pn(s)||Y)return void(S=null)}Z(E)&&((Y,me,be,ye)=>{const fe=Y.nodeName.toLowerCase(),oe=Qa(e,C,fe)&&Qa(e,me,C),pe=!p&&X(Y)&&cu(Y.data),D=jo(Y),M=!pn(s)||!g.isBlock(Y);return(be||ye)&&oe&&!pe&&!D&&M})(T,P,G,N)?(S||(S=g.clone(E,!1),R.insertBefore(S,T),v.push(S)),N&&L&&(_=I),S.appendChild(T)):(S=null,W(An(T.childNodes),O),L&&(_=I),S=null)}};W(x,O)}),s.links===!0&&W(v,x=>{const S=O=>{O.nodeName==="A"&&c(O,s),W(An(O.childNodes),S)};S(x)}),W(v,x=>{const S=(O=>{let T=0;return W(O.childNodes,L=>{(I=>Z(I)&&X(I)&&I.length===0)(L)||$o(L)||T++}),T})(x);!(v.length>1)&&g.isBlock(x)||S!==0?(pn(s)||Vr(s)&&s.wrapper)&&(s.exact||S!==1||(x=(O=>en(O.childNodes,Uf).filter(L=>g.getContentEditable(L)!=="false"&&Ku(g,L,s)).map(L=>{const I=g.clone(L,!1);return c(I),g.replace(I,O,!0),g.remove(L,!0),I}).getOr(O))(x)),((O,T,L,I)=>{w_(T,N=>{pn(N)&&w_(O.dom.select(N.inline,I),R=>{Yg(R)&&ed(O,N,L,R,N.exact?R:null)}),((R,P,H)=>{if(P.clear_child_styles){const G=P.links?"*:not(a)":"*";Kg(R.select(G,H),Y=>{Yg(Y)&&R.isEditable(Y)&&Kg(P.styles,(me,be)=>{R.setStyle(Y,be,"")})})}})(O.dom,N,I)})})(e,r,n,x),((O,T,L,I,N)=>{const R=N.parentNode;Kr(O,R,L,I)&&ed(O,T,I,N)||T.merge_with_parents&&R&&O.dom.getParent(R,P=>!!Kr(O,P,L,I)&&(ed(O,T,I,N),!0))})(e,s,t,n,x),((O,T,L,I)=>{if(T.styles&&T.styles.backgroundColor){const N=d_(O,"fontSize");Xg(I,R=>N(R)&&O.isEditable(R),u_(O,"backgroundColor",ni(T.styles.backgroundColor,L)))}})(g,s,n,x),((O,T,L,I)=>{const N=R=>{if(pr(R)&&he(R.parentNode)&&O.isEditable(R)){const P=Pv(O,R.parentNode);O.getStyle(R,"color")&&P?O.setStyle(R,"text-decoration",P):O.getStyle(R,"text-decoration")===P&&O.setStyle(R,"text-decoration",null)}};T.styles&&(T.styles.color||T.styles.textDecoration)&&(Q.walk(I,N,"childNodes"),N(I))})(g,s,0,x),((O,T,L,I)=>{if(pn(T)&&(T.inline==="sub"||T.inline==="sup")){const N=d_(O,"fontSize");Xg(I,P=>N(P)&&O.isEditable(P),u_(O,"fontSize",""));const R=ue(O.select(T.inline==="sup"?"sub":"sup",I),O.isEditable);O.remove(R,!0)}})(g,s,0,x),c_(e,s,0,x)):g.remove(x,!0)})},h=zc(o)?o:l.getNode();if(a.getContentEditable(h)==="false"&&!Dv(e,h))return d(r,o=h),void Gv(e,t,o,n);if(s){if(o)if(zc(o)){if(!d(r,o)){const g=a.createRng();g.setStartBefore(o),g.setEndAfter(o),f(a,Ki(a,g,r),!0)}}else f(a,o,!0);else i&&pn(s)&&!Ga(e).length?((g,b,p)=>{let v;const _=g.selection,C=g.formatter.get(b);if(!C)return;const E=_.getRng();let x=E.startOffset;const S=E.startContainer.nodeValue;v=Wi(g.getBody(),_.getStart());const O=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(S&&x>0&&x<S.length&&O.test(S.charAt(x))&&O.test(S.charAt(x-1))){const I=_.getBookmark();E.collapse(!0);let N=Ki(g.dom,E,C);N=Pu(N),g.formatter.apply(b,p,N),_.moveToBookmark(I)}else{let I=v?Vy(v):null;v&&I?.data===Zc||(T=g.getDoc(),L=qg(!0).dom,v=T.importNode(L,!0),I=v.firstChild,E.insertNode(v),x=1,Gy(g,v)),g.formatter.apply(b,p,v),_.setCursorLocation(I,x)}var T,L})(e,t,n):(l.setRng(Mg(l.getRng())),Rv(e,()=>{zf(e,(g,b)=>{const p=b?g:Ki(a,g,r);f(a,p,!1)})},St),e.nodeChanged()),n_(e.formatter,t).each(g=>{W((b=>ue((p=>{const v=p.getSelectedBlocks(),_=p.getRng();if(p.isCollapsed())return[];if(v.length===1)return o_(_,v[0])&&r_(_,v[0])?v:[];{const C=on(v).filter(S=>o_(_,S)).toArray(),E=oo(v).filter(S=>r_(_,S)).toArray(),x=v.slice(1,-1);return C.concat(x).concat(E)}})(b),s_(b.dom)))(e.selection),b=>E_(a,b,g,n))});((g,b)=>{Re(Jc,g)&&W(Jc[g],p=>{p(b)})})(t,e)}Gv(e,t,o,n)},x_=(e,t,n,o)=>{(o||e.selection.isEditable())&&CN(e,t,n,o)},k_=e=>Re(e,"vars"),S_=e=>e.selection.getStart(),A_=(e,t,n,o,r)=>mi(t,s=>{const i=e.formatter.matchNode(s,n,r??{},o);return!Ft(i)},s=>!!qy(e,s,n)||!o&&Z(e.formatter.matchNode(s,n,r,!0))),N_=(e,t)=>{const n=t??S_(e);return ue(Au(e.dom,n),o=>he(o)&&!Fr(o))},T_=(e,t,n)=>{const o=N_(e,t);Ct(n,(r,s)=>{const i=a=>{const l=A_(e,o,s,a.similar,k_(a)?a.vars:void 0),c=l.isSome();if(a.state.get()!==c){a.state.set(c);const d=l.getOr(t);k_(a)?a.callback(c,{node:d,format:s,parents:o}):W(a.callbacks,u=>u(c,{node:d,format:s,parents:o}))}};W([r.withSimilar,r.withoutSimilar],i),W(r.withVars,i)})},O_=Q.explode,R_=()=>{const e={};return{addFilter:(t,n)=>{W(O_(t),o=>{Re(e,o)||(e[o]={name:o,callbacks:[]}),e[o].callbacks.push(n)})},getFilters:()=>da(e),removeFilter:(t,n)=>{W(O_(t),o=>{if(Re(e,o))if(Z(n)){const r=e[o],s=ue(r.callbacks,i=>i!==n);s.length>0?r.callbacks=s:delete e[o]}else delete e[o]})}}},wN=(e,t,n)=>{var o;const r=gn();t.convert_fonts_to_spans&&((s,i,a)=>{s.addNodeFilter("font",l=>{W(l,c=>{const d=i.parse(c.attr("style")),u=c.attr("color"),f=c.attr("face"),h=c.attr("size");u&&(d.color=u),f&&(d["font-family"]=f),h&&Bs(h).each(g=>{d["font-size"]=a[g-1]}),c.name="span",c.attr("style",i.serialize(d)),((g,b)=>{W(["color","face","size"],p=>{g.attr(p,null)})})(c)})})})(e,r,Q.explode((o=t.font_size_legacy_values)!==null&&o!==void 0?o:"")),((s,i,a)=>{s.addNodeFilter("strike",l=>{const c=i.type!=="html4";W(l,d=>{if(c)d.name="s";else{const u=a.parse(d.attr("style"));u["text-decoration"]="line-through",d.name="span",d.attr("style",a.serialize(u))}})})})(e,n,r)},Zg=e=>{const[t,...n]=e.split(","),o=n.join(","),r=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(r){const s=r[2]===";base64",i=s?(a=>{const l=/([a-z0-9+\/=\s]+)/i.exec(a);return l?l[1]:""})(o):decodeURIComponent(o);return w.some({type:r[1],data:i,base64Encoded:s})}return w.none()},B_=(e,t,n=!0)=>{let o=t;if(n)try{o=atob(t)}catch{return w.none()}const r=new Uint8Array(o.length);for(let s=0;s<r.length;s++)r[s]=o.charCodeAt(s);return w.some(new Blob([r],{type:e}))},D_=e=>new Promise((t,n)=>{const o=new FileReader;o.onloadend=()=>{t(o.result)},o.onerror=()=>{var r;n((r=o.error)===null||r===void 0?void 0:r.message)},o.readAsDataURL(e)});let EN=0;const P_=(e,t,n)=>Zg(e).bind(({data:o,type:r,base64Encoded:s})=>{if(t&&!s)return w.none();{const i=s?o:btoa(o);return n(i,r)}}),L_=(e,t,n)=>{const o=e.create("blobid"+EN++,t,n);return e.add(o),o},M_=(e,t,n=!1)=>P_(t,n,(o,r)=>w.from(e.getByData(o,r)).orThunk(()=>B_(r,o).map(s=>L_(e,s,o)))),xN=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,kN=e=>w.from(e.match(xN)).bind(t=>dr(t,1)).map(t=>_t(t,"www.")?t.substring(4):t),I_=(e,t)=>{w.from(e.attr("src")).bind(kN).forall(n=>!ee(t,n))&&e.attr("sandbox","")},Jg=(e,t)=>_t(e,`${t}/`),{entries:F_,setPrototypeOf:j_,isFrozen:SN,getPrototypeOf:AN,getOwnPropertyDescriptor:NN}=Object;let{freeze:fo,seal:Er,create:TN}=Object,{apply:ep,construct:tp}=typeof Reflect<"u"&&Reflect;ep||(ep=function(e,t,n){return e.apply(t,n)}),fo||(fo=function(e){return e}),Er||(Er=function(e){return e}),tp||(tp=function(e,t){return new e(...t)});const ON=sr(Array.prototype.forEach),RN=sr(Array.prototype.pop),td=sr(Array.prototype.push),Gu=sr(String.prototype.toLowerCase),np=sr(String.prototype.toString),BN=sr(String.prototype.match),xr=sr(String.prototype.replace),DN=sr(String.prototype.indexOf),PN=sr(String.prototype.trim),qo=sr(RegExp.prototype.test),nd=($_=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return tp($_,t)});var $_;function sr(e){return function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return ep(e,t,o)}}function it(e,t,n){var o;n=(o=n)!==null&&o!==void 0?o:Gu,j_&&j_(e,null);let r=t.length;for(;r--;){let s=t[r];if(typeof s=="string"){const i=n(s);i!==s&&(SN(t)||(t[r]=i),s=i)}e[s]=!0}return e}function ol(e){const t=TN(null);for(const[n,o]of F_(e))t[n]=o;return t}function Qu(e,t){for(;e!==null;){const n=NN(e,t);if(n){if(n.get)return sr(n.get);if(typeof n.value=="function")return sr(n.value)}e=AN(e)}return function(n){return console.warn("fallback value for",n),null}}const z_=fo(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),op=fo(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),rp=fo(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),LN=fo(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),sp=fo(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),MN=fo(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),U_=fo(["#text"]),H_=fo(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),ip=fo(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),q_=fo(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Zu=fo(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),IN=Er(/\{\{[\w\W]*|[\w\W]*\}\}/gm),FN=Er(/<%[\w\W]*|[\w\W]*%>/gm),jN=Er(/\${[\w\W]*}/gm),$N=Er(/^data-[\-\w.\u00B7-\uFFFF]/),zN=Er(/^aria-[\-\w]+$/),W_=Er(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),UN=Er(/^(?:\w+script|data):/i),HN=Er(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),V_=Er(/^html$/i);var K_=Object.freeze({__proto__:null,MUSTACHE_EXPR:IN,ERB_EXPR:FN,TMPLIT_EXPR:jN,DATA_ATTR:$N,ARIA_ATTR:zN,IS_ALLOWED_URI:W_,IS_SCRIPT_OR_DATA:UN,ATTR_WHITESPACE:HN,DOCTYPE_NAME:V_});const qN=()=>typeof window>"u"?null:window;var ap=function e(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:qN();const n=F=>e(F);if(n.version="3.0.5",n.removed=[],!t||!t.document||t.document.nodeType!==9)return n.isSupported=!1,n;const o=t.document,r=o.currentScript;let{document:s}=t;const{DocumentFragment:i,HTMLTemplateElement:a,Node:l,Element:c,NodeFilter:d,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:f,DOMParser:h,trustedTypes:g}=t,b=c.prototype,p=Qu(b,"cloneNode"),v=Qu(b,"nextSibling"),_=Qu(b,"childNodes"),C=Qu(b,"parentNode");if(typeof a=="function"){const F=s.createElement("template");F.content&&F.content.ownerDocument&&(s=F.content.ownerDocument)}let E,x="";const{implementation:S,createNodeIterator:O,createDocumentFragment:T,getElementsByTagName:L}=s,{importNode:I}=o;let N={};n.isSupported=typeof F_=="function"&&typeof C=="function"&&S&&S.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:R,ERB_EXPR:P,TMPLIT_EXPR:H,DATA_ATTR:G,ARIA_ATTR:Y,IS_SCRIPT_OR_DATA:me,ATTR_WHITESPACE:be}=K_;let{IS_ALLOWED_URI:ye}=K_,fe=null;const oe=it({},[...z_,...op,...rp,...sp,...U_]);let pe=null;const D=it({},[...H_,...ip,...q_,...Zu]);let M=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),$=null,q=null,re=!0,J=!0,Ce=!1,Ee=!0,Oe=!1,bt=!1,Ut=!1,Eo=!1,ce=!1,De=!1,Ie=!1,Pe=!0,rt=!1,xt=!0,ie=!1,we={},ut=null;const Ot=it({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let dn=null;const to=it({},["audio","video","img","source","image","track"]);let ar=null;const Mn=it({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),go="http://www.w3.org/1998/Math/MathML",un="http://www.w3.org/2000/svg",xo="http://www.w3.org/1999/xhtml";let Zr=xo,Ss=!1,aa=null;const zh=it({},[go,un,xo],np);let lr;const di=["application/xhtml+xml","text/html"];let Cn,Kn=null;const vl=s.createElement("form"),ui=function(F){return F instanceof RegExp||F instanceof Function},yl=function(F){if(!Kn||Kn!==F){if(F&&typeof F=="object"||(F={}),F=ol(F),lr=lr=di.indexOf(F.PARSER_MEDIA_TYPE)===-1?"text/html":F.PARSER_MEDIA_TYPE,Cn=lr==="application/xhtml+xml"?np:Gu,fe="ALLOWED_TAGS"in F?it({},F.ALLOWED_TAGS,Cn):oe,pe="ALLOWED_ATTR"in F?it({},F.ALLOWED_ATTR,Cn):D,aa="ALLOWED_NAMESPACES"in F?it({},F.ALLOWED_NAMESPACES,np):zh,ar="ADD_URI_SAFE_ATTR"in F?it(ol(Mn),F.ADD_URI_SAFE_ATTR,Cn):Mn,dn="ADD_DATA_URI_TAGS"in F?it(ol(to),F.ADD_DATA_URI_TAGS,Cn):to,ut="FORBID_CONTENTS"in F?it({},F.FORBID_CONTENTS,Cn):Ot,$="FORBID_TAGS"in F?it({},F.FORBID_TAGS,Cn):{},q="FORBID_ATTR"in F?it({},F.FORBID_ATTR,Cn):{},we="USE_PROFILES"in F&&F.USE_PROFILES,re=F.ALLOW_ARIA_ATTR!==!1,J=F.ALLOW_DATA_ATTR!==!1,Ce=F.ALLOW_UNKNOWN_PROTOCOLS||!1,Ee=F.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Oe=F.SAFE_FOR_TEMPLATES||!1,bt=F.WHOLE_DOCUMENT||!1,ce=F.RETURN_DOM||!1,De=F.RETURN_DOM_FRAGMENT||!1,Ie=F.RETURN_TRUSTED_TYPE||!1,Eo=F.FORCE_BODY||!1,Pe=F.SANITIZE_DOM!==!1,rt=F.SANITIZE_NAMED_PROPS||!1,xt=F.KEEP_CONTENT!==!1,ie=F.IN_PLACE||!1,ye=F.ALLOWED_URI_REGEXP||W_,Zr=F.NAMESPACE||xo,M=F.CUSTOM_ELEMENT_HANDLING||{},F.CUSTOM_ELEMENT_HANDLING&&ui(F.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(M.tagNameCheck=F.CUSTOM_ELEMENT_HANDLING.tagNameCheck),F.CUSTOM_ELEMENT_HANDLING&&ui(F.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(M.attributeNameCheck=F.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),F.CUSTOM_ELEMENT_HANDLING&&typeof F.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(M.allowCustomizedBuiltInElements=F.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Oe&&(J=!1),De&&(ce=!0),we&&(fe=it({},[...U_]),pe=[],we.html===!0&&(it(fe,z_),it(pe,H_)),we.svg===!0&&(it(fe,op),it(pe,ip),it(pe,Zu)),we.svgFilters===!0&&(it(fe,rp),it(pe,ip),it(pe,Zu)),we.mathMl===!0&&(it(fe,sp),it(pe,q_),it(pe,Zu))),F.ADD_TAGS&&(fe===oe&&(fe=ol(fe)),it(fe,F.ADD_TAGS,Cn)),F.ADD_ATTR&&(pe===D&&(pe=ol(pe)),it(pe,F.ADD_ATTR,Cn)),F.ADD_URI_SAFE_ATTR&&it(ar,F.ADD_URI_SAFE_ATTR,Cn),F.FORBID_CONTENTS&&(ut===Ot&&(ut=ol(ut)),it(ut,F.FORBID_CONTENTS,Cn)),xt&&(fe["#text"]=!0),bt&&it(fe,["html","head","body"]),fe.table&&(it(fe,["tbody"]),delete $.tbody),F.TRUSTED_TYPES_POLICY){if(typeof F.TRUSTED_TYPES_POLICY.createHTML!="function")throw nd('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof F.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw nd('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');E=F.TRUSTED_TYPES_POLICY,x=E.createHTML("")}else E===void 0&&(E=function(_e,Ae){if(typeof _e!="object"||typeof _e.createPolicy!="function")return null;let vt=null;const $t="data-tt-policy-suffix";Ae&&Ae.hasAttribute($t)&&(vt=Ae.getAttribute($t));const Wt="dompurify"+(vt?"#"+vt:"");try{return _e.createPolicy(Wt,{createHTML:Ht=>Ht,createScriptURL:Ht=>Ht})}catch{return console.warn("TrustedTypes policy "+Wt+" could not be created."),null}}(g,r)),E!==null&&typeof x=="string"&&(x=E.createHTML(""));fo&&fo(F),Kn=F}},sk=it({},["mi","mo","mn","ms","mtext"]),ik=it({},["foreignobject","desc","title","annotation-xml"]),MB=it({},["title","style","font","a","script"]),Vm=it({},op);it(Vm,rp),it(Vm,LN);const Uh=it({},sp);it(Uh,MN);const la=function(F){td(n.removed,{element:F});try{F.parentNode.removeChild(F)}catch{F.remove()}},xd=function(F,_e){try{td(n.removed,{attribute:_e.getAttributeNode(F),from:_e})}catch{td(n.removed,{attribute:null,from:_e})}if(_e.removeAttribute(F),F==="is"&&!pe[F])if(ce||De)try{la(_e)}catch{}else try{_e.setAttribute(F,"")}catch{}},ak=function(F){let _e,Ae;if(Eo)F="<remove></remove>"+F;else{const Wt=BN(F,/^[\r\n\t ]+/);Ae=Wt&&Wt[0]}lr==="application/xhtml+xml"&&Zr===xo&&(F='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+F+"</body></html>");const vt=E?E.createHTML(F):F;if(Zr===xo)try{_e=new h().parseFromString(vt,lr)}catch{}if(!_e||!_e.documentElement){_e=S.createDocument(Zr,"template",null);try{_e.documentElement.innerHTML=Ss?x:vt}catch{}}const $t=_e.body||_e.documentElement;return F&&Ae&&$t.insertBefore(s.createTextNode(Ae),$t.childNodes[0]||null),Zr===xo?L.call(_e,bt?"html":"body")[0]:bt?_e.documentElement:$t},lk=function(F){return O.call(F.ownerDocument||F,F,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT,null,!1)},Km=function(F){return typeof l=="object"?F instanceof l:F&&typeof F=="object"&&typeof F.nodeType=="number"&&typeof F.nodeName=="string"},As=function(F,_e,Ae){N[F]&&ON(N[F],vt=>{vt.call(n,_e,Ae,Kn)})},ck=function(F){let _e;if(As("beforeSanitizeElements",F,null),(Ae=F)instanceof f&&(typeof Ae.nodeName!="string"||typeof Ae.textContent!="string"||typeof Ae.removeChild!="function"||!(Ae.attributes instanceof u)||typeof Ae.removeAttribute!="function"||typeof Ae.setAttribute!="function"||typeof Ae.namespaceURI!="string"||typeof Ae.insertBefore!="function"||typeof Ae.hasChildNodes!="function"))return la(F),!0;var Ae;const vt=Cn(F.nodeName);if(As("uponSanitizeElement",F,{tagName:vt,allowedTags:fe}),F.hasChildNodes()&&!Km(F.firstElementChild)&&(!Km(F.content)||!Km(F.content.firstElementChild))&&qo(/<[/\w]/g,F.innerHTML)&&qo(/<[/\w]/g,F.textContent))return la(F),!0;if(!fe[vt]||$[vt]){if(!$[vt]&&uk(vt)&&(M.tagNameCheck instanceof RegExp&&qo(M.tagNameCheck,vt)||M.tagNameCheck instanceof Function&&M.tagNameCheck(vt)))return!1;if(xt&&!ut[vt]){const $t=C(F)||F.parentNode,Wt=_(F)||F.childNodes;if(Wt&&$t)for(let Ht=Wt.length-1;Ht>=0;--Ht)$t.insertBefore(p(Wt[Ht],!0),v(F))}return la(F),!0}return F instanceof c&&!function($t){let Wt=C($t);Wt&&Wt.tagName||(Wt={namespaceURI:Zr,tagName:"template"});const Ht=Gu($t.tagName),Yt=Gu(Wt.tagName);return!!aa[$t.namespaceURI]&&($t.namespaceURI===un?Wt.namespaceURI===xo?Ht==="svg":Wt.namespaceURI===go?Ht==="svg"&&(Yt==="annotation-xml"||sk[Yt]):!!Vm[Ht]:$t.namespaceURI===go?Wt.namespaceURI===xo?Ht==="math":Wt.namespaceURI===un?Ht==="math"&&ik[Yt]:!!Uh[Ht]:$t.namespaceURI===xo?!(Wt.namespaceURI===un&&!ik[Yt])&&!(Wt.namespaceURI===go&&!sk[Yt])&&!Uh[Ht]&&(MB[Ht]||!Vm[Ht]):!(lr!=="application/xhtml+xml"||!aa[$t.namespaceURI]))}(F)?(la(F),!0):vt!=="noscript"&&vt!=="noembed"&&vt!=="noframes"||!qo(/<\/no(script|embed|frames)/i,F.innerHTML)?(Oe&&F.nodeType===3&&(_e=F.textContent,_e=xr(_e,R," "),_e=xr(_e,P," "),_e=xr(_e,H," "),F.textContent!==_e&&(td(n.removed,{element:F.cloneNode()}),F.textContent=_e)),As("afterSanitizeElements",F,null),!1):(la(F),!0)},dk=function(F,_e,Ae){if(Pe&&(_e==="id"||_e==="name")&&(Ae in s||Ae in vl))return!1;if(!(J&&!q[_e]&&qo(G,_e))){if(!(re&&qo(Y,_e))){if(!pe[_e]||q[_e]){if(!(uk(F)&&(M.tagNameCheck instanceof RegExp&&qo(M.tagNameCheck,F)||M.tagNameCheck instanceof Function&&M.tagNameCheck(F))&&(M.attributeNameCheck instanceof RegExp&&qo(M.attributeNameCheck,_e)||M.attributeNameCheck instanceof Function&&M.attributeNameCheck(_e))||_e==="is"&&M.allowCustomizedBuiltInElements&&(M.tagNameCheck instanceof RegExp&&qo(M.tagNameCheck,Ae)||M.tagNameCheck instanceof Function&&M.tagNameCheck(Ae))))return!1}else if(!ar[_e]){if(!qo(ye,xr(Ae,be,""))){if((_e!=="src"&&_e!=="xlink:href"&&_e!=="href"||F==="script"||DN(Ae,"data:")!==0||!dn[F])&&!(Ce&&!qo(me,xr(Ae,be,"")))){if(Ae)return!1}}}}}return!0},uk=function(F){return F.indexOf("-")>0},mk=function(F){let _e,Ae,vt,$t;As("beforeSanitizeAttributes",F,null);const{attributes:Wt}=F;if(!Wt)return;const Ht={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:pe};for($t=Wt.length;$t--;){_e=Wt[$t];const{name:Yt,namespaceURI:_l}=_e;Ae=Yt==="value"?_e.value:PN(_e.value);const FB=Ae;if(vt=Cn(Yt),Ht.attrName=vt,Ht.attrValue=Ae,Ht.keepAttr=!0,Ht.forceKeepAttr=void 0,As("uponSanitizeAttribute",F,Ht),Ae=Ht.attrValue,Ht.forceKeepAttr)continue;if(!Ht.keepAttr){xd(Yt,F);continue}if(!Ee&&qo(/\/>/i,Ae)){xd(Yt,F);continue}Oe&&(Ae=xr(Ae,R," "),Ae=xr(Ae,P," "),Ae=xr(Ae,H," "));const fk=Cn(F.nodeName);if(dk(fk,vt,Ae)){if(!rt||vt!=="id"&&vt!=="name"||(xd(Yt,F),Ae="user-content-"+Ae),E&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!_l)switch(g.getAttributeType(fk,vt)){case"TrustedHTML":Ae=E.createHTML(Ae);break;case"TrustedScriptURL":Ae=E.createScriptURL(Ae)}if(Ae!==FB)try{_l?F.setAttributeNS(_l,Yt,Ae):F.setAttribute(Yt,Ae)}catch{xd(Yt,F)}}else xd(Yt,F)}As("afterSanitizeAttributes",F,null)},IB=function F(_e){let Ae;const vt=lk(_e);for(As("beforeSanitizeShadowDOM",_e,null);Ae=vt.nextNode();)As("uponSanitizeShadowNode",Ae,null),ck(Ae)||(Ae.content instanceof i&&F(Ae.content),mk(Ae));As("afterSanitizeShadowDOM",_e,null)};return n.sanitize=function(F){let _e,Ae,vt,$t,Wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ss=!F,Ss&&(F="<!-->"),typeof F!="string"&&!Km(F)){if(typeof F.toString!="function")throw nd("toString is not a function");if(typeof(F=F.toString())!="string")throw nd("dirty is not a string, aborting")}if(!n.isSupported)return F;if(Ut||yl(Wt),n.removed=[],typeof F=="string"&&(ie=!1),ie){if(F.nodeName){const _l=Cn(F.nodeName);if(!fe[_l]||$[_l])throw nd("root node is forbidden and cannot be sanitized in-place")}}else if(F instanceof l)_e=ak("<!---->"),Ae=_e.ownerDocument.importNode(F,!0),Ae.nodeType===1&&Ae.nodeName==="BODY"||Ae.nodeName==="HTML"?_e=Ae:_e.appendChild(Ae);else{if(!ce&&!Oe&&!bt&&F.indexOf("<")===-1)return E&&Ie?E.createHTML(F):F;if(_e=ak(F),!_e)return ce?null:Ie?x:""}_e&&Eo&&la(_e.firstChild);const Ht=lk(ie?F:_e);for(;vt=Ht.nextNode();)ck(vt)||(vt.content instanceof i&&IB(vt.content),mk(vt));if(ie)return F;if(ce){if(De)for($t=T.call(_e.ownerDocument);_e.firstChild;)$t.appendChild(_e.firstChild);else $t=_e;return(pe.shadowroot||pe.shadowrootmode)&&($t=I.call(o,$t,!0)),$t}let Yt=bt?_e.outerHTML:_e.innerHTML;return bt&&fe["!doctype"]&&_e.ownerDocument&&_e.ownerDocument.doctype&&_e.ownerDocument.doctype.name&&qo(V_,_e.ownerDocument.doctype.name)&&(Yt="<!DOCTYPE "+_e.ownerDocument.doctype.name+`>
`+Yt),Oe&&(Yt=xr(Yt,R," "),Yt=xr(Yt,P," "),Yt=xr(Yt,H," ")),E&&Ie?E.createHTML(Yt):Yt},n.setConfig=function(F){yl(F),Ut=!0},n.clearConfig=function(){Kn=null,Ut=!1},n.isValidAttribute=function(F,_e,Ae){Kn||yl({});const vt=Cn(F),$t=Cn(_e);return dk(vt,$t,Ae)},n.addHook=function(F,_e){typeof _e=="function"&&(N[F]=N[F]||[],td(N[F],_e))},n.removeHook=function(F){if(N[F])return RN(N[F])},n.removeHooks=function(F){N[F]&&(N[F]=[])},n.removeAllHooks=function(){N={}},n}();const Y_=Q.each,WN=Q.trim,VN=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],KN={ftp:21,http:80,https:443,mailto:25},YN=["img","video"],X_=(e,t,n)=>{const o=(r=>{try{return decodeURIComponent(r)}catch{return unescape(r)}})(t).replace(/\s/g,"");return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(o)||!e.allow_html_data_urls&&(/^data:image\//i.test(o)?((r,s)=>Z(r)?!r:!Z(s)||!ee(YN,s))(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(o):/^data:/i.test(o)))};class ir{static parseDataUri(t){let n;const o=decodeURIComponent(t).split(","),r=/data:([^;]+)/.exec(o[0]);return r&&(n=r[1]),{type:n,data:o[1]}}static isDomSafe(t,n,o={}){if(o.allow_script_urls)return!0;{const r=xe.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!X_(o,r,n)}}static getDocumentBaseUrl(t){var n;let o;return o=t.protocol.indexOf("http")!==0&&t.protocol!=="file:"?(n=t.href)!==null&&n!==void 0?n:"":t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/")),o}constructor(t,n={}){this.path="",this.directory="",t=WN(t),this.settings=n;const o=n.base_uri,r=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))return void(r.source=t);const s=t.indexOf("//")===0;if(t.indexOf("/")!==0||s||(t=(o&&o.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const a=o?o.path:new ir(document.location.href).directory;if(o?.protocol==="")t="//mce_host"+r.toAbsPath(a,t);else{const l=/([^#?]*)([#?]?.*)/.exec(t);l&&(t=(o&&o.protocol||"http")+"://mce_host"+r.toAbsPath(a,l[1])+l[2])}}t=t.replace(/@@/g,"(mce_at)");const i=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);i&&Y_(VN,(a,l)=>{let c=i[l];c&&(c=c.replace(/\(mce_at\)/g,"@@")),r[a]=c}),o&&(r.protocol||(r.protocol=o.protocol),r.userInfo||(r.userInfo=o.userInfo),r.port||r.host!=="mce_host"||(r.port=o.port),r.host&&r.host!=="mce_host"||(r.host=o.host),r.source=""),s&&(r.protocol="")}setPath(t){const n=/^(.*?)\/?(\w+)?$/.exec(t);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(t){if(t==="./")return t;const n=new ir(t,{base_uri:this});if(n.host!=="mce_host"&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&n.protocol!=="")return n.getURI();const o=this.getURI(),r=n.getURI();if(o===r||o.charAt(o.length-1)==="/"&&o.substr(0,o.length-1)===r)return o;let s=this.toRelPath(this.path,n.path);return n.query&&(s+="?"+n.query),n.anchor&&(s+="#"+n.anchor),s}toAbsolute(t,n){const o=new ir(t,{base_uri:this});return o.getURI(n&&this.isSameOrigin(o))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const n=this.protocol?KN[this.protocol]:null;if(n&&(this.port||n)==(t.port||n))return!0}return!1}toRelPath(t,n){let o,r,s=0,i="";const a=t.substring(0,t.lastIndexOf("/")).split("/"),l=n.split("/");if(a.length>=l.length){for(o=0,r=a.length;o<r;o++)if(o>=l.length||a[o]!==l[o]){s=o+1;break}}if(a.length<l.length){for(o=0,r=l.length;o<r;o++)if(o>=a.length||a[o]!==l[o]){s=o+1;break}}if(s===1)return n;for(o=0,r=a.length-(s-1);o<r;o++)i+="../";for(o=s-1,r=l.length;o<r;o++)i+=o!==s-1?"/"+l[o]:l[o];return i}toAbsPath(t,n){let o=0;const r=/\/$/.test(n)?"/":"",s=t.split("/"),i=n.split("/"),a=[];Y_(s,u=>{u&&a.push(u)});const l=[];for(let u=i.length-1;u>=0;u--)i[u].length!==0&&i[u]!=="."&&(i[u]!==".."?o>0?o--:l.push(i[u]):o++);const c=a.length-o;let d;return d=c<=0?gi(l).join("/"):a.slice(0,c).join("/")+"/"+gi(l).join("/"),d.indexOf("/")!==0&&(d="/"+d),r&&d.lastIndexOf("/")!==d.length-1&&(d+=r),d}getURI(t=!1){let n;return this.source&&!t||(n="",t||(this.protocol?n+=this.protocol+"://":n+="//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const XN=Q.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),lp="data-mce-type";let G_=0;const Q_=(e,t,n,o,r)=>{var s,i,a,l;const c=t.validate,d=n.getSpecialElements();e.nodeType===8&&!t.allow_conditional_comments&&/^\[if/i.test((s=e.nodeValue)!==null&&s!==void 0?s:"")&&(e.nodeValue=" "+e.nodeValue);const u=(i=r?.tagName)!==null&&i!==void 0?i:e.nodeName.toLowerCase();if(o!=="html"&&n.isValid(o))return void(Z(r)&&(r.allowedTags[u]=!0));if(e.nodeType!==1||u==="body")return;const f=B(e),h=Ci(f,lp),g=Un(f,"data-mce-bogus");if(!h&&se(g))return void(g==="all"?Nt(f):gr(f));const b=n.getElementRule(u);if(!c||b){if(Z(r)&&(r.allowedTags[u]=!0),c&&b&&!h){if(W((a=b.attributesForced)!==null&&a!==void 0?a:[],p=>{tn(f,p.name,p.value==="{$uid}"?"mce_"+G_++:p.value)}),W((l=b.attributesDefault)!==null&&l!==void 0?l:[],p=>{Ci(f,p.name)||tn(f,p.name,p.value==="{$uid}"?"mce_"+G_++:p.value)}),b.attributesRequired&&!Ve(b.attributesRequired,p=>Ci(f,p))||b.removeEmptyAttrs&&(p=>{const v=p.dom.attributes;return v==null||v.length===0})(f))return void gr(f);b.outputName&&b.outputName!==u&&((p,v)=>{const _=((E,x)=>{const S=sn(x),O=zl(E);return Qo(S,O),S})(p,v);Zo(p,_);const C=xn(p);ms(_,C),Nt(p)})(f,b.outputName)}}else Re(d,u)?Nt(f):gr(f)},Z_=(e,t,n,o,r,s)=>n!=="html"&&!jr(o)||!(r in XN&&X_(e,s,o))&&(!e.validate||t.isValid(o,r)||_t(r,"data-")||_t(r,"aria-")),J_=(e,t)=>e.hasAttribute(lp)&&(t==="id"||t==="class"||t==="style"),eC=(e,t)=>e in t.getBoolAttrs(),GN=(e,t,n,o)=>{const{attributes:r}=e;for(let s=r.length-1;s>=0;s--){const i=r[s],a=i.name,l=i.value;Z_(t,n,o,e.tagName.toLowerCase(),a,l)||J_(e,a)?eC(a,n)&&e.setAttribute(a,a):e.removeAttribute(a)}},QN=(e,t,n)=>{const o=ap();return o.addHook("uponSanitizeElement",(r,s)=>{Q_(r,e,t,n.track(r),s)}),o.addHook("uponSanitizeAttribute",(r,s)=>{((i,a,l,c,d)=>{const u=i.tagName.toLowerCase(),{attrName:f,attrValue:h}=d;d.keepAttr=Z_(a,l,c,u,f,h),d.keepAttr?(d.allowedAttributes[f]=!0,eC(f,l)&&(d.attrValue=f),a.allow_svg_data_urls&&_t(h,"data:image/svg+xml")&&(d.forceKeepAttr=!0)):J_(i,f)&&(d.forceKeepAttr=!0)})(r,e,t,n.current(),s)}),o},ZN=e=>{const t=ac(e);if(t==="svg"){const n=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(r=>`xlink:${r}`),o={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:n};ap().sanitize(e,o)}else{if(t!=="math")throw new Error("Not a namespace element");{const n={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}};ap().sanitize(e,n)}}},tC=Q.makeMap,nC=Q.extend,oC=(e,t,n,o)=>{const r=e.name,s=r in n&&r!=="title"&&r!=="textarea"&&r!=="noscript",i=t.childNodes;for(let a=0,l=i.length;a<l;a++){const c=i[a],d=new Wn(c.nodeName.toLowerCase(),c.nodeType);if(he(c)){const u=c.attributes;for(let f=0,h=u.length;f<h;f++){const g=u[f];d.attr(g.name,g.value)}jr(d.name)&&(o(c),d.value=c.innerHTML)}else X(c)?(d.value=c.data,s&&(d.raw=!0)):(Gn(c)||ef(c)||tf(c))&&(d.value=c.data);jr(d.name)||oC(d,c,n,o),e.append(d)}},rl=(e={},t=fn())=>{const n=R_(),o=R_(),r={validate:!0,root_name:"body",sanitize:!0,...e},s=new DOMParser,i=((b,p)=>{const v=(()=>{const _=br(),C=()=>_.get().map(ac).getOr("html");return{track:E=>(ic(E)?_.set(E):_.get().exists(x=>!x.contains(E))&&_.clear(),C()),current:C,reset:()=>{_.clear()}}})();if(b.sanitize){const _=QN(b,p,v);return{sanitizeHtmlElement:(E,x)=>{_.sanitize(E,((S,O)=>{const T={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return T.PARSER_MEDIA_TYPE=O,S.allow_script_urls?T.ALLOWED_URI_REGEXP=/.*/:S.allow_html_data_urls&&(T.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),T})(b,x)),_.removed=[],v.reset()},sanitizeNamespaceElement:ZN}}return{sanitizeHtmlElement:(_,C)=>{const E=document.createNodeIterator(_,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let x;for(;x=E.nextNode();){const S=v.track(x);Q_(x,b,p,S),he(x)&&GN(x,b,p,S)}v.reset()},sanitizeNamespaceElement:Te}})(r,t),a=n.addFilter,l=n.getFilters,c=n.removeFilter,d=o.addFilter,u=o.getFilters,f=o.removeFilter,h=(b,p)=>{const v=se(p.attr(lp)),_=p.type===1&&!Re(b,p.name)&&!gc(t,p)&&!jr(p.name);return p.type===3||_&&!v},g={schema:t,addAttributeFilter:d,getAttributeFilters:u,removeAttributeFilter:f,addNodeFilter:a,getNodeFilters:l,removeNodeFilter:c,parse:(b,p={})=>{var v;const _=r.validate,C=(v=p.context)!==null&&v!==void 0?v:r.root_name,E=((P,H,G="html")=>{const Y=G==="xhtml"?"application/xhtml+xml":"text/html",me=Re(t.getSpecialElements(),H.toLowerCase()),be=me?`<${H}>${P}</${H}>`:P,ye=s.parseFromString(G==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${be}</body></html>`:/^[\s]*<head/i.test(P)||/^[\s]*<html/i.test(P)||/^[\s]*<!DOCTYPE/i.test(P)?`<html>${be}</html>`:`<body>${be}</body>`,Y).body;return i.sanitizeHtmlElement(ye,Y),me?ye.firstChild:ye})(b,C,p.format);La(t,E);const x=new Wn(C,11);oC(x,E,t.getSpecialElements(),i.sanitizeNamespaceElement),E.innerHTML="";const[S,O]=((P,H,G,Y)=>{const me=G.validate,be=H.getNonEmptyElements(),ye=H.getWhitespaceElements(),fe=nC(tC("script,style,head,html,body,title,meta,param"),H.getBlockElements()),oe=Dt(H),pe=/[ \t\r\n]+/g,D=/^[ \t\r\n]+/,M=/[ \t\r\n]+$/,$=J=>{let Ce=J.parent;for(;Z(Ce);){if(Ce.name in ye)return!0;Ce=Ce.parent}return!1},q=J=>J.name in fe||gc(H,J)||jr(J.name)&&J.parent===P,re=(J,Ce)=>{const Ee=Ce?J.prev:J.next;return!Z(Ee)&&!Rt(J.parent)&&q(J.parent)&&(J.parent!==P||Y.isRootContent===!0)};return[J=>{var Ce;if(J.type===3&&!$(J)){let Ee=(Ce=J.value)!==null&&Ce!==void 0?Ce:"";Ee=Ee.replace(pe," "),(((Oe,bt)=>Z(Oe)&&(bt(Oe)||Oe.name==="br"))(J.prev,q)||re(J,!0))&&(Ee=Ee.replace(D,"")),Ee.length===0||Ee===" "&&J.prev&&J.prev.type===8&&J.next&&J.next.type===8?J.remove():J.value=Ee}},J=>{var Ce;if(J.type===1){const Ee=H.getElementRule(J.name);if(me&&Ee){const Oe=Qc(H,be,ye,J);Ee.paddInEmptyBlock&&Oe&&(bt=>{let Ut=bt;for(;Z(Ut);){if(Ut.name in oe)return Qc(H,be,ye,Ut);Ut=Ut.parent}return!1})(J)?Bg(G,Y,q,J):Ee.removeEmpty&&Oe?q(J)?J.remove():J.unwrap():Ee.paddEmpty&&(Oe||(bt=>{var Ut;return zy(bt,"#text")&&((Ut=bt?.firstChild)===null||Ut===void 0?void 0:Ut.value)===nn})(J))&&Bg(G,Y,q,J)}}else if(J.type===3&&!$(J)){let Ee=(Ce=J.value)!==null&&Ce!==void 0?Ce:"";(J.next&&q(J.next)||re(J,!1))&&(Ee=Ee.replace(M,"")),Ee.length===0?J.remove():J.value=Ee}}]})(x,t,r,p),T=[],L=_?P=>((H,G)=>{Lg(t,H)&&G.push(H)})(P,T):Te,I={nodes:{},attributes:{}},N=P=>Fy(l(),u(),P,I);if(((P,H,G)=>{const Y=[];for(let me=P,be=me;me;be=me,me=me.walk()){const ye=me;W(H,fe=>fe(ye)),Rt(ye.parent)&&ye!==P?me=be:Y.push(ye)}for(let me=Y.length-1;me>=0;me--){const be=Y[me];W(G,ye=>ye(be))}})(x,[S,N],[O,L]),T.reverse(),_&&T.length>0)if(p.context){const{pass:P,fail:H}=yt(T,G=>G.parent===x);Pg(H,t,x,N),p.invalid=P.length>0}else Pg(T,t,x,N);const R=((P,H)=>{var G;const Y=(G=H.forced_root_block)!==null&&G!==void 0?G:P.forced_root_block;return Y===!1?"":Y===!0?"p":Y})(r,p);return R&&(x.name==="body"||p.isRootContent)&&((P,H)=>{const G=nC(tC("script,style,head,html,body,title,meta,param"),t.getBlockElements()),Y=/^[ \t\r\n]+/,me=/[ \t\r\n]+$/;let be=P.firstChild,ye=null;const fe=oe=>{var pe,D;oe&&(be=oe.firstChild,be&&be.type===3&&(be.value=(pe=be.value)===null||pe===void 0?void 0:pe.replace(Y,"")),be=oe.lastChild,be&&be.type===3&&(be.value=(D=be.value)===null||D===void 0?void 0:D.replace(me,"")))};if(t.isValidChild(P.name,H.toLowerCase())){for(;be;){const oe=be.next;h(G,be)?(ye||(ye=new Wn(H,1),ye.attr(r.forced_root_block_attrs),P.insert(ye,be)),ye.append(be)):(fe(ye),ye=null),be=oe}fe(ye)}})(x,R),p.invalid||jy(I,p),x}};return((b,p)=>{var v,_;const C=b.schema;b.addAttributeFilter("href",O=>{let T=O.length;const L=I=>{const N=I?Q.trim(I):"";return/\b(noopener)\b/g.test(N)?N:(R=>R.split(" ").filter(P=>P.length>0).concat(["noopener"]).sort().join(" "))(N)};if(!p.allow_unsafe_link_target)for(;T--;){const I=O[T];I.name==="a"&&I.attr("target")==="_blank"&&I.attr("rel",L(I.attr("rel")))}}),p.allow_html_in_named_anchor||b.addAttributeFilter("id,name",O=>{let T,L,I,N,R=O.length;for(;R--;)if(N=O[R],N.name==="a"&&N.firstChild&&!N.attr("href"))for(I=N.parent,T=N.lastChild;T&&I;)L=T.prev,I.insert(T,N),T=L}),p.fix_list_elements&&b.addNodeFilter("ul,ol",O=>{let T,L,I=O.length;for(;I--;)if(T=O[I],L=T.parent,L&&(L.name==="ul"||L.name==="ol"))if(T.prev&&T.prev.name==="li")T.prev.append(T);else{const N=new Wn("li",1);N.attr("style","list-style-type: none"),T.wrap(N)}});const E=C.getValidClasses();p.validate&&E&&b.addAttributeFilter("class",O=>{var T;let L=O.length;for(;L--;){const I=O[L],N=(T=I.attr("class"))!==null&&T!==void 0?T:"",R=Q.explode(N," ");let P="";for(let H=0;H<R.length;H++){const G=R[H];let Y=!1,me=E["*"];me&&me[G]&&(Y=!0),me=E[I.name],!Y&&me&&me[G]&&(Y=!0),Y&&(P&&(P+=" "),P+=G)}P.length||(P=null),I.attr("class",P)}}),((O,T)=>{const{blob_cache:L}=T;if(L){const I=N=>{const R=N.attr("src");(P=>P.attr("src")===qe.transparentSrc||Z(P.attr("data-mce-placeholder")))(N)||(P=>Z(P.attr("data-mce-bogus")))(N)||Rt(R)||M_(L,R,!0).each(P=>{N.attr("src",P.blobUri())})};O.addAttributeFilter("src",N=>W(N,I))}})(b,p);const x=(v=p.sandbox_iframes)!==null&&v!==void 0&&v,S=ca((_=p.sandbox_iframes_exclusions)!==null&&_!==void 0?_:[]);p.convert_unsafe_embeds&&b.addNodeFilter("object,embed",O=>W(O,T=>{T.replace((({type:L,src:I,width:N,height:R}={},P,H)=>{const G=(me=>Ft(me)?"iframe":Jg(me,"image")?"img":Jg(me,"video")?"video":Jg(me,"audio")?"audio":"iframe")(L),Y=new Wn(G,1);return Y.attr(G==="audio"?{src:I}:{src:I,width:N,height:R}),G!=="audio"&&G!=="video"||Y.attr("controls",""),G==="iframe"&&P&&I_(Y,H),Y})({type:T.attr("type"),src:T.name==="object"?T.attr("data"):T.attr("src"),width:T.attr("width"),height:T.attr("height")},x,S))})),x&&b.addNodeFilter("iframe",O=>W(O,T=>I_(T,S)))})(g,r),((b,p,v)=>{p.inline_styles&&wN(b,p,v)})(g,r,t),g},rC=(e,t,n)=>{const o=(s=>Vu(s)?oi({validate:!1}).serialize(s):s)(e),r=t(o);if(r.isDefaultPrevented())return r;if(Vu(e)){if(r.content!==o){const s=rl({validate:!1,forced_root_block:!1,...n}).parse(r.content,{context:e.name});return{...r,content:s}}return{...r,content:e}}return r},sC=e=>({sanitize:Qb(e),sandbox_iframes:Jb(e),sandbox_iframes_exclusions:Af(e)}),iC=(e,t)=>{if(t.no_events)return Zn.value(t);{const n=((o,r)=>o.dispatch("BeforeGetContent",r))(e,t);return n.isDefaultPrevented()?Zn.error(Jv(e,{content:"",...n}).content):Zn.value(n)}},aC=(e,t,n)=>n.no_events?t:rC(t,r=>Jv(e,{...n,content:r}),sC(e)).content,cp=(e,t)=>{if(t.no_events)return Zn.value(t);{const n=rC(t.content,o=>((r,s)=>r.dispatch("BeforeSetContent",s))(e,{...t,content:o}),sC(e));return n.isDefaultPrevented()?(Zv(e,n),Zn.error(void 0)):Zn.value(n)}},dp=(e,t,n)=>{n.no_events||Zv(e,{...n,content:t})},up=(e,t,n)=>({element:e,width:t,rows:n}),lC=(e,t)=>({element:e,cells:t}),JN=(e,t)=>({x:e,y:t}),cC=(e,t)=>Xn(e,t).bind(Bs).getOr(1),eT=(e,t,n)=>{const o=e.rows;return!!(o[n]?o[n].cells:[])[t]},dC=e=>Lt(e,(t,n)=>n.cells.length>t?n.cells.length:t,0),uC=(e,t)=>{const n=e.rows;for(let o=0;o<n.length;o++){const r=n[o].cells;for(let s=0;s<r.length;s++)if(tt(r[s],t))return w.some(JN(s,o))}return w.none()},mC=(e,t,n,o,r)=>{const s=[],i=e.rows;for(let a=n;a<=r;a++){const l=i[a].cells,c=t<o?l.slice(t,o+1):l.slice(o,t+1);s.push(lC(i[a].element,c))}return s},tT=e=>((t,n)=>{const o=Fi(t.element),r=sn("tbody");return ms(r,n),Xt(o,r),o})(e,(t=>Me(t.rows,n=>{const o=Me(n.cells,s=>{const i=Qh(s);return rn(i,"colspan"),rn(i,"rowspan"),i}),r=Fi(n.element);return ms(r,o),r}))(e)),nT=(e,t,n)=>{const o=B(t.commonAncestorContainer),r=Es(o,e),s=ue(r,l=>n.isWrapper(We(l))),i=((l,c)=>en(l,d=>We(d)==="li"&&jf(d,c)).fold(K([]),d=>(u=>en(u,f=>We(f)==="ul"||We(f)==="ol"))(l).map(u=>{const f=sn(We(u)),h=Ar(Zl(u),(g,b)=>_t(b,"list-style"));return us(f,h),[sn("li"),f]}).getOr([])))(r,t),a=s.concat(i.length?i:(l=>$a(l)?bo(l).filter(cf).fold(K([]),c=>[l,c]):cf(l)?[l]:[])(o));return Me(a,Fi)},fC=()=>eg([]),oT=(e,t)=>((n,o)=>ki(o,"table",ae(tt,n)))(e,t[0]).bind(n=>{const o=t[0],r=t[t.length-1],s=(i=>{const a=up(Fi(i),0,[]);return W(vn(i,"tr"),(l,c)=>{W(vn(l,"td,th"),(d,u)=>{((f,h,g,b,p)=>{const v=cC(p,"rowspan"),_=cC(p,"colspan"),C=f.rows;for(let E=g;E<g+v;E++){C[E]||(C[E]=lC(Qh(b),[]));for(let x=h;x<h+_;x++)C[E].cells[x]=E===g&&x===h?p:Fi(p)}})(a,((f,h,g)=>{for(;eT(f,h,g);)h++;return h})(a,u,c),c,l,d)})}),up(a.element,dC(a.rows),a.rows)})(n);return((i,a,l)=>uC(i,a).bind(c=>uC(i,l).map(d=>((u,f,h)=>{const g=f.x,b=f.y,p=h.x,v=h.y,_=b<v?mC(u,g,b,p,v):mC(u,g,v,p,b);return up(u.element,dC(_),_)})(i,c,d))))(s,o,r).map(i=>eg([tT(i)]))}).getOrThunk(fC),rT=(e,t,n)=>{const o=Nv(t,e);return o.length>0?oT(e,o):((r,s,i)=>s.length>0&&s[0].collapsed?fC():((a,l,c)=>((d,u)=>{const f=Lt(u,(h,g)=>(Xt(g,h),g),d);return u.length>0?eg([f]):f})(B(l.cloneContents()),nT(a,l,c)))(r,s[0],i))(e,t,n)},Ju=(e,t)=>t>=0&&t<e.length&&Vi(e.charAt(t)),gC=e=>Co(e.innerText),pC=e=>he(e)?e.outerHTML:X(e)?xe.encodeRaw(e.data,!1):Gn(e)?"<!--"+e.data+"-->":"",sT=(e,t)=>(((n,o)=>{let r=0;W(n,s=>{s[0]===0?r++:s[0]===1?(((i,a,l)=>{const c=(d=>{let u;const f=document.createElement("div"),h=document.createDocumentFragment();for(d&&(f.innerHTML=d);u=f.firstChild;)h.appendChild(u);return h})(a);if(i.hasChildNodes()&&l<i.childNodes.length){const d=i.childNodes[l];i.insertBefore(c,d)}else i.appendChild(c)})(o,s[1],r),r++):s[0]===2&&((i,a)=>{if(i.hasChildNodes()&&a<i.childNodes.length){const l=i.childNodes[a];i.removeChild(l)}})(o,r)})})(((n,o)=>{const r=n.length+o.length+2,s=new Array(r),i=new Array(r),a=(u,f,h,g,b)=>{const p=c(u,f,h,g);if(p===null||p.start===f&&p.diag===f-g||p.end===u&&p.diag===u-h){let v=u,_=h;for(;v<f||_<g;)v<f&&_<g&&n[v]===o[_]?(b.push([0,n[v]]),++v,++_):f-u>g-h?(b.push([2,n[v]]),++v):(b.push([1,o[_]]),++_)}else{a(u,p.start,h,p.start-p.diag,b);for(let v=p.start;v<p.end;++v)b.push([0,n[v]]);a(p.end,f,p.end-p.diag,g,b)}},l=(u,f,h,g)=>{let b=u;for(;b-f<g&&b<h&&n[b]===o[b-f];)++b;return((p,v,_)=>({start:p,end:v,diag:_}))(u,b,f)},c=(u,f,h,g)=>{const b=f-u,p=g-h;if(b===0||p===0)return null;const v=b-p,_=p+b,C=(_%2==0?_:_+1)/2;let E,x,S,O,T;for(s[1+C]=u,i[1+C]=f+1,E=0;E<=C;++E){for(x=-E;x<=E;x+=2){for(S=x+C,x===-E||x!==E&&s[S-1]<s[S+1]?s[S]=s[S+1]:s[S]=s[S-1]+1,O=s[S],T=O-u+h-x;O<f&&T<g&&n[O]===o[T];)s[S]=++O,++T;if(v%2!=0&&v-E<=x&&x<=v+E&&i[S-v]<=s[S])return l(i[S-v],x+u-h,f,g)}for(x=v-E;x<=v+E;x+=2){for(S=x+C-v,x===v-E||x!==v+E&&i[S+1]<=i[S-1]?i[S]=i[S+1]-1:i[S]=i[S-1],O=i[S]-1,T=O-u+h-x;O>=u&&T>=h&&n[O]===o[T];)i[S]=O--,T--;if(v%2==0&&-E<=x&&x<=E&&i[S]<=s[S+v])return l(i[S],x+u-h,f,g)}}return null},d=[];return a(0,n.length,0,o.length,d),d})(Me(An(t.childNodes),pC),e),t),t),iT=Fn(()=>document.implementation.createHTMLDocument("undo")),em=e=>{const t=e.serializer.getTempAttrs(),n=j0(e.getBody(),t);return(o=>o.querySelector("iframe")!==null)(n)?{type:"fragmented",fragments:ue(Me(An(n.childNodes),Le(Co,pC)),o=>o.length>0),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:Co(n.innerHTML),bookmark:null,beforeBookmark:null}},mp=(e,t,n)=>{const o=n?t.beforeBookmark:t.bookmark;t.type==="fragmented"?sT(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!Z(o)||!wv(o)||!o.isFakeCaret}),o&&(e.selection.moveToBookmark(o),e.selection.scrollIntoView())},fp=e=>e.type==="fragmented"?e.fragments.join(""):e.content,hC=e=>{const t=sn("body",iT());return Aa(t,fp(e)),W(vn(t,"*[data-mce-bogus]"),gr),Sa(t)},gp=(e,t)=>!(!e||!t)&&(!!((n,o)=>fp(n)===fp(o))(e,t)||((n,o)=>hC(n)===hC(o))(e,t)),pp=e=>e.get()===0,tm=(e,t,n)=>{pp(n)&&(e.typing=t)},bC=(e,t)=>{e.typing&&(tm(e,!1,t),e.add())},vC=e=>({init:{bindEvents:Te},undoManager:{beforeChange:(t,n)=>((o,r,s)=>{pp(r)&&s.set(Cf(o.selection))})(e,t,n),add:(t,n,o,r,s,i)=>((a,l,c,d,u,f,h)=>{const g=em(a),b=Q.extend(f||{},g);if(!pp(d)||a.removed)return null;const p=l.data[c.get()];if(a.dispatch("BeforeAddUndo",{level:b,lastLevel:p,originalEvent:h}).isDefaultPrevented()||p&&gp(p,b))return null;l.data[c.get()]&&u.get().each(C=>{l.data[c.get()].beforeBookmark=C});const v=gS(a);if(v&&l.data.length>v){for(let C=0;C<l.data.length-1;C++)l.data[C]=l.data[C+1];l.data.length--,c.set(l.data.length)}b.bookmark=Cf(a.selection),c.get()<l.data.length-1&&(l.data.length=c.get()+1),l.data.push(b),c.set(l.data.length-1);const _={level:b,lastLevel:p,originalEvent:h};return c.get()>0?(a.setDirty(!0),a.dispatch("AddUndo",_),a.dispatch("change",_)):a.dispatch("AddUndo",_),b})(e,t,n,o,r,s,i),undo:(t,n,o)=>((r,s,i,a)=>{let l;return s.typing&&(s.add(),s.typing=!1,tm(s,!1,i)),a.get()>0&&(a.set(a.get()-1),l=s.data[a.get()],mp(r,l,!0),r.setDirty(!0),r.dispatch("Undo",{level:l})),l})(e,t,n,o),redo:(t,n)=>((o,r,s)=>{let i;return r.get()<s.length-1&&(r.set(r.get()+1),i=s[r.get()],mp(o,i,!1),o.setDirty(!0),o.dispatch("Redo",{level:i})),i})(e,t,n),clear:(t,n)=>((o,r,s)=>{r.data=[],s.set(0),r.typing=!1,o.dispatch("ClearUndos")})(e,t,n),reset:t=>(n=>{n.clear(),n.add()})(t),hasUndo:(t,n)=>((o,r,s)=>s.get()>0||r.typing&&r.data[0]&&!gp(em(o),r.data[0]))(e,t,n),hasRedo:(t,n)=>((o,r)=>r.get()<o.data.length-1&&!o.typing)(t,n),transact:(t,n,o)=>((r,s,i)=>(bC(r,s),r.beforeChange(),r.ignore(i),r.add()))(t,n,o),ignore:(t,n)=>((o,r)=>{try{o.set(o.get()+1),r()}finally{o.set(o.get()-1)}})(t,n),extra:(t,n,o,r)=>((s,i,a,l,c)=>{if(i.transact(l)){const d=i.data[a.get()].bookmark,u=i.data[a.get()-1];mp(s,u,!0),i.transact(c)&&(i.data[a.get()-1].beforeBookmark=d)}})(e,t,n,o,r)},formatter:{match:(t,n,o,r)=>Hg(e,t,n,o,r),matchAll:(t,n)=>((o,r,s)=>{const i=[],a={},l=o.selection.getStart();return o.dom.getParent(l,c=>{for(let d=0;d<r.length;d++){const u=r[d];!a[u]&&Kr(o,c,u,s)&&(a[u]=!0,i.push(u))}},o.dom.getRoot()),i})(e,t,n),matchNode:(t,n,o,r)=>Kr(e,t,n,o,r),canApply:t=>((n,o)=>{const r=n.formatter.get(o),s=n.dom;if(r&&n.selection.isEditable()){const i=n.selection.getStart(),a=Au(s,i);for(let l=r.length-1;l>=0;l--){const c=r[l];if(!zo(c))return!0;for(let d=a.length-1;d>=0;d--)if(s.is(a[d],c.selector))return!0}}return!1})(e,t),closest:t=>((n,o)=>{const r=s=>tt(s,B(n.getBody()));return w.from(n.selection.getStart(!0)).bind(s=>$g(B(s),i=>Ns(o,a=>((l,c)=>Kr(n,l.dom,c)?w.some(c):w.none())(i,a)),r)).getOrNull()})(e,t),apply:(t,n,o)=>x_(e,t,n,o),remove:(t,n,o,r)=>C_(e,t,n,o,r),toggle:(t,n,o)=>((r,s,i,a)=>{const l=r.formatter.get(s);l&&(!Hg(r,s,i,a)||"toggle"in l[0]&&!l[0].toggle?x_(r,s,i,a):C_(r,s,i,a))})(e,t,n,o),formatChanged:(t,n,o,r,s)=>((i,a,l,c,d,u)=>(((f,h,g,b,p,v)=>{const _=h.get();W(g.split(","),C=>{const E=At(_,C).getOrThunk(()=>{const S={withSimilar:{state:ln(!1),similar:!0,callbacks:[]},withoutSimilar:{state:ln(!1),similar:!1,callbacks:[]},withVars:[]};return _[C]=S,S}),x=()=>{const S=N_(f);return A_(f,S,C,p,v).isSome()};if(Ft(v)){const S=p?E.withSimilar:E.withoutSimilar;S.callbacks.push(b),S.callbacks.length===1&&S.state.set(x())}else E.withVars.push({state:ln(x()),similar:p,vars:v,callback:b})}),h.set(_)})(i,a,l,c,d,u),{unbind:()=>((f,h,g)=>{const b=f.get();W(h.split(","),p=>At(b,p).each(v=>{b[p]={withSimilar:{...v.withSimilar,callbacks:ue(v.withSimilar.callbacks,_=>_!==g)},withoutSimilar:{...v.withoutSimilar,callbacks:ue(v.withoutSimilar.callbacks,_=>_!==g)},withVars:ue(v.withVars,_=>_.callback!==g)}})),f.set(b)})(a,l,c)}))(e,t,n,o,r,s)},editor:{getContent:t=>((n,o)=>w.from(n.getBody()).fold(K(o.format==="tree"?new Wn("body",11):""),r=>VA(n,o,r)))(e,t),setContent:(t,n)=>((o,r,s)=>w.from(o.getBody()).map(i=>Vu(r)?((a,l,c,d)=>{$y(a.parser.getNodeFilters(),a.parser.getAttributeFilters(),c);const u=oi({validate:!1},a.schema).serialize(c),f=Co(lu(B(l))?u:Q.trim(u));return jg(a,f,d.no_selection),{content:c,html:f}})(o,i,r,s):((a,l,c,d)=>{if((c=Co(c)).length===0||/^\s+$/.test(c)){const u='<br data-mce-bogus="1">';l.nodeName==="TABLE"?c="<tr><td>"+u+"</td></tr>":/^(UL|OL)$/.test(l.nodeName)&&(c="<li>"+u+"</li>");const f=Pn(a);return a.schema.isValidChild(l.nodeName.toLowerCase(),f.toLowerCase())?(c=u,c=a.dom.createHTML(f,Bc(a),c)):c||(c=u),jg(a,c,d.no_selection),{content:c,html:c}}{d.format!=="raw"&&(c=oi({validate:!1},a.schema).serialize(a.parser.parse(c,{isRootContent:!0,insert:!0})));const u=lu(B(l))?c:Q.trim(c);return jg(a,u,d.no_selection),{content:u,html:u}}})(o,i,r,s)).getOr({content:r,html:Vu(s.content)?"":s.content}))(e,t,n),insertContent:(t,n)=>bN(e,t,n),addVisual:t=>((n,o)=>{const r=n.dom,s=Z(o)?o:n.getBody();W(r.select("table,a",s),i=>{switch(i.nodeName){case"TABLE":const a=_S(n),l=r.getAttrib(i,"border");l&&l!=="0"||!n.hasVisual?r.removeClass(i,a):r.addClass(i,a);break;case"A":if(!r.getAttrib(i,"href")){const c=r.getAttrib(i,"name")||i.id,d=Yb(n);c&&n.hasVisual?r.addClass(i,d):r.removeClass(i,d)}}}),n.dispatch("VisualAid",{element:o,hasVisual:n.hasVisual})})(e,t)},selection:{getContent:(t,n)=>((o,r,s={})=>{const i=((a,l)=>({...a,format:l,get:!0,selection:!0,getInner:!0}))(s,r);return iC(o,i).fold(Be,a=>{const l=((c,d)=>{if(d.format==="text")return(u=>w.from(u.selection.getRng()).map(f=>{var h;const g=w.from(u.dom.getParent(f.commonAncestorContainer,u.dom.isBlock)),b=u.getBody(),p=(x=>x.map(S=>S.nodeName).getOr("div").toLowerCase())(g),v=B(f.cloneContents());$0(v),z0(v);const _=u.dom.add(b,p,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},v.dom),C=gC(_),E=Co((h=_.textContent)!==null&&h!==void 0?h:"");if(u.dom.remove(_),Ju(E,0)||Ju(E,E.length-1)){const x=g.getOr(b),S=gC(x),O=S.indexOf(C);return O===-1?C:(Ju(S,O-1)?" ":"")+C+(Ju(S,O+C.length)?" ":"")}return C}).getOr(""))(c);{const u=((f,h)=>{const g=f.selection.getRng(),b=f.dom.create("body"),p=f.selection.getSel(),v=ug(f,If(p)),_=h.contextual?rT(B(f.getBody()),v,f.schema).dom:g.cloneContents();return _&&b.appendChild(_),f.selection.serializer.serialize(b,h)})(c,d);return d.format==="tree"?u:c.selection.isCollapsed()?"":u}})(o,a);return aC(o,l,a)})})(e,t,n)},autocompleter:{addDecoration:Te,removeDecoration:Te},raw:{getModel:()=>w.none()}}),Yr=e=>Re(e.plugins,"rtc"),hp=e=>e.rtcInstance?e.rtcInstance:vC(e),cn=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},yC=e=>cn(e).init.bindEvents(),_C=e=>e.dom.length===0?(Nt(e),w.none()):w.some(e),CC=(e,t,n,o,r)=>{e.bind(s=>((o?_g:zu)(s.dom,o?s.dom.length:0,r),t.filter(En).map(i=>((a,l,c,d,u)=>{const f=a.dom,h=l.dom,g=d?f.length:h.length;d?(Cg(f,h,u,!1,!d),c.setStart(h,g)):(Cg(h,f,u,!1,!d),c.setEnd(h,g))})(s,i,n,o,r)))).orThunk(()=>((i,a)=>i.filter(l=>Hc.isBookmarkNode(l.dom)).bind(a?Ro:io))(t,o).or(t).filter(En).map(i=>((a,l,c)=>{bo(a).each(d=>{const u=a.dom;l&&Yc(d,U(u,0),c)?zu(u,0,c):!l&&Xc(d,U(u,u.length),c)&&_g(u,u.length,c)})})(i,o,r)))},wC=(e,t,n)=>{if(Re(e,t)){const o=ue(e[t],r=>r!==n);o.length===0?delete e[t]:e[t]=o}},EC=e=>!(!e||!e.ownerDocument)&&Oo(B(e.ownerDocument),B(e)),xC=(e,t,n,o)=>{let r,s;const{selectorChangedWithUnbind:i}=((p,v)=>{let _,C;const E=(S,O)=>en(O,T=>p.is(T,S)),x=S=>p.getParents(S,void 0,p.getRoot());return{selectorChangedWithUnbind:(S,O)=>(_||(_={},C={},v.on("NodeChange",T=>{const L=T.element,I=x(L),N={};Ct(_,(R,P)=>{E(P,I).each(H=>{C[P]||(W(R,G=>{G(!0,{node:H,selector:P,parents:I})}),C[P]=R),N[P]=R})}),Ct(C,(R,P)=>{N[P]||(delete C[P],W(R,H=>{H(!1,{node:L,selector:P,parents:I})}))})})),_[S]||(_[S]=[]),_[S].push(O),E(S,x(v.selection.getStart())).each(()=>{C[S]=_[S]}),{unbind:()=>{wC(_,S,O),wC(C,S,O)}})}})(e,o),a=(p,v)=>((_,C,E={})=>{const x=((S,O)=>({format:"html",...S,set:!0,selection:!0,content:O}))(E,C);cp(_,x).each(S=>{const O=((L,I)=>{if(I.format!=="raw"){const N=L.selection.getRng(),R=L.dom.getParent(N.commonAncestorContainer,L.dom.isBlock),P=R?{context:R.nodeName.toLowerCase()}:{},H=L.parser.parse(I.content,{forced_root_block:!1,...P,...I});return oi({validate:!1},L.schema).serialize(H)}return I.content})(_,S),T=_.selection.getRng();((L,I,N)=>{const R=w.from(I.firstChild).map(B),P=w.from(I.lastChild).map(B);L.deleteContents(),L.insertNode(I);const H=R.bind(io).filter(En).bind(_C),G=P.bind(Ro).filter(En).bind(_C);CC(H,R,L,!0,N),CC(G,P,L,!1,N),L.collapse(!1)})(T,T.createContextualFragment(O),_.schema),_.selection.setRng(T),Wc(_,T),dp(_,O,S)})})(o,p,v),l=p=>{const v=d();v.collapse(!!p),u(v)},c=()=>t.getSelection?t.getSelection():t.document.selection,d=()=>{let p;const v=(C,E,x)=>{try{return E.compareBoundaryPoints(C,x)}catch{return-1}},_=t.document;if(Z(o.bookmark)&&!tl(o)){const C=ig(o);if(C.isSome())return C.map(E=>ug(o,[E])[0]).getOr(_.createRange())}try{const C=c();C&&!Ra(C.anchorNode)&&(p=C.rangeCount>0?C.getRangeAt(0):_.createRange(),p=ug(o,[p])[0])}catch{}if(p||(p=_.createRange()),Ti(p.startContainer)&&p.collapsed){const C=e.getRoot();p.setStart(C,0),p.setEnd(C,0)}return r&&s&&(v(p.START_TO_START,p,r)===0&&v(p.END_TO_END,p,r)===0?p=s:(r=null,s=null)),p},u=(p,v)=>{if(!(C=>!!C&&EC(C.startContainer)&&EC(C.endContainer))(p))return;const _=c();if(p=o.dispatch("SetSelectionRange",{range:p,forward:v}).range,_){s=p;try{_.removeAllRanges(),_.addRange(p)}catch{}v===!1&&_.extend&&(_.collapse(p.endContainer,p.endOffset),_.extend(p.startContainer,p.startOffset)),r=_.rangeCount>0?_.getRangeAt(0):null}if(!p.collapsed&&p.startContainer===p.endContainer&&_?.setBaseAndExtent&&p.endOffset-p.startOffset<2&&p.startContainer.hasChildNodes()){const C=p.startContainer.childNodes[p.startOffset];C&&C.nodeName==="IMG"&&(_.setBaseAndExtent(p.startContainer,p.startOffset,p.endContainer,p.endOffset),_.anchorNode===p.startContainer&&_.focusNode===p.endContainer||_.setBaseAndExtent(C,0,C,1))}o.dispatch("AfterSetSelectionRange",{range:p,forward:v})},f=()=>{const p=c(),v=p?.anchorNode,_=p?.focusNode;if(!p||!v||!_||Ra(v)||Ra(_))return!0;const C=e.createRng(),E=e.createRng();try{C.setStart(v,p.anchorOffset),C.collapse(!0),E.setStart(_,p.focusOffset),E.collapse(!0)}catch{return!0}return C.compareBoundaryPoints(C.START_TO_START,E)<=0},h={dom:e,win:t,serializer:n,editor:o,expand:(p={type:"word"})=>u(Xi(e).expand(d(),p)),collapse:l,setCursorLocation:(p,v)=>{const _=e.createRng();Z(p)&&Z(v)?(_.setStart(p,v),_.setEnd(p,v),u(_),l(!1)):($f(e,_,o.getBody(),!0),u(_))},getContent:p=>((v,_={})=>((C,E,x)=>cn(C).selection.getContent(E,x))(v,_.format?_.format:"html",_))(o,p),setContent:a,getBookmark:(p,v)=>g.getBookmark(p,v),moveToBookmark:p=>g.moveToBookmark(p),select:(p,v)=>(((_,C,E)=>w.from(C).bind(x=>w.from(x.parentNode).map(S=>{const O=_.nodeIndex(x),T=_.createRng();return T.setStart(S,O),T.setEnd(S,O+1),E&&($f(_,T,x,!0),$f(_,T,x,!1)),T})))(e,p,v).each(u),p),isCollapsed:()=>{const p=d(),v=c();return!(!p||p.item)&&(p.compareEndPoints?p.compareEndPoints("StartToEnd",p)===0:!v||p.collapsed)},isEditable:()=>{const p=d(),v=o.getBody().querySelectorAll('[data-mce-selected="1"]');return v.length>0?cr(v,_=>e.isEditable(_.parentElement)):N0(e,p)},isForward:f,setNode:p=>(a(e.getOuterHTML(p)),p),getNode:()=>((p,v)=>{if(!v)return p;let _=v.startContainer,C=v.endContainer;const E=v.startOffset,x=v.endOffset;let S=v.commonAncestorContainer;v.collapsed||(_===C&&x-E<2&&_.hasChildNodes()&&(S=_.childNodes[E]),X(_)&&X(C)&&(_=_.length===E?B0(_.nextSibling,!0):_.parentNode,C=x===0?B0(C.previousSibling,!1):C.parentNode,_&&_===C&&(S=_)));const O=X(S)?S.parentNode:S;return pr(O)?O:p})(o.getBody(),d()),getSel:c,setRng:u,getRng:d,getStart:p=>O0(o.getBody(),d(),p),getEnd:p=>R0(o.getBody(),d(),p),getSelectedBlocks:(p,v)=>((_,C,E,x)=>{const S=[],O=_.getRoot(),T=_.getParent(E||O0(O,C,C.collapsed),_.isBlock),L=_.getParent(x||R0(O,C,C.collapsed),_.isBlock);if(T&&T!==O&&S.push(T),T&&L&&T!==L){let I;const N=new an(T,O);for(;(I=N.next())&&I!==L;)_.isBlock(I)&&S.push(I)}return L&&T!==L&&L!==O&&S.push(L),S})(e,d(),p,v),normalize:()=>{const p=d(),v=c();if(!(If(v).length>1)&&ku(o)){const _=Bu(e,p);return _.each(C=>{u(C,f())}),_.getOr(p)}return p},selectorChanged:(p,v)=>(i(p,v),h),selectorChangedWithUnbind:i,getScrollContainer:()=>{let p,v=e.getRoot();for(;v&&v.nodeName!=="BODY";){if(v.scrollHeight>v.clientHeight){p=v;break}v=v.parentNode}return p},scrollIntoView:(p,v)=>{Z(p)?((_,C,E)=>{(_.inline?TA:RA)(_,C,E)})(o,p,v):Wc(o,d(),v)},placeCaretAt:(p,v)=>u(a0(p,v,o.getDoc())),getBoundingClientRect:()=>{const p=d();return p.collapsed?U.fromRangeStart(p).getClientRects()[0]:p.getBoundingClientRect()},destroy:()=>{t=r=s=null,b.destroy()}},g=Hc(h),b=n0(h,o);return h.bookmarkManager=g,h.controlSelection=b,h},aT=(e,t,n)=>{Q.inArray(t,n)===-1&&(e.addAttributeFilter(n,(o,r)=>{let s=o.length;for(;s--;)o[s].attr(r,null)}),t.push(n))},lT=(e,t)=>{const n=["data-mce-selected"],o={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},r=t&&t.dom?t.dom:ot.DOM,s=t&&t.schema?t.schema:fn(o),i=rl(o,s);return((a,l,c)=>{a.addAttributeFilter("data-mce-tabindex",(d,u)=>{let f=d.length;for(;f--;){const h=d[f];h.attr("tabindex",h.attr("data-mce-tabindex")),h.attr(u,null)}}),a.addAttributeFilter("src,href,style",(d,u)=>{const f="data-mce-"+u,h=l.url_converter,g=l.url_converter_scope;let b=d.length;for(;b--;){const p=d[b];let v=p.attr(f);v!==void 0?(p.attr(u,v.length>0?v:null),p.attr(f,null)):(v=p.attr(u),u==="style"?v=c.serializeStyle(c.parseStyle(v),p.name):h&&(v=h.call(g,v,u,p.name)),p.attr(u,v.length>0?v:null))}}),a.addAttributeFilter("class",d=>{let u=d.length;for(;u--;){const f=d[u];let h=f.attr("class");h&&(h=h.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),f.attr("class",h.length>0?h:null))}}),a.addAttributeFilter("data-mce-type",(d,u,f)=>{let h=d.length;for(;h--;){const g=d[h];g.attr("data-mce-type")==="bookmark"&&!f.cleanup&&(w.from(g.firstChild).exists(p=>{var v;return!cu((v=p.value)!==null&&v!==void 0?v:"")})?g.unwrap():g.remove())}}),a.addNodeFilter("script,style",(d,u)=>{var f;const h=b=>b.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let g=d.length;for(;g--;){const b=d[g],p=b.firstChild,v=(f=p?.value)!==null&&f!==void 0?f:"";if(u==="script"){const _=b.attr("type");_&&b.attr("type",_==="mce-no/type"?null:_.replace(/^mce\-/,"")),l.element_format==="xhtml"&&p&&v.length>0&&(p.value=`// <![CDATA[
`+h(v)+`
// ]]>`)}else l.element_format==="xhtml"&&p&&v.length>0&&(p.value=`<!--
`+h(v)+`
-->`)}}),a.addNodeFilter("#comment",d=>{let u=d.length;for(;u--;){const f=d[u],h=f.value;l.preserve_cdata&&h?.indexOf("[CDATA[")===0?(f.name="#cdata",f.type=4,f.value=c.decode(h.replace(/^\[CDATA\[|\]\]$/g,""))):h?.indexOf("mce:protected ")===0&&(f.name="#text",f.type=3,f.raw=!0,f.value=unescape(h).substr(14))}}),a.addNodeFilter("xml:namespace,input",(d,u)=>{let f=d.length;for(;f--;){const h=d[f];h.type===7?h.remove():h.type===1&&(u!=="input"||h.attr("type")||h.attr("type","text"))}}),a.addAttributeFilter("data-mce-type",d=>{W(d,u=>{u.attr("data-mce-type")==="format-caret"&&(u.isEmpty(a.schema.getNonEmptyElements())?u.remove():u.unwrap())})}),a.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(d,u)=>{let f=d.length;for(;f--;)d[f].attr(u,null)}),l.remove_trailing_brs&&((d,u,f)=>{u.addNodeFilter("br",(h,g,b)=>{const p=Q.extend({},f.getBlockElements()),v=f.getNonEmptyElements(),_=f.getWhitespaceElements();p.body=1;const C=E=>E.name in p||gc(f,E);for(let E=0,x=h.length;E<x;E++){let S=h[E],O=S.parent;if(O&&C(O)&&S===O.lastChild){let T=S.prev;for(;T;){const L=T.name;if(L!=="span"||T.attr("data-mce-type")!=="bookmark"){L==="br"&&(S=null);break}T=T.prev}if(S&&(S.remove(),Qc(f,v,_,O))){const L=f.getElementRule(O.name);L&&(L.removeEmpty?O.remove():L.paddEmpty&&Bg(d,b,C,O))}}else{let T=S;for(;O&&O.firstChild===T&&O.lastChild===T&&(T=O,!p[O.name]);)O=O.parent;if(T===O){const L=new Wn("#text",3);L.value=nn,S.replace(L)}}}})})(l,a,a.schema)})(i,o,r),{schema:s,addNodeFilter:i.addNodeFilter,addAttributeFilter:i.addAttributeFilter,serialize:(a,l={})=>{const c={format:"html",...l},d=((h,g,b)=>((p,v)=>Z(p)&&p.hasEventListeners("PreProcess")&&!v.no_events)(h,b)?((p,v,_)=>{let C;const E=p.dom;let x=v.cloneNode(!0);const S=document.implementation;if(S.createHTMLDocument){const O=S.createHTMLDocument("");Q.each(x.nodeName==="BODY"?x.childNodes:[x],T=>{O.body.appendChild(O.importNode(T,!0))}),x=x.nodeName!=="BODY"?O.body.firstChild:O.body,C=E.doc,E.doc=O}return((O,T)=>{O.dispatch("PreProcess",T)})(p,{..._,node:x}),C&&(E.doc=C),x})(h,g,b):g)(t,a,c),u=((h,g,b)=>{const p=Co(b.getInner?g.innerHTML:h.getOuterHTML(g));return b.selection||lu(B(g))?p:Q.trim(p)})(r,d,c),f=((h,g,b)=>{const p=b.selection?{forced_root_block:!1,...b}:b,v=h.parse(g,p);return(_=>{const C=x=>x?.name==="br",E=_.lastChild;if(C(E)){const x=E.prev;C(x)&&(E.remove(),x.remove())}})(v),v})(i,u,c);return c.format==="tree"?f:((h,g,b,p,v)=>{const _=((C,E,x)=>oi(C,E).serialize(x))(g,b,p);return((C,E,x)=>!E.no_events&&C?((O,T)=>O.dispatch("PostProcess",T))(C,{...E,content:x}).content:x)(h,v,_)})(t,o,s,f,c)},addRules:s.addValidElements,setRules:s.setValidElements,addTempAttr:ae(aT,i,n),getTempAttrs:K(n),getNodeFilters:i.getNodeFilters,getAttributeFilters:i.getAttributeFilters,removeNodeFilter:i.removeNodeFilter,removeAttributeFilter:i.removeAttributeFilter}},kC=(e,t)=>{const n=lT(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},bp=(e,t,n={})=>{const o=((r,s)=>({format:"html",...r,set:!0,content:s}))(n,t);return cp(e,o).map(r=>{const s=((i,a,l)=>hp(i).editor.setContent(a,l))(e,r.content,r);return dp(e,s.html,r),s.content}).getOr(t)},cT="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),dT=[],uT="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),SC=[],AC=(e,t)=>{const n=ue(t,o=>Re(e,o));return Sr(n)},mT=e=>{const t=AC(e,cT),n=e.forced_root_block;return n!==!1&&n!==""||t.push("forced_root_block (false only)"),Sr(t)},fT=e=>AC(e,dT),NC=(e,t)=>{const n=Q.makeMap(e.plugins," "),o=ue(t,r=>Re(n,r));return Sr(o)},gT=e=>NC(e,uT),pT=e=>NC(e,SC.map(t=>t.name)),hT=e=>en(SC,t=>t.name===e).fold(()=>e,t=>t.replacedWith?`${e}, replaced by ${t.replacedWith}`:e),nm=ot.DOM,om=e=>w.from(e).each(t=>t.destroy()),rm=(()=>{const e={};return{add:(t,n)=>{e[t]=n},get:t=>e[t]?e[t]:{icons:{}},has:t=>Re(e,t)}})(),sl=Sn.ModelManager,TC=(e,t)=>t.dom[e],OC=(e,t)=>parseInt(Do(t,e),10),bT=ae(TC,"clientWidth"),vT=ae(TC,"clientHeight"),yT=ae(OC,"margin-top"),_T=ae(OC,"margin-left"),RC=e=>{const t=[],n=()=>{const l=e.theme;return l&&l.getNotificationManagerImpl?l.getNotificationManagerImpl():(()=>{const c=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:c,close:c,getArgs:c}})()},o=()=>w.from(t[0]),r=()=>{o().each(l=>{l.reposition()})},s=l=>{fi(t,c=>c===l).each(c=>{t.splice(c,1)})},i=(l,c=!0)=>e.removed||!(d=>{return(u=d.inline?d.getBody():d.getContentAreaContainer(),w.from(u).map(B)).map(ls).getOr(!1);var u})(e)?{}:(c&&e.dispatch("BeforeOpenNotification",{notification:l}),en(t,d=>{return u=n().getArgs(d),f=l,!(u.type!==f.type||u.text!==f.text||u.progressBar||u.timeout||f.progressBar||f.timeout);var u,f}).getOrThunk(()=>{e.editorManager.setActive(e);const d=n().open(l,()=>{s(d)},()=>A0(e));return(u=>{t.push(u)})(d),r(),e.dispatch("OpenNotification",{notification:{...d}}),d})),a=K(t);return(l=>{l.on("SkinLoaded",()=>{const c=nS(l);c&&i({text:c,type:"warning",timeout:0},!1),r()}),l.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(r)}),l.on("remove",()=>{W(t.slice(),c=>{n().close(c)})}),l.addShortcut("alt+F12","Focus to notification",()=>o().map(c=>B(c.getEl())).each(c=>_0(c)))})(e),{open:i,close:()=>{o().each(l=>{n().close(l),s(l),r()})},getNotifications:a}},il=Sn.PluginManager,ea=Sn.ThemeManager,BC=e=>{let t=[];const n=()=>{const i=e.theme;return i&&i.getWindowManagerImpl?i.getWindowManagerImpl():(()=>{const a=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:a,openUrl:a,alert:a,confirm:a,close:a}})()},o=(i,a)=>(...l)=>a?a.apply(i,l):void 0,r=i=>{(a=>{e.dispatch("CloseWindow",{dialog:a})})(i),t=ue(t,a=>a!==i),t.length===0&&e.focus()},s=i=>{e.editorManager.setActive(e),Lu(e),e.ui.show();const a=i();return(l=>{t.push(l),(c=>{e.dispatch("OpenWindow",{dialog:c})})(l)})(a),a};return e.on("remove",()=>{W(t,i=>{n().close(i)})}),{open:(i,a)=>s(()=>n().open(i,a,r)),openUrl:i=>s(()=>n().openUrl(i,r)),alert:(i,a,l)=>{const c=n();c.alert(i,o(l||c,a))},confirm:(i,a,l)=>{const c=n();c.confirm(i,o(l||c,a))},close:()=>{w.from(t[t.length-1]).each(i=>{n().close(i),r(i)})}}},DC=(e,t)=>{e.notificationManager.open({type:"error",text:t})},sm=(e,t)=>{e._skinLoaded?DC(e,t):e.on("SkinLoaded",()=>{DC(e,t)})},od=(e,t,n)=>{Xv(e,t,{message:n}),console.error(n)},rd=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,im=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},vp=e=>"content/"+e+"/content.css",PC=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",o=`content${e.editorManager.suffix}.css`;return Me(t,r=>(s=>tinymce.Resource.has(vp(s)))(r)?r:(s=>/^[a-z0-9\-]+$/i.test(s))(r)&&!e.inline?`${n}/${r}/${o}`:e.documentBaseURI.toAbsolute(r))},CT=(e,t)=>{const n={};return{findAll:(o,r=St)=>{const s=ue((a=>a?An(a.getElementsByTagName("img")):[])(o),a=>{const l=a.src;return!a.hasAttribute("data-mce-bogus")&&!a.hasAttribute("data-mce-placeholder")&&!(!l||l===qe.transparentSrc)&&(_t(l,"blob:")?!e.isUploaded(l)&&r(a):!!_t(l,"data:")&&r(a))}),i=Me(s,a=>{const l=a.src;if(Re(n,l))return n[l].then(c=>se(c)?c:{image:a,blobInfo:c.blobInfo});{const c=((d,u)=>{const f=()=>Promise.reject("Invalid data URI");if(_t(u,"blob:")){const b=d.getByUri(u);return Z(b)?Promise.resolve(b):(h=u,_t(h,"blob:")?(p=>fetch(p).then(v=>v.ok?v.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${p} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})))(h):_t(h,"data:")?(g=h,new Promise((p,v)=>{Zg(g).bind(({type:_,data:C,base64Encoded:E})=>B_(_,C,E)).fold(()=>v("Invalid data URI"),p)})):Promise.reject("Unknown URI format")).then(p=>D_(p).then(v=>P_(v,!1,_=>w.some(L_(d,p,_))).getOrThunk(f)))}var h,g;return _t(u,"data:")?M_(d,u).fold(f,b=>Promise.resolve(b)):Promise.reject("Unknown image data format")})(t,l).then(d=>(delete n[l],{image:a,blobInfo:d})).catch(d=>(delete n[l],d));return n[l]=c,c}});return Promise.all(i)}}},LC=()=>{let e={};const t=(o,r)=>({status:o,resultUri:r}),n=o=>o in e;return{hasBlobUri:n,getResultUri:o=>{const r=e[o];return r?r.resultUri:null},isPending:o=>!!n(o)&&e[o].status===1,isUploaded:o=>!!n(o)&&e[o].status===2,markPending:o=>{e[o]=t(1,null)},markUploaded:(o,r)=>{e[o]=t(2,r)},removeFailed:o=>{delete e[o]},destroy:()=>{e={}}}};let wT=0;const ET=(e,t)=>{const n={},o=(l,c)=>new Promise((d,u)=>{const f=new XMLHttpRequest;f.open("POST",t.url),f.withCredentials=t.credentials,f.upload.onprogress=g=>{c(g.loaded/g.total*100)},f.onerror=()=>{u("Image upload failed due to a XHR Transport error. Code: "+f.status)},f.onload=()=>{if(f.status<200||f.status>=300)return void u("HTTP Error: "+f.status);const g=JSON.parse(f.responseText);var b,p;g&&se(g.location)?d((b=t.basePath,p=g.location,b?b.replace(/\/$/,"")+"/"+p.replace(/^\//,""):p)):u("Invalid JSON: "+f.responseText)};const h=new FormData;h.append("file",l.blob(),l.filename()),f.send(h)}),r=Ge(t.handler)?t.handler:o,s=(l,c)=>({url:c,blobInfo:l,status:!0}),i=(l,c)=>({url:"",blobInfo:l,status:!1,error:c}),a=(l,c)=>{Q.each(n[l],d=>{d(c)}),delete n[l]};return{upload:(l,c)=>t.url||r!==o?((d,u)=>(d=Q.grep(d,f=>!e.isUploaded(f.blobUri())),Promise.all(Q.map(d,f=>e.isPending(f.blobUri())?(h=>{const g=h.blobUri();return new Promise(b=>{n[g]=n[g]||[],n[g].push(b)})})(f):((h,g,b)=>(e.markPending(h.blobUri()),new Promise(p=>{let v,_;try{const C=()=>{v&&(v.close(),_=Te)},E=S=>{C(),e.markUploaded(h.blobUri(),S),a(h.blobUri(),s(h,S)),p(s(h,S))},x=S=>{C(),e.removeFailed(h.blobUri()),a(h.blobUri(),i(h,S)),p(i(h,S))};_=S=>{S<0||S>100||w.from(v).orThunk(()=>w.from(b).map(po)).each(O=>{v=O,O.progressBar.value(S)})},g(h,_).then(E,S=>{x(se(S)?{message:S}:S)})}catch(C){p(i(h,C))}})))(f,r,u)))))(l,c):new Promise(d=>{d([])})}},MC=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),IC=(e,t)=>ET(t,{url:Hk(e),basePath:qk(e),credentials:Wk(e),handler:Vk(e)}),xT=e=>{const t=(()=>{let b=[];const p=C=>{if(!C.blob||!C.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const E=C.id||"blobid"+wT+++(()=>{const T=()=>Math.round(4294967295*Yh()).toString(36);return"s"+new Date().getTime().toString(36)+T()+T()+T()})(),x=C.name||E,S=C.blob;var O;return{id:K(E),name:K(x),filename:K(C.filename||x+"."+(O=S.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[O.toLowerCase()]||"dat")),blob:K(S),base64:K(C.base64),blobUri:K(C.blobUri||URL.createObjectURL(S)),uri:K(C.uri)}},v=C=>en(b,C).getOrUndefined(),_=C=>v(E=>E.id()===C);return{create:(C,E,x,S,O)=>{if(se(C))return p({id:C,name:S,filename:O,blob:E,base64:x});if(dt(C))return p(C);throw new Error("Unknown input type")},add:C=>{_(C.id())||b.push(C)},get:_,getByUri:C=>v(E=>E.blobUri()===C),getByData:(C,E)=>v(x=>x.base64()===C&&x.blob().type===E),findFirst:v,removeByUri:C=>{b=ue(b,E=>E.blobUri()!==C||(URL.revokeObjectURL(E.blobUri()),!1))},destroy:()=>{W(b,C=>{URL.revokeObjectURL(C.blobUri())}),b=[]}}})();let n,o;const r=LC(),s=[],i=b=>p=>e.selection?b(p):[],a=(b,p,v)=>{let _=0;do _=b.indexOf(p,_),_!==-1&&(b=b.substring(0,_)+v+b.substr(_+p.length),_+=v.length-p.length+1);while(_!==-1);return b},l=(b,p,v)=>{const _=`src="${v}"${v===qe.transparentSrc?' data-mce-placeholder="1"':""}`;return b=a(b,`src="${p}"`,_),a(b,'data-mce-src="'+p+'"','data-mce-src="'+v+'"')},c=(b,p)=>{W(e.undoManager.data,v=>{v.type==="fragmented"?v.fragments=Me(v.fragments,_=>l(_,b,p)):v.content=l(v.content,b,p)})},d=()=>(n||(n=IC(e,r)),h().then(i(b=>{const p=Me(b,v=>v.blobInfo);return n.upload(p,MC(e)).then(i(v=>{const _=[];let C=!1;const E=Me(v,(x,S)=>{const{blobInfo:O,image:T}=b[S];let L=!1;return x.status&&zk(e)?(x.url&&!Et(T.src,x.url)&&(C=!0),t.removeByUri(T.src),Yr(e)||((I,N)=>{const R=e.convertURL(N,"src");var P;c(I.src,N),Qo(B(I),{src:jb(e)?(P=N,P+(P.indexOf("?")===-1?"?":"&")+new Date().getTime()):N,"data-mce-src":R})})(T,x.url)):x.error&&(x.error.remove&&(c(T.src,qe.transparentSrc),_.push(T),L=!0),((I,N)=>{sm(I,_o.translate(["Failed to upload image: {0}",N]))})(e,x.error.message)),{element:T,status:x.status,uploadUri:x.url,blobInfo:O,removed:L}});return _.length>0&&!Yr(e)?e.undoManager.transact(()=>{W(ka(_),x=>{const S=bo(x);Nt(x),S.each((O=>T=>{((L,I)=>L.dom.isEmpty(I.dom)&&Z(L.schema.getTextBlockElements()[We(I)]))(O,T)&&Xt(T,wa('<br data-mce-bogus="1" />'))})(e)),t.removeByUri(x.dom.src)})}):C&&e.undoManager.dispatchChange(),E}))}))),u=()=>Fb(e)?d():Promise.resolve([]),f=b=>cr(s,p=>p(b)),h=()=>(o||(o=CT(r,t)),o.findAll(e.getBody(),f).then(i(b=>{const p=ue(b,v=>se(v)?(sm(e,v),!1):v.uriType!=="blob");return Yr(e)||W(p,v=>{c(v.image.src,v.blobInfo.blobUri()),v.image.src=v.blobInfo.blobUri(),v.image.removeAttribute("data-mce-src")}),p}))),g=b=>b.replace(/src="(blob:[^"]+)"/g,(p,v)=>{const _=r.getResultUri(v);if(_)return'src="'+_+'"';let C=t.getByUri(v);return C||(C=Lt(e.editorManager.get(),(E,x)=>E||x.editorUpload&&x.editorUpload.blobCache.getByUri(v),void 0)),C?'src="data:'+C.blob().type+";base64,"+C.base64()+'"':p});return e.on("SetContent",()=>{Fb(e)?u():h()}),e.on("RawSaveContent",b=>{b.content=g(b.content)}),e.on("GetContent",b=>{b.source_view||b.format==="raw"||b.format==="tree"||(b.content=g(b.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",b=>{W(b,p=>{const v=p.attr("src");if(!v||t.getByUri(v))return;const _=r.getResultUri(v);_&&p.attr("src",_)})})}),{blobCache:t,addFilter:b=>{s.push(b)},uploadImages:d,uploadImagesAuto:u,scanForImages:h,destroy:()=>{t.destroy(),r.destroy(),o=n=null}}},FC={remove_similar:!0,inherit:!1},al={selector:"td,th",...FC},kT={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...al},tablecellverticalalign:{styles:{"vertical-align":"%value"},...al},tablecellbordercolor:{styles:{borderColor:"%value"},...al},tablecellclass:{classes:["%value"],...al},tableclass:{selector:"table",classes:["%value"],...FC},tablecellborderstyle:{styles:{borderStyle:"%value"},...al},tablecellborderwidth:{styles:{borderWidth:"%value"},...al}},ST=K(kT),am=Q.each,Wo=ot.DOM,yp=e=>Z(e)&&dt(e),jC=(e,t)=>{const n=t&&t.schema||fn({}),o=i=>{const a=se(i)?{name:i,classes:[],attrs:{}}:i,l=Wo.create(a.name);return((c,d)=>{d.classes.length>0&&Wo.addClass(c,d.classes.join(" ")),Wo.setAttribs(c,d.attrs)})(l,a),l},r=(i,a,l)=>{let c;const d=a[0],u=yp(d)?d.name:void 0,f=((b,p)=>{const v=n.getElementRule(b.nodeName.toLowerCase()),_=v?.parentsRequired;return!(!_||!_.length)&&(p&&ee(_,p)?p:_[0])})(i,u);if(f)u===f?(c=d,a=a.slice(1)):c=f;else if(d)c=d,a=a.slice(1);else if(!l)return i;const h=c?o(c):Wo.create("div");h.appendChild(i),l&&Q.each(l,b=>{const p=o(b);h.insertBefore(p,i)});const g=yp(c)?c.siblings:void 0;return r(h,a,g)},s=Wo.create("div");if(e.length>0){const i=e[0],a=o(i),l=yp(i)?i.siblings:void 0;s.appendChild(r(a,e.slice(1),l))}return s},AT=e=>{let t="div";const n={name:t,classes:[],attrs:{},selector:e=Q.trim(e)};return e!=="*"&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(o,r,s,i,a)=>{switch(r){case"#":n.attrs.id=s;break;case".":n.classes.push(s);break;case":":Q.inArray("checked disabled enabled read-only required".split(" "),s)!==-1&&(n.attrs[s]=s)}if(i==="["){const l=a.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=t||"div",n},NT=(e,t)=>{let n="",o=iS(e);if(o==="")return"";const r=h=>se(h)?h.replace(/%(\w+)/g,""):"",s=(h,g)=>Wo.getStyle(g??e.getBody(),h,!0);if(se(t)){const h=e.formatter.get(t);if(!h)return"";t=h[0]}if("preview"in t){const h=t.preview;if(h===!1)return"";o=h||o}let i,a=t.block||t.inline||"span";const l=(c=t.selector,se(c)?(c=(c=c.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Q.map(c.split(/(?:>|\s+(?![^\[\]]+\]))/),h=>{const g=Q.map(h.split(/(?:~\+|~|\+)/),AT),b=g.pop();return g.length&&(b.siblings=g),b}).reverse()):[]);var c;l.length>0?(l[0].name||(l[0].name=a),a=t.selector,i=jC(l,e)):i=jC([a],e);const d=Wo.select(a,i)[0]||i.firstChild;am(t.styles,(h,g)=>{const b=r(h);b&&Wo.setStyle(d,g,b)}),am(t.attributes,(h,g)=>{const b=r(h);b&&Wo.setAttrib(d,g,b)}),am(t.classes,h=>{const g=r(h);Wo.hasClass(d,g)||Wo.addClass(d,g)}),e.dispatch("PreviewFormats"),Wo.setStyles(i,{position:"absolute",left:-65535}),e.getBody().appendChild(i);const u=s("fontSize"),f=/px$/.test(u)?parseInt(u,10):0;return am(o.split(" "),h=>{let g=s(h,d);if(!(h==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(g)&&(g=s(h),nr(g).toLowerCase()==="#ffffff")||h==="color"&&nr(g).toLowerCase()==="#000000")){if(h==="font-size"&&/em|%$/.test(g)){if(f===0)return;g=parseFloat(g)/(/%$/.test(g)?100:1)*f+"px"}h==="border"&&g&&(n+="padding:0 2px;"),n+=h+":"+g+";"}}),e.dispatch("AfterPreviewFormats"),Wo.remove(i),n},$C=e=>{const t=(o=>{const r={},s=(i,a)=>{i&&(se(i)?(Xe(a)||(a=[a]),W(a,l=>{Ft(l.deep)&&(l.deep=!zo(l)),Ft(l.split)&&(l.split=!zo(l)||pn(l)),Ft(l.remove)&&zo(l)&&!pn(l)&&(l.remove="none"),zo(l)&&pn(l)&&(l.mixed=!0,l.block_expand=!0),se(l.classes)&&(l.classes=l.classes.split(/\s+/))}),r[i]=a):Ct(i,(l,c)=>{s(c,l)}))};return s((i=>{const a=i.dom,l=i.schema.type,c={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:d=>{a.setStyle(d,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:d=>{a.setStyle(d,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const d={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return l!=="html4"?[f,d,u]:[d,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(d,u,f)=>he(d)&&d.hasAttribute("href"),onformat:(d,u,f)=>{Q.each(f,(h,g)=>{a.setAttrib(d,g,h)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":d=>{var u;return(u=d?.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Q.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),d=>{c[d]={block:d,remove:"all"}}),c})(o)),s(ST()),s(sS(o)),{get:i=>Z(i)?r[i]:r,has:i=>Re(r,i),register:s,unregister:i=>(i&&r[i]&&delete r[i],r)}})(e),n=ln({});return(o=>{o.addShortcut("meta+b","","Bold"),o.addShortcut("meta+i","","Italic"),o.addShortcut("meta+u","","Underline");for(let r=1;r<=6;r++)o.addShortcut("access+"+r,"",["FormatBlock",!1,"h"+r]);o.addShortcut("access+7","",["FormatBlock",!1,"p"]),o.addShortcut("access+8","",["FormatBlock",!1,"div"]),o.addShortcut("access+9","",["FormatBlock",!1,"address"])})(e),(o=>{o.on("mouseup keydown",r=>{var s;((i,a,l)=>{const c=i.selection,d=i.getBody();Vg(i,null,l),a!==8&&a!==46||!c.isCollapsed()||c.getStart().innerHTML!==Zc||Vg(i,Wi(d,c.getStart()),!0),a!==37&&a!==39||Vg(i,Wi(d,c.getStart()),!0)})(o,r.keyCode,(s=o.selection.getRng().endContainer,X(s)&&jn(s.data,nn)))})})(e),Yr(e)||((o,r)=>{o.set({}),r.on("NodeChange",s=>{T_(r,s.element,o.get())}),r.on("FormatApply FormatRemove",s=>{const i=w.from(s.node).map(a=>zc(a)?a:a.startContainer).bind(a=>he(a)?w.some(a):w.from(a.parentElement)).getOrThunk(()=>S_(r));T_(r,i,o.get())})})(n,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(o,r,s)=>{((i,a,l,c)=>{cn(i).formatter.apply(a,l,c)})(e,o,r,s)},remove:(o,r,s,i)=>{((a,l,c,d,u)=>{cn(a).formatter.remove(l,c,d,u)})(e,o,r,s,i)},toggle:(o,r,s)=>{((i,a,l,c)=>{cn(i).formatter.toggle(a,l,c)})(e,o,r,s)},match:(o,r,s,i)=>((a,l,c,d,u)=>cn(a).formatter.match(l,c,d,u))(e,o,r,s,i),closest:o=>((r,s)=>cn(r).formatter.closest(s))(e,o),matchAll:(o,r)=>((s,i,a)=>cn(s).formatter.matchAll(i,a))(e,o,r),matchNode:(o,r,s,i)=>((a,l,c,d,u)=>cn(a).formatter.matchNode(l,c,d,u))(e,o,r,s,i),canApply:o=>((r,s)=>cn(r).formatter.canApply(s))(e,o),formatChanged:(o,r,s,i)=>((a,l,c,d,u,f)=>cn(a).formatter.formatChanged(l,c,d,u,f))(e,n,o,r,s,i),getCssText:ae(NT,e)}},zC=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},UC=e=>{const t=br(),n=ln(0),o=ln(0),r={data:[],typing:!1,beforeChange:()=>{((s,i,a)=>{cn(s).undoManager.beforeChange(i,a)})(e,n,t)},add:(s,i)=>((a,l,c,d,u,f,h)=>cn(a).undoManager.add(l,c,d,u,f,h))(e,r,o,n,t,s,i),dispatchChange:()=>{e.setDirty(!0);const s=em(e);s.bookmark=Cf(e.selection),e.dispatch("change",{level:s,lastLevel:dr(r.data,o.get()).getOrUndefined()})},undo:()=>((s,i,a,l)=>cn(s).undoManager.undo(i,a,l))(e,r,n,o),redo:()=>((s,i,a)=>cn(s).undoManager.redo(i,a))(e,o,r.data),clear:()=>{((s,i,a)=>{cn(s).undoManager.clear(i,a)})(e,r,o)},reset:()=>{((s,i)=>{cn(s).undoManager.reset(i)})(e,r)},hasUndo:()=>((s,i,a)=>cn(s).undoManager.hasUndo(i,a))(e,r,o),hasRedo:()=>((s,i,a)=>cn(s).undoManager.hasRedo(i,a))(e,r,o),transact:s=>((i,a,l,c)=>cn(i).undoManager.transact(a,l,c))(e,r,n,s),ignore:s=>{((i,a,l)=>{cn(i).undoManager.ignore(a,l)})(e,n,s)},extra:(s,i)=>{((a,l,c,d,u)=>{cn(a).undoManager.extra(l,c,d,u)})(e,r,o,s,i)}};return Yr(e)||((s,i,a)=>{const l=ln(!1),c=d=>{tm(i,!1,a),i.add({},d)};s.on("init",()=>{i.add()}),s.on("BeforeExecCommand",d=>{const u=d.command;zC(u)||(bC(i,a),i.beforeChange())}),s.on("ExecCommand",d=>{const u=d.command;zC(u)||c(d)}),s.on("ObjectResizeStart cut",()=>{i.beforeChange()}),s.on("SaveContent ObjectResized blur",c),s.on("dragend",c),s.on("keyup",d=>{const u=d.keyCode;if(d.isDefaultPrevented())return;const f=qe.os.isMacOS()&&d.key==="Meta";(u>=33&&u<=36||u>=37&&u<=40||u===45||d.ctrlKey||f)&&(c(),s.nodeChanged()),u!==46&&u!==8||s.nodeChanged(),l.get()&&i.typing&&!gp(em(s),i.data[0])&&(s.isDirty()||s.setDirty(!0),s.dispatch("TypingUndo"),l.set(!1),s.nodeChanged())}),s.on("keydown",d=>{const u=d.keyCode;if(d.isDefaultPrevented())return;if(u>=33&&u<=36||u>=37&&u<=40||u===45)return void(i.typing&&c(d));const f=d.ctrlKey&&!d.altKey||d.metaKey;if((u<16||u>20)&&u!==224&&u!==91&&!i.typing&&!f)return i.beforeChange(),tm(i,!0,a),i.add({},d),void l.set(!0);(qe.os.isMacOS()?d.metaKey:d.ctrlKey&&!d.altKey)&&i.beforeChange()}),s.on("mousedown",d=>{i.typing&&c(d)}),s.on("input",d=>{var u;d.inputType&&(d.inputType==="insertReplacementText"||(u=d).inputType==="insertText"&&u.data===null||(f=>f.inputType==="insertFromPaste"||f.inputType==="insertFromDrop")(d))&&c(d)}),s.on("AddUndo Undo Redo ClearUndos",d=>{d.isDefaultPrevented()||s.nodeChanged()})})(e,r,n),(s=>{s.addShortcut("meta+z","","Undo"),s.addShortcut("meta+y,meta+shift+z","","Redo")})(e),r},TT=[9,27,le.HOME,le.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,le.DOWN,le.UP,le.LEFT,le.RIGHT].concat(qe.browser.isFirefox()?[224]:[]),HC="data-mce-placeholder",qC=e=>e.type==="keydown"||e.type==="keyup",WC=e=>{const t=e.keyCode;return t===le.BACKSPACE||t===le.DELETE},OT=(e,t)=>({from:e,to:t}),_p=(e,t)=>{const n=B(e),o=B(t.container());return Hu(n,o).map(r=>((s,i)=>({block:s,position:i}))(r,t))},VC=(e,t)=>Ir(t,n=>Ac(n)||vo(n.dom),n=>tt(n,e)).filter(zn).getOr(e),KC=(e,t)=>{const n=((o,r)=>{const s=xn(o);return fi(s,i=>r.isBlock(We(i))).fold(K(s),i=>s.slice(0,i))})(e,t);return W(n,Nt),n},YC=(e,t,n)=>{const o=Es(n,t);return en(o.reverse(),r=>kn(e,r)).each(Nt)},RT=(e,t,n,o,r)=>{if(kn(o,n))return Qs(n),Ln(n.dom);((i,a)=>ue(jd(a),l=>!kn(i,l)).length===0)(o,r)&&kn(o,t)&&Bn(r,sn("br"));const s=mo(n.dom,U.before(r.dom));return W(KC(t,o),i=>{Bn(r,i)}),YC(o,e,t),s},BT=(e,t,n,o)=>{if(kn(o,n)){if(kn(o,t)){const s=a=>{const l=(c,d)=>ql(c).fold(()=>d,u=>((f,h)=>f.isInline(We(h)))(o,u)?l(u,d.concat(Fi(u))):d);return l(a,[])},i=Kt(s(n),(a,l)=>(Hd(a,l),l),za());Hs(t),Xt(t,i)}return Nt(n),Ln(t.dom)}const r=rr(n.dom);return W(KC(t,o),s=>{Xt(n,s)}),YC(o,e,t),r},XC=(e,t)=>{Xa(e,t.dom).bind(n=>w.from(n.getNode())).map(B).filter($i).each(Nt)},GC=(e,t,n,o)=>(XC(!0,t),XC(!1,n),((r,s)=>Oo(s,r)?((i,a)=>{const l=Es(a,i);return w.from(l[l.length-1])})(s,r):w.none())(t,n).fold(ae(BT,e,t,n,o),ae(RT,e,t,n,o))),QC=(e,t,n,o,r)=>t?GC(e,o,n,r):GC(e,n,o,r),Cp=(e,t)=>{const n=B(e.getBody());return((r,s,i,a)=>a.collapsed?((l,c,d,u)=>{const f=_p(c,U.fromRangeStart(u)),h=f.bind(g=>Fo(d,c,g.position).bind(b=>_p(c,b).map(p=>((v,_,C,E)=>Tt(E.position.getNode())&&!kn(v,E.block)?Xa(!1,E.block.dom).bind(x=>x.isEqual(E.position)?Fo(C,_,x).bind(S=>_p(_,S)):w.some(E)).getOr(E):E)(l,c,d,p))));return bn(f,h,OT).filter(g=>(b=>!tt(b.from.block,b.to.block))(g)&&((b,p)=>{const v=B(b);return tt(VC(v,p.from.block),VC(v,p.to.block))})(c,g)&&(b=>wt(b.from.block.dom)===!1&&wt(b.to.block.dom)===!1)(g)&&(b=>{const p=v=>eb(v)||fc(v.dom)||$a(v);return p(b.from.block)&&p(b.to.block)})(g)&&(b=>!(Oo(b.to.block,b.from.block)||Oo(b.from.block,b.to.block)))(g))})(r,s,i,a):w.none())(e.schema,n.dom,t,e.selection.getRng()).map(r=>()=>{QC(n,t,r.from.block,r.to.block,e.schema).each(s=>{e.selection.setRng(s.toRange())})})},ZC=(e,t)=>{const n=B(t),o=ae(tt,e);return fr(n,Ac,o).isSome()},DT=e=>{const t=B(e.getBody());return((n,o)=>{const r=mo(n.dom,U.fromRangeStart(o)).isNone(),s=Jn(n.dom,U.fromRangeEnd(o)).isNone();return!((i,a)=>ZC(i,a.startContainer)||ZC(i,a.endContainer))(n,o)&&r&&s})(t,e.selection.getRng())?(n=>w.some(()=>{n.setContent(""),n.selection.setCursorLocation()}))(e):((n,o,r)=>{const s=o.getRng();return bn(Hu(n,B(s.startContainer)),Hu(n,B(s.endContainer)),(i,a)=>tt(i,a)?w.none():w.some(()=>{s.deleteContents(),QC(n,!0,i,a,r).each(l=>{o.setRng(l.toRange())})})).getOr(w.none())})(t,e.selection,e.schema)},wp=(e,t)=>e.selection.isCollapsed()?w.none():DT(e),xs=(e,t,n,o,r)=>w.from(t._selectionOverrides.showCaret(e,n,o,r)),sd=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?w.none():w.some((n=>{const o=n.ownerDocument.createRange();return o.selectNode(n),o})(t)),Ep=(e,t,n)=>t.collapsed?((o,r,s)=>{const i=Of(1,o.getBody(),r),a=U.fromRangeStart(i),l=a.getNode();if(Pc(l))return xs(1,o,l,!a.isAtEnd(),!1);const c=a.getNode(!0);if(Pc(c))return xs(1,o,c,!1,!1);const d=Zi(o.dom.getRoot(),a.getNode());return Pc(d)?xs(1,o,d,!1,s):w.none()})(e,t,n).getOr(t):t,PT=e=>si(e)||Vc(e),LT=e=>ii(e)||Kc(e),JC=(e,t,n,o,r,s)=>{xs(o,e,s.getNode(!r),r,!0).each(i=>{if(t.collapsed){const a=t.cloneRange();r?a.setEnd(i.startContainer,i.startOffset):a.setStart(i.endContainer,i.endOffset),a.deleteContents()}else t.deleteContents();e.selection.setRng(i)}),((i,a)=>{X(a)&&a.data.length===0&&i.remove(a)})(e.dom,n)},xp=(e,t)=>((n,o)=>{const r=n.selection.getRng();if(!X(r.commonAncestorContainer))return w.none();const s=o?_n.Forwards:_n.Backwards,i=Wr(n.getBody()),a=ae(Rf,o?i.next:i.prev),l=o?PT:LT,c=jc(s,n.getBody(),r),d=a(c),u=d&&Ho(o,d);if(!u||!Cu(c,u))return w.none();if(l(u))return w.some(()=>JC(n,r,c.getNode(),s,o,u));const f=a(u);return f&&l(f)&&Cu(u,f)?w.some(()=>JC(n,r,c.getNode(),s,o,f)):w.none()})(e,t),kp=(e,t)=>{const n=e.getBody();return t?Ln(n).filter(si):rr(n).filter(ii)},Sp=e=>{const t=e.selection.getRng();return!t.collapsed&&(kp(e,!0).exists(n=>n.isEqual(U.fromRangeStart(t)))||kp(e,!1).exists(n=>n.isEqual(U.fromRangeEnd(t))))},Vo=Ur([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),ew=(e,t,n,o)=>Fo(t,e,n).bind(r=>{return s=r.getNode(),Z(s)&&(Ac(B(s))||$a(B(s)))||((i,a,l,c,d)=>{const u=f=>d.isInline(f.nodeName.toLowerCase())&&!Hr(l,c,i);return mv(!a,l).fold(()=>mv(a,c).fold(ft,u),u)})(e,t,n,r,o)?w.none():t&&wt(r.getNode())||!t&&wt(r.getNode(!0))?((i,a,l,c,d)=>{const u=d.getNode(!l);return Hu(B(a),B(c.getNode())).map(f=>kn(i,f)?Vo.remove(f.dom):Vo.moveToElement(u)).orThunk(()=>w.some(Vo.moveToElement(u)))})(o,e,t,n,r):t&&ii(n)||!t&&si(n)?w.some(Vo.moveToPosition(r)):w.none();var s}),tw=(e,t)=>w.from(Zi(e.getBody(),t)),MT=(e,t)=>{const n=e.selection.getNode();return tw(e,n).filter(wt).fold(()=>((o,r,s,i)=>{const a=Of(r?1:-1,o,s),l=U.fromRangeStart(a),c=B(o);return!r&&ii(l)?w.some(Vo.remove(l.getNode(!0))):r&&si(l)?w.some(Vo.remove(l.getNode())):!r&&si(l)&&$u(c,l,i)?oy(c,l,i).map(d=>Vo.remove(d.getNode())):r&&ii(l)&&bg(c,l,i)?JA(c,l,i).map(d=>Vo.remove(d.getNode())):((d,u,f,h)=>((g,b)=>{const p=b.getNode(!g),v=g?"after":"before";return he(p)&&p.getAttribute("data-mce-caret")===v})(u,f)?((g,b)=>Rt(b)?w.none():g&&wt(b.nextSibling)?w.some(Vo.moveToElement(b.nextSibling)):!g&&wt(b.previousSibling)?w.some(Vo.moveToElement(b.previousSibling)):w.none())(u,f.getNode(!u)).orThunk(()=>ew(d,u,f,h)):ew(d,u,f,h).bind(g=>((b,p,v)=>v.fold(_=>w.some(Vo.remove(_)),_=>w.some(Vo.moveToElement(_)),_=>Hr(p,_,b)?w.none():w.some(Vo.moveToPosition(_))))(d,f,g)))(o,r,l,i)})(e.getBody(),t,e.selection.getRng(),e.schema).map(o=>()=>o.fold(((r,s)=>i=>(r._selectionOverrides.hideFakeCaret(),Gi(r,s,B(i)),!0))(e,t),((r,s)=>i=>{const a=s?U.before(i):U.after(i);return r.selection.setRng(a.toRange()),!0})(e,t),(r=>s=>(r.selection.setRng(s.toRange()),!0))(e))),()=>w.some(Te))},nw=e=>{const t=e.dom,n=e.selection,o=Zi(e.getBody(),n.getNode());if(vo(o)&&t.isBlock(o)&&t.isEmpty(o)){const r=t.create("br",{"data-mce-bogus":"1"});t.setHTML(o,""),o.appendChild(r),n.setRng(U.before(r).toRange())}return!0},Ap=(e,t)=>e.selection.isCollapsed()?MT(e,t):((n,o)=>{const r=n.selection.getNode();return wt(r)&&!Da(r)?tw(n,r.parentNode).filter(wt).fold(()=>w.some(()=>{var s;s=B(n.getBody()),W(vn(s,".mce-offscreen-selection"),Nt),Gi(n,o,B(n.selection.getNode())),wg(n)}),()=>w.some(Te)):Sp(n)?w.some(()=>{ky(n,n.selection.getRng(),B(n.getBody()))}):w.none()})(e,t),ow=e=>e.hasOwnProperty("text"),rw=e=>e.hasOwnProperty("marker"),sw=(e,t)=>{const n=(r,s)=>{if(X(r))return{text:r,offset:s};{const i=t(),a=r.childNodes;return s<a.length?(r.insertBefore(i,a[s]),{marker:i,before:!0}):(r.appendChild(i),{marker:i,before:!1})}},o=n(e.endContainer,e.endOffset);return{start:n(e.startContainer,e.startOffset),end:o}},iw=e=>{var t,n;const{start:o,end:r}=e,s=new window.Range;return ow(o)?s.setStart(o.text,o.offset):rw(o)&&(o.before?s.setStartBefore(o.marker):s.setStartAfter(o.marker),(t=o.marker.parentNode)===null||t===void 0||t.removeChild(o.marker)),ow(r)?s.setEnd(r.text,r.offset):rw(r)&&(r.before?s.setEndBefore(r.marker):s.setEndAfter(r.marker),(n=r.marker.parentNode)===null||n===void 0||n.removeChild(r.marker)),s},Np=(e,t)=>{var n;const o=e.dom,r=o.getParent(e.selection.getStart(),o.isBlock),s=o.getParent(e.selection.getEnd(),o.isBlock),i=e.getBody();if(((n=r?.nodeName)===null||n===void 0?void 0:n.toLowerCase())==="div"&&r&&s&&r===i.firstChild&&s===i.lastChild&&!o.isEmpty(i)){const a=r.cloneNode(!1),l=()=>{if(t?wy(e):Uu(e),i.firstChild!==r){const c=sw(e.selection.getRng(),()=>document.createElement("span"));Array.from(i.childNodes).forEach(d=>a.appendChild(d)),i.appendChild(a),e.selection.setRng(iw(c))}};return w.some(l)}return w.none()},Tp=(e,t)=>e.selection.isCollapsed()?((n,o)=>{const r=U.fromRangeStart(n.selection.getRng());return Fo(o,n.getBody(),r).filter(s=>o?YA(s):XA(s)).bind(s=>Tf(o?0:-1,s)).map(s=>()=>n.selection.select(s))})(e,t):w.none(),ll=X,aw=e=>ll(e)&&e.data[0]===yn,lw=e=>ll(e)&&e.data[e.data.length-1]===yn,cw=e=>{var t;return((t=e.ownerDocument)!==null&&t!==void 0?t:document).createTextNode(yn)},lm=(e,t)=>e?(n=>{var o;if(ll(n.previousSibling))return lw(n.previousSibling)||n.previousSibling.appendData(yn),n.previousSibling;if(ll(n))return aw(n)||n.insertData(0,yn),n;{const r=cw(n);return(o=n.parentNode)===null||o===void 0||o.insertBefore(r,n),r}})(t):(n=>{var o,r;if(ll(n.nextSibling))return aw(n.nextSibling)||n.nextSibling.insertData(0,yn),n.nextSibling;if(ll(n))return lw(n)||n.appendData(yn),n;{const s=cw(n);return n.nextSibling?(o=n.parentNode)===null||o===void 0||o.insertBefore(s,n.nextSibling):(r=n.parentNode)===null||r===void 0||r.appendChild(s),s}})(t),IT=ae(lm,!0),FT=ae(lm,!1),dw=(e,t)=>X(e.container())?lm(t,e.container()):lm(t,e.getNode()),uw=(e,t)=>{const n=t.get();return n&&e.container()===n&&Zs(n)},Op=(e,t)=>t.fold(n=>{Hi(e.get());const o=IT(n);return e.set(o),w.some(U(o,o.length-1))},n=>Ln(n).map(o=>{if(uw(o,e)){const r=e.get();return U(r,1)}{Hi(e.get());const r=dw(o,!0);return e.set(r),U(r,1)}}),n=>rr(n).map(o=>{if(uw(o,e)){const r=e.get();return U(r,r.length-1)}{Hi(e.get());const r=dw(o,!1);return e.set(r),U(r,r.length-1)}}),n=>{Hi(e.get());const o=FT(n);return e.set(o),w.some(U(o,1))}),mw=(e,t)=>{for(let n=0;n<e.length;n++){const o=e[n].apply(null,t);if(o.isSome())return o}return w.none()},Vn=Ur([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),fw=(e,t)=>ti(t,e)||e,jT=(e,t,n)=>{const o=yy(n),r=fw(t,o.container());return ai(e,r,o).fold(()=>Jn(r,o).bind(ae(ai,e,r)).map(s=>Vn.before(s)),w.none)},$T=(e,t)=>Wi(e,t)===null,gw=(e,t,n)=>ai(e,t,n).filter(ae($T,t)),zT=(e,t,n)=>{const o=_y(n);return gw(e,t,o).bind(r=>mo(r,o).isNone()?w.some(Vn.start(r)):w.none())},UT=(e,t,n)=>{const o=yy(n);return gw(e,t,o).bind(r=>Jn(r,o).isNone()?w.some(Vn.end(r)):w.none())},HT=(e,t,n)=>{const o=_y(n),r=fw(t,o.container());return ai(e,r,o).fold(()=>mo(r,o).bind(ae(ai,e,r)).map(s=>Vn.after(s)),w.none)},pw=e=>!vy(Rp(e)),Xr=(e,t,n)=>mw([jT,zT,UT,HT],[e,t,n]).filter(pw),Rp=e=>e.fold(Be,Be,Be,Be),hw=e=>e.fold(K("before"),K("start"),K("end"),K("after")),cm=e=>e.fold(Vn.before,Vn.before,Vn.after,Vn.after),Bp=e=>e.fold(Vn.start,Vn.start,Vn.end,Vn.end),qT=(e,t,n,o,r,s)=>bn(ai(t,n,o),ai(t,n,r),(i,a)=>i!==a&&((l,c,d)=>{const u=ti(c,l),f=ti(d,l);return Z(u)&&u===f})(n,i,a)?Vn.after(e?i:a):s).getOr(s),WT=(e,t)=>e.fold(St,n=>{return r=t,!(hw(o=n)===hw(r)&&Rp(o)===Rp(r));var o,r}),VT=(e,t)=>e?t.fold(Le(w.some,Vn.start),w.none,Le(w.some,Vn.after),w.none):t.fold(w.none,Le(w.some,Vn.before),w.none,Le(w.some,Vn.end)),bw=(e,t,n)=>{const o=e?1:-1;return t.setRng(U(n.container(),n.offset()+o).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0};var Gr;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Gr||(Gr={}));const dm=(e,t)=>e===_n.Backwards?gi(t):t,KT=(e,t,n)=>e===_n.Forwards?t.next(n):t.prev(n),YT=(e,t,n,o)=>Tt(o.getNode(t===_n.Forwards))?Gr.Br:Hr(n,o)===!1?Gr.Block:Gr.Wrap,vw=(e,t,n,o)=>{const r=Wr(n);let s=o;const i=[];for(;s;){const a=KT(t,r,s);if(!a)break;if(Tt(a.getNode(!1)))return t===_n.Forwards?{positions:dm(t,i).concat([a]),breakType:Gr.Br,breakAt:w.some(a)}:{positions:dm(t,i),breakType:Gr.Br,breakAt:w.some(a)};if(a.isVisible()){if(e(s,a)){const l=YT(0,t,s,a);return{positions:dm(t,i),breakType:l,breakAt:w.some(a)}}i.push(a),s=a}else s=a}return{positions:dm(t,i),breakType:Gr.Eol,breakAt:w.none()}},yw=(e,t,n,o)=>t(n,o).breakAt.map(r=>{const s=t(n,r).positions;return e===_n.Backwards?s.concat(r):[r].concat(s)}).getOr([]),Dp=(e,t)=>Lt(e,(n,o)=>n.fold(()=>w.some(o),r=>bn(on(r.getClientRects()),on(o.getClientRects()),(s,i)=>{const a=Math.abs(t-s.left);return Math.abs(t-i.left)<=a?o:r}).or(n)),w.none()),um=(e,t)=>on(t.getClientRects()).bind(n=>Dp(e,n.left)),id=ae(vw,U.isAbove,-1),ad=ae(vw,U.isBelow,1),_w=ae(yw,-1,id),Cw=ae(yw,1,ad),ww=(e,t)=>id(e,t).breakAt.isNone(),Ew=(e,t)=>ad(e,t).breakAt.isNone(),XT=(e,t)=>um(_w(e,t),t),GT=(e,t)=>um(Cw(e,t),t),QT=wt,xw=(e,t)=>Math.abs(e.left-t),kw=(e,t)=>Math.abs(e.right-t),Sw=(e,t)=>ma(e,(n,o)=>{const r=Math.min(xw(n,t),kw(n,t)),s=Math.min(xw(o,t),kw(o,t));return s===r&&Ts(o,"node")&&QT(o.node)||s<r?o:n}),ZT=e=>{const t=n=>Me(n,o=>{const r=zi(o);return r.node=e,r});if(he(e))return t(e.getClientRects());if(X(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}return[]},Aw=e=>no(e,ZT);var ld;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(ld||(ld={}));const Nw=(e,t,n,o,r,s)=>{let i=0;const a=[],l=u=>{let f=Aw([u]);e===-1&&(f=f.reverse());for(let h=0;h<f.length;h++){const g=f[h];if(!n(g,c)){if(a.length>0&&t(g,ur(a))&&i++,g.line=i,r(g))return!0;a.push(g)}}return!1},c=ur(s.getClientRects());if(!c)return a;const d=s.getNode();return d&&(l(d),((u,f,h,g)=>{let b=g;for(;b=Mc(b,u,cb,f);)if(h(b))return})(e,o,l,d)),a},JT=ae(Nw,ld.Up,Nc,Tc),eO=ae(Nw,ld.Down,Tc,Nc),Tw=e=>ur(e.getClientRects()),Ow=e=>t=>((n,o)=>o.line>n)(e,t),Pp=e=>t=>((n,o)=>o.line===n)(e,t),ks=(e,t)=>{e.selection.setRng(t),Wc(e,e.selection.getRng())},Lp=(e,t,n)=>w.some(Ep(e,t,n)),Rw=(e,t,n,o,r,s)=>{const i=t===_n.Forwards,a=Wr(e.getBody()),l=ae(Rf,i?a.next:a.prev),c=i?o:r;if(!n.collapsed){const g=mu(n);if(s(g))return xs(t,e,g,t===_n.Backwards,!1);if(Sp(e)){const b=n.cloneRange();return b.collapse(t===_n.Backwards),w.from(b)}}const d=jc(t,e.getBody(),n);if(c(d))return sd(e,d.getNode(!i));let u=l(d);const f=nb(n);if(!u)return f?w.some(n):w.none();if(u=Ho(i,u),c(u))return xs(t,e,u.getNode(!i),i,!1);const h=l(u);return h&&c(h)&&Cu(u,h)?xs(t,e,h.getNode(!i),i,!1):f?Lp(e,u.toRange(),!1):w.none()},Bw=(e,t,n,o,r,s)=>{const i=jc(t,e.getBody(),n),a=ur(i.getClientRects()),l=t===ld.Down,c=e.getBody();if(!a)return w.none();if(Sp(e)){const b=l?U.fromRangeEnd(n):U.fromRangeStart(n);return(l?GT:XT)(c,b).orThunk(()=>w.from(b)).map(p=>p.toRange())}const d=(l?eO:JT)(c,Ow(1),i),u=ue(d,Pp(1)),f=a.left,h=Sw(u,f);if(h&&s(h.node)){const b=Math.abs(f-h.left),p=Math.abs(f-h.right);return xs(t,e,h.node,b<p,!1)}let g;if(g=o(i)?i.getNode():r(i)?i.getNode(!0):mu(n),g){const b=((v,_,C,E)=>{const x=Wr(_);let S,O,T,L;const I=[];let N=0;v===1?(S=x.next,O=Tc,T=Nc,L=U.after(E)):(S=x.prev,O=Nc,T=Tc,L=U.before(E));const R=Tw(L);do{if(!L.isVisible())continue;const P=Tw(L);if(T(P,R))continue;I.length>0&&O(P,ur(I))&&N++;const H=zi(P);if(H.position=L,H.line=N,C(H))return I;I.push(H)}while(L=S(L));return I})(t,c,Ow(1),g);let p=Sw(ue(b,Pp(1)),f);if(p||(p=ur(ue(b,Pp(0))),p))return Lp(e,p.position.toRange(),!1)}return u.length===0?Mp(e,l).filter(l?r:o).map(b=>Ep(e,b.toRange(),!1)):w.none()},Mp=(e,t)=>{const n=e.selection.getRng(),o=t?U.fromRangeEnd(n):U.fromRangeStart(n),r=(s=o.container(),i=e.getBody(),fr(B(s),a=>oA(a.dom),a=>a.dom===i).map(a=>a.dom).getOr(i));var s,i;if(t){const a=ad(r,o);return oo(a.positions)}{const a=id(r,o);return on(a.positions)}},Dw=(e,t,n)=>Mp(e,t).filter(n).exists(o=>(e.selection.setRng(o.toRange()),!0)),mm=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},Pw=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},Lw=(e,t,n)=>Op(t,n).map(o=>(mm(e,o),n)),tO=(e,t,n)=>{const o=e.getBody(),r=((s,i,a)=>{const l=U.fromRangeStart(s);if(s.collapsed)return l;{const c=U.fromRangeEnd(s);return a?mo(i,c).getOr(c):Jn(i,l).getOr(l)}})(e.selection.getRng(),o,n);return((s,i,a,l)=>{const c=Ho(s,l),d=Xr(i,a,c);return Xr(i,a,c).bind(ae(VT,s)).orThunk(()=>((u,f,h,g,b)=>{const p=Ho(u,b);return Fo(u,h,p).map(ae(Ho,u)).fold(()=>g.map(cm),v=>Xr(f,h,v).map(ae(qT,u,f,h,p,v)).filter(ae(WT,g))).filter(pw)})(s,i,a,d,l))})(n,ae(Qi,e),o,r).bind(s=>Lw(e,t,s))},Mw=(e,t,n)=>!!Dc(e)&&tO(e,t,n).isSome(),Iw=(e,t,n)=>!!Dc(t)&&((o,r)=>{const s=r.selection.getRng(),i=o?U.fromRangeEnd(s):U.fromRangeStart(s);return!!(a=>Ge(a.selection.getSel().modify))(r)&&(o&&df(i)?bw(!0,r.selection,i):!(o||!uf(i))&&bw(!1,r.selection,i))})(e,t),nO=e=>{const t=ln(null),n=ae(Qi,e);return e.on("NodeChange",o=>{Dc(e)&&(((r,s,i)=>{const a=Me(vn(B(s.getRoot()),'*[data-mce-selected="inline-boundary"]'),d=>d.dom),l=ue(a,r),c=ue(i,r);W(Jr(l,c),ae(Pw,!1)),W(Jr(c,l),ae(Pw,!0))})(n,e.dom,o.parents),((r,s)=>{const i=s.get();if(r.selection.isCollapsed()&&!r.composing&&i){const a=U.fromRangeStart(r.selection.getRng());U.isTextPosition(a)&&!(l=>df(l)||uf(l))(a)&&(mm(r,ZS(i,a)),s.set(null))}})(e,t),((r,s,i,a)=>{if(s.selection.isCollapsed()){const l=ue(a,r);W(l,c=>{const d=U.fromRangeStart(s.selection.getRng());Xr(r,s.getBody(),d).bind(u=>Lw(s,i,u))})}})(n,e,t,o.parents))}),t},oO=ae(Iw,!0),rO=ae(Iw,!1),fm=(e,t,n)=>{if(Dc(e)){const o=Mp(e,t).getOrThunk(()=>{const r=e.selection.getRng();return t?U.fromRangeEnd(r):U.fromRangeStart(r)});return Xr(ae(Qi,e),e.getBody(),o).exists(r=>{const s=cm(r);return Op(n,s).exists(i=>(mm(e,i),!0))})}return!1},Fw=(e,t)=>n=>Op(t,n).map(o=>()=>mm(e,o)),jw=(e,t,n,o)=>{const r=e.getBody(),s=ae(Qi,e);e.undoManager.ignore(()=>{e.selection.setRng(((i,a)=>{const l=document.createRange();return l.setStart(i.container(),i.offset()),l.setEnd(a.container(),a.offset()),l})(n,o)),Uu(e),Xr(s,r,U.fromRangeStart(e.selection.getRng())).map(Bp).bind(Fw(e,t)).each(te)}),e.nodeChanged()},Ip=(e,t,n)=>{if(e.selection.isCollapsed()&&Dc(e)){const o=U.fromRangeStart(e.selection.getRng());return((r,s,i,a)=>{const l=((u,f)=>ti(f,u)||u)(r.getBody(),a.container()),c=ae(Qi,r),d=Xr(c,l,a);return d.bind(u=>i?u.fold(K(w.some(Bp(u))),w.none,K(w.some(cm(u))),w.none):u.fold(w.none,K(w.some(cm(u))),w.none,K(w.some(Bp(u))))).map(Fw(r,s)).getOrThunk(()=>{const u=Ya(i,l,a),f=u.bind(h=>Xr(c,l,h));return bn(d,f,()=>ai(c,l,a).bind(h=>(g=>bn(Ln(g),rr(g),(b,p)=>{const v=Ho(!0,b),_=Ho(!1,p);return Jn(g,v).forall(C=>C.isEqual(_))}).getOr(!0))(h)?w.some(()=>{Gi(r,i,B(h))}):w.none())).getOrThunk(()=>f.bind(()=>u.map(h=>()=>{i?jw(r,s,a,h):jw(r,s,h,a)})))})})(e,t,n,o)}return w.none()},$w=(e,t)=>{const n=B(e.getBody()),o=B(e.selection.getStart()),r=Es(o,n);return fi(r,t).fold(K(r),s=>r.slice(0,s))},sO=e=>Vl(e)===1,zw=(e,t)=>{const n=ae(Jy,e);return no(t,o=>n(o)?[o.dom]:[])},Uw=e=>{const t=(n=>$w(n,o=>n.schema.isBlock(We(o))))(e);return zw(e,t)},iO=(e,t)=>{const n=ue((o=>$w(o,r=>o.schema.isBlock(We(r))||(s=>Vl(s)>1)(r)))(e),sO);return oo(n).bind(o=>{const r=U.fromRangeStart(e.selection.getRng());return Ey(t,r,o.dom)&&!Xf(o)?w.some(()=>((s,i,a,l)=>{const c=zw(i,l);if(c.length===0)Gi(i,s,a);else{const d=Zy(a.dom,c);i.selection.setRng(d.toRange())}})(t,e,o,n)):w.none()})},Hw=(e,t)=>{const n=e.selection.getStart(),o=((r,s)=>{const i=s.parentElement;return Tt(s)&&!mt(i)&&r.dom.isEmpty(i)})(e,n)||Xf(B(n))?Zy(n,t):((r,s)=>{const{caretContainer:i,caretPosition:a}=Qy(s);return r.insertNode(i.dom),a})(e.selection.getRng(),t);e.selection.setRng(o.toRange())},qw=e=>X(e.startContainer),aO=e=>{const t=e.selection.getRng();return(n=>n.startOffset===0&&qw(n))(t)&&((n,o)=>{const r=o.startContainer.parentElement;return!mt(r)&&Jy(n,B(r))})(e,t)&&(n=>(o=>(r=>{const s=r.startContainer.parentNode,i=r.endContainer.parentNode;return!mt(s)&&!mt(i)&&s.isEqualNode(i)})(o)&&(r=>{const s=r.endContainer;return r.endOffset===(X(s)?s.length:s.childNodes.length)})(o))(n)||(o=>!o.endContainer.isEqualNode(o.commonAncestorContainer))(n))(t)},Fp=(e,t)=>e.selection.isCollapsed()?iO(e,t):(n=>{if(aO(n)){const o=Uw(n);return w.some(()=>{Uu(n),((r,s)=>{const i=Jr(s,Uw(r));i.length>0&&Hw(r,i)})(n,o)})}return w.none()})(e),cd=e=>((t=>{const n=t.selection.getRng();return n.collapsed&&(qw(n)||t.dom.isEmpty(n.startContainer))&&!(o=>{return r=B(o.selection.getStart()),s=o.schema,nc(r,i=>jo(i.dom),i=>s.isBlock(We(i)));var r,s})(t)})(e)&&Hw(e,[]),!0),jp=(e,t,n)=>Z(n)?w.some(()=>{e._selectionOverrides.hideFakeCaret(),Gi(e,t,B(n))}):w.none(),$p=(e,t)=>e.selection.isCollapsed()?((n,o)=>{const r=o?Vc:Kc,s=o?_n.Forwards:_n.Backwards,i=jc(s,n.getBody(),n.selection.getRng());return r(i)?jp(n,o,i.getNode(!o)):w.from(Ho(o,i)).filter(a=>r(a)&&Cu(i,a)).bind(a=>jp(n,o,a.getNode(!o)))})(e,t):((n,o)=>{const r=n.selection.getNode();return yo(r)?jp(n,o,r):w.none()})(e,t),zp=e=>Bs(e??"").getOr(0),Ww=(e,t)=>(e||We(t)==="table"?"margin":"padding")+(Do(t,"direction")==="rtl"?"-right":"-left"),Vw=e=>{const t=Yw(e);return!e.mode.isReadOnly()&&(t.length>1||((n,o)=>cr(o,r=>{const s=Ww(Ub(n),r),i=Hn(r,s).map(zp).getOr(0);return n.dom.getContentEditable(r.dom)!=="false"&&i>0}))(e,t))},Kw=e=>cf(e)||$a(e),Yw=e=>ue(ka(e.selection.getSelectedBlocks()),t=>!Kw(t)&&!(n=>bo(n).exists(Kw))(t)&&Ir(t,n=>vo(n.dom)||wt(n.dom)).exists(n=>vo(n.dom))),Xw=(e,t)=>{var n,o;const{dom:r}=e,s=Xk(e),i=(o=(n=/[a-z%]+$/i.exec(s))===null||n===void 0?void 0:n[0])!==null&&o!==void 0?o:"px",a=zp(s),l=Ub(e);W(Yw(e),c=>{((d,u,f,h,g,b)=>{const p=Ww(f,B(b)),v=zp(d.getStyle(b,p));if(u==="outdent"){const _=Math.max(0,v-h);d.setStyle(b,p,_?_+g:"")}else{const _=v+h+g;d.setStyle(b,p,_)}})(r,t,l,a,i,c.dom)})},Gw=e=>Xw(e,"outdent"),Qw=e=>{if(e.selection.isCollapsed()&&Vw(e)){const t=e.dom,n=e.selection.getRng(),o=U.fromRangeStart(n),r=t.getParent(n.startContainer,t.isBlock);if(r!==null&&hg(B(r),o,e.schema))return w.some(()=>Gw(e))}return w.none()},Zw=(e,t,n)=>Ns([Qw,Ap,xp,(o,r)=>Ip(o,t,r),Cp,Og,Tp,$p,wp,Fp,Np],o=>o(e,n)).filter(o=>e.selection.isEditable()),Jw=e=>e.touches===void 0||e.touches.length!==1?w.none():w.some(e.touches[0]),Up=(e,t)=>Re(e,t.nodeName),lO=(e,t)=>!!X(t)||!!he(t)&&!(Up(e.getBlockElements(),t)||$o(t)||vs(e,t)||ic(t)),cO=(e,t)=>{if(X(t)){if(t.data.length===0)return!0;if(/^\s+$/.test(t.data))return!t.nextSibling||Up(e,t.nextSibling)||ic(t.nextSibling)}return!1},Hp=e=>e.dom.create(Pn(e),Bc(e)),e1=(e,t,n)=>{const o=B(Hp(e)),r=za();Xt(o,r),n(t,o);const s=document.createRange();return s.setStartBefore(r.dom),s.setEndBefore(r.dom),s},t1=e=>t=>(" "+t.attr("class")+" ").indexOf(e)!==-1,dO=(e,t,n)=>function(o){const r=arguments,s=r[r.length-2],i=s>0?t.charAt(s-1):"";if(i==='"')return o;if(i===">"){const a=t.lastIndexOf("<",s);if(a!==-1&&t.substring(a,s).indexOf('contenteditable="false"')!==-1)return o}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(r[0])+'">'+e.dom.encode(typeof r[1]=="string"?r[1]:r[0])+"</span>"},uO=(e,t)=>cr(e,n=>{const o=t.match(n);return o!==null&&o[0].length===t.length}),n1=(e,t)=>{t.hasAttribute("data-mce-caret")&&(mf(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},mO=(e,t)=>{const n=(o=>Ea(B(o.getBody()),"*[data-mce-caret]").map(r=>r.dom).getOrNull())(e);if(n)return t.type==="compositionstart"?(t.preventDefault(),t.stopPropagation(),void n1(e,n)):void(tb(n)&&(n1(e,n),e.undoManager.add()))},o1=wt,r1=(e,t,n)=>{const o=Wr(e.getBody()),r=ae(Rf,t===1?o.next:o.prev);if(n.collapsed){const s=e.dom.getParent(n.startContainer,"PRE");if(!s)return;if(!r(U.fromRangeStart(n))){const i=B((a=>{const l=a.dom.create(Pn(a));return l.innerHTML='<br data-mce-bogus="1">',l})(e));t===1?Zo(B(s),i):Bn(B(s),i),e.selection.select(i.dom,!0),e.selection.collapse()}}},s1=(e,t)=>((n,o)=>{const r=o?_n.Forwards:_n.Backwards,s=n.selection.getRng();return((i,a,l)=>Rw(a,i,l,si,ii,o1))(r,n,s).orThunk(()=>(r1(n,r,s),w.none()))})(e,((n,o)=>{const r=o?n.getEnd(!0):n.getStart(!0);return vy(r)?!o:o})(e.selection,t)).exists(n=>(ks(e,n),!0)),i1=(e,t)=>((n,o)=>{const r=o?1:-1,s=n.selection.getRng();return((i,a,l)=>Bw(a,i,l,c=>si(c)||Q0(c),c=>ii(c)||gg(c),o1))(r,n,s).orThunk(()=>(r1(n,r,s),w.none()))})(e,t).exists(n=>(ks(e,n),!0)),a1=(e,t)=>Dw(e,t,t?ii:si),gm=(e,t)=>kp(e,!t).map(n=>{const o=n.toRange(),r=e.selection.getRng();return t?o.setStart(r.startContainer,r.startOffset):o.setEnd(r.endContainer,r.endOffset),o}).exists(n=>(ks(e,n),!0)),fO=e=>ee(["figcaption"],We(e)),l1=(e,t)=>!!e.selection.isCollapsed()&&((n,o)=>{const r=B(n.getBody()),s=U.fromRangeStart(n.selection.getRng());return((i,a,l)=>{const c=ae(tt,a);return Ir(B(i.container()),d=>l.isBlock(We(d)),c).filter(fO)})(s,r,n.schema).exists(()=>{if(((i,a,l)=>a?Ew(i.dom,l):ww(i.dom,l))(r,o,s)){const i=e1(n,r,o?Xt:Jl);return n.selection.setRng(i),!0}return!1})})(e,t),c1=(e,t)=>((n,o)=>o?w.from(n.dom.getParent(n.selection.getNode(),"details")).map(r=>((s,i)=>{const a=s.selection.getRng(),l=U.fromRangeStart(a);return!(s.getBody().lastChild!==i||!Ew(i,l)||(s.execCommand("InsertNewBlockAfter"),0))})(n,r)).getOr(!1):w.from(n.dom.getParent(n.selection.getNode(),"summary")).bind(r=>w.from(n.dom.getParent(r,"details")).map(s=>((i,a,l)=>{const c=i.selection.getRng(),d=U.fromRangeStart(c);return!(i.getBody().firstChild!==a||!ww(l,d)||(i.execCommand("InsertNewBlockBefore"),0))})(n,s,r))).getOr(!1))(e,t),d1={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},u1=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,ke=(e,...t)=>()=>e.apply(null,t),dd=(e,t)=>en(((n,o)=>no((r=>Me(r,s=>({...d1,...s})))(n),r=>u1(r,o)?[r]:[]))(e,t),n=>n.action()),m1=(e,t)=>Ns(((n,o)=>no((r=>Me(r,s=>({...d1,...s})))(n),r=>u1(r,o)?[r]:[]))(e,t),n=>n.action()),f1=(e,t)=>{const n=t?_n.Forwards:_n.Backwards,o=e.selection.getRng();return Rw(e,n,o,Vc,Kc,yo).exists(r=>(ks(e,r),!0))},g1=(e,t)=>{const n=t?1:-1,o=e.selection.getRng();return Bw(e,n,o,Vc,Kc,yo).exists(r=>(ks(e,r),!0))},p1=(e,t)=>Dw(e,t,t?Kc:Vc),h1=Ur([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),ud={...h1,none:e=>h1.none(e)},b1=(e,t,n)=>no(xn(e),o=>so(o,t)?n(o)?[o]:[]:b1(o,t,n)),v1=(e,t)=>cs(e,"table",t),qp=(e,t,n,o,r=St)=>{const s=o===1;if(!s&&n<=0)return ud.first(e[0]);if(s&&n>=e.length-1)return ud.last(e[e.length-1]);{const i=n+o,a=e[i];return r(a)?ud.middle(t,a):qp(e,t,i,o,r)}},y1=(e,t)=>v1(e,t).bind(n=>{const o=b1(n,"th,td",St);return fi(o,r=>tt(e,r)).map(r=>({index:r,all:o}))}),gO=["img","br"],pO=e=>{return(t=e,lf.getOption(t)).filter(n=>n.trim().length!==0||n.indexOf(nn)>-1).isSome()||ee(gO,We(e))||(n=>va(n)&&Un(n,"contenteditable")==="false")(e);var t},_1=(e,t,n,o,r)=>{const s=vn(B(n),"td,th,caption").map(a=>a.dom),i=ue(((a,l)=>no(l,c=>{const d=((u,f)=>({left:u.left-f,top:u.top-f,right:u.right+-2,bottom:u.bottom+-2,width:u.width+f,height:u.height+f}))(zi(c.getBoundingClientRect()),-1);return[{x:d.left,y:a(d),cell:c},{x:d.right,y:a(d),cell:c}]}))(e,s),a=>t(a,r));return((a,l,c)=>Lt(a,(d,u)=>d.fold(()=>w.some(u),f=>{const h=Math.sqrt(Math.abs(f.x-l)+Math.abs(f.y-c)),g=Math.sqrt(Math.abs(u.x-l)+Math.abs(u.y-c));return w.some(g<h?u:f)}),w.none()))(i,o,r).map(a=>a.cell)},hO=ae(_1,e=>e.bottom,(e,t)=>e.y<t),bO=ae(_1,e=>e.top,(e,t)=>e.y>t),C1=(e,t,n)=>{const o=e(t,n);return(r=>r.breakType===Gr.Wrap&&r.positions.length===0)(o)||!Tt(n.getNode())&&(r=>r.breakType===Gr.Br&&r.positions.length===1)(o)?!((r,s,i)=>i.breakAt.exists(a=>r(s,a).breakAt.isSome()))(e,t,o):o.breakAt.isNone()},vO=ae(C1,id),yO=ae(C1,ad),_O=(e,t,n,o)=>{const r=e.selection.getRng(),s=t?1:-1;return!(!iv()||!((i,a,l)=>{const c=U.fromRangeStart(a);return Xa(!i,l).exists(d=>d.isEqual(c))})(t,r,n)||(xs(s,e,n,!t,!1).each(i=>{ks(e,i)}),0))},w1=(e,t,n)=>{const o=((s,i)=>{const a=i.getNode(s);return Lo(a)?w.some(a):w.none()})(!!t,n),r=t===!1;o.fold(()=>ks(e,n.toRange()),s=>Xa(r,e.getBody()).filter(i=>i.isEqual(n)).fold(()=>ks(e,n.toRange()),i=>((a,l,c)=>{l.undoManager.transact(()=>{const d=a?Zo:Bn,u=e1(l,B(c),d);ks(l,u)})})(t,e,s)))},CO=(e,t,n,o)=>{const r=e.selection.getRng(),s=U.fromRangeStart(r),i=e.getBody();if(!t&&vO(o,s)){const a=((l,c,d)=>((u,f)=>on(f.getClientRects()).bind(h=>hO(u,h.left,h.top)).bind(h=>{return um(rr(g=h).map(b=>id(g,b).positions.concat(b)).getOr([]),f);var g}))(c,d).orThunk(()=>on(d.getClientRects()).bind(u=>Dp(_w(l,U.before(c)),u.left))).getOr(U.before(c)))(i,n,s);return w1(e,t,a),!0}if(t&&yO(o,s)){const a=((l,c,d)=>((u,f)=>oo(f.getClientRects()).bind(h=>bO(u,h.left,h.top)).bind(h=>{return um(Ln(g=h).map(b=>[b].concat(ad(g,b).positions)).getOr([]),f);var g}))(c,d).orThunk(()=>on(d.getClientRects()).bind(u=>Dp(Cw(l,U.after(c)),u.left))).getOr(U.after(c)))(i,n,s);return w1(e,t,a),!0}return!1},E1=(e,t,n)=>w.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(o=>w.from(e.dom.getParent(o,"table")).map(r=>n(e,t,r,o))).getOr(!1),x1=(e,t)=>E1(e,t,_O),Wp=(e,t)=>E1(e,t,CO),k1=(e,t,n)=>n.fold(w.none,w.none,(o,r)=>{return(s=r,zs(s,pO)).map(i=>(a=>{const l=Ja.exact(a,0,a,0);return _A(l)})(i));var s},o=>(e.execCommand("mceTableInsertRowAfter"),S1(e,t,o))),S1=(e,t,n)=>{return k1(e,t,(r=ds,y1(o=n,void 0).fold(()=>ud.none(o),s=>qp(s.all,o,s.index,1,r))));var o,r},wO=(e,t,n)=>{return k1(e,t,(r=ds,y1(o=n,void 0).fold(()=>ud.none(),s=>qp(s.all,o,s.index,-1,r))));var o,r},A1=(e,t)=>{const n=["table","li","dl"],o=B(e.getBody()),r=i=>{const a=We(i);return tt(i,o)||ee(n,a)},s=e.selection.getRng();return((i,a)=>((l,c,d=ft)=>d(c)?w.none():ee(l,We(c))?w.some(c):ki(c,l.join(","),u=>so(u,"table")||d(u)))(["td","th"],i,a))(B(t?s.endContainer:s.startContainer),r).map(i=>(v1(i,r).each(a=>{e.model.table.clearSelectedCells(a.dom)}),e.selection.collapse(!t),(t?S1:wO)(e,r,i).each(a=>{e.selection.setRng(a)}),!0)).getOr(!1)},kr=(e,t)=>({container:e,offset:t}),pm=ot.DOM,hm=e=>t=>e===t?-1:0,Vp=(e,t,n)=>{if(X(e)&&t>=0)return w.some(kr(e,t));{const o=ji(pm);return w.from(o.backwards(e,t,hm(e),n)).map(r=>kr(r.container,r.container.data.length))}},Kp=(e,t,n)=>{if(!X(e))return w.none();const o=e.data;if(t>=0&&t<=o.length)return w.some(kr(e,t));{const r=ji(pm);return w.from(r.backwards(e,t,hm(e),n)).bind(s=>{const i=s.container.data;return Kp(s.container,t+i.length,n)})}},N1=(e,t,n)=>{if(!X(e))return w.none();const o=e.data;if(t<=o.length)return w.some(kr(e,t));{const r=ji(pm);return w.from(r.forwards(e,t,hm(e),n)).bind(s=>N1(s.container,t-o.length,n))}},Yp=(e,t,n,o,r)=>{const s=ji(e,(i=>a=>i.isBlock(a)||ee(["BR","IMG","HR","INPUT"],a.nodeName)||i.getContentEditable(a)==="false")(e));return w.from(s.backwards(t,n,o,r))},T1=e=>e!==""&&` \xA0\f
\r	\v`.indexOf(e)!==-1,EO=(e,t)=>e.substring(t.length),Xp=(e,t,n,o=!1)=>{if(!(r=t).collapsed||!X(r.startContainer))return w.none();var r;const s={text:"",offset:0},i=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return Yp(e,t.startContainer,t.startOffset,(a,l,c)=>(s.text=c+s.text,s.offset+=l,((d,u,f,h=!1)=>{let g;const b=f.charAt(0);for(g=u-1;g>=0;g--){const p=d.charAt(g);if(!h&&T1(p))return w.none();if(b===p&&Et(d,f,g,u))break}return w.some(g)})(s.text,s.offset,n,o).getOr(l)),i).bind(a=>{const l=t.cloneRange();if(l.setStart(a.container,a.offset),l.setEnd(t.endContainer,t.endOffset),l.collapsed)return w.none();const c=(d=>Co(d.toString().replace(/\u00A0/g," ")))(l);return c.lastIndexOf(n)!==0?w.none():w.some({text:EO(c,n),range:l,trigger:n})})},O1=e=>{if((t=>t.nodeType===3)(e))return kr(e,e.data.length);{const t=e.childNodes;return t.length>0?O1(t[t.length-1]):kr(e,t.length)}},R1=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?R1(n[t],0):n.length>0&&(o=>o.nodeType===1)(e)&&n.length===t?O1(n[n.length-1]):kr(e,t)},B1=(e,t,n,o={})=>{var r;const s=t(),i=(r=e.selection.getRng().startContainer.nodeValue)!==null&&r!==void 0?r:"",a=ue(s.lookupByTrigger(n.trigger),c=>n.text.length>=c.minChars&&c.matches.getOrThunk(()=>(d=>u=>{const f=R1(u.startContainer,u.startOffset);return!((h,g)=>{var b;const p=(b=h.getParent(g.container,h.isBlock))!==null&&b!==void 0?b:h.getRoot();return Yp(h,g.container,g.offset,(v,_)=>_===0?-1:_,p).filter(v=>{const _=v.container.data.charAt(v.offset-1);return!T1(_)}).isSome()})(d,f)})(e.dom))(n.range,i,n.text));if(a.length===0)return w.none();const l=Promise.all(Me(a,c=>c.fetch(n.text,c.maxResults,o).then(d=>({matchText:n.text,items:d,columns:c.columns,onAction:c.onAction,highlightOn:c.highlightOn}))));return w.some({lookupData:l,context:n})};var Qr;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(Qr||(Qr={}));const Gp=(e,t,n)=>e.stype===Qr.Error?t(e.serror):n(e.svalue),cl=e=>({stype:Qr.Value,svalue:e}),md=e=>({stype:Qr.Error,serror:e}),xO=Gp,Qp=e=>dt(e)&&In(e).length>100?" removed due to size":JSON.stringify(e,null,2),bm=(e,t)=>md([{path:e,getErrorInfo:t}]),kO=(e,t)=>({extract:(n,o)=>At(o,e).fold(()=>((r,s)=>bm(r,()=>'Choice schema did not contain choice key: "'+s+'"'))(n,e),r=>((s,i,a,l)=>At(a,l).fold(()=>((c,d,u)=>bm(c,()=>'The chosen schema: "'+u+'" did not exist in branches: '+Qp(d)))(s,a,l),c=>c.extract(s.concat(["branch: "+l]),i)))(n,o,t,r)),toString:()=>"chooseOn("+e+"). Possible values: "+In(t)}),D1=e=>(...t)=>{if(t.length===0)throw new Error("Can't merge zero objects");const n={};for(let o=0;o<t.length;o++){const r=t[o];for(const s in r)Re(r,s)&&(n[s]=e(n[s],r[s]))}return n},Zp=D1((e,t)=>Pt(e)&&Pt(t)?Zp(e,t):t),SO=D1((e,t)=>t),P1=e=>({tag:"defaultedThunk",process:K(e)}),AO=e=>{const t=(o=>{const r=[],s=[];return W(o,i=>{Gp(i,a=>s.push(a),a=>r.push(a))}),{values:r,errors:s}})(e);return t.errors.length>0?(n=t.errors,Le(md,kd)(n)):cl(t.values);var n},L1=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},Jp=e=>({extract:(t,n)=>{return o=e(n),r=s=>((i,a)=>bm(i,K(a)))(t,s),o.stype===Qr.Error?r(o.serror):o;var o,r},toString:K("val")}),NO=Jp(cl),M1=(e,t,n,o)=>o(At(e,t).getOrThunk(()=>n(e))),TO=(e,t,n,o,r)=>{const s=a=>r.extract(t.concat([o]),a),i=a=>a.fold(()=>cl(w.none()),l=>{return d=r.extract(t.concat([o]),l),u=w.some,d.stype===Qr.Value?{stype:Qr.Value,svalue:u(d.svalue)}:d;var d,u});switch(e.tag){case"required":return((a,l,c,d)=>At(l,c).fold(()=>((u,f,h)=>bm(u,()=>'Could not find valid *required* value for "'+f+'" in '+Qp(h)))(a,c,l),d))(t,n,o,s);case"defaultedThunk":return M1(n,o,e.process,s);case"option":return((a,l,c)=>c(At(a,l)))(n,o,i);case"defaultedOptionThunk":return((a,l,c,d)=>d(At(a,l).map(u=>u===!0?c(a):u)))(n,o,e.process,i);case"mergeWithThunk":return M1(n,o,K({}),a=>{const l=Zp(e.process(n),a);return s(l)})}},eh=e=>({extract:(t,n)=>((o,r,s)=>{const i={},a=[];for(const l of s)L1(l,(c,d,u,f)=>{const h=TO(u,o,r,c,f);xO(h,g=>{a.push(...g)},g=>{i[d]=g})},(c,d)=>{i[c]=d(r)});return a.length>0?md(a):cl(i)})(t,n,e),toString:()=>`obj{
`+Me(e,n=>L1(n,(o,r,s,i)=>o+" -> "+i.toString(),(o,r)=>"state("+o+")")).join(`
`)+"}"}),I1=e=>({extract:(t,n)=>{const o=Me(n,(r,s)=>e.extract(t.concat(["["+s+"]"]),r));return AO(o)},toString:()=>"array("+e.toString()+")"}),OO=(e,t,n)=>{return o=((r,s,i)=>((a,l)=>a.stype===Qr.Error?{stype:Qr.Error,serror:l(a.serror)}:a)(s.extract([r],i),a=>({input:i,errors:a})))(e,t,n),Gp(o,Zn.error,Zn.value);var o},F1=(e,t)=>kO(e,pi(t,eh)),RO=K(NO),vm=(e,t)=>Jp(n=>{const o=typeof n;return e(n)?cl(n):md(`Expected type: ${t} but got: ${o}`)}),BO=vm(st,"number"),ym=vm(se,"string"),DO=vm(Tn,"boolean"),th=vm(Ge,"function"),fd=(e,t,n,o)=>({tag:"field",key:e,newKey:t,presence:n,prop:o}),j1=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),$1=(e,t)=>fd(e,e,{tag:"required",process:{}},t),z1=e=>$1(e,ym),U1=e=>$1(e,th),nh=(e,t)=>fd(e,e,{tag:"option",process:{}},t),_m=e=>nh(e,ym),dl=(e,t,n)=>fd(e,e,P1(t),n),H1=(e,t)=>dl(e,t,BO),q1=(e,t,n)=>dl(e,t,(o=>{return r=s=>ee(o,s)?Zn.value(s):Zn.error(`Unsupported value: "${s}", choose one of "${o.join(", ")}".`),Jp(s=>r(s).fold(md,cl));var r})(n)),oh=(e,t)=>dl(e,t,DO),rh=(e,t)=>dl(e,t,th),PO=z1("type"),LO=U1("fetch"),sh=U1("onAction"),MO=rh("onSetup",()=>Te),IO=_m("text"),FO=_m("icon"),jO=_m("tooltip"),$O=_m("label"),zO=oh("active",!1),UO=oh("enabled",!0),W1=oh("primary",!1),gd=e=>((t,n)=>dl("type",n,ym))(0,e),HO=eh([PO,z1("trigger"),H1("minChars",1),((e,t)=>fd(e,e,P1(1),RO()))("columns"),H1("maxResults",10),nh("matches",th),LO,sh,(V1=ym,dl("highlightOn",[],I1(V1)))]);var V1;const ih=[UO,jO,FO,IO,MO],K1=[zO].concat(ih),qO=[rh("predicate",ft),q1("scope","node",["node","editor"]),q1("position","selection",["node","selection","line"])],WO=ih.concat([gd("contextformbutton"),W1,sh,j1("original",Be)]),VO=K1.concat([gd("contextformbutton"),W1,sh,j1("original",Be)]),KO=ih.concat([gd("contextformbutton")]),YO=K1.concat([gd("contextformtogglebutton")]),XO=F1("type",{contextformbutton:WO,contextformtogglebutton:VO});eh([gd("contextform"),rh("initValue",K("")),$O,((e,t)=>fd(e,e,{tag:"required",process:{}},I1(t)))("commands",XO),nh("launch",F1("type",{contextformbutton:KO,contextformtogglebutton:YO}))].concat(qO));const GO=e=>{const t=e.ui.registry.getAll().popups,n=pi(t,s=>{return(i=s,OO("Autocompleter",HO,i)).fold(a=>{throw new Error(`Errors: 
`+(c=>{const d=c.length>10?c.slice(0,10).concat([{path:[],getErrorInfo:K("... (only showing first ten failures)")}]):c;return Me(d,u=>"Failed path: ("+u.path.join(" > ")+`)
`+u.getErrorInfo())})((l=a).errors).join(`
`)+`

Input object: `+Qp(l.input));var l},Be);var i}),o=Sd(hi(n,s=>s.trigger)),r=da(n);return{dataset:n,triggers:o,lookupByTrigger:s=>ue(r,i=>i.trigger===s)}},QO=e=>{const t=br(),n=ln(!1),o=t.isSet,r=()=>{o()&&((l=>{l.dispatch("AutocompleterEnd")})(e),n.set(!1),t.clear())},s=Fn(()=>GO(e)),i=l=>{(c=>t.get().map(d=>Xp(e.dom,e.selection.getRng(),d.trigger,!0).bind(u=>B1(e,s,u,c))).getOrThunk(()=>((d,u)=>{const f=u(),h=d.selection.getRng();return((g,b,p)=>Ns(p.triggers,v=>Xp(g,b,v)))(d.dom,h,f).bind(g=>B1(d,u,g))})(e,s)))(l).fold(r,c=>{(d=>{o()||t.set({trigger:d.trigger,matchLength:d.text.length})})(c.context),c.lookupData.then(d=>{t.get().map(u=>{const f=c.context;u.trigger===f.trigger&&(t.set({...u,matchLength:f.text.length}),n.get()?(Gf(e,{range:f.range}),((h,g)=>{h.dispatch("AutocompleterUpdate",g)})(e,{lookupData:d})):(n.set(!0),Gf(e,{range:f.range}),((h,g)=>{h.dispatch("AutocompleterStart",g)})(e,{lookupData:d})))})})})},a=()=>t.get().bind(({trigger:l})=>{const c=e.selection.getRng();return Xp(e.dom,c,l,n.get()).filter(({range:d})=>((u,f)=>{const h=u.compareBoundaryPoints(window.Range.START_TO_START,f),g=u.compareBoundaryPoints(window.Range.END_TO_END,f);return h>=0&&g<=0})(c,d)).map(({range:d})=>d)});e.addCommand("mceAutocompleterReload",(l,c)=>{const d=dt(c)?c.fetchOptions:{};i(d)}),e.addCommand("mceAutocompleterClose",r),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{a().each(l=>{Gf(e,{range:l})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>a().isSome()),((l,c)=>{const d=Cc(c.load,50);l.on("input",u=>{(u.inputType!=="insertCompositionText"||l.composing)&&d.throttle()}),l.on("keydown",u=>{const f=u.which;f===8?d.throttle():f===27?(d.cancel(),c.cancelIfNecessary()):f!==38&&f!==40||d.cancel()},!0),l.on("remove",d.cancel)})(e,{cancelIfNecessary:r,load:i})},ZO=Ao().browser.isSafari(),Y1=e=>Qs(B(e)),X1=(e,t)=>{var n;return e.startOffset===0&&e.endOffset===((n=t.textContent)===null||n===void 0?void 0:n.length)},Cm=(e,t)=>w.from(e.getParent(t.container(),"details")),G1=(e,t)=>Cm(e,t).isSome(),Q1=(e,t)=>{const n=t.getNode();Ft(n)||e.selection.setCursorLocation(n,t.offset())},Z1=(e,t,n)=>{const o=e.dom.getParent(t.container(),"details");if(o&&!o.open){const r=e.dom.select("summary",o)[0];r&&(n?Ln(r):rr(r)).each(s=>Q1(e,s))}else Q1(e,t)},J1=(e,t,n)=>{const{dom:o,selection:r}=e,s=e.getBody();if(n==="character"){const i=U.fromRangeStart(r.getRng()),a=o.getParent(i.container(),o.isBlock),l=Cm(o,i),c=a&&o.isEmpty(a),d=mt(a?.previousSibling),u=mt(a?.nextSibling);return!!(c&&(t?u:d)&&Ya(!t,s,i).exists(f=>G1(o,f)&&!Ml(l,Cm(o,f))))||Ya(t,s,i).fold(ft,f=>{const h=Cm(o,f);if(G1(o,f)&&!Ml(l,h)){if(t||Z1(e,f,!1),a&&c){if(t&&d||!t&&u)return!0;Z1(e,f,t),e.dom.remove(a)}return!0}return!1})}return!1},JO=(e,t,n,o)=>{const r=e.selection.getRng(),s=U.fromRangeStart(r),i=e.getBody();return o==="selection"?((a,l)=>{const c=l.startSummary.exists(f=>f.contains(a.startContainer)),d=l.startSummary.exists(f=>f.contains(a.endContainer)),u=l.startDetails.forall(f=>l.endDetails.forall(h=>f!==h));return(c||d)&&!(c&&d)||u})(r,t):n?((a,l)=>l.startSummary.exists(c=>((d,u)=>rr(u).exists(f=>Tt(f.getNode())&&mo(u,f).exists(h=>h.isEqual(d))||f.isEqual(d)))(a,c)))(s,t)||((a,l,c)=>c.startDetails.exists(d=>Jn(a,l).forall(u=>!d.contains(u.container()))))(i,s,t):((a,l)=>l.startSummary.exists(c=>((d,u)=>Ln(u).exists(f=>f.isEqual(d)))(a,c)))(s,t)||((a,l)=>l.startDetails.exists(c=>mo(c,a).forall(d=>l.startSummary.exists(u=>!u.contains(a.container())&&u.contains(d.container())))))(s,t)},ta=(e,t,n)=>((o,r,s)=>((i,a)=>{const l=w.from(i.getParent(a.startContainer,"details")),c=w.from(i.getParent(a.endContainer,"details"));if(l.isSome()||c.isSome()){const d=l.bind(u=>w.from(i.select("summary",u)[0]));return w.some({startSummary:d,startDetails:l,endDetails:c})}return w.none()})(o.dom,o.selection.getRng()).fold(()=>J1(o,r,s),i=>JO(o,i,r,s)||J1(o,r,s)))(e,t,n)||ZO&&((o,r,s)=>{const i=o.selection,a=i.getNode(),l=i.getRng(),c=U.fromRangeStart(l);return!!nf(a)&&(s==="selection"&&X1(l,a)||Ey(r,c,a)?Y1(a):o.undoManager.transact(()=>{const d=i.getSel();let{anchorNode:u,anchorOffset:f,focusNode:h,focusOffset:g}=d??{};const b=()=>{Z(u)&&Z(f)&&Z(h)&&Z(g)&&d?.setBaseAndExtent(u,f,h,g)},p=(_,C)=>{W(_.childNodes,E=>{zc(E)&&C.appendChild(E)})},v=o.dom.create("span",{"data-mce-bogus":"1"});p(a,v),a.appendChild(v),b(),s!=="word"&&s!=="line"||d==null||d.modify("extend",r?"right":"left",s),!i.isCollapsed()&&X1(i.getRng(),v)?Y1(a):(o.execCommand(r?"ForwardDelete":"Delete"),u=d?.anchorNode,f=d?.anchorOffset,h=d?.focusNode,g=d?.focusOffset,p(v,a),b()),o.dom.remove(v)}),!0)})(e,t,n)?w.some(Te):w.none(),eE=e=>(t,n,o={})=>{const r=t.getBody(),s={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:r,currentTarget:r,eventPhase:Event.AT_TARGET,originalTarget:r,explicitOriginalTarget:r,isTrusted:!1,srcElement:r,cancelable:!1,preventDefault:Te,inputType:n},i=Dn(new InputEvent(e));return t.dispatch(e,{...i,...s,...o})},pd=eE("input"),wm=eE("beforeinput"),tE=Ao(),nE=tE.os,oE=nE.isMacOS()||nE.isiOS(),eR=tE.browser.isFirefox(),ul=(e,t)=>{const n=e.dom,o=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const s=(i=>{for(;i;){if(he(i)||X(i)&&i.data&&/[\r\n\s]/.test(i.data))return i;i=i.nextSibling}return null})(t.firstChild);s&&/^(UL|OL|DL)$/.test(s.nodeName)&&t.insertBefore(n.doc.createTextNode(nn),t.firstChild)}const r=n.createRng();if(t.normalize(),t.hasChildNodes()){const s=new an(t,t);let i,a=t;for(;i=s.current();){if(X(i)){r.setStart(i,0),r.setEnd(i,0);break}if(o[i.nodeName.toLowerCase()]){r.setStartBefore(i),r.setEndBefore(i);break}a=i,i=s.next()}i||(r.setStart(a,0),r.setEnd(a,0))}else Tt(t)?t.nextSibling&&n.isBlock(t.nextSibling)?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)):(r.setStart(t,0),r.setEnd(t,0));e.selection.setRng(r),Wc(e,r)},hd=(e,t)=>{const n=e.getRoot();let o,r=t;for(;r!==n&&r&&e.getContentEditable(r)!=="false";){if(e.getContentEditable(r)==="true"){o=r;break}r=r.parentNode}return r!==n?o:n},ah=e=>w.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),lh=e=>{e.innerHTML='<br data-mce-bogus="1">'},bd=(e,t)=>{Pn(e).toLowerCase()===t.tagName.toLowerCase()&&((n,o,r)=>{const s=n.dom;w.from(r.style).map(s.parseStyle).each(d=>{const u={...Zl(B(o)),...d};s.setStyles(o,u)});const i=w.from(r.class).map(d=>d.split(/\s+/)),a=w.from(o.className).map(d=>ue(d.split(/\s+/),u=>u!==""));bn(i,a,(d,u)=>{const f=ue(u,g=>!ee(d,g)),h=[...d,...f];s.setAttrib(o,"class",h.join(" "))});const l=["style","class"],c=Ar(r,(d,u)=>!ee(l,u));s.setAttribs(o,c)})(e,t,Bc(e))},rE=(e,t,n,o,r=!0,s,i)=>{const a=e.dom,l=e.schema,c=Pn(e),d=n?n.nodeName.toUpperCase():"";let u=t;const f=l.getTextInlineElements();let h;h=s||d==="TABLE"||d==="HR"?a.create(s||c,i||{}):n.cloneNode(!1);let g=h;if(r)do if(f[u.nodeName]){if(jo(u)||$o(u))continue;const b=u.cloneNode(!1);a.setAttrib(b,"id",""),h.hasChildNodes()?(b.appendChild(h.firstChild),h.appendChild(b)):(g=b,h.appendChild(b))}while((u=u.parentNode)&&u!==o);else a.setAttrib(h,"style",null),a.setAttrib(h,"class",null);return bd(e,h),lh(g),h},sE=(e,t)=>{const n=e?.parentNode;return Z(n)&&n.nodeName===t},iE=e=>Z(e)&&/^(OL|UL|LI)$/.test(e.nodeName),ch=e=>Z(e)&&/^(LI|DT|DD)$/.test(e.nodeName),Em=e=>{const t=e.parentNode;return ch(t)?t:e},xm=(e,t,n)=>{let o=e[n?"firstChild":"lastChild"];for(;o&&!he(o);)o=o[n?"nextSibling":"previousSibling"];return o===t},aE=e=>Lt(hi(Zl(B(e)),(t,n)=>`${n}: ${t};`),(t,n)=>t+n,""),tR=(e,t)=>t&&t.nodeName==="A"&&e.isEmpty(t),dh=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,uh=(e,t)=>Z(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&e.getContentEditable(t)!=="false",mh=(e,t,n)=>X(t)?e?n===1&&t.data.charAt(n-1)===yn?0:n:n===t.data.length-1&&t.data.charAt(n)===yn?t.data.length:n:n,lE={insert:(e,t)=>{let n,o,r,s,i=!1;const a=e.dom,l=e.schema.getNonEmptyElements(),c=e.selection.getRng(),d=Pn(e),u=B(c.startContainer),f=$s(u,c.startOffset),h=f.exists(L=>va(L)&&!ds(L)),g=c.collapsed&&h,b=(L,I)=>rE(e,n,x,E,jk(e),L,I),p=L=>{const I=mh(L,n,o);if(X(n)&&(L?I>0:I<n.data.length))return!1;if((n.parentNode===x||n===x)&&i&&!L||L&&he(n)&&n===x.firstChild)return!0;if(dh(n,"TABLE")||dh(n,"HR"))return i&&!L||!i&&L;const N=new an(n,x);let R;for(X(n)&&(L&&I===0?N.prev():L||I!==n.data.length||N.next());R=N.current();){if(he(R)){if(!R.getAttribute("data-mce-bogus")){const P=R.nodeName.toLowerCase();if(l[P]&&P!=="br")return!1}}else if(X(R)&&!qs(R.data))return!1;L?N.prev():N.next()}return!0},v=()=>{let L;return L=/^(H[1-6]|PRE|FIGURE)$/.test(r)&&S!=="HGROUP"?b(d):b(),((I,N)=>{const R=$k(I);return!Rt(N)&&(se(R)?ee(Q.explode(R),N.nodeName.toLowerCase()):R)})(e,s)&&uh(a,s)&&a.isEmpty(x,void 0,{includeZwsp:!0})?L=a.split(s,x):a.insertAfter(L,x),ul(e,L),L};Bu(a,c).each(L=>{c.setStart(L.startContainer,L.startOffset),c.setEnd(L.endContainer,L.endOffset)}),n=c.startContainer,o=c.startOffset;const _=!(!t||!t.shiftKey),C=!(!t||!t.ctrlKey);he(n)&&n.hasChildNodes()&&!g&&(i=o>n.childNodes.length-1,n=n.childNodes[Math.min(o,n.childNodes.length-1)]||n,o=i&&X(n)?n.data.length:0);const E=hd(a,n);if(!E||((L,I)=>{const N=L.dom.getParent(I,"ol,ul,dl");return N!==null&&L.dom.getContentEditableParent(N)==="false"})(e,n))return;_||(n=((L,I,N,R,P)=>{var H,G;const Y=L.dom,me=(H=hd(Y,R))!==null&&H!==void 0?H:Y.getRoot();let be=Y.getParent(R,Y.isBlock);if(!be||!uh(Y,be)){if(be=be||me,!be.hasChildNodes()){const pe=Y.create(I);return bd(L,pe),be.appendChild(pe),N.setStart(pe,0),N.setEnd(pe,0),pe}let ye,fe=R;for(;fe&&fe.parentNode!==be;)fe=fe.parentNode;for(;fe&&!Y.isBlock(fe);)ye=fe,fe=fe.previousSibling;const oe=(G=ye?.parentElement)===null||G===void 0?void 0:G.nodeName;if(ye&&oe&&L.schema.isValidChild(oe,I.toLowerCase())){const pe=ye.parentNode,D=Y.create(I);for(bd(L,D),pe.insertBefore(D,ye),fe=ye;fe&&!Y.isBlock(fe);){const M=fe.nextSibling;D.appendChild(fe),fe=M}N.setStart(R,P),N.setEnd(R,P)}}return R})(e,d,c,n,o));let x=a.getParent(n,a.isBlock)||a.getRoot();s=Z(x?.parentNode)?a.getParent(x.parentNode,a.isBlock):null,r=x?x.nodeName.toUpperCase():"";const S=s?s.nodeName.toUpperCase():"";if(S!=="LI"||C||(x=s,s=s.parentNode,r=S),he(s)&&((L,I,N)=>!I&&N.nodeName.toLowerCase()===Pn(L)&&L.dom.isEmpty(N)&&((R,P,H)=>{let G=P;for(;G&&G!==R&&mt(G.nextSibling);){const me=G.parentElement;if(!me||(Y=me,!Re(L.schema.getTextBlockElements(),Y.nodeName.toLowerCase())))return rc(me);G=me}var Y;return!1})(L.getBody(),N))(e,_,x))return((L,I,N)=>{var R,P,H;const G=I(Pn(L)),Y=((me,be)=>me.dom.getParent(be,rc))(L,N);Y&&(L.dom.insertAfter(G,Y),ul(L,G),((H=(P=(R=N.parentElement)===null||R===void 0?void 0:R.childNodes)===null||P===void 0?void 0:P.length)!==null&&H!==void 0?H:0)>1&&L.dom.remove(N))})(e,b,x);if(/^(LI|DT|DD)$/.test(r)&&he(s)&&a.isEmpty(x))return void((L,I,N,R,P)=>{const H=L.dom,G=L.selection.getRng(),Y=N.parentNode;if(N===L.getBody()||!Y)return;var me;iE(me=N)&&iE(me.parentNode)&&(P="LI");const be=ch(R)?aE(R):void 0;let ye=ch(R)&&be?I(P,{style:aE(R)}):I(P);if(xm(N,R,!0)&&xm(N,R,!1))if(sE(N,"LI")){const fe=Em(N);H.insertAfter(ye,fe),(oe=>{var pe;return((pe=oe.parentNode)===null||pe===void 0?void 0:pe.firstChild)===oe})(N)?H.remove(fe):H.remove(N)}else H.replace(ye,N);else if(xm(N,R,!0))sE(N,"LI")?(H.insertAfter(ye,Em(N)),ye.appendChild(H.doc.createTextNode(" ")),ye.appendChild(N)):Y.insertBefore(ye,N),H.remove(R);else if(xm(N,R,!1))H.insertAfter(ye,Em(N)),H.remove(R);else{N=Em(N);const fe=G.cloneRange();fe.setStartAfter(R),fe.setEndAfter(N);const oe=fe.extractContents();if(P==="LI"&&((pe,D)=>pe.firstChild&&pe.firstChild.nodeName==="LI")(oe)){const pe=ue(Me(ye.children,B),On(_i("br")));ye=oe.firstChild,H.insertAfter(oe,N),W(pe,D=>Jl(B(ye),D)),be&&ye.setAttribute("style",be)}else H.insertAfter(oe,N),H.insertAfter(ye,N);H.remove(R)}ul(L,ye)})(e,b,s,x,d);if(!(g||x!==e.getBody()&&uh(a,x)))return;const O=x.parentNode;let T;if(g)T=b(d),f.fold(()=>{Xt(u,B(T))},L=>{Bn(L,B(T))}),e.selection.setCursorLocation(T,0);else if(Ha(x))T=mf(x),a.isEmpty(x)&&lh(x),bd(e,T),ul(e,T);else if(p(!1))T=v();else if(p(!0)&&O){const L=U.fromRangeStart(c),I=gg(L),N=B(x),R=$u(N,L,e.schema)?oy(N,L,e.schema).bind(H=>w.from(H.getNode())):w.none();T=O.insertBefore(b(),x);const P=dh(x,"HR")||I?T:R.getOr(x);ul(e,P)}else{const L=(N=>{const R=N.cloneRange();return R.setStart(N.startContainer,mh(!0,N.startContainer,N.startOffset)),R.setEnd(N.endContainer,mh(!1,N.endContainer,N.endOffset)),R})(c).cloneRange();L.setEndAfter(x);const I=L.extractContents();(N=>{W(Vd(B(N),En),R=>{const P=R.dom;P.nodeValue=Co(P.data)})})(I),(N=>{let R=N;do X(R)&&(R.data=R.data.replace(/^[\r\n]+/,"")),R=R.firstChild;while(R)})(I),T=I.firstChild,a.insertAfter(I,x),((N,R,P)=>{var H;const G=[];if(!P)return;let Y=P;for(;Y=Y.firstChild;){if(N.isBlock(Y))return;he(Y)&&!R[Y.nodeName.toLowerCase()]&&G.push(Y)}let me=G.length;for(;me--;)Y=G[me],(!Y.hasChildNodes()||Y.firstChild===Y.lastChild&&((H=Y.firstChild)===null||H===void 0?void 0:H.nodeValue)===""||tR(N,Y))&&N.remove(Y)})(a,l,T),((N,R)=>{R.normalize();const P=R.lastChild;(!P||he(P)&&/^(left|right)$/gi.test(N.getStyle(P,"float",!0)))&&N.add(R,"br")})(a,x),a.isEmpty(x)&&lh(x),T.normalize(),a.isEmpty(T)?(a.remove(T),v()):(bd(e,T),ul(e,T))}a.setAttrib(T,"id",""),e.dispatch("NewBlock",{newBlock:T})},fakeEventName:"insertParagraph"},cE=(e,t,n)=>{const o=e.dom.createRng();n?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)),e.selection.setRng(o),Wc(e,o)},nR=(e,t)=>{const n=sn("br");Bn(B(t),n),e.undoManager.add()},oR=(e,t)=>{rR(e.getBody(),t)||Zo(B(t),sn("br"));const n=sn("br");Zo(B(t),n),cE(e,n.dom,!1),e.undoManager.add()},rR=(e,t)=>{return n=U.after(t),!!Tt(n.getNode())||Jn(e,U.after(t)).map(o=>Tt(o.getNode())).getOr(!1);var n},dE=e=>e&&e.nodeName==="A"&&"href"in e,sR=e=>e.fold(ft,dE,dE,ft),iR=(e,t)=>{t.fold(Te,ae(nR,e),ae(oR,e),Te)},uE={insert:(e,t)=>{const n=(o=>{const r=ae(Qi,o),s=U.fromRangeStart(o.selection.getRng());return Xr(r,o.getBody(),s).filter(sR)})(e);n.isSome()?n.each(ae(iR,e)):((o,r)=>{const s=o.selection,i=o.dom,a=s.getRng();let l,c=!1;Bu(i,a).each(p=>{a.setStart(p.startContainer,p.startOffset),a.setEnd(p.endContainer,p.endOffset)});let d=a.startOffset,u=a.startContainer;if(he(u)&&u.hasChildNodes()){const p=d>u.childNodes.length-1;u=u.childNodes[Math.min(d,u.childNodes.length-1)]||u,d=p&&X(u)?u.data.length:0}let f=i.getParent(u,i.isBlock);const h=f&&f.parentNode?i.getParent(f.parentNode,i.isBlock):null,g=h?h.nodeName.toUpperCase():"",b=!(!r||!r.ctrlKey);g!=="LI"||b||(f=h),X(u)&&d>=u.data.length&&(((p,v,_)=>{const C=new an(v,_);let E;const x=p.getNonEmptyElements();for(;E=C.next();)if(x[E.nodeName.toLowerCase()]||X(E)&&E.length>0)return!0;return!1})(o.schema,u,f||i.getRoot())||(l=i.create("br"),a.insertNode(l),a.setStartAfter(l),a.setEndAfter(l),c=!0)),l=i.create("br"),vf(i,a,l),cE(o,l,c),o.undoManager.add()})(e,t)},fakeEventName:"insertLineBreak"},mE=(e,t)=>ah(e).filter(n=>t.length>0&&so(B(n),t)).isSome(),wo=Ur([{br:[]},{block:[]},{none:[]}]),aR=(e,t)=>(n=>mE(n,Fk(n)))(e),fE=e=>(t,n)=>(o=>ah(o).filter(r=>$a(B(r))).isSome())(t)===e,gE=(e,t)=>(n,o)=>(s=>ah(s).fold(K(""),i=>i.nodeName.toUpperCase()))(n)===e.toUpperCase()===t,lR=e=>{const t=hd(e.dom,e.selection.getStart());return Rt(t)},vd=e=>gE("pre",e),km=e=>(t,n)=>Lk(t)===e,cR=(e,t)=>(n=>mE(n,Ik(n)))(e),Sm=(e,t)=>t,dR=e=>{const t=Pn(e),n=hd(e.dom,e.selection.getStart());return Z(n)&&e.schema.isValidChild(n.nodeName,t)},uR=e=>{const t=e.selection.getRng(),n=B(t.startContainer),o=$s(n,t.startOffset).map(r=>va(r)&&!ds(r));return t.collapsed&&o.getOr(!0)},Ko=(e,t)=>(n,o)=>Lt(e,(r,s)=>r&&s(n,o),!0)?w.some(t):w.none(),Am=(e,t,n)=>{t.selection.isCollapsed()||(o=>{o.execCommand("delete")})(t),Z(n)&&wm(t,e.fakeEventName).isDefaultPrevented()||(e.insert(t,n),Z(n)&&pd(t,e.fakeEventName))},pE=(e,t)=>{const n=()=>Am(uE,e,t),o=()=>Am(lE,e,t),r=((s,i)=>mw([Ko([aR],wo.none()),Ko([vd(!0),lR],wo.none()),Ko([gE("summary",!0)],wo.br()),Ko([vd(!0),km(!1),Sm],wo.br()),Ko([vd(!0),km(!1)],wo.block()),Ko([vd(!0),km(!0),Sm],wo.block()),Ko([vd(!0),km(!0)],wo.br()),Ko([fE(!0),Sm],wo.br()),Ko([fE(!0)],wo.block()),Ko([cR],wo.br()),Ko([Sm],wo.br()),Ko([dR],wo.block()),Ko([uR],wo.block())],[s,!(!i||!i.shiftKey)]).getOr(wo.none()))(e,t);switch(Mk(e)){case"linebreak":r.fold(n,n,Te);break;case"block":r.fold(o,o,Te);break;case"invert":r.fold(o,n,Te);break;default:r.fold(n,o,Te)}},hE=Ao(),mR=hE.os.isiOS()&&hE.browser.isSafari(),bE=(e,t)=>{var n;t.isDefaultPrevented()||(t.preventDefault(),(n=e.undoManager).typing&&(n.typing=!1,n.add()),e.undoManager.transact(()=>{pE(e,t)}))},fR=Ao(),vE=e=>e.stopImmediatePropagation(),yE=e=>e.keyCode===le.PAGE_UP||e.keyCode===le.PAGE_DOWN,_E=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",vE,!0):!n&&e.get()&&t.off("NodeChange",vE),e.set(n)},CE=(e,t)=>{const n=t.container(),o=t.offset();return X(n)?(n.insertData(o,e),w.some(U(n,o+e.length))):_u(t).map(r=>{const s=Dr(e);return t.isAtEnd()?Zo(r,s):Bn(r,s),U(s.dom,e.length)})},wE=ae(CE,nn),EE=ae(CE," "),xE=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},gR=e=>{const t=U.fromRangeStart(e.selection.getRng()),n=B(e.getBody());if(e.selection.isCollapsed()){const o=ae(Qi,e),r=U.fromRangeStart(e.selection.getRng());return Xr(o,e.getBody(),r).bind((s=>i=>i.fold(a=>mo(s.dom,U.before(a)),a=>Ln(a),a=>rr(a),a=>Jn(s.dom,U.after(a))))(n)).map(s=>()=>((i,a,l)=>c=>cy(i,c,l)?wE(a):EE(a))(n,t,e.schema)(s).each(xE(e)))}return w.none()},pR=e=>{return To(qe.browser.isFirefox()&&e.selection.isEditable()&&(t=e.dom,n=e.selection.getRng().startContainer,t.isEditable(t.getParent(n,"summary"))),()=>{const o=B(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete"),((r,s,i)=>cy(r,s,i)?wE(s):EE(s))(o,U.fromRangeStart(e.selection.getRng()),e.schema).each(xE(e))});var t,n},hR=e=>WS(e)?[{keyCode:le.TAB,action:ke(A1,e,!0)},{keyCode:le.TAB,shiftKey:!0,action:ke(A1,e,!1)}]:[],bR=e=>{if(e.addShortcut("Meta+P","","mcePrint"),QO(e),Yr(e))return ln(null);{const t=nO(e);return(n=>{n.on("beforeinput",o=>{n.selection.isEditable()&&!Ve(o.getTargetRanges(),r=>!N0(n.dom,r))||o.preventDefault()})})(e),(n=>{n.on("keyup compositionstart",ae(mO,n))})(e),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((s,i,a)=>{const l=qe.os.isMacOS()||qe.os.isiOS();dd([{keyCode:le.RIGHT,action:ke(s1,s,!0)},{keyCode:le.LEFT,action:ke(s1,s,!1)},{keyCode:le.UP,action:ke(i1,s,!1)},{keyCode:le.DOWN,action:ke(i1,s,!0)},...l?[{keyCode:le.UP,action:ke(gm,s,!1),metaKey:!0,shiftKey:!0},{keyCode:le.DOWN,action:ke(gm,s,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:le.RIGHT,action:ke(x1,s,!0)},{keyCode:le.LEFT,action:ke(x1,s,!1)},{keyCode:le.UP,action:ke(Wp,s,!1)},{keyCode:le.DOWN,action:ke(Wp,s,!0)},{keyCode:le.UP,action:ke(Wp,s,!1)},{keyCode:le.UP,action:ke(c1,s,!1)},{keyCode:le.DOWN,action:ke(c1,s,!0)},{keyCode:le.RIGHT,action:ke(f1,s,!0)},{keyCode:le.LEFT,action:ke(f1,s,!1)},{keyCode:le.UP,action:ke(g1,s,!1)},{keyCode:le.DOWN,action:ke(g1,s,!0)},{keyCode:le.RIGHT,action:ke(Mw,s,i,!0)},{keyCode:le.LEFT,action:ke(Mw,s,i,!1)},{keyCode:le.RIGHT,ctrlKey:!l,altKey:l,action:ke(oO,s,i)},{keyCode:le.LEFT,ctrlKey:!l,altKey:l,action:ke(rO,s,i)},{keyCode:le.UP,action:ke(l1,s,!1)},{keyCode:le.DOWN,action:ke(l1,s,!0)}],a).each(c=>{a.preventDefault()})})(n,o,r)})})(e,t),((n,o)=>{let r=!1;n.on("keydown",s=>{r=s.keyCode===le.BACKSPACE,s.isDefaultPrevented()||((i,a,l)=>{const c=l.keyCode===le.BACKSPACE?"deleteContentBackward":"deleteContentForward",d=i.selection.isCollapsed(),u=d?"character":"selection",f=h=>d?h?"word":"line":"selection";m1([{keyCode:le.BACKSPACE,action:ke(Qw,i)},{keyCode:le.BACKSPACE,action:ke(Ap,i,!1)},{keyCode:le.DELETE,action:ke(Ap,i,!0)},{keyCode:le.BACKSPACE,action:ke(xp,i,!1)},{keyCode:le.DELETE,action:ke(xp,i,!0)},{keyCode:le.BACKSPACE,action:ke(Ip,i,a,!1)},{keyCode:le.DELETE,action:ke(Ip,i,a,!0)},{keyCode:le.BACKSPACE,action:ke(Og,i,!1)},{keyCode:le.DELETE,action:ke(Og,i,!0)},{keyCode:le.BACKSPACE,action:ke(ta,i,!1,u)},{keyCode:le.DELETE,action:ke(ta,i,!0,u)},...oE?[{keyCode:le.BACKSPACE,altKey:!0,action:ke(ta,i,!1,f(!0))},{keyCode:le.DELETE,altKey:!0,action:ke(ta,i,!0,f(!0))},{keyCode:le.BACKSPACE,metaKey:!0,action:ke(ta,i,!1,f(!1))}]:[{keyCode:le.BACKSPACE,ctrlKey:!0,action:ke(ta,i,!1,f(!0))},{keyCode:le.DELETE,ctrlKey:!0,action:ke(ta,i,!0,f(!0))}],{keyCode:le.BACKSPACE,action:ke(Tp,i,!1)},{keyCode:le.DELETE,action:ke(Tp,i,!0)},{keyCode:le.BACKSPACE,action:ke($p,i,!1)},{keyCode:le.DELETE,action:ke($p,i,!0)},{keyCode:le.BACKSPACE,action:ke(wp,i,!1)},{keyCode:le.DELETE,action:ke(wp,i,!0)},{keyCode:le.BACKSPACE,action:ke(Cp,i,!1)},{keyCode:le.DELETE,action:ke(Cp,i,!0)},{keyCode:le.BACKSPACE,action:ke(Fp,i,!1)},{keyCode:le.DELETE,action:ke(Fp,i,!0)},{keyCode:le.BACKSPACE,action:ke(Np,i,!1)},{keyCode:le.DELETE,action:ke(Np,i,!0)}],l).filter(h=>i.selection.isEditable()).each(h=>{l.preventDefault(),wm(i,c).isDefaultPrevented()||(h(),pd(i,c))})})(n,o,s)}),n.on("keyup",s=>{s.isDefaultPrevented()||((i,a,l)=>{dd([{keyCode:le.BACKSPACE,action:ke(nw,i)},{keyCode:le.DELETE,action:ke(nw,i)},...oE?[{keyCode:le.BACKSPACE,altKey:!0,action:ke(cd,i)},{keyCode:le.DELETE,altKey:!0,action:ke(cd,i)},...l?[{keyCode:eR?224:91,action:ke(cd,i)}]:[]]:[{keyCode:le.BACKSPACE,ctrlKey:!0,action:ke(cd,i)},{keyCode:le.DELETE,ctrlKey:!0,action:ke(cd,i)}]],a)})(n,s,r),r=!1})})(e,t),(n=>{let o=w.none();n.on("keydown",r=>{r.keyCode===le.ENTER&&(mR&&(s=>{if(!s.collapsed)return!1;const i=s.startContainer;if(X(i)){const a=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,l=i.data.charAt(s.startOffset-1);return a.test(l)}return!1})(n.selection.getRng())?(s=>{o=w.some(s.selection.getBookmark()),s.undoManager.add()})(n):bE(n,r))}),n.on("keyup",r=>{r.keyCode===le.ENTER&&o.each(()=>((s,i)=>{s.undoManager.undo(),o.fold(Te,a=>s.selection.moveToBookmark(a)),bE(s,i),o=w.none()})(n,r))})})(e),(n=>{n.on("keydown",o=>{o.isDefaultPrevented()||((r,s)=>{m1([{keyCode:le.SPACEBAR,action:ke(gR,r)},{keyCode:le.SPACEBAR,action:ke(pR,r)}],s).each(i=>{s.preventDefault(),wm(r,"insertText",{data:" "}).isDefaultPrevented()||(i(),pd(r,"insertText",{data:" "}))})})(n,o)})})(e),(n=>{n.on("input",o=>{o.isComposing||(r=>{const s=B(r.getBody());r.selection.isCollapsed()&&eN(s,U.fromRangeStart(r.selection.getRng()),r.schema).each(i=>{r.selection.setRng(i.toRange())})})(n)})})(e),(n=>{n.on("keydown",o=>{o.isDefaultPrevented()||((r,s)=>{dd([...hR(r)],s).each(i=>{s.preventDefault()})})(n,o)})})(e),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((s,i,a)=>{const l=qe.os.isMacOS()||qe.os.isiOS();dd([{keyCode:le.END,action:ke(a1,s,!0)},{keyCode:le.HOME,action:ke(a1,s,!1)},...l?[]:[{keyCode:le.HOME,action:ke(gm,s,!1),ctrlKey:!0,shiftKey:!0},{keyCode:le.END,action:ke(gm,s,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:le.END,action:ke(p1,s,!0)},{keyCode:le.HOME,action:ke(p1,s,!1)},{keyCode:le.END,action:ke(fm,s,!0,i)},{keyCode:le.HOME,action:ke(fm,s,!1,i)}],a).each(c=>{a.preventDefault()})})(n,o,r)})})(e,t),((n,o)=>{if(fR.os.isMacOS())return;const r=ln(!1);n.on("keydown",s=>{yE(s)&&_E(r,n,!0)}),n.on("keyup",s=>{s.isDefaultPrevented()||((i,a,l)=>{dd([{keyCode:le.PAGE_UP,action:ke(fm,i,!1,a)},{keyCode:le.PAGE_DOWN,action:ke(fm,i,!0,a)}],l)})(n,o,s),yE(s)&&r.get()&&(_E(r,n,!1),n.nodeChanged())})})(e,t),t}};class vR{constructor(t){let n;this.lastPath=[],this.editor=t;const o=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",r=>{const s=t.selection.getRng(),i={startContainer:s.startContainer,startOffset:s.startOffset,endContainer:s.endContainer,endOffset:s.endOffset};r.type!=="nodechange"&&tg(i,n)||t.dispatch("SelectionChange"),n=i}),t.on("contextmenu",()=>{Lu(t),t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{const r=t.selection.getStart(!0);r&&ku(t)&&!o.isSameElementPath(r)&&t.dom.isChildOf(r,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",r=>{!r.isDefaultPrevented()&&ku(t)&&(t.selection.getNode().nodeName==="IMG"?Uo.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t={}){const n=this.editor.selection;let o;if(this.editor.initialized&&n&&!pS(this.editor)&&!this.editor.mode.isReadOnly()){const r=this.editor.getBody();o=n.getStart(!0)||r,o.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(o,r)||(o=r);const s=[];this.editor.dom.getParent(o,i=>i===r||(s.push(i),!1)),this.editor.dispatch("NodeChange",{...t,element:o,parents:s})}}isSameElementPath(t){let n;const o=this.editor,r=gi(o.dom.getParents(t,St,o.getBody()));if(r.length===this.lastPath.length){for(n=r.length;n>=0&&r[n]===this.lastPath[n];n--);if(n===-1)return this.lastPath=r,!0}return this.lastPath=r,!1}}const kE=kc("image"),fh=kc("event"),Nm=e=>t=>{t[fh]=e},SE=Nm(0),yR=Nm(2),_R=Nm(1),CR=e=>{const t=e;return w.from(t[fh]).exists(n=>n===0)},gh=kc("mode"),Tm=e=>t=>{t[gh]=e},AE=(e,t)=>Tm(t)(e),NE=Tm(0),ph=Tm(2),wR=Tm(1),TE=e=>t=>{const n=t;return w.from(n[gh]).exists(o=>o===e)},ml=TE(0),OE=TE(1),ER=["none","copy","link","move"],xR=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],hh=()=>{const e=new window.DataTransfer;let t="move",n="all";const o={get dropEffect(){return t},set dropEffect(r){ee(ER,r)&&(t=r)},get effectAllowed(){return n},set effectAllowed(r){CR(o)&&ee(xR,r)&&(n=r)},get items(){return((r,s)=>({...s,get length(){return s.length},add:(i,a)=>{if(ml(r)){if(!se(i))return s.add(i);if(!Ft(a))return s.add(i,a)}return null},remove:i=>{ml(r)&&s.remove(i)},clear:()=>{ml(r)&&s.clear()}}))(o,e.items)},get files(){return OE(o)?Object.freeze({length:0,item:r=>null}):e.files},get types(){return e.types},setDragImage:(r,s,i)=>{var a;ml(o)&&(a={image:r,x:s,y:i},o[kE]=a,e.setDragImage(r,s,i))},getData:r=>OE(o)?"":e.getData(r),setData:(r,s)=>{ml(o)&&e.setData(r,s)},clearData:r=>{ml(o)&&e.clearData(r)}};return NE(o),o},RE=(e,t)=>e.setData("text/html",t),BE="x-tinymce/html",Om=K(BE),bh="<!-- "+BE+" -->",kR=e=>bh+e,DE=e=>e.indexOf(bh)!==-1,PE="%MCEPASTEBIN%",vh=e=>e.dom.get("mcepastebin"),SR=e=>Z(e)&&e.id==="mcepastebin",LE=e=>e===PE,ME=(e,t)=>(Q.each(t,n=>{e=Je(n,RegExp)?e.replace(n,""):e.replace(n[0],n[1])}),e),IE=e=>ME(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(t,n,o)=>n||o?nn:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),FE=(e,t)=>({content:e,cancelled:t}),yh=(e,t)=>(e.insertContent(t,{merge:DS(e),paste:!0}),!0),_h=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),AR=(e,t,n)=>!(e.selection.isCollapsed()||!_h(t))&&((o,r,s)=>(o.undoManager.extra(()=>{s(o,r)},()=>{o.execCommand("mceInsertLink",!1,r)}),!0))(e,t,n),NR=(e,t,n)=>!!((o,r)=>_h(r)&&Ve(Zb(o),s=>jn(r.toLowerCase(),`.${s.toLowerCase()}`)))(e,t)&&((o,r,s)=>(o.undoManager.extra(()=>{s(o,r)},()=>{o.insertContent('<img src="'+r+'">')}),!0))(e,t,n),TR=(e=>{let t=0;return()=>"mceclip"+t++})(),OR=e=>{const t=hh();return RE(t,e),ph(t),t},jE=(e,t,n,o,r)=>{const s=((i,a,l)=>((c,d,u)=>{const f=((g,b,p)=>g.dispatch("PastePreProcess",{content:b,internal:p}))(c,d,u),h=((g,b)=>{const p=rl({sanitize:Qb(g),sandbox_iframes:Jb(g),sandbox_iframes_exclusions:Af(g),convert_unsafe_embeds:YS(g)},g.schema);p.addNodeFilter("meta",_=>{Q.each(_,C=>{C.remove()})});const v=p.parse(b,{forced_root_block:!1,isRootContent:!0});return oi({validate:!0},g.schema).serialize(v)})(c,f.content);return c.hasEventListeners("PastePostProcess")&&!f.isDefaultPrevented()?((g,b,p)=>{const v=g.dom.create("div",{style:"display:none"},b),_=((C,E,x)=>C.dispatch("PastePostProcess",{node:E,internal:x}))(g,v,p);return FE(_.node.innerHTML,_.isDefaultPrevented())})(c,h,u):FE(h,f.isDefaultPrevented())})(i,a,l))(e,t,n);if(!s.cancelled){const i=s.content,a=()=>((l,c,d)=>{d||!PS(l)?yh(l,c):((u,f)=>{Q.each([AR,NR,yh],h=>!h(u,f,yh))})(l,c)})(e,i,o);r?wm(e,"insertFromPaste",{dataTransfer:OR(i)}).isDefaultPrevented()||(a(),pd(e,"insertFromPaste")):a()}},Rm=(e,t,n,o)=>{const r=n||DE(t);jE(e,(s=>s.replace(bh,""))(t),r,!1,o)},Ch=(e,t,n)=>{const o=e.dom.encode(t).replace(/\r\n/g,`
`),r=((s,i,a)=>{const l=s.split(/\n\n/),c=((f,h)=>{let g="<"+f;const b=hi(h,(p,v)=>v+'="'+xe.encodeAllRaw(p)+'"');return b.length&&(g+=" "+b.join(" ")),g+">"})(i,a),d="</"+i+">",u=Me(l,f=>f.split(/\n/).join("<br />"));return u.length===1?u[0]:Me(u,f=>c+f+d).join("")})(Gd(o,MS(e)),Pn(e),Bc(e));jE(e,r,!1,!0,n)},$E=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const o=e.types[n];try{t[o]=e.getData(o)}catch{t[o]=""}}return t},li=(e,t)=>t in e&&e[t].length>0,zE=e=>li(e,"text/html")||li(e,"text/plain"),UE=(e,t,n)=>{const o=t.type==="paste"?t.clipboardData:t.dataTransfer;var r;if(vu(e)&&o){const s=((i,a)=>{const l=a.items?no(An(a.items),d=>d.kind==="file"?[d.getAsFile()]:[]):[],c=a.files?An(a.files):[];return ue(l.length>0?l:c,(d=>{const u=Zb(d);return f=>_t(f.type,"image/")&&Ve(u,h=>(g=>{const b=g.toLowerCase(),p={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Q.hasOwn(p,b)?"image/"+p[b]:"image/"+b})(h)===f.type)})(i))})(e,o);if(s.length>0)return t.preventDefault(),(r=s,Promise.all(Me(r,i=>D_(i).then(a=>({file:i,uri:a}))))).then(i=>{n&&e.selection.setRng(n),W(i,a=>{((l,c)=>{Zg(c.uri).each(({data:d,type:u,base64Encoded:f})=>{const h=f?d:btoa(d),g=c.file,b=l.editorUpload.blobCache,p=b.getByData(h,u),v=p??((_,C,E,x)=>{const S=TR(),O=jb(_)&&Z(E.name),T=O?((N,R)=>{const P=R.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Z(P)?N.dom.encode(P[1]):void 0})(_,E.name):S,L=O?E.name:void 0,I=C.create(S,E,x,T,L);return C.add(I),I})(l,b,g,h);Rm(l,`<img src="${v.blobUri()}">`,!1,!0)})})(e,a)})}),!0}return!1},wh=(e,t,n,o,r)=>{let s=IE(n);const i=li(t,Om())||DE(n),a=!i&&(c=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(c))(s),l=_h(s);(LE(s)||!s.length||a&&!l)&&(o=!0),(o||l)&&(s=li(t,"text/plain")&&a?t["text/plain"]:(c=>{const d=fn(),u=rl({},d);let f="";const h=d.getVoidElements(),g=Q.makeMap("script noscript style textarea video audio iframe object"," "),b=d.getBlockElements(),p=v=>{const _=v.name,C=v;if(_!=="br"){if(_!=="wbr")if(h[_]&&(f+=" "),g[_])f+=" ";else{if(v.type===3&&(f+=v.value),!(v.name in d.getVoidElements())){let E=v.firstChild;if(E)do p(E);while(E=E.next)}b[_]&&C.next&&(f+=`
`,_==="p"&&(f+=`
`))}}else f+=`
`};return c=ME(c,[/<!\[[^\]]+\]>/g]),p(u.parse(c)),f})(s)),LE(s)||(o?Ch(e,s,r):Rm(e,s,i,r))},RR=(e,t,n)=>{((o,r,s)=>{let i;o.on("keydown",a=>{(l=>le.metaKeyPressed(l)&&l.keyCode===86||l.shiftKey&&l.keyCode===45)(a)&&!a.isDefaultPrevented()&&(i=a.shiftKey&&a.keyCode===86)}),o.on("paste",a=>{if(a.isDefaultPrevented()||(d=>{var u,f;return qe.os.isAndroid()&&((f=(u=d.clipboardData)===null||u===void 0?void 0:u.items)===null||f===void 0?void 0:f.length)===0})(a))return;const l=s.get()==="text"||i;i=!1;const c=$E(a.clipboardData);!zE(c)&&UE(o,a,r.getLastRng()||o.selection.getRng())||(li(c,"text/html")?(a.preventDefault(),wh(o,c,c["text/html"],l,!0)):li(c,"text/plain")&&li(c,"text/uri-list")?(a.preventDefault(),wh(o,c,c["text/plain"],l,!0)):(r.create(),Uo.setEditorTimeout(o,()=>{const d=r.getHtml();r.remove(),wh(o,c,d,l,!1)},0)))})})(e,t,n),(o=>{const r=i=>_t(i,"webkit-fake-url"),s=i=>_t(i,"data:");o.parser.addNodeFilter("img",(i,a,l)=>{if(!vu(o)&&(c=>{var d;return((d=c.data)===null||d===void 0?void 0:d.paste)===!0})(l))for(const c of i){const d=c.attr("src");se(d)&&!c.attr("data-mce-object")&&d!==qe.transparentSrc&&(r(d)||!IS(o)&&s(d))&&c.remove()}})})(e)},HE=(e,t,n,o)=>{((r,s,i)=>{if(!r)return!1;try{return r.clearData(),r.setData("text/html",s),r.setData("text/plain",i),r.setData(Om(),s),!0}catch{return!1}})(e.clipboardData,t.html,t.text)?(e.preventDefault(),o()):n(t.html,o)},qE=e=>(t,n)=>{const{dom:o,selection:r}=e,s=o.create("div",{contenteditable:"false","data-mce-bogus":"all"}),i=o.create("div",{contenteditable:"true"},t);o.setStyles(s,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),s.appendChild(i),o.add(e.getBody(),s);const a=r.getRng();i.focus();const l=o.createRng();l.selectNodeContents(i),r.setRng(l),Uo.setEditorTimeout(e,()=>{r.setRng(a),o.remove(s),n()},0)},WE=e=>({html:kR(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),VE=e=>!e.selection.isCollapsed()||(t=>!!t.dom.getParent(t.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",t.getBody()))(e),KE=(e,t)=>{var n,o;return Xi.getCaretRangeFromPoint((n=t.clientX)!==null&&n!==void 0?n:0,(o=t.clientY)!==null&&o!==void 0?o:0,e.getDoc())},YE=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},BR=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,XE=e=>Q.trim(e).replace(BR,nr).toLowerCase(),DR=(e,t,n)=>{const o=RS(e);if(n||o==="all"||!BS(e))return t;const r=o?o.split(/[, ]/):[];if(r&&o!=="none"){const s=e.dom,i=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(a,l,c,d)=>{const u=s.parseStyle(s.decode(c)),f={};for(let g=0;g<r.length;g++){const b=u[r[g]];let p=b,v=s.getStyle(i,r[g],!0);/color/.test(r[g])&&(p=XE(p),v=XE(v)),v!==p&&(f[r[g]]=b)}const h=s.serializeStyle(f,"span");return h?l+' style="'+h+'"'+d:l+d})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(s,i,a,l)=>i+' style="'+a+'"'+l),t},PR=e=>{const t=ln(!1),n=ln(LS(e)?"text":"html"),o=(r=>{const s=ln(null);return{create:()=>((i,a)=>{const{dom:l,selection:c}=i,d=i.getBody();a.set(c.getRng());const u=l.add(i.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},PE);qe.browser.isFirefox()&&l.setStyle(u,"left",l.getStyle(d,"direction",!0)==="rtl"?65535:-65535),l.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),c.select(u,!0)})(r,s),remove:()=>((i,a)=>{const l=i.dom;if(vh(i)){let c;const d=a.get();for(;c=vh(i);)l.remove(c),l.unbind(c);d&&i.selection.setRng(d)}a.set(null)})(r,s),getEl:()=>vh(r),getHtml:()=>(i=>{const a=i.dom,l=(f,h)=>{f.appendChild(h),a.remove(h,!0)},[c,...d]=ue(i.getBody().childNodes,SR);W(d,f=>{l(c,f)});const u=a.select("div[id=mcepastebin]",c);for(let f=u.length-1;f>=0;f--){const h=a.create("div");c.insertBefore(h,u[f]),l(h,u[f])}return c?c.innerHTML:""})(r),getLastRng:s.get}})(e);(r=>{(qe.browser.isChromium()||qe.browser.isSafari())&&((s,i)=>{s.on("PastePreProcess",a=>{a.content=i(s,a.content,a.internal)})})(r,DR)})(e),((r,s)=>{r.addCommand("mceTogglePlainTextPaste",()=>{((i,a)=>{a.get()==="text"?(a.set("html"),e0(i,!1)):(a.set("text"),e0(i,!0)),i.focus()})(r,s)}),r.addCommand("mceInsertClipboardContent",(i,a)=>{a.html&&Rm(r,a.html,a.internal,!1),a.text&&Ch(r,a.text,!1)})})(e,n),(r=>{const s=l=>c=>{l(r,c)},i=NS(r);Ge(i)&&r.on("PastePreProcess",s(i));const a=TS(r);Ge(a)&&r.on("PastePostProcess",s(a))})(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>n.get()==="text"),e.on("PreInit",()=>{(r=>{r.on("cut",(s=>i=>{!i.isDefaultPrevented()&&VE(s)&&s.selection.isEditable()&&HE(i,WE(s),qE(s),()=>{if(qe.browser.isChromium()||qe.browser.isFirefox()){const a=s.selection.getRng();Uo.setEditorTimeout(s,()=>{s.selection.setRng(a),s.execCommand("Delete")},0)}else s.execCommand("Delete")})})(r)),r.on("copy",(s=>i=>{!i.isDefaultPrevented()&&VE(s)&&HE(i,WE(s),qE(s),Te)})(r))})(e),((r,s)=>{AS(r)&&r.on("dragend dragover draggesture dragdrop drop drag",i=>{i.preventDefault(),i.stopPropagation()}),vu(r)||r.on("drop",i=>{const a=i.dataTransfer;a&&(l=>Ve(l.files,c=>/^image\//.test(c.type)))(a)&&i.preventDefault()}),r.on("drop",i=>{if(i.isDefaultPrevented())return;const a=KE(r,i);if(Rt(a))return;const l=$E(i.dataTransfer),c=li(l,Om());if((!zE(l)||(g=>{const b=g["text/plain"];return!!b&&b.indexOf("file://")===0})(l))&&UE(r,i,a))return;const d=l[Om()],u=d||l["text/html"]||l["text/plain"],f=((g,b,p,v)=>{const _=g.getParent(p,C=>vs(b,C));if(!mt(g.getParent(p,"summary")))return!0;if(_&&Re(v,"text/html")){const C=new DOMParser().parseFromString(v["text/html"],"text/html").body;return!mt(C.querySelector(_.nodeName.toLowerCase()))}return!1})(r.dom,r.schema,a.startContainer,l),h=s.get();h&&!f||u&&(i.preventDefault(),Uo.setEditorTimeout(r,()=>{r.undoManager.transact(()=>{(d||h&&f)&&r.execCommand("Delete"),YE(r,a);const g=IE(u);l["text/html"]?Rm(r,g,c,!0):Ch(r,g,!0)})}))}),r.on("dragstart",i=>{s.set(!0)}),r.on("dragover dragend",i=>{vu(r)&&!s.get()&&(i.preventDefault(),YE(r,KE(r,i))),i.type==="dragend"&&s.set(!1)}),(i=>{i.on("input",a=>{const l=c=>mt(c.querySelector("summary"));if(a.inputType==="deleteByDrag"){const c=ue(i.dom.select("details"),l);W(c,d=>{Tt(d.firstChild)&&d.firstChild.remove();const u=i.dom.create("summary");u.appendChild(za().dom),d.prepend(u)})}})})(r)})(e,t),RR(e,o,n)})},LR=Tt,GE=X,MR=e=>wt(e.dom),QE=e=>t=>tt(B(e),t),ZE=(e,t)=>Ir(B(e),MR,QE(t)),JE=(e,t,n)=>{const o=new an(e,t),r=n?o.next.bind(o):o.prev.bind(o);let s=e;for(let i=n?e:r();i&&!LR(i);i=r())Cr(i)&&(s=i);return s},IR=e=>{const t=((n,o,r)=>{const s=U.fromRangeStart(n).getNode(),i=((d,u,f)=>Ir(B(d),h=>(g=>vo(g.dom))(h)||f.isBlock(We(h)),QE(u)).getOr(B(u)).dom)(s,o,r),a=JE(s,i,!1),l=JE(s,i,!0),c=document.createRange();return ZE(a,i).fold(()=>{GE(a)?c.setStart(a,0):c.setStartBefore(a)},d=>c.setStartBefore(d.dom)),ZE(l,i).fold(()=>{GE(l)?c.setEnd(l,l.data.length):c.setEndAfter(l)},d=>c.setEndAfter(d.dom)),c})(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(Mg(t))};var fl;(function(e){e.Before="before",e.After="after"})(fl||(fl={}));const FR=(e,t)=>Math.abs(e.left-t),jR=(e,t)=>Math.abs(e.right-t),$R=(e,t)=>(n=>Lt(n,(o,r)=>o.fold(()=>w.some(r),s=>{const i=Math.min(r.left,s.left),a=Math.min(r.top,s.top),l=Math.max(r.right,s.right),c=Math.max(r.bottom,s.bottom);return w.some({top:a,right:l,bottom:c,left:i,width:l-i,height:c-a})}),w.none()))(ue(e,n=>{return(o=t)>=(r=n).top&&o<=r.bottom;var o,r})).fold(()=>[[],e],n=>{const{pass:o,fail:r}=yt(e,s=>((i,a)=>{const l=((c,d)=>Math.max(0,Math.min(c.bottom,d.bottom)-Math.max(c.top,d.top)))(i,a)/Math.min(i.height,a.height);return((c,d)=>c.top<d.bottom&&c.bottom>d.top)(i,a)&&l>.5})(s,n));return[o,r]}),zR=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),Eh=(e,t,n,o)=>{const r=d=>Cr(d.node)?w.some(d):he(d.node)?Eh(An(d.node.childNodes),t,n,!1):w.none(),s=(d,u)=>{const f=Sr(d,(h,g)=>u(h,t,n)-u(g,t,n));return Ns(f,r).map(h=>o&&!X(h.node)&&f.length>1?((g,b,p)=>r(b).filter(v=>Math.abs(p(g,t,n)-p(v,t,n))<2&&X(v.node)))(h,f[1],u).getOr(h):h)},[i,a]=$R(Aw(e),n),{pass:l,fail:c}=yt(a,d=>d.top<n);return s(i,zR).orThunk(()=>s(c,sb)).orThunk(()=>s(l,sb))},ex=(e,t,n)=>((o,r,s)=>{const i=B(o),a=Lr(i),l=Ld(a,r,s).filter(c=>Oo(i,c)).getOr(i);return((c,d,u,f)=>{const h=(g,b)=>{const p=ue(g.dom.childNodes,On(v=>he(v)&&v.classList.contains("mce-drag-container")));return b.fold(()=>Eh(p,u,f,!0),v=>{const _=ue(p,C=>C!==v.dom);return Eh(_,u,f,!0)}).orThunk(()=>(tt(g,c)?w.none():Ei(g)).bind(v=>h(v,w.some(g))))};return h(d,w.none())})(i,l,r,s)})(e,t,n).filter(o=>Lc(o.node)).map(o=>((r,s)=>({node:r.node,position:FR(r,s)<jR(r,s)?fl.Before:fl.After}))(o,t)),tx=e=>{var t,n;const o=e.getBoundingClientRect(),r=e.ownerDocument,s=r.documentElement,i=r.defaultView;return{top:o.top+((t=i?.scrollY)!==null&&t!==void 0?t:0)-s.clientTop,left:o.left+((n=i?.scrollX)!==null&&n!==void 0?n:0)-s.clientLeft}},nx=e=>({target:e,srcElement:e}),UR=(e,t,n,o)=>{const r=((s,i)=>{const a=(l=>{const c=hh(),d=(u=>{const f=u;return w.from(f[gh])})(l);return ph(l),SE(c),c.dropEffect=l.dropEffect,c.effectAllowed=l.effectAllowed,(u=>{const f=u;return w.from(f[kE])})(l).each(u=>c.setDragImage(u.image,u.x,u.y)),W(l.types,u=>{u!=="Files"&&c.setData(u,l.getData(u))}),W(l.files,u=>c.items.add(u)),(u=>{const f=u;return w.from(f[fh])})(l).each(u=>{((f,h)=>{Nm(h)(f)})(c,u)}),d.each(u=>{AE(l,u),AE(c,u)}),c})(s);return i==="dragstart"?(SE(a),NE(a)):i==="drop"?(yR(a),ph(a)):(_R(a),wR(a)),a})(n,e);return Ft(o)?((s,i,a)=>{const l=Yo("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:s,composedPath:l,initEvent:l,preventDefault:Te,stopImmediatePropagation:Te,stopPropagation:Te,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:l,initMouseEvent:l,getModifierState:l,dataTransfer:a,...nx(i)}})(e,t,r):((s,i,a,l)=>({...i,dataTransfer:l,type:s,...nx(a)}))(e,o,t,r)},ox=wt,HR=((...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1})(ox,vo),qR=(e,t,n,o)=>{const r=e.dom,s=t.cloneNode(!0);r.setStyles(s,{width:n,height:o}),r.setAttrib(s,"data-mce-selected",null);const i=r.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return r.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:o}),r.setStyles(s,{margin:0,boxSizing:"border-box"}),i.appendChild(s),i},Bm=(e,t)=>n=>()=>{const o=e==="left"?n.scrollX:n.scrollY;n.scroll({[e]:o+t,behavior:"smooth"})},rx=Bm("left",-32),sx=Bm("left",32),ix=Bm("top",-32),ax=Bm("top",32),lx=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},yd=(e,t,n,o,r)=>{t==="dragstart"&&RE(o,e.dom.getOuterHTML(n));const s=UR(t,n,o,r);return e.dispatch(t,s)},WR=(e,t)=>{const n=Mi((r,s)=>((i,a,l)=>{i._selectionOverrides.hideFakeCaret(),ex(i.getBody(),a,l).fold(()=>i.selection.placeCaretAt(a,l),c=>{const d=i._selectionOverrides.showCaret(1,c.node,c.position===fl.Before,!1);d?i.selection.setRng(d):i.selection.placeCaretAt(a,l)})})(t,r,s),0);t.on("remove",n.cancel);const o=e;return r=>e.on(s=>{const i=Math.max(Math.abs(r.screenX-s.screenX),Math.abs(r.screenY-s.screenY));if(!s.dragging&&i>10){const c=yd(t,"dragstart",s.element,s.dataTransfer,r);if(Z(c.dataTransfer)&&(s.dataTransfer=c.dataTransfer),c.isDefaultPrevented())return;s.dragging=!0,t.focus()}if(s.dragging){const c=r.currentTarget===t.getDoc().documentElement,d=((u,f)=>({pageX:f.pageX-u.relX,pageY:f.pageY+5}))(s,((u,f)=>{return h=(p=>p.inline?tx(p.getBody()):{left:0,top:0})(u),g=(p=>{const v=p.getBody();return p.inline?{left:v.scrollLeft,top:v.scrollTop}:{left:0,top:0}})(u),b=((p,v)=>{if(v.target.ownerDocument!==p.getDoc()){const _=tx(p.getContentAreaContainer()),C=(E=>{const x=E.getBody(),S=E.getDoc().documentElement,O={left:x.scrollLeft,top:x.scrollTop},T={left:x.scrollLeft||S.scrollLeft,top:x.scrollTop||S.scrollTop};return E.inline?O:T})(p);return{left:v.pageX-_.left+C.left,top:v.pageY-_.top+C.top}}return{left:v.pageX,top:v.pageY}})(u,f),{pageX:b.left-h.left+g.left,pageY:b.top-h.top+g.top};var h,g,b})(t,r));a=s.ghost,l=t.getBody(),a.parentNode!==l&&l.appendChild(a),((u,f,h,g,b,p,v,_,C,E,x,S)=>{let O=0,T=0;u.style.left=f.pageX+"px",u.style.top=f.pageY+"px",f.pageX+h>b&&(O=f.pageX+h-b),f.pageY+g>p&&(T=f.pageY+g-p),u.style.width=h-O+"px",u.style.height=g-T+"px";const L=C.clientHeight,I=C.clientWidth,N=v+C.getBoundingClientRect().top,R=_+C.getBoundingClientRect().left;x.on(P=>{P.intervalId.clear(),P.dragging&&S&&(v+8>=L?P.intervalId.set(ax(E)):v-8<=0?P.intervalId.set(ix(E)):_+8>=I?P.intervalId.set(sx(E)):_-8<=0?P.intervalId.set(rx(E)):N+16>=window.innerHeight?P.intervalId.set(ax(window)):N-16<=0?P.intervalId.set(ix(window)):R+16>=window.innerWidth?P.intervalId.set(sx(window)):R-16<=0&&P.intervalId.set(rx(window)))})})(s.ghost,d,s.width,s.height,s.maxX,s.maxY,r.clientY,r.clientX,t.getContentAreaContainer(),t.getWin(),o,c),n.throttle(r.clientX,r.clientY)}var a,l})},cx=(e,t,n)=>{e.on(o=>{o.intervalId.clear(),o.dragging&&n.fold(()=>yd(t,"dragend",o.element,o.dataTransfer),r=>yd(t,"dragend",o.element,o.dataTransfer,r))}),dx(e)},dx=e=>{e.on(t=>{t.intervalId.clear(),lx(t.ghost)}),e.clear()},VR=e=>{const t=br(),n=ot.DOM,o=document,r=((l,c)=>d=>{if((u=>u.button===0)(d)){const u=en(c.dom.getParents(d.target),HR).getOr(null);if(Z(u)&&((f,h,g)=>ox(g)&&g!==h&&f.isEditable(g.parentElement))(c.dom,c.getBody(),u)){const f=c.dom.getPos(u),h=c.getBody(),g=c.getDoc().documentElement;l.set({element:u,dataTransfer:hh(),dragging:!1,screenX:d.screenX,screenY:d.screenY,maxX:(c.inline?h.scrollWidth:g.offsetWidth)-2,maxY:(c.inline?h.scrollHeight:g.offsetHeight)-2,relX:d.pageX-f.x,relY:d.pageY-f.y,width:u.offsetWidth,height:u.offsetHeight,ghost:qR(c,u,u.offsetWidth,u.offsetHeight),intervalId:of(100)})}}})(t,e),s=WR(t,e),i=((l,c)=>d=>{l.on(u=>{var f;if(u.intervalId.clear(),u.dragging){if(((h,g,b)=>!Rt(g)&&g!==b&&!h.dom.isChildOf(g,b)&&h.dom.isEditable(g))(c,(h=>{const g=h.getSel();if(Z(g)){const b=g.getRangeAt(0).startContainer;return X(b)?b.parentNode:b}return null})(c.selection),u.element)){const h=(f=c.getDoc().elementFromPoint(d.clientX,d.clientY))!==null&&f!==void 0?f:c.getBody();yd(c,"drop",h,u.dataTransfer,d).isDefaultPrevented()||c.undoManager.transact(()=>{((g,b)=>{const p=g.getParent(b.parentNode,g.isBlock);lx(b),p&&p!==g.getRoot()&&g.isEmpty(p)&&Qs(B(p))})(c.dom,u.element),(g=>{const b=g.getData("text/html");return b===""?w.none():w.some(b)})(u.dataTransfer).each(g=>c.insertContent(g)),c._selectionOverrides.hideFakeCaret()})}yd(c,"dragend",c.getBody(),u.dataTransfer,d)}}),dx(l)})(t,e),a=((l,c)=>d=>cx(l,c,w.some(d)))(t,e);e.on("mousedown",r),e.on("mousemove",s),e.on("mouseup",i),n.bind(o,"mousemove",s),n.bind(o,"mouseup",a),e.on("remove",()=>{n.unbind(o,"mousemove",s),n.unbind(o,"mouseup",a)}),e.on("keydown",l=>{l.keyCode===le.ESC&&cx(t,e,w.none())})},_d=wt,ux=(e,t)=>Zi(e.getBody(),t),KR=e=>{const t=e.selection,n=e.dom,o=e.getBody(),r=nA(e,o,n.isBlock,()=>tl(e)),s="sel-"+n.uniqueId(),i="data-mce-selected";let a;const l=p=>p!==o&&(_d(p)||yo(p))&&n.isChildOf(p,o)&&n.isEditable(p.parentNode),c=(p,v,_,C=!0)=>e.dispatch("ShowCaret",{target:v,direction:p,before:_}).isDefaultPrevented()?null:(C&&t.scrollIntoView(v,p===-1),r.show(_,v)),d=p=>Io(p)||du(p)||uu(p),u=p=>d(p.startContainer)||d(p.endContainer),f=p=>{const v=e.schema.getVoidElements(),_=n.createRng(),C=p.startContainer,E=p.startOffset,x=p.endContainer,S=p.endOffset;return Re(v,C.nodeName.toLowerCase())?E===0?_.setStartBefore(C):_.setStartAfter(C):_.setStart(C,E),Re(v,x.nodeName.toLowerCase())?S===0?_.setEndBefore(x):_.setEndAfter(x):_.setEnd(x,S),_},h=(p,v)=>{if(!p)return null;if(p.collapsed){if(!u(p)){const x=v?1:-1,S=jc(x,o,p),O=S.getNode(!v);if(Z(O)){if(Lc(O))return c(x,O,!!v&&!S.isAtEnd(),!1);if(Zs(O)&&wt(O.nextSibling)){const L=n.createRng();return L.setStart(O,0),L.setEnd(O,0),L}}const T=S.getNode(v);if(Z(T)){if(Lc(T))return c(x,T,!v&&!S.isAtEnd(),!1);if(Zs(T)&&wt(T.previousSibling)){const L=n.createRng();return L.setStart(T,1),L.setEnd(T,1),L}}}return null}let _=p.startContainer,C=p.startOffset;const E=p.endOffset;if(X(_)&&C===0&&_d(_.parentNode)&&(_=_.parentNode,C=n.nodeIndex(_),_=_.parentNode),!he(_))return null;if(E===C+1&&_===p.endContainer){const x=_.childNodes[C];if(l(x))return(S=>{const O=S.cloneNode(!0),T=e.dispatch("ObjectSelected",{target:S,targetClone:O});if(T.isDefaultPrevented())return null;const L=((N,R)=>{const P=B(e.getBody()),H=e.getDoc(),G=Ea(P,"#"+s).getOrThunk(()=>{const be=wa('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',H);return tn(be,"id",s),Xt(P,be),be}),Y=n.createRng();Hs(G),ms(G,[Dr(nn,H),B(R),Dr(nn,H)]),Y.setStart(G.dom.firstChild,1),Y.setEnd(G.dom.lastChild,0),us(G,{top:n.getPos(N,e.getBody()).y+"px"}),_0(G);const me=t.getSel();return me&&(me.removeAllRanges(),me.addRange(Y)),Y})(S,T.targetClone),I=B(S);return W(vn(B(e.getBody()),`*[${i}]`),N=>{tt(I,N)||rn(N,i)}),n.getAttrib(S,i)||S.setAttribute(i,"1"),a=S,b(),L})(x)}return null},g=()=>{a&&a.removeAttribute(i),Ea(B(e.getBody()),"#"+s).each(Nt),a=null},b=()=>{r.hide()};return Yr(e)||(e.on("click",p=>{n.isEditable(p.target)||(p.preventDefault(),e.focus())}),e.on("blur NewBlock",g),e.on("ResizeWindow FullscreenStateChanged",r.reposition),e.on("tap",p=>{const v=p.target,_=ux(e,v);_d(_)?(p.preventDefault(),sd(e,_).each(h)):l(v)&&sd(e,v).each(h)},!0),e.on("mousedown",p=>{const v=p.target;if(v!==o&&v.nodeName!=="HTML"&&!n.isChildOf(v,o)||!((C,E,x)=>{const S=B(C.getBody()),O=C.inline?S:B(Lr(S).dom.documentElement),T=((L,I,N,R)=>{const P=(H=>H.dom.getBoundingClientRect())(I);return{x:N-(L?P.left+I.dom.clientLeft+_T(I):0),y:R-(L?P.top+I.dom.clientTop+yT(I):0)}})(C.inline,O,E,x);return((L,I,N)=>{const R=bT(L),P=vT(L);return I>=0&&N>=0&&I<=R&&N<=P})(O,T.x,T.y)})(e,p.clientX,p.clientY))return;g(),b();const _=ux(e,v);_d(_)?(p.preventDefault(),sd(e,_).each(h)):ex(o,p.clientX,p.clientY).each(C=>{var E;p.preventDefault(),(E=c(1,C.node,C.position===fl.Before,!1))&&t.setRng(E),pr(_)?_.focus():e.getBody().focus()})}),e.on("keypress",p=>{le.modifierPressed(p)||_d(t.getNode())&&p.preventDefault()}),e.on("GetSelectionRange",p=>{let v=p.range;if(a){if(!a.parentNode)return void(a=null);v=v.cloneRange(),v.selectNode(a),p.range=v}}),e.on("SetSelectionRange",p=>{p.range=f(p.range);const v=h(p.range,p.forward);v&&(p.range=v)}),e.on("AfterSetSelectionRange",p=>{const v=p.range,_=v.startContainer.parentElement;var C;u(v)||he(C=_)&&C.id==="mcepastebin"||b(),(E=>Z(E)&&n.hasClass(E,"mce-offscreen-selection"))(_)||g()}),(p=>{VR(p),vS(p)&&(v=>{const _=x=>{if(!x.isDefaultPrevented()){const S=x.dataTransfer;S&&(ee(S.types,"Files")||S.files.length>0)&&(x.preventDefault(),x.type==="drop"&&sm(v,"Dropped file type is not supported"))}},C=x=>{Mu(v,x.target)&&_(x)},E=()=>{const x=ot.DOM,S=v.dom,O=document,T=v.inline?v.getBody():v.getDoc(),L=["drop","dragover"];W(L,I=>{x.bind(O,I,C),S.bind(T,I,_)}),v.on("remove",()=>{W(L,I=>{x.unbind(O,I,C),S.unbind(T,I,_)})})};v.on("init",()=>{Uo.setEditorTimeout(v,E,0)})})(p)})(e),(p=>{const v=Mi(()=>{if(!p.removed&&p.getBody().contains(document.activeElement)){const _=p.selection.getRng();if(_.collapsed){const C=Ep(p,_,!1);p.selection.setRng(C)}}},0);p.on("focus",()=>{v.throttle()}),p.on("blur",()=>{v.cancel()})})(e),(p=>{p.on("init",()=>{p.on("focusin",v=>{const _=v.target;if(yo(_)){const C=Zi(p.getBody(),_),E=wt(C)?C:_;p.selection.getNode()!==E&&sd(p,E).each(x=>p.selection.setRng(x))}})})})(e)),{showCaret:c,showBlockCaretContainer:p=>{p.hasAttribute("data-mce-caret")&&(mf(p),t.scrollIntoView(p))},hideFakeCaret:b,destroy:()=>{r.destroy(),a=null}}},YR=(e,t)=>{let n=t;for(let o=e.previousSibling;X(o);o=o.previousSibling)n+=o.data.length;return n},mx=(e,t,n,o,r)=>{if(X(n)&&(o<0||o>n.data.length))return[];const s=r&&X(n)?[YR(n,o)]:[o];let i=n;for(;i!==t&&i.parentNode;)s.push(e.nodeIndex(i,r)),i=i.parentNode;return i===t?s.reverse():[]},xh=(e,t,n,o,r,s,i=!1)=>({start:mx(e,t,n,o,i),end:mx(e,t,r,s,i)}),fx=(e,t)=>{const n=t.slice(),o=n.pop();return st(o)?Lt(n,(r,s)=>r.bind(i=>w.from(i.childNodes[s])),w.some(e)).bind(r=>X(r)&&(o<0||o>r.data.length)?w.none():w.some({node:r,offset:o})):w.none()},gx=(e,t)=>fx(e,t.start).bind(({node:n,offset:o})=>fx(e,t.end).map(({node:r,offset:s})=>{const i=document.createRange();return i.setStart(n,o),i.setEnd(r,s),i})),gl=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const o=t.parentNode;e.remove(t,X(t.firstChild)&&qs(t.firstChild.data)),gl(e,o,n)}},Dm=(e,t,n,o=!0)=>{const r=t.startContainer.parentNode,s=t.endContainer.parentNode;t.deleteContents(),o&&!n(t.startContainer)&&(X(t.startContainer)&&t.startContainer.data.length===0&&e.remove(t.startContainer),X(t.endContainer)&&t.endContainer.data.length===0&&e.remove(t.endContainer),gl(e,r,n),r!==s&&gl(e,s,n))},Pm=(e,t)=>w.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),kh=(e,t,n)=>{const o=e.dynamicPatternsLookup({text:n,block:t});return{...e,blockPatterns:Rb(o).concat(e.blockPatterns),inlinePatterns:Bb(o).concat(e.inlinePatterns)}},Sh=(e,t,n,o)=>{const r=e.createRng();return r.setStart(t,0),r.setEnd(n,o),r.toString()},px=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),Lm=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},hx=(e,t,n)=>{const o=gx(e.getRoot(),n).getOrDie("Unable to resolve path range"),r=o.startContainer,s=o.endContainer,i=o.endOffset===0?s:s.splitText(o.endOffset),a=o.startOffset===0?r:r.splitText(o.startOffset),l=a.parentNode;return{prefix:t,end:i.parentNode.insertBefore(px(e,t+"-end"),i),start:l.insertBefore(px(e,t+"-start"),a)}},bx=(e,t,n)=>{gl(e,e.get(t.prefix+"-end"),n),gl(e,e.get(t.prefix+"-start"),n)},Ah=e=>e.start.length===0,vx=(e,t,n,o)=>{const r=t.start;var s;return Yp(e,o.container,o.offset,(s=r,(i,a)=>{const l=i.data.substring(0,a),c=l.lastIndexOf(s.charAt(s.length-1)),d=l.lastIndexOf(s);return d!==-1?d+s.length:c!==-1?c+1:-1}),n).bind(i=>{var a,l;const c=(l=(a=n.textContent)===null||a===void 0?void 0:a.indexOf(r))!==null&&l!==void 0?l:-1;if(c!==-1&&i.offset>=c+r.length){const d=e.createRng();return d.setStart(i.container,i.offset-r.length),d.setEnd(i.container,i.offset),w.some(d)}{const d=i.offset-r.length;return Kp(i.container,d,n).map(u=>{const f=e.createRng();return f.setStart(u.container,u.offset),f.setEnd(i.container,i.offset),f}).filter(u=>u.toString()===r).orThunk(()=>vx(e,t,n,kr(i.container,0)))}})},XR=(e,t,n,o)=>{const r=e.dom,s=r.getRoot(),i=n.pattern,a=n.position.container,l=n.position.offset;return Kp(a,l-n.pattern.end.length,t).bind(c=>{const d=xh(r,s,c.container,c.offset,a,l,o);if(Ah(i))return w.some({matches:[{pattern:i,startRng:d,endRng:d}],position:c});{const u=Mm(e,n.remainingPatterns,c.container,c.offset,t,o),f=u.getOr({matches:[],position:c}),h=f.position;return((b,p,v,_,C,E=!1)=>{if(p.start.length===0&&!E){const x=b.createRng();return x.setStart(v,_),x.setEnd(v,_),w.some(x)}return Vp(v,_,C).bind(x=>vx(b,p,C,x).bind(S=>{var O;return E&&(S.endContainer===x.container&&S.endOffset===x.offset||x.offset===0&&((O=S.endContainer.textContent)===null||O===void 0?void 0:O.length)===S.endOffset)?w.none():w.some(S)}))})(r,i,h.container,h.offset,t,u.isNone()).map(b=>{const p=((v,_,C,E=!1)=>xh(v,_,C.startContainer,C.startOffset,C.endContainer,C.endOffset,E))(r,s,b,o);return{matches:f.matches.concat([{pattern:i,startRng:p,endRng:d}]),position:kr(b.startContainer,b.startOffset)}})}})},Mm=(e,t,n,o,r,s)=>{const i=e.dom;return Vp(n,o,i.getRoot()).bind(a=>{const l=Sh(i,r,n,o);for(let c=0;c<t.length;c++){const d=t[c];if(!jn(l,d.end))continue;const u=t.slice();u.splice(c,1);const f=XR(e,r,{pattern:d,remainingPatterns:u,position:a},s);if(f.isNone()&&o>0)return Mm(e,t,n,o-1,r,s);if(f.isSome())return f}return w.none()})},yx=(e,t,n)=>{e.selection.setRng(n),t.type==="inline-format"?W(t.format,o=>{e.formatter.apply(o)}):e.execCommand(t.cmd,!1,t.value)},_x=(e,t,n,o,r,s)=>{var i;return((a,l)=>{const c=cr(a,d=>Ve(l,u=>d.pattern.start===u.pattern.start&&d.pattern.end===u.pattern.end));return a.length===l.length?c?a:l:a.length>l.length?a:l})(Mm(e,r.inlinePatterns,n,o,t,s).fold(()=>[],a=>a.matches),Mm(e,(i=r.inlinePatterns,Sr(i,(a,l)=>l.end.length-a.end.length)),n,o,t,s).fold(()=>[],a=>a.matches))},Cx=(e,t)=>{if(t.length===0)return;const n=e.dom,o=e.selection.getBookmark(),r=((s,i)=>{const a=kc("mce_textpattern"),l=Kt(i,(c,d)=>{const u=hx(s,a+`_end${c.length}`,d.endRng);return c.concat([{...d,endMarker:u}])},[]);return Kt(l,(c,d)=>{const u=l.length-c.length-1,f=Ah(d.pattern)?d.endMarker:hx(s,a+`_start${u}`,d.startRng);return c.concat([{...d,startMarker:f}])},[])})(n,t);W(r,s=>{const i=n.getParent(s.startMarker.start,n.isBlock),a=l=>l===i;Ah(s.pattern)?((l,c,d,u)=>{const f=Lm(l.dom,d);Dm(l.dom,f,u),yx(l,c,f)})(e,s.pattern,s.endMarker,a):((l,c,d,u,f)=>{const h=l.dom,g=Lm(h,u),b=Lm(h,d);Dm(h,b,f),Dm(h,g,f);const p={prefix:d.prefix,start:d.end,end:u.start},v=Lm(h,p);yx(l,c,v)})(e,s.pattern,s.startMarker,s.endMarker,a),bx(n,s.endMarker,a),bx(n,s.startMarker,a)}),e.selection.moveToBookmark(o)},wx=(e,t,n)=>((o,r,s)=>{if(X(o)&&0>=o.length)return w.some(kr(o,0));{const i=ji(pm);return w.from(i.forwards(o,0,hm(o),s)).map(a=>kr(a.container,0))}})(t,0,t).map(o=>{const r=o.container;return N1(r,n.start.length,t).each(s=>{const i=e.createRng();i.setStart(r,0),i.setEnd(s.container,s.offset),Dm(e,i,a=>a===t)}),r}),Ex=e=>(t,n)=>{const o=t.dom,r=n.pattern,s=gx(o.getRoot(),n.range).getOrDie("Unable to resolve path range");return Pm(t,s).each(i=>{r.type==="block-format"?((a,l)=>{const c=l.get(a);return Xe(c)&&on(c).exists(d=>Re(d,"block"))})(r.format,t.formatter)&&t.undoManager.transact(()=>{e(t.dom,i,r),t.formatter.apply(r.format)}):r.type==="block-command"&&t.undoManager.transact(()=>{e(t.dom,i,r),t.execCommand(r.cmd,!1,r.value)})}),!0},xx=e=>(t,n)=>{const o=(s=>Sr(s,(i,a)=>a.start.length-i.start.length))(t),r=n.replace(nn," ");return en(o,s=>e(s,n,r))},kx=(e,t)=>(n,o,r,s,i)=>{var a;i===void 0&&(i=(a=o.textContent)!==null&&a!==void 0?a:"");const l=n.dom,c=Pn(n);return l.is(o,c)?e(r.blockPatterns,i).map(d=>t&&Q.trim(i).length===d.start.length?[]:[{pattern:d,range:xh(l,l.getRoot(),o,0,o,0,s)}]).getOr([]):[]},GR=Ex((e,t,n)=>{wx(e,t,n).each(o=>{const r=B(o),s=Sc(r);/^\s[^\s]/.test(s)&&Jh(r,s.slice(1))})}),QR=xx((e,t,n)=>t.indexOf(e.start)===0||n.indexOf(e.start)===0),ZR=kx(QR,!0),JR=Ex(wx),eB=xx((e,t,n)=>t===e.start||n===e.start),tB=kx(eB,!1),Sx=(e,t,n)=>{for(let o=0;o<e.length;o++)if(n(e[o],t))return!0;return!1},nB=e=>{const t=[",",".",";",":","!","?"],n=[32],o=()=>{return i=FS(e).filter(l=>l.type!=="inline-command"&&l.type!=="block-command"||e.queryCommandSupported(l.cmd)),a=jS(e),{inlinePatterns:Bb(i),blockPatterns:Rb(i),dynamicPatternsLookup:a};var i,a},r=()=>(i=>i.options.isSet("text_patterns_lookup"))(e);e.on("keydown",i=>{if(i.keyCode===13&&!le.modifierPressed(i)&&e.selection.isCollapsed()){const a=wf(o(),"enter");(a.inlinePatterns.length>0||a.blockPatterns.length>0||r())&&((l,c)=>((d,u)=>{const f=d.selection.getRng();return Pm(d,f).map(h=>{var g;const b=Math.max(0,f.startOffset),p=kh(u,h,(g=h.textContent)!==null&&g!==void 0?g:"");return{inlineMatches:_x(d,h,f.startContainer,b,p,!0),blockMatches:ZR(d,h,p,!0)}}).filter(({inlineMatches:h,blockMatches:g})=>g.length>0||h.length>0)})(l,c).fold(ft,({inlineMatches:d,blockMatches:u})=>(l.undoManager.add(),l.undoManager.extra(()=>{l.execCommand("mceInsertNewLine")},()=>{(g=>{g.insertContent(yn,{preserve_zwsp:!0})})(l),Cx(l,d),((g,b)=>{if(b.length===0)return;const p=g.selection.getBookmark();W(b,v=>GR(g,v)),g.selection.moveToBookmark(p)})(l,u);const f=l.selection.getRng(),h=Vp(f.startContainer,f.startOffset,l.dom.getRoot());l.execCommand("mceInsertNewLine"),h.each(g=>{const b=g.container;b.data.charAt(g.offset-1)===Si&&(b.deleteData(g.offset-1,1),gl(l.dom,b.parentNode,p=>p===l.dom.getRoot()))})}),!0)))(e,a)&&i.preventDefault()}},!0),e.on("keydown",i=>{if(i.keyCode===32&&e.selection.isCollapsed()){const a=wf(o(),"space");(a.blockPatterns.length>0||r())&&((l,c)=>((d,u)=>{const f=d.selection.getRng();return Pm(d,f).map(h=>{const g=Math.max(0,f.startOffset),b=Sh(d.dom,h,f.startContainer,g),p=kh(u,h,b);return tB(d,h,p,!1,b)}).filter(h=>h.length>0)})(l,c).fold(ft,d=>(l.undoManager.transact(()=>{((u,f)=>{W(f,h=>JR(u,h))})(l,d)}),!0)))(e,a)&&i.preventDefault()}},!0);const s=()=>{if(e.selection.isCollapsed()){const i=wf(o(),"space");(i.inlinePatterns.length>0||r())&&((a,l)=>{const c=a.selection.getRng();Pm(a,c).map(d=>{const u=Math.max(0,c.startOffset-1),f=Sh(a.dom,d,c.startContainer,u),h=kh(l,d,f),g=_x(a,d,c.startContainer,u,h,!1);g.length>0&&a.undoManager.transact(()=>{Cx(a,g)})})})(e,i)}};e.on("keyup",i=>{Sx(n,i,(a,l)=>a===l.keyCode&&!le.modifierPressed(l))&&s()}),e.on("keypress",i=>{Sx(t,i,(a,l)=>a.charCodeAt(0)===l.charCode)&&Uo.setEditorTimeout(e,s)})},oB=e=>{const t=Q.each,n=le.BACKSPACE,o=le.DELETE,r=e.dom,s=e.selection,i=e.parser,a=qe.browser,l=a.isFirefox(),c=a.isChromium()||a.isSafari(),d=qe.deviceType.isiPhone()||qe.deviceType.isiPad(),u=qe.os.isMacOS()||qe.os.isiOS(),f=(N,R)=>{try{e.getDoc().execCommand(N,!1,String(R))}catch{}},h=N=>N.isDefaultPrevented(),g=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},b=()=>{e.inline||r.bind(e.getDoc(),"mousedown mouseup",N=>{let R;if(N.target===e.getDoc().documentElement)if(R=s.getRng(),e.getBody().focus(),N.type==="mousedown"){if(Io(R.startContainer))return;s.placeCaretAt(N.clientX,N.clientY)}else s.setRng(R)})},p=()=>{Range.prototype.getClientRects||e.on("mousedown",N=>{if(!h(N)&&N.target.nodeName==="HTML"){const R=e.getBody();R.blur(),Uo.setEditorTimeout(e,()=>{R.focus()})}})},v=()=>{const N=Yb(e);e.on("click",R=>{const P=R.target;/^(IMG|HR)$/.test(P.nodeName)&&r.isEditable(P)&&(R.preventDefault(),e.selection.select(P),e.nodeChanged()),P.nodeName==="A"&&r.hasClass(P,N)&&P.childNodes.length===0&&r.isEditable(P.parentNode)&&(R.preventDefault(),s.select(P))})},_=()=>{e.on("keydown",N=>{if(!h(N)&&N.keyCode===n&&s.isCollapsed()&&s.getRng().startOffset===0){const R=s.getNode().previousSibling;if(R&&R.nodeName&&R.nodeName.toLowerCase()==="table")return N.preventDefault(),!1}return!0})},C=()=>{Vb(e)||e.on("BeforeExecCommand mousedown",()=>{f("StyleWithCSS",!1),f("enableInlineTableEditing",!1),qb(e)||f("enableObjectResizing",!1)})},E=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},x=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},S=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",N=>{let R;N.target.nodeName==="HTML"&&(R=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(R),e.selection.normalize(),e.nodeChanged())}))},O=()=>{u&&e.on("keydown",N=>{!le.metaKeyPressed(N)||N.shiftKey||N.keyCode!==37&&N.keyCode!==39||(N.preventDefault(),e.selection.getSel().modify("move",N.keyCode===37?"backward":"forward","lineboundary"))})},T=()=>{e.on("click",N=>{let R=N.target;do if(R.tagName==="A")return void N.preventDefault();while(R=R.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},L=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",N=>{N.preventDefault()})})},I=Te;return Yr(e)?(c&&(b(),v(),L(),g(),d&&(x(),S(),T())),l&&(p(),C(),E(),O())):(e.on("keydown",N=>{if(h(N)||N.keyCode!==le.BACKSPACE)return;let R=s.getRng();const P=R.startContainer,H=R.startOffset,G=r.getRoot();let Y=P;if(R.collapsed&&H===0){for(;Y.parentNode&&Y.parentNode.firstChild===Y&&Y.parentNode!==G;)Y=Y.parentNode;Y.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,Y),R=r.createRng(),R.setStart(P,0),R.setEnd(P,0),s.setRng(R))}}),(()=>{const N=R=>{const P=r.create("body"),H=R.cloneContents();return P.appendChild(H),s.serializer.serialize(P,{format:"html"})};e.on("keydown",R=>{const P=R.keyCode;if(!h(R)&&(P===o||P===n)&&e.selection.isEditable()){const H=e.selection.isCollapsed(),G=e.getBody();if(H&&!hr(e.schema,G)||!H&&!(Y=>{const me=N(Y),be=r.createRng();return be.selectNode(e.getBody()),me===N(be)})(e.selection.getRng()))return;R.preventDefault(),e.setContent(""),G.firstChild&&r.isBlock(G.firstChild)?e.selection.setCursorLocation(G.firstChild,0):e.selection.setCursorLocation(G,0),e.nodeChanged()}})})(),qe.windowsPhone||e.on("keyup focusin mouseup",N=>{le.modifierPressed(N)||(R=>{const P=R.getBody(),H=R.selection.getRng();return H.startContainer===H.endContainer&&H.startContainer===P&&H.startOffset===0&&H.endOffset===P.childNodes.length})(e)||s.normalize()},!0),c&&(b(),v(),e.on("init",()=>{f("DefaultParagraphSeparator",Pn(e))}),L(),_(),i.addNodeFilter("br",N=>{let R=N.length;for(;R--;)N[R].attr("class")==="Apple-interchange-newline"&&N[R].remove()}),d?(x(),S(),T()):g()),l&&(e.on("keydown",N=>{if(!h(N)&&N.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(s.isCollapsed()&&s.getRng().startOffset===0){const R=s.getNode(),P=R.previousSibling;if(R.nodeName==="HR")return r.remove(R),void N.preventDefault();P&&P.nodeName&&P.nodeName.toLowerCase()==="hr"&&(r.remove(P),N.preventDefault())}}}),p(),(()=>{const N=()=>{const P=r.getAttribs(s.getStart().cloneNode(!1));return()=>{const H=s.getStart();H!==e.getBody()&&(r.setAttrib(H,"style",null),t(P,G=>{H.setAttributeNode(G.cloneNode(!0))}))}},R=()=>!s.isCollapsed()&&r.getParent(s.getStart(),r.isBlock)!==r.getParent(s.getEnd(),r.isBlock);e.on("keypress",P=>{let H;return!(!(h(P)||P.keyCode!==8&&P.keyCode!==46)&&R()&&(H=N(),e.getDoc().execCommand("delete",!1),H(),P.preventDefault(),1))}),r.bind(e.getDoc(),"cut",P=>{if(!h(P)&&R()){const H=N();Uo.setEditorTimeout(e,()=>{H()})}})})(),C(),e.on("SetContent ExecCommand",N=>{N.type!=="setcontent"&&N.command!=="mceInsertLink"||t(r.select("a:not([data-mce-block])"),R=>{var P;let H=R.parentNode;const G=r.getRoot();if(H?.lastChild===R){for(;H&&!r.isBlock(H);){if(((P=H.parentNode)===null||P===void 0?void 0:P.lastChild)!==H||H===G)return;H=H.parentNode}r.add(H,"br",{"data-mce-bogus":1})}})}),E(),O(),_())),{refreshContentEditable:I,isHidden:()=>{if(!l||e.removed)return!1;const N=e.selection.getSel();return!N||!N.rangeCount||N.rangeCount===0}}},Nh=ot.DOM,rB=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,Th=e=>Ar(e,t=>Ft(t)===!1),Ax=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return Th({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_unsafe_embeds:t("convert_unsafe_embeds"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:rB(e),sandbox_iframes:t("sandbox_iframes"),sandbox_iframes_exclusions:Af(e),sanitize:t("xss_sanitization"),validate:!0,blob_cache:n,document:e.getDoc()})},Nx=e=>{const t=e.options.get;return Th({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},Oh=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,Tx=e=>{const t=Oh(e),n=Hb(e),o=e.contentCSS,r=()=>{t.unloadAll(o),e.inline||e.ui.styleSheetLoader.unloadAll(n)},s=()=>{e.removed?r():e.on("remove",r)};if(e.contentStyles.length>0){let l="";Q.each(e.contentStyles,c=>{l+=c+`\r
`}),e.dom.addStyle(l)}const i=Promise.all(((l,c,d)=>{const{pass:u,fail:f}=yt(c,b=>tinymce.Resource.has(vp(b))),h=u.map(b=>{const p=tinymce.Resource.get(vp(b));return se(p)?Promise.resolve(Oh(l).loadRawCss(b,p)):Promise.resolve()}),g=[...h,Oh(l).loadAll(f)];return l.inline?g:g.concat([l.ui.styleSheetLoader.loadAll(d)])})(e,o,n)).then(s).catch(s),a=Qk(e);return a&&((l,c)=>{const d=B(l.getBody()),u=Yl(Mr(d)),f=sn("style");tn(f,"type","text/css"),Xt(f,Dr(c)),Xt(u,f),l.on("remove",()=>{Nt(f)})})(e,a),i},Rh=e=>{e.removed!==!0&&((t=>{Yr(t)||t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"})})(e),(t=>{t.bindPendingEventDelegates(),t.initialized=!0,(o=>{o.dispatch("Init")})(t),t.focus(!0),(o=>{const r=o.dom.getRoot();o.inline||ku(o)&&o.selection.getStart(!0)!==r||Ln(r).each(s=>{const i=s.getNode(),a=Lo(i)?Ln(i).getOr(s):s;o.selection.setRng(a.toRange())})})(t),t.nodeChanged({initial:!0});const n=wS(t);Ge(n)&&n.call(t,t),(o=>{const r=xS(o);r&&Uo.setEditorTimeout(o,()=>{let s;s=r===!0?o:o.editorManager.get(r),s&&!s.destroyed&&(s.focus(),s.selection.scrollIntoView())},100)})(t)})(e))},Ox=e=>{const t=e.getElement();let n=e.getDoc();e.inline&&(Nh.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const o=e.getBody();o.disabled=!0,e.readonly=Vb(e),e._editableRoot=hS(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&Nh.getStyle(o,"position",!0)==="static"&&(o.style.position="relative"),o.contentEditable="true"),o.disabled=!1,e.editorUpload=xT(e),e.schema=fn(Nx(e)),e.dom=ot(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:Kk(e),referrerPolicy:xf(e),onSetAttrib:i=>{e.dispatch("SetAttrib",i)}}),e.parser=(i=>{const a=rl(Ax(i),i.schema);return a.addAttributeFilter("src,href,style,tabindex",(l,c)=>{const d=i.dom,u="data-mce-"+c;let f=l.length;for(;f--;){const h=l[f];let g=h.attr(c);if(g&&!h.attr(u)){if(g.indexOf("data:")===0||g.indexOf("blob:")===0)continue;c==="style"?(g=d.serializeStyle(d.parseStyle(g),h.name),g.length||(g=null),h.attr(u,g),h.attr(c,g)):c==="tabindex"?(h.attr(u,g),h.attr(c,null)):h.attr(u,i.convertURL(g,c,h.name))}}}),a.addNodeFilter("script",l=>{let c=l.length;for(;c--;){const d=l[c],u=d.attr("type")||"no/type";u.indexOf("mce-")!==0&&d.attr("type","mce-"+u)}}),US(i)&&a.addNodeFilter("#cdata",l=>{var c;let d=l.length;for(;d--;){const u=l[d];u.type=8,u.name="#comment",u.value="[CDATA["+i.dom.encode((c=u.value)!==null&&c!==void 0?c:"")+"]]"}}),a.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",l=>{let c=l.length;const d=i.schema.getNonEmptyElements();for(;c--;){const u=l[c];u.isEmpty(d)&&u.getAll("br").length===0&&u.append(new Wn("br",1))}}),a})(e),e.serializer=kC((i=>{const a=i.options.get;return{...Ax(i),...Nx(i),...Th({remove_trailing_brs:a("remove_trailing_brs"),pad_empty_with_br:a("pad_empty_with_br"),url_converter:a("url_converter"),url_converter_scope:a("url_converter_scope"),element_format:a("element_format"),entities:a("entities"),entity_encoding:a("entity_encoding"),indent:a("indent"),indent_after:a("indent_after"),indent_before:a("indent_before")})}})(e),e),e.selection=xC(e.dom,e.getWin(),e.serializer,e),e.annotator=Kv(e),e.formatter=$C(e),e.undoManager=UC(e),e._nodeChangeDispatcher=new vR(e),e._selectionOverrides=KR(e),(i=>{const a=br(),l=ln(!1),c=Cc(d=>{i.dispatch("longpress",{...d,type:"longpress"}),l.set(!0)},400);i.on("touchstart",d=>{Jw(d).each(u=>{c.cancel();const f={x:u.clientX,y:u.clientY,target:d.target};c.throttle(d),l.set(!1),a.set(f)})},!0),i.on("touchmove",d=>{c.cancel(),Jw(d).each(u=>{a.on(f=>{((h,g)=>{const b=Math.abs(h.clientX-g.x),p=Math.abs(h.clientY-g.y);return b>5||p>5})(u,f)&&(a.clear(),l.set(!1),i.dispatch("longpresscancel"))})})},!0),i.on("touchend touchcancel",d=>{c.cancel(),d.type!=="touchcancel"&&a.get().filter(u=>u.target.isEqualNode(d.target)).each(()=>{l.get()?d.preventDefault():i.dispatch("tap",{...d,type:"tap"})})},!0)})(e),(i=>{(a=>{a.on("click",l=>{a.dom.getParent(l.target,"details")&&l.preventDefault()})})(i),(a=>{a.parser.addNodeFilter("details",l=>{const c=VS(a);W(l,d=>{c==="expanded"?d.attr("open","open"):c==="collapsed"&&d.attr("open",null)})}),a.serializer.addNodeFilter("details",l=>{const c=KS(a);W(l,d=>{c==="expanded"?d.attr("open","open"):c==="collapsed"&&d.attr("open",null)})})})(i)})(e),(i=>{const a="contenteditable",l=" "+Q.trim($S(i))+" ",c=" "+Q.trim(Gb(i))+" ",d=t1(l),u=t1(c),f=zS(i);f.length>0&&i.on("BeforeSetContent",h=>{((g,b,p)=>{let v=b.length,_=p.content;if(p.format!=="raw"){for(;v--;)_=_.replace(b[v],dO(g,_,Gb(g)));p.content=_}})(i,f,h)}),i.parser.addAttributeFilter("class",h=>{let g=h.length;for(;g--;){const b=h[g];d(b)?b.attr(a,"true"):u(b)&&b.attr(a,"false")}}),i.serializer.addAttributeFilter(a,h=>{let g=h.length;for(;g--;){const b=h[g];if(!d(b)&&!u(b))continue;const p=b.attr("data-mce-content");f.length>0&&p?uO(f,p)?(b.name="#text",b.type=3,b.raw=!0,b.value=p):b.remove():b.attr(a,null)}})})(e),Yr(e)||((i=>{i.on("mousedown",a=>{a.detail>=3&&(a.preventDefault(),IR(i))})})(e),(i=>{nB(i)})(e));const r=bR(e);((i,a)=>{i.addCommand("delete",()=>{((l,c)=>{Zw(l,c,!1).fold(()=>{l.selection.isEditable()&&(Uu(l),wg(l))},te)})(i,a)}),i.addCommand("forwardDelete",()=>{((l,c)=>{Zw(l,c,!0).fold(()=>{l.selection.isEditable()&&wy(l)},te)})(i,a)})})(e,r),(i=>{i.on("NodeChange",()=>(a=>{const l=a.dom,c=a.selection,d=a.schema,u=d.getBlockElements(),f=c.getStart(),h=a.getBody();let g,b,p=null;const v=Pn(a);if(!f||!he(f))return;const _=h.nodeName.toLowerCase();if(!d.isValidChild(_,v.toLowerCase())||((E,x,S)=>Ve(Z0(B(S),B(x)),O=>Up(E,O.dom)))(u,h,f))return;if(h.firstChild===h.lastChild&&Tt(h.firstChild))return g=Hp(a),g.appendChild(za().dom),h.replaceChild(g,h.firstChild),a.selection.setCursorLocation(g,0),void a.nodeChanged();let C=h.firstChild;for(;C;)if(he(C)&&mc(d,C),lO(d,C)){if(cO(u,C)){b=C,C=C.nextSibling,l.remove(b);continue}if(!g){if(!p&&a.hasFocus()&&(p=sw(a.selection.getRng(),()=>document.createElement("span"))),!C.parentNode){C=null;break}g=Hp(a),h.insertBefore(g,C)}b=C,C=C.nextSibling,g.appendChild(b)}else g=null,C=C.nextSibling;p&&(a.selection.setRng(iw(p)),a.nodeChanged())})(i))})(e),(i=>{var a;const l=i.dom,c=Pn(i),d=(a=tS(i))!==null&&a!==void 0?a:"",u=(f,h)=>{if((p=>{if(qC(p)){const v=p.keyCode;return!WC(p)&&(le.metaKeyPressed(p)||p.altKey||v>=112&&v<=123||ee(TT,v))}return!1})(f))return;const g=i.getBody(),b=!(p=>qC(p)&&!(WC(p)||p.type==="keyup"&&p.keyCode===229))(f)&&((p,v,_)=>{if(p.isEmpty(v,void 0,{skipBogus:!1,includeZwsp:!0})){const C=v.firstElementChild;return!C||!p.getStyle(v.firstElementChild,"padding-left")&&!p.getStyle(v.firstElementChild,"padding-right")&&_===C.nodeName.toLowerCase()}return!1})(l,g,c);(l.getAttrib(g,HC)!==""!==b||h)&&(l.setAttrib(g,HC,b?d:null),((p,v)=>{p.dispatch("PlaceholderToggle",{state:v})})(i,b),i.on(b?"keydown":"keyup",u),i.off(b?"keyup":"keydown",u))};$n(d)&&i.on("init",f=>{u(f,!0),i.on("change SetContent ExecCommand",u),i.on("paste",h=>Uo.setEditorTimeout(i,()=>u(h)))})})(e),PR(e);const s=(i=>{const a=i;return(l=>At(l.plugins,"rtc").bind(c=>w.from(c.setup)))(i).fold(()=>(a.rtcInstance=vC(i),w.none()),l=>(a.rtcInstance=(()=>{const c=K(null),d=K("");return{init:{bindEvents:Te},undoManager:{beforeChange:Te,add:c,undo:c,redo:c,clear:Te,reset:Te,hasUndo:ft,hasRedo:ft,transact:c,ignore:Te,extra:Te},formatter:{match:ft,matchAll:K([]),matchNode:K(void 0),canApply:ft,closest:d,apply:Te,remove:Te,toggle:Te,formatChanged:K({unbind:Te})},editor:{getContent:d,setContent:K({content:"",html:""}),insertContent:K(""),addVisual:Te},selection:{getContent:d},autocompleter:{addDecoration:Te,removeDecoration:Te},raw:{getModel:K(w.none())}}})(),w.some(()=>l().then(c=>(a.rtcInstance=(d=>{const u=C=>dt(C)?C:{},{init:f,undoManager:h,formatter:g,editor:b,selection:p,autocompleter:v,raw:_}=d;return{init:{bindEvents:f.bindEvents},undoManager:{beforeChange:h.beforeChange,add:h.add,undo:h.undo,redo:h.redo,clear:h.clear,reset:h.reset,hasUndo:h.hasUndo,hasRedo:h.hasRedo,transact:(C,E,x)=>h.transact(x),ignore:(C,E)=>h.ignore(E),extra:(C,E,x,S)=>h.extra(x,S)},formatter:{match:(C,E,x,S)=>g.match(C,u(E),S),matchAll:g.matchAll,matchNode:g.matchNode,canApply:C=>g.canApply(C),closest:C=>g.closest(C),apply:(C,E,x)=>g.apply(C,u(E)),remove:(C,E,x,S)=>g.remove(C,u(E)),toggle:(C,E,x)=>g.toggle(C,u(E)),formatChanged:(C,E,x,S,O)=>g.formatChanged(E,x,S,O)},editor:{getContent:C=>b.getContent(C),setContent:(C,E)=>({content:b.setContent(C,E),html:""}),insertContent:(C,E)=>(b.insertContent(C),""),addVisual:b.addVisual},selection:{getContent:(C,E)=>p.getContent(E)},autocompleter:{addDecoration:v.addDecoration,removeDecoration:v.removeDecoration},raw:{getModel:()=>w.some(_.getRawModel())}}})(c),c.rtc.isRemote)))))})(e);(i=>{const a=i.getDoc(),l=i.getBody();(u=>{u.dispatch("PreInit")})(i),kS(i)||(a.body.spellcheck=!1,Nh.setAttrib(l,"spellcheck","false")),i.quirks=oB(i),(u=>{u.dispatch("PostRender")})(i);const c=Zk(i);c!==void 0&&(l.dir=c);const d=SS(i);d&&i.on("BeforeSetContent",u=>{Q.each(d,f=>{u.content=u.content.replace(f,h=>"<!--mce:protected "+escape(h)+"-->")})}),i.on("SetContent",()=>{i.addVisual(i.getBody())}),i.on("compositionstart compositionend",u=>{i.composing=u.type==="compositionstart"})})(e),(i=>{const a=XS(i);se(GS(i))||!Ft(a)&&(l=>(c=>c.toLowerCase()==="gpl")(l)||(c=>c.length>=64&&c.length<=255)(l)?"VALID":"INVALID")(a)!=="INVALID"||console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")})(e),s.fold(()=>{const i=(a=>{let l=!1;const c=setTimeout(()=>{l||a.setProgressState(!0)},500);return()=>{clearTimeout(c),l=!0,a.setProgressState(!1)}})(e);Tx(e).then(()=>{Rh(e),i()})},i=>{e.setProgressState(!0),Tx(e).then(()=>{i().then(a=>{e.setProgressState(!1),Rh(e),yC(e)},a=>{e.notificationManager.open({type:"error",text:String(a)}),Rh(e),yC(e)})})})},sB=St,Bh=ot.DOM,Rx=ot.DOM,Bx=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),Dx=e=>{const t=e.getElement();return e.inline?Bx(null):(n=>{const o=Rx.create("div");return Rx.insertAfter(o,n),Bx(o,o)})(t)},iB=async e=>{e.dispatch("ScriptsLoaded"),(n=>{const o=Q.trim($b(n)),r=n.ui.registry.getAll().icons,s={...rm.get("default").icons,...rm.get(o).icons};Ct(s,(i,a)=>{Re(r,a)||n.ui.registry.addIcon(a,i)})})(e),(n=>{const o=Wa(n);if(se(o)){const r=ea.get(o);n.theme=r(n,ea.urls[o])||{},Ge(n.theme.init)&&n.theme.init(n,ea.urls[o]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(e),(n=>{const o=kf(n),r=sl.get(o);n.model=r(n,sl.urls[o])})(e),(n=>{const o=[];W(bu(n),r=>{((s,i,a)=>{const l=il.get(a),c=il.urls[a]||s.documentBaseUrl.replace(/\/$/,"");if(a=Q.trim(a),l&&Q.inArray(i,a)===-1){if(s.plugins[a])return;try{const d=l(s,c)||{};s.plugins[a]=d,Ge(d.init)&&(d.init(s,c),i.push(a))}catch(d){((u,f,h)=>{const g=_o.translate(["Failed to initialize plugin: {0}",f]);Xv(u,"PluginLoadError",{message:g}),im(g,h),sm(u,g)})(s,a,d)}}})(n,o,(s=>s.replace(/^\-/,""))(r))})})(e);const t=await(n=>{const o=n.getElement();return n.orgDisplay=o.style.display,se(Wa(n))?(r=>{const s=r.theme.renderUI;return s?s():Dx(r)})(n):Ge(Wa(n))?(r=>{const s=r.getElement(),i=Wa(r)(r,s);return i.editorContainer.nodeType&&(i.editorContainer.id=i.editorContainer.id||r.id+"_parent"),i.iframeContainer&&i.iframeContainer.nodeType&&(i.iframeContainer.id=i.iframeContainer.id||r.id+"_iframecontainer"),i.height=i.iframeHeight?i.iframeHeight:s.offsetHeight,i})(n):Dx(n)})(e);((n,o)=>{const r={show:w.from(o.show).getOr(Te),hide:w.from(o.hide).getOr(Te),isEnabled:w.from(o.isEnabled).getOr(St),setEnabled:s=>{n.mode.isReadOnly()||w.from(o.setEnabled).each(i=>i(s))}};n.ui={...n.ui,...r}})(e,w.from(t.api).getOr({})),e.editorContainer=t.editorContainer,(n=>{n.contentCSS=n.contentCSS.concat((o=>PC(o,Gk(o)))(n),(o=>PC(o,Hb(o)))(n))})(e),e.inline?Ox(e):((n,o)=>{((r,s)=>{const i=qe.browser.isFirefox()?Xb(r):"Rich Text Area",a=r.translate(i),l=Xn(B(r.getElement()),"tabindex").bind(Bs),c=((d,u,f,h)=>{const g=sn("iframe");return h.each(b=>tn(g,"tabindex",b)),Qo(g,f),Qo(g,{id:d+"_ifr",frameBorder:"0",allowTransparency:"true",title:u}),Fs(g,"tox-edit-area__iframe"),g})(r.id,a,Rk(r),l).dom;c.onload=()=>{c.onload=null,r.dispatch("load")},r.contentAreaContainer=s.iframeContainer,r.iframeElement=c,r.iframeHTML=(d=>{let u=Bk(d)+"<html><head>";Mb(d)!==d.documentBaseUrl&&(u+='<base href="'+d.documentBaseURI.getURI()+'" />'),u+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const f=Dk(d),h=Pk(d),g=d.translate(Xb(d));return Ib(d)&&(u+='<meta http-equiv="Content-Security-Policy" content="'+Ib(d)+'" />'),u+=`</head><body id="${f}" class="mce-content-body ${h}" data-id="${d.id}" aria-label="${g}"><br></body></html>`,u})(r),Bh.add(s.iframeContainer,c)})(n,o),o.editorContainer&&(o.editorContainer.style.display=n.orgDisplay,n.hidden=Bh.isHidden(o.editorContainer)),n.getElement().style.display="none",Bh.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(r=>{const s=r.iframeElement,i=()=>{r.contentDocument=s.contentDocument,Ox(r)};if(qS(r)||qe.browser.isFirefox()){const l=r.getDoc();l.open(),l.write(r.iframeHTML),l.close(),i()}else{const l=(a=B(s),Zm(a,"load",sB,()=>{l.unbind(),i()}));s.srcdoc=r.iframeHTML}var a})(n)})(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},na=ot.DOM,Px=e=>e.charAt(0)==="-",Lx=(e,t,n)=>w.from(t).filter(o=>$n(o)&&!rm.has(o)).map(o=>({url:`${e.editorManager.baseURL}/icons/${o}/icons${n}.js`,name:w.some(o)})),aB=(e,t)=>{const n=or.ScriptLoader,o=()=>{!e.removed&&(r=>{const s=Wa(r);return!se(s)||Z(ea.get(s))})(e)&&(r=>{const s=kf(r);return Z(sl.get(s))})(e)&&iB(e)};((r,s)=>{const i=Wa(r);if(se(i)&&!Px(i)&&!Re(ea.urls,i)){const a=oS(r),l=a?r.documentBaseURI.toAbsolute(a):`themes/${i}/theme${s}.js`;ea.load(i,l).catch(()=>{((c,d,u)=>{od(c,"ThemeLoadError",rd("theme",d,u))})(r,l,i)})}})(e,t),((r,s)=>{const i=kf(r);if(i!=="plugin"&&!Re(sl.urls,i)){const a=rS(r),l=se(a)?r.documentBaseURI.toAbsolute(a):`models/${i}/model${s}.js`;sl.load(i,l).catch(()=>{((c,d,u)=>{od(c,"ModelLoadError",rd("model",d,u))})(r,l,i)})}})(e,t),((r,s)=>{const i=zb(s),a=Yk(s);if(!_o.hasCode(i)&&i!=="en"){const l=$n(a)?a:`${s.editorManager.baseURL}/langs/${i}.js`;r.add(l).catch(()=>{((c,d,u)=>{od(c,"LanguageLoadError",rd("language",d,u))})(s,l,i)})}})(n,e),((r,s,i)=>{const a=Lx(s,"default",i),l=(c=>w.from(Uk(c)).filter($n).map(d=>({url:d,name:w.none()})))(s).orThunk(()=>Lx(s,$b(s),""));W((c=>{const d=[],u=f=>{d.push(f)};for(let f=0;f<c.length;f++)c[f].each(u);return d})([a,l]),c=>{r.add(c.url).catch(()=>{((d,u,f)=>{od(d,"IconsLoadError",rd("icons",u,f))})(s,c.url,c.name.getOrUndefined())})})})(n,e,t),((r,s)=>{const i=(a,l)=>{il.load(a,l).catch(()=>{((c,d,u)=>{od(c,"PluginLoadError",rd("plugin",d,u))})(r,l,a)})};Ct(bS(r),(a,l)=>{i(l,a),r.options.set("plugins",bu(r).concat(l))}),W(bu(r),a=>{!(a=Q.trim(a))||il.urls[a]||Px(a)||i(a,`plugins/${a}/plugin${s}.js`)})})(e,t),n.loadQueue().then(o,o)},Mx=Ao().deviceType,Ix=Mx.isPhone(),lB=Mx.isTablet(),Cd=e=>{if(Rt(e))return[];{const t=Xe(e)?e:e.split(/[ ,]/),n=Me(t,mr);return ue(n,$n)}},cB=(e,t)=>{const n=((s,i)=>{const a={},l={};return wl(s,(c,d)=>ee(e,d),Cl(a),Cl(l)),{t:a,f:l}})(t);return o=n.t,r=n.f,{sections:K(o),options:K(r)};var o,r},Dh=(e,t)=>Re(e.sections(),t),dB=(e,t)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:At(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...t?{menubar:!1}:{}}),uB=(e,t)=>{var n;const o=(n=t.external_plugins)!==null&&n!==void 0?n:{};return e&&e.external_plugins?Q.extend({},e.external_plugins,o):o},mB=(e,t,n,o,r)=>{var s;const i=e?{mobile:dB((s=r.mobile)!==null&&s!==void 0?s:{},t)}:{},a=cB(["mobile"],Zp(i,r)),l=Q.extend(n,o,a.options(),((c,d)=>c&&Dh(d,"mobile"))(e,a)?((c,d,u={})=>{const f=c.sections(),h=At(f,d).getOr({});return Q.extend({},u,h)})(a,"mobile"):{},{external_plugins:uB(o,a.options())});return((c,d,u,f)=>{const h=Cd(u.forced_plugins),g=Cd(f.plugins),b=((_,C)=>Dh(_,C)?_.sections()[C]:{})(d,"mobile"),p=((_,C,E,x)=>_&&Dh(C,"mobile")?x:E)(c,d,g,b.plugins?Cd(b.plugins):g),v=((_,C)=>[...Cd(_),...Cd(C)])(h,p);return Q.extend(f,{forced_plugins:h,plugins:v})})(e,a,o,l)},fB=e=>{(t=>{const n=o=>()=>{W("left,center,right,justify".split(","),r=>{o!==r&&t.formatter.remove("align"+r)}),o!=="none"&&((r,s)=>{t.formatter.toggle(r,void 0),t.nodeChanged()})("align"+o)};t.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(e),(t=>{const n=o=>()=>{const r=t.selection,s=r.isCollapsed()?[t.dom.getParent(r.getNode(),t.dom.isBlock)]:r.getSelectedBlocks();return Ve(s,i=>Z(t.formatter.matchNode(i,o)))};t.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(e)},gB=(e,t)=>{const n=e.selection,o=e.dom;return/^ | $/.test(t)?((r,s,i,a)=>{const l=B(r.getRoot());return i=Yc(l,U.fromRangeStart(s),a)?i.replace(/^ /,"&nbsp;"):i.replace(/^&nbsp;/," "),Xc(l,U.fromRangeEnd(s),a)?i.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):i.replace(/&nbsp;(<br( \/)?>)?$/," ")})(o,n.getRng(),t,e.schema):t},Im=(e,t)=>{if(e.selection.isEditable()){const{content:n,details:o}=(r=>{if(typeof r!="string"){const s=Q.extend({paste:r.paste,data:{paste:r.paste}},r);return{content:r.content,details:s}}return{content:r,details:{}}})(t);cp(e,{...o,content:gB(e,n),format:"html",set:!1,selection:!0}).each(r=>{const s=((i,a,l)=>hp(i).editor.insertContent(a,l))(e,r.content,o);dp(e,s,r),e.addVisual()})}},pB={"font-size":"size","font-family":"face"},hB=_i("font"),Fx=e=>(t,n)=>w.from(n).map(B).filter(zn).bind(o=>((r,s,i)=>$g(B(i),a=>(l=>Hn(l,r).orThunk(()=>hB(l)?At(pB,r).bind(c=>Xn(l,c)):w.none()))(a),a=>tt(B(s),a)))(e,t,o.dom).or(((r,s)=>w.from(ot.DOM.getStyle(s,r,!0)))(e,o.dom))).getOr(""),bB=Fx("font-size"),vB=Le(e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),Fx("font-family")),yB=e=>Ln(e.getBody()).bind(t=>{const n=t.container();return w.from(X(n)?n.parentNode:n)}),Ph=(e,t)=>((n,o)=>(r=>w.from(r.selection.getRng()).bind(s=>{const i=r.getBody();return s.startContainer===i&&s.startOffset===0?w.none():w.from(r.selection.getStart(!0))}))(n).orThunk(ae(yB,n)).map(B).filter(zn).bind(o))(e,Ne(w.some,t)),jx=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const o=(s=>Q.explode(s.options.get("font_size_style_values")))(e),r=(s=>Q.explode(s.options.get("font_size_classes")))(e);return r.length>0?r[n-1]||t:o[n-1]||t}return t}return t},_B=e=>{const t=e.split(/\s*,\s*/);return Me(t,n=>n.indexOf(" ")===-1||_t(n,'"')||_t(n,"'")?n:`'${n}'`).join(",")},$x=(e,t)=>{const n=e.dom,o=e.selection.getRng(),r=t?e.selection.getStart():e.selection.getEnd(),s=t?o.startContainer:o.endContainer,i=hd(n,s);if(!i||!i.isContentEditable)return;const a=t?Bn:Zo,l=Pn(e);((c,d,u,f)=>{const h=c.dom,g=p=>h.isBlock(p)&&p.parentElement===u,b=g(d)?d:h.getParent(f,g,u);return w.from(b).map(B)})(e,r,i,s).each(c=>{const d=rE(e,s,c.dom,i,!1,l);a(c,B(d)),e.selection.setCursorLocation(d,0),e.dispatch("NewBlock",{newBlock:d}),pd(e,"insertParagraph")})},CB=e=>{fB(e),(t=>{t.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=t.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n!=="paste"||o.queryCommandEnabled(n)||(r=!0),r||!o.queryCommandSupported(n)){let s=t.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(qe.os.isMacOS()||qe.os.isiOS())&&(s=s.replace(/Ctrl\+/g,"\u2318+")),t.notificationManager.open({text:s,type:"error"})}}})})(e),(t=>{t.editorCommands.addCommands({mceAddUndoLevel:()=>{t.undoManager.add()},mceEndUndoLevel:()=>{t.undoManager.add()},Undo:()=>{t.undoManager.undo()},Redo:()=>{t.undoManager.redo()}})})(e),(t=>{t.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let s=0;t.dom.getParent(t.selection.getNode(),i=>!he(i)||s++!==r||(t.selection.select(i),!1),t.getBody())},mceSelectNode:(n,o,r)=>{t.selection.select(r)},selectAll:()=>{const n=t.dom.getParent(t.selection.getStart(),vo);if(n){const o=t.dom.createRng();o.selectNodeContents(n),t.selection.setRng(o)}}})})(e),(t=>{t.editorCommands.addCommands({mceCleanup:()=>{const n=t.selection.getBookmark();t.setContent(t.getContent()),t.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{Im(t,t.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{t.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{Im(t,t.dom.encode(r))},insertHTML:(n,o,r)=>{Im(t,r)},mceInsertContent:(n,o,r)=>{Im(t,r)},mceSetContent:(n,o,r)=>{t.setContent(r)},mceReplaceContent:(n,o,r)=>{t.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,t.selection.getContent({format:"text"})))},mceNewDocument:()=>{t.setContent(OS(t))}})})(e),(t=>{const n=(o,r,s)=>{const i=se(s)?{href:s}:s,a=t.dom.getParent(t.selection.getNode(),"a");dt(i)&&se(i.href)&&(i.href=i.href.replace(/ /g,"%20"),a&&i.href||t.formatter.remove("link"),i.href&&t.formatter.apply("link",i,a))};t.editorCommands.addCommands({unlink:()=>{if(t.selection.isEditable()){if(t.selection.isCollapsed()){const o=t.dom.getParent(t.selection.getStart(),"a");return void(o&&t.dom.remove(o,!0))}t.formatter.remove("link")}},mceInsertLink:n,createLink:n})})(e),(t=>{t.editorCommands.addCommands({Indent:()=>{(n=>{Xw(n,"indent")})(t)},Outdent:()=>{Gw(t)}}),t.editorCommands.addCommands({Outdent:()=>Vw(t)},"state")})(e),(t=>{t.editorCommands.addCommands({InsertNewBlockBefore:()=>{(n=>{$x(n,!0)})(t)},InsertNewBlockAfter:()=>{(n=>{$x(n,!1)})(t)}})})(e),(t=>{t.editorCommands.addCommands({insertParagraph:()=>{Am(lE,t)},mceInsertNewLine:(n,o,r)=>{pE(t,r)},InsertLineBreak:(n,o,r)=>{Am(uE,t)}})})(e),(t=>{(n=>{const o=(r,s)=>{n.formatter.toggle(r,s),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>{o(r)},"ForeColor,HiliteColor":(r,s,i)=>{o(r,{value:i})},BackColor:(r,s,i)=>{o("hilitecolor",{value:i})},FontName:(r,s,i)=>{((a,l)=>{const c=jx(a,l);a.formatter.toggle("fontname",{value:_B(c)}),a.nodeChanged()})(n,i)},FontSize:(r,s,i)=>{((a,l)=>{a.formatter.toggle("fontsize",{value:jx(a,l)}),a.nodeChanged()})(n,i)},LineHeight:(r,s,i)=>{((a,l)=>{a.formatter.toggle("lineheight",{value:String(l)}),a.nodeChanged()})(n,i)},Lang:(r,s,i)=>{var a;o(r,{value:i.code,customValue:(a=i.customCode)!==null&&a!==void 0?a:null})},RemoveFormat:r=>{n.formatter.remove(r)},mceBlockQuote:()=>{o("blockquote")},FormatBlock:(r,s,i)=>{o(se(i)?i:"p")},mceToggleFormat:(r,s,i)=>{o(i)}})})(t),(n=>{const o=r=>n.formatter.match(r);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>o(r),mceBlockQuote:()=>o("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>(r=>Ph(r,s=>vB(r.getBody(),s.dom)).getOr(""))(n)),n.editorCommands.addQueryValueHandler("FontSize",()=>(r=>Ph(r,s=>bB(r.getBody(),s.dom)).getOr(""))(n)),n.editorCommands.addQueryValueHandler("LineHeight",()=>(r=>Ph(r,s=>{const i=B(r.getBody());return $g(s,l=>Hn(l,"line-height"),ae(tt,i)).getOrThunk(()=>{const l=parseFloat(Do(s,"line-height")),c=parseFloat(Do(s,"font-size"));return String(l/c)})}).getOr(""))(n))})(t)})(e),(t=>{t.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const s=r??t.selection.getNode();if(s!==t.getBody()){const i=t.selection.getBookmark();t.dom.remove(s,!0),t.selection.moveToBookmark(i)}},mcePrint:()=>{t.getWin().print()},mceFocus:(n,o,r)=>{((s,i)=>{s.removed||(i?dg(s):(a=>{const l=a.selection,c=a.getBody();let d=l.getRng();a.quirks.refreshContentEditable();const u=h=>{ig(h).each(g=>{h.selection.setRng(g),d=g})};!tl(a)&&a.hasEditableRoot()&&u(a);const f=((h,g)=>h.dom.getParent(g,b=>h.dom.getContentEditable(b)==="true"))(a,l.getNode());if(f&&a.dom.isChildOf(f,c))return((h,g)=>h.dom.getParent(g,b=>h.dom.getContentEditable(b)==="false")!==null)(a,f)||Iu(c),Iu(f),a.hasEditableRoot()||u(a),S0(a,d),void dg(a);a.inline||(qe.browser.isOpera()||Iu(c),a.getWin().focus()),(qe.browser.isFirefox()||a.inline)&&(Iu(c),S0(a,d)),dg(a)})(s))})(t,r===!0)},mceToggleVisualAid:()=>{t.hasVisual=!t.hasVisual,t.addVisual()}})})(e)},wB=["toggleview"],zx=e=>ee(wB,e.toLowerCase());class Ux{constructor(t){this.commands={state:{},exec:{},value:{}},this.editor=t}execCommand(t,n=!1,o,r){const s=this.editor,i=t.toLowerCase(),a=r?.skip_focus;if(s.removed||(i!=="mcefocus"&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(i)||a?(c=>{ig(c).each(d=>c.selection.setRng(d))})(s):s.focus()),s.dispatch("BeforeExecCommand",{command:t,ui:n,value:o}).isDefaultPrevented()))return!1;const l=this.commands.exec[i];return!!Ge(l)&&(l(i,n,o),s.dispatch("ExecCommand",{command:t,ui:n,value:o}),!0)}queryCommandState(t){if(!zx(t)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=t.toLowerCase(),o=this.commands.state[n];return!!Ge(o)&&o(n)}queryCommandValue(t){if(!zx(t)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=t.toLowerCase(),o=this.commands.value[n];return Ge(o)?o(n):""}addCommands(t,n="exec"){const o=this.commands;Ct(t,(r,s)=>{W(s.toLowerCase().split(","),i=>{o[n][i]=r})})}addCommand(t,n,o){const r=t.toLowerCase();this.commands.exec[r]=(s,i,a)=>n.call(o??this.editor,i,a)}queryCommandSupported(t){const n=t.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(t,n,o){this.commands.state[t.toLowerCase()]=()=>n.call(o??this.editor)}addQueryValueHandler(t,n,o){this.commands.value[t.toLowerCase()]=()=>n.call(o??this.editor)}}const oa="data-mce-contenteditable",Lh=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},Fm=(e,t)=>{e.dom.contentEditable=t?"true":"false"},ra=e=>e.readonly,Hx=e=>{e.parser.addAttributeFilter("contenteditable",t=>{ra(e)&&W(t,n=>{n.attr(oa,n.attr("contenteditable")),n.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(oa,t=>{ra(e)&&W(t,n=>{n.attr("contenteditable",n.attr(oa))})}),e.serializer.addTempAttr(oa)},EB=["copy"],xB=Q.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Mh{static isNative(t){return!!xB[t.toLowerCase()]}constructor(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||ft}fire(t,n){return this.dispatch(t,n)}dispatch(t,n){const o=t.toLowerCase(),r=Qn(o,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(r);const s=this.bindings[o];if(s)for(let i=0,a=s.length;i<a;i++){const l=s[i];if(!l.removed){if(l.once&&this.off(o,l.func),r.isImmediatePropagationStopped())return r;if(l.func.call(this.scope,r)===!1)return r.preventDefault(),r}}return r}on(t,n,o,r){if(n===!1&&(n=ft),n){const s={func:n,removed:!1};r&&Q.extend(s,r);const i=t.toLowerCase().split(" ");let a=i.length;for(;a--;){const l=i[a];let c=this.bindings[l];c||(c=[],this.toggleEvent(l,!0)),c=o?[s,...c]:[...c,s],this.bindings[l]=c}}return this}off(t,n){if(t){const o=t.toLowerCase().split(" ");let r=o.length;for(;r--;){const s=o[r];let i=this.bindings[s];if(!s)return Ct(this.bindings,(a,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]}),this;if(i){if(n){const a=yt(i,l=>l.func===n);i=a.fail,this.bindings[s]=i,W(a.pass,l=>{l.removed=!0})}else i.length=0;i.length||(this.toggleEvent(t,!1),delete this.bindings[s])}}}else Ct(this.bindings,(o,r)=>{this.toggleEvent(r,!1)}),this.bindings={};return this}once(t,n,o){return this.on(t,n,o,{once:!0})}has(t){t=t.toLowerCase();const n=this.bindings[t];return!(!n||n.length===0)}}const wd=e=>(e._eventDispatcher||(e._eventDispatcher=new Mh({scope:e,toggleEvent:(t,n)=>{Mh.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),Ih={fire(e,t,n){return this.dispatch(e,t,n)},dispatch(e,t,n){const o=this;if(o.removed&&e!=="remove"&&e!=="detach")return Qn(e.toLowerCase(),t??{},o);const r=wd(o).dispatch(e,t);if(n!==!1&&o.parent){let s=o.parent();for(;s&&!r.isPropagationStopped();)s.dispatch(e,r,!1),s=s.parent?s.parent():void 0}return r},on(e,t,n){return wd(this).on(e,t,n)},off(e,t){return wd(this).off(e,t)},once(e,t){return wd(this).once(e,t)},hasEventListeners(e){return wd(this).has(e)}},jm=ot.DOM;let sa;const $m=(e,t)=>{if(t==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;const n=Wb(e);return n?(e.eventRoot||(e.eventRoot=jm.select(n)[0]),e.eventRoot):e.getBody()},qx=(e,t,n)=>{(o=>!o.hidden&&!ra(o))(e)?e.dispatch(t,n):ra(e)&&((o,r)=>{if((s=>s.type==="click")(r)&&!le.metaKeyPressed(r)){const s=B(r.target);((i,a)=>cs(a,"a",l=>tt(l,B(i.getBody()))).bind(l=>Xn(l,"href")))(o,s).each(i=>{if(r.preventDefault(),/^#/.test(i)){const a=o.dom.select(`${i},[name="${os(i,"#")}"]`);a.length&&o.selection.scrollIntoView(a[0],!0)}else window.open(i,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else(s=>ee(EB,s.type))(r)&&o.dispatch(r.type,r)})(e,n)},Wx=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const n=$m(e,t);if(Wb(e)){if(sa||(sa={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||sa&&(Ct(sa,(r,s)=>{e.dom.unbind($m(e,s))}),sa=null)})),sa[t])return;const o=r=>{const s=r.target,i=e.editorManager.get();let a=i.length;for(;a--;){const l=i[a].getBody();(l===s||jm.isChildOf(s,l))&&qx(i[a],t,r)}};sa[t]=o,jm.bind(n,t,o)}else{const o=r=>{qx(e,t,r)};jm.bind(n,t,o),e.delegates[t]=o}},Vx={...Ih,bindPendingEventDelegates(){const e=this;Q.each(e._pendingNativeEvents,t=>{Wx(e,t)})},toggleNativeEvent(e,t){const n=this;e!=="focus"&&e!=="blur"&&(n.removed||(t?n.initialized?Wx(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.delegates&&(n.dom.unbind($m(n,e),e,n.delegates[e]),delete n.delegates[e])))},unbindAllNativeEvents(){const e=this,t=e.getBody(),n=e.dom;e.delegates&&(Ct(e.delegates,(o,r)=>{e.dom.unbind($m(e,r),r,o)}),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}},kB=e=>se(e)?{value:e.split(/[ ,]/),valid:!0}:hn(e,se)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},Kx=(e,t)=>e+(Rs(t.message)?"":`. ${t.message}`),Yx=e=>e.valid,Fh=(e,t,n="")=>{const o=t(e);return Tn(o)?o?{value:e,valid:!0}:{valid:!1,message:n}:o},SB=["design","readonly"],Xx=(e,t,n,o)=>{const r=n[t.get()],s=n[o];try{s.activate()}catch(i){return void console.error(`problem while activating editor mode ${o}:`,i)}r.deactivate(),r.editorReadOnly!==s.editorReadOnly&&((i,a)=>{const l=B(i.getBody());((c,d,u)=>{Ca(c,d)&&!u?js(c,d):u&&Fs(c,d)})(l,"mce-content-readonly",a),a?(i.selection.controlSelection.hideResizeRect(),i._selectionOverrides.hideFakeCaret(),(c=>{w.from(c.selection.getNode()).each(d=>{d.removeAttribute("data-mce-selected")})})(i),i.readonly=!0,Fm(l,!1),W(vn(l,'*[contenteditable="true"]'),c=>{tn(c,oa,"true"),Fm(c,!1)})):(i.readonly=!1,i.hasEditableRoot()&&Fm(l,!0),W(vn(l,`*[${oa}="true"]`),c=>{rn(c,oa),Fm(c,!0)}),Lh(i,"StyleWithCSS",!1),Lh(i,"enableInlineTableEditing",!1),Lh(i,"enableObjectResizing",!1),A0(i)&&i.focus(),(c=>{c.selection.setRng(c.selection.getRng())})(i),i.nodeChanged())})(e,s.editorReadOnly),t.set(o),((i,a)=>{i.dispatch("SwitchMode",{mode:a})})(e,o)},jh=Q.each,$h=Q.explode,AB={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},Gx=Q.makeMap("alt,ctrl,shift,meta,access"),NB=e=>{const t={},n=qe.os.isMacOS()||qe.os.isiOS();jh($h(e.toLowerCase(),"+"),s=>{(i=>i in Gx)(s)?t[s]=!0:/^[0-9]{2,}$/.test(s)?t.keyCode=parseInt(s,10):(t.charCode=s.charCodeAt(0),t.keyCode=AB[s]||s.toUpperCase().charCodeAt(0))});const o=[t.keyCode];let r;for(r in Gx)t[r]?o.push(r):t[r]=!1;return t.id=o.join(","),t.access&&(t.alt=!0,n?t.ctrl=!0:t.shift=!0),t.meta&&(n?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class Qx{constructor(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;const n=this;t.on("keyup keypress keydown",o=>{!n.hasModifier(o)&&!n.isFunctionKey(o)||o.isDefaultPrevented()||(jh(n.shortcuts,r=>{n.matchShortcut(o,r)&&(n.pendingPatterns=r.subpatterns.slice(0),o.type==="keydown"&&n.executeShortcutAction(r))}),n.matchShortcut(o,n.pendingPatterns[0])&&(n.pendingPatterns.length===1&&o.type==="keydown"&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(t,n,o,r){const s=this,i=s.normalizeCommandFunc(o);return jh($h(Q.trim(t)),a=>{const l=s.createShortcut(a,n,i,r);s.shortcuts[l.id]=l}),!0}remove(t){const n=this.createShortcut(t);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(t){const n=this,o=t;return typeof o=="string"?()=>{n.editor.execCommand(o,!1,null)}:Q.isArray(o)?()=>{n.editor.execCommand(o[0],o[1],o[2])}:o}createShortcut(t,n,o,r){const s=Q.map($h(t,">"),NB);return s[s.length-1]=Q.extend(s[s.length-1],{func:o,scope:r||this.editor}),Q.extend(s[0],{desc:this.editor.translate(n),subpatterns:s.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return t.type==="keydown"&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,n){return!!n&&n.ctrl===t.ctrlKey&&n.meta===t.metaKey&&n.alt===t.altKey&&n.shift===t.shiftKey&&!!(t.keyCode===n.keyCode||t.charCode&&t.charCode===n.charCode)&&(t.preventDefault(),!0)}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const TB=()=>{const e=(()=>{const t={},n={},o={},r={},s={},i={},a={},l={},c=(d,u)=>(f,h)=>{d[f.toLowerCase()]={...h,type:u}};return{addButton:c(t,"button"),addGroupToolbarButton:c(t,"grouptoolbarbutton"),addToggleButton:c(t,"togglebutton"),addMenuButton:c(t,"menubutton"),addSplitButton:c(t,"splitbutton"),addMenuItem:c(n,"menuitem"),addNestedMenuItem:c(n,"nestedmenuitem"),addToggleMenuItem:c(n,"togglemenuitem"),addAutocompleter:c(o,"autocompleter"),addContextMenu:c(s,"contextmenu"),addContextToolbar:c(i,"contexttoolbar"),addContextForm:c(i,"contextform"),addSidebar:c(a,"sidebar"),addView:c(l,"views"),addIcon:(d,u)=>r[d.toLowerCase()]=u,getAll:()=>({buttons:t,menuItems:n,icons:r,popups:o,contextMenus:s,contextToolbars:i,sidebars:a,views:l})}})();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},ia=ot.DOM,Zx=Q.extend,OB=Q.each;class zm{constructor(t,n,o){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=o,this.documentBaseUrl=o.documentBaseURL,Zx(this,Vx);const r=this;this.id=t,this.hidden=!1;const s=((h,g)=>{const b=SO(g);return mB(Ix||lB,Ix,b,h,b)})(o.defaultOptions,n);this.options=((h,g,b=g)=>{const p={},v={},_=(E,x,S)=>{const O=Fh(x,S);return Yx(O)?(v[E]=O.value,!0):(console.warn(Kx(`Invalid value passed for the ${E} option`,O)),!1)},C=E=>Re(p,E);return{register:(E,x)=>{const S=(T=>se(T.processor))(x)?(T=>{const L=(()=>{switch(T){case"array":return Xe;case"boolean":return Tn;case"function":return Ge;case"number":return st;case"object":return dt;case"string":return se;case"string[]":return kB;case"object[]":return I=>hn(I,dt);case"regexp":return I=>Je(I,RegExp);default:return St}})();return I=>Fh(I,L,`The value must be a ${T}.`)})(x.processor):x.processor,O=((T,L,I)=>{if(!Ft(L)){const N=Fh(L,I);if(Yx(N))return N.value;console.error(Kx(`Invalid default value passed for the "${T}" option`,N))}})(E,x.default,S);p[E]={...x,default:O,processor:S},At(v,E).orThunk(()=>At(g,E)).each(T=>_(E,T,S))},isRegistered:C,get:E=>At(v,E).orThunk(()=>At(p,E).map(x=>x.default)).getOrUndefined(),set:(E,x)=>{if(C(E)){const S=p[E];return S.immutable?(console.error(`"${E}" is an immutable option and cannot be updated`),!1):_(E,x,S.processor)}return console.warn(`"${E}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:E=>{const x=C(E);return x&&delete v[E],x},isSet:E=>Re(v,E),debug:()=>{try{console.log(JSON.parse(JSON.stringify(b,(E,x)=>Tn(x)||st(x)||se(x)||mt(x)||Xe(x)||Pt(x)?x:Object.prototype.toString.call(x))))}catch(E){console.error(E)}}}})(0,s,n),(h=>{const g=h.options.register;g("id",{processor:"string",default:h.id}),g("selector",{processor:"string"}),g("target",{processor:"object"}),g("suffix",{processor:"string"}),g("cache_suffix",{processor:"string"}),g("base_url",{processor:"string"}),g("referrer_policy",{processor:"string",default:""}),g("language_load",{processor:"boolean",default:!0}),g("inline",{processor:"boolean",default:!1}),g("iframe_attrs",{processor:"object",default:{}}),g("doctype",{processor:"string",default:"<!DOCTYPE html>"}),g("document_base_url",{processor:"string",default:h.documentBaseUrl}),g("body_id",{processor:Lb(h,"tinymce"),default:"tinymce"}),g("body_class",{processor:Lb(h),default:""}),g("content_security_policy",{processor:"string",default:""}),g("br_in_pre",{processor:"boolean",default:!0}),g("forced_root_block",{processor:b=>{const p=se(b)&&$n(b);return p?{value:b,valid:p}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),g("forced_root_block_attrs",{processor:"object",default:{}}),g("newline_behavior",{processor:b=>{const p=ee(["block","linebreak","invert","default"],b);return p?{value:b,valid:p}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),g("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),g("no_newline_selector",{processor:"string",default:""}),g("keep_styles",{processor:"boolean",default:!0}),g("end_container_on_empty_block",{processor:b=>Tn(b)||se(b)?{valid:!0,value:b}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),g("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),g("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),g("font_size_classes",{processor:"string",default:""}),g("automatic_uploads",{processor:"boolean",default:!0}),g("images_reuse_filename",{processor:"boolean",default:!1}),g("images_replace_blob_uris",{processor:"boolean",default:!0}),g("icons",{processor:"string",default:""}),g("icons_url",{processor:"string",default:""}),g("images_upload_url",{processor:"string",default:""}),g("images_upload_base_path",{processor:"string",default:""}),g("images_upload_credentials",{processor:"boolean",default:!1}),g("images_upload_handler",{processor:"function"}),g("language",{processor:"string",default:"en"}),g("language_url",{processor:"string",default:""}),g("entity_encoding",{processor:"string",default:"named"}),g("indent",{processor:"boolean",default:!0}),g("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_use_margin",{processor:"boolean",default:!1}),g("indentation",{processor:"string",default:"40px"}),g("content_css",{processor:b=>{const p=b===!1||se(b)||hn(b,se);return p?se(b)?{value:Me(b.split(","),mr),valid:p}:Xe(b)?{value:b,valid:p}:b===!1?{value:[],valid:p}:{value:b,valid:p}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Sf(h)?[]:["default"]}),g("content_style",{processor:"string"}),g("content_css_cors",{processor:"boolean",default:!1}),g("font_css",{processor:b=>{const p=se(b)||hn(b,se);return p?{value:Xe(b)?b:Me(b.split(","),mr),valid:p}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),g("inline_boundaries",{processor:"boolean",default:!0}),g("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),g("object_resizing",{processor:b=>{const p=Tn(b)||se(b);return p?b===!1||Ef.isiPhone()||Ef.isiPad()?{value:"",valid:p}:{value:b===!0?"table,img,figure.image,div,video,iframe":b,valid:p}:{valid:!1,message:"Must be boolean or a string"}},default:!Tk}),g("resize_img_proportional",{processor:"boolean",default:!0}),g("event_root",{processor:"string"}),g("service_message",{processor:"string"}),g("theme",{processor:b=>b===!1||se(b)||Ge(b),default:"silver"}),g("theme_url",{processor:"string"}),g("formats",{processor:"object"}),g("format_empty_lines",{processor:"boolean",default:!1}),g("format_noneditable_selector",{processor:"string",default:""}),g("preview_styles",{processor:b=>{const p=b===!1||se(b);return p?{value:b===!1?"":b,valid:p}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),g("custom_ui_selector",{processor:"string",default:""}),g("hidden_input",{processor:"boolean",default:!0}),g("submit_patch",{processor:"boolean",default:!0}),g("encoding",{processor:"string"}),g("add_form_submit_trigger",{processor:"boolean",default:!0}),g("add_unload_trigger",{processor:"boolean",default:!0}),g("custom_undo_redo_levels",{processor:"number",default:0}),g("disable_nodechange",{processor:"boolean",default:!1}),g("readonly",{processor:"boolean",default:!1}),g("editable_root",{processor:"boolean",default:!0}),g("plugins",{processor:"string[]",default:[]}),g("external_plugins",{processor:"object"}),g("forced_plugins",{processor:"string[]"}),g("model",{processor:"string",default:h.hasPlugin("rtc")?"plugin":"dom"}),g("model_url",{processor:"string"}),g("block_unsupported_drop",{processor:"boolean",default:!0}),g("visual",{processor:"boolean",default:!0}),g("visual_table_class",{processor:"string",default:"mce-item-table"}),g("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),g("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),g("setup",{processor:"function"}),g("init_instance_callback",{processor:"function"}),g("url_converter",{processor:"function",default:h.convertURL}),g("url_converter_scope",{processor:"object",default:h}),g("urlconverter_callback",{processor:"function"}),g("allow_conditional_comments",{processor:"boolean",default:!1}),g("allow_html_data_urls",{processor:"boolean",default:!1}),g("allow_svg_data_urls",{processor:"boolean"}),g("allow_html_in_named_anchor",{processor:"boolean",default:!1}),g("allow_script_urls",{processor:"boolean",default:!1}),g("allow_unsafe_link_target",{processor:"boolean",default:!1}),g("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),g("fix_list_elements",{processor:"boolean",default:!1}),g("preserve_cdata",{processor:"boolean",default:!1}),g("remove_trailing_brs",{processor:"boolean",default:!0}),g("pad_empty_with_br",{processor:"boolean",default:!1}),g("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),g("element_format",{processor:"string",default:"html"}),g("entities",{processor:"string"}),g("schema",{processor:"string",default:"html5"}),g("convert_urls",{processor:"boolean",default:!0}),g("relative_urls",{processor:"boolean",default:!0}),g("remove_script_host",{processor:"boolean",default:!0}),g("custom_elements",{processor:hu}),g("extended_valid_elements",{processor:"string"}),g("invalid_elements",{processor:"string"}),g("invalid_styles",{processor:hu}),g("valid_children",{processor:"string"}),g("valid_classes",{processor:hu}),g("valid_elements",{processor:"string"}),g("valid_styles",{processor:hu}),g("verify_html",{processor:"boolean",default:!0}),g("auto_focus",{processor:b=>se(b)||b===!0}),g("browser_spellcheck",{processor:"boolean",default:!1}),g("protect",{processor:"array"}),g("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),g("deprecation_warnings",{processor:"boolean",default:!0}),g("a11y_advanced_options",{processor:"boolean",default:!1}),g("api_key",{processor:"string"}),g("license_key",{processor:"string"}),g("paste_block_drop",{processor:"boolean",default:!1}),g("paste_data_images",{processor:"boolean",default:!0}),g("paste_preprocess",{processor:"function"}),g("paste_postprocess",{processor:"function"}),g("paste_webkit_styles",{processor:"string",default:"none"}),g("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),g("paste_merge_formats",{processor:"boolean",default:!0}),g("smart_paste",{processor:"boolean",default:!0}),g("paste_as_text",{processor:"boolean",default:!1}),g("paste_tab_spaces",{processor:"number",default:4}),g("text_patterns",{processor:b=>hn(b,dt)||b===!1?{value:Db(b===!1?[]:b),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),g("text_patterns_lookup",{processor:b=>{return Ge(b)?{value:(p=b,v=>{const _=p(v);return Db(_)}),valid:!0}:{valid:!1,message:"Must be a single function"};var p},default:b=>[]}),g("noneditable_class",{processor:"string",default:"mceNonEditable"}),g("editable_class",{processor:"string",default:"mceEditable"}),g("noneditable_regexp",{processor:b=>hn(b,Pb)?{value:b,valid:!0}:Pb(b)?{value:[b],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),g("table_tab_navigation",{processor:"boolean",default:!0}),g("highlight_on_focus",{processor:"boolean",default:!0}),g("xss_sanitization",{processor:"boolean",default:!0}),g("details_initial_state",{processor:b=>{const p=ee(["inherited","collapsed","expanded"],b);return p?{value:b,valid:p}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("details_serialized_state",{processor:b=>{const p=ee(["inherited","collapsed","expanded"],b);return p?{value:b,valid:p}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("init_content_sync",{processor:"boolean",default:!1}),g("newdocument_content",{processor:"string",default:""}),g("sandbox_iframes",{processor:"boolean",default:!0}),g("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),g("convert_unsafe_embeds",{processor:"boolean",default:!0}),h.on("ScriptsLoaded",()=>{g("directionality",{processor:"string",default:_o.isRtl()?"rtl":void 0}),g("placeholder",{processor:"string",default:Ok.getAttrib(h.getElement(),"placeholder")})})})(r);const i=this.options.get;i("deprecation_warnings")&&((h,g)=>{((b,p)=>{const v=mT(b),_=gT(p),C=_.length>0,E=v.length>0,x=p.theme==="mobile";if(C||E||x){const S=`
- `,O=x?`

Themes:${S}mobile`:"",T=C?`

Plugins:${S}${_.join(S)}`:"",L=E?`

Options:${S}${v.join(S)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+O+T+L)}})(h,g),((b,p)=>{const v=fT(b),_=pT(p),C=_.length>0,E=v.length>0;if(C||E){const x=`
- `,S=C?`

Plugins:${x}${_.map(hT).join(x)}`:"",O=E?`

Options:${x}${v.join(x)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+S+O)}})(h,g)})(n,s);const a=i("suffix");a&&(o.suffix=a),this.suffix=o.suffix;const l=i("base_url");l&&o._setBaseUrl(l),this.baseUri=o.baseURI;const c=xf(r);c&&(or.ScriptLoader._setReferrerPolicy(c),ot.DOM.styleSheetLoader._setReferrerPolicy(c));const d=Kb(r);Z(d)&&ot.DOM.styleSheetLoader._setContentCssCors(d),Sn.languageLoad=i("language_load"),Sn.baseURL=o.baseURL,this.setDirty(!1),this.documentBaseURI=new ir(Mb(r),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Sf(r),this.hasVisual=yS(r),this.shortcuts=new Qx(this),this.editorCommands=new Ux(this),CB(this);const u=i("cache_suffix");u&&(qe.cacheSuffix=u.replace(/^[\?\&]+/,"")),this.ui={registry:TB(),styleSheetLoader:void 0,show:Te,hide:Te,setEnabled:Te,isEnabled:St},this.mode=(h=>{const g=ln("design"),b=ln({design:{activate:Te,deactivate:Te,editorReadOnly:!1},readonly:{activate:Te,deactivate:Te,editorReadOnly:!0}});return(p=>{p.serializer?Hx(p):p.on("PreInit",()=>{Hx(p)})})(h),(p=>{p.on("ShowCaret",v=>{ra(p)&&v.preventDefault()}),p.on("ObjectSelected",v=>{ra(p)&&v.preventDefault()})})(h),{isReadOnly:()=>ra(h),set:p=>((v,_,C,E)=>{if(E!==C.get()){if(!Re(_,E))throw new Error(`Editor mode '${E}' is invalid`);v.initialized?Xx(v,C,_,E):v.on("init",()=>Xx(v,C,_,E))}})(h,b.get(),g,p),get:()=>g.get(),register:(p,v)=>{b.set(((_,C,E)=>{if(ee(SB,C))throw new Error(`Cannot override default mode ${C}`);return{..._,[C]:{...E,deactivate:()=>{try{E.deactivate()}catch(x){console.error(`problem while deactivating editor mode ${C}:`,x)}}}}})(b.get(),p,v))}}})(r),o.dispatch("SetupEditor",{editor:this});const f=CS(r);Ge(f)&&f.call(r,r)}render(){(t=>{const n=t.id;_o.setCode(zb(t));const o=()=>{na.unbind(window,"ready",o),t.render()};if(!ys.Event.domLoaded)return void na.bind(window,"ready",o);if(!t.getElement())return;const r=B(t.getElement()),s=zl(r);t.on("remove",()=>{ho(r.dom.attributes,a=>rn(r,a.name)),Qo(r,s)}),t.ui.styleSheetLoader=((a,l)=>ru.forElement(a,{contentCssCors:Kb(l),referrerPolicy:xf(l)}))(r,t),Sf(t)?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");const i=t.getElement().form||na.getParent(n,"form");i&&(t.formElement=i,dS(t)&&!Ni(t.getElement())&&(na.insertAfter(na.create("input",{type:"hidden",name:n}),n),t.hasHiddenInput=!0),t.formEventDelegate=a=>{t.dispatch(a.type,a)},na.bind(i,"submit reset",t.formEventDelegate),t.on("reset",()=>{t.resetContent()}),!uS(t)||i.submit.nodeType||i.submit.length||i._mceOldSubmit||(i._mceOldSubmit=i.submit,i.submit=()=>(t.editorManager.triggerSave(),t.setDirty(!1),i._mceOldSubmit(i)))),t.windowManager=BC(t),t.notificationManager=RC(t),(a=>a.options.get("encoding")==="xml")(t)&&t.on("GetContent",a=>{a.save&&(a.content=na.encode(a.content))}),mS(t)&&t.on("submit",()=>{t.initialized&&t.save()}),fS(t)&&(t._beforeUnload=()=>{!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),aB(t,t.suffix)})(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return tl(this)}translate(t){return _o.translate(t)}getParam(t,n,o){const r=this.options;return r.isRegistered(t)||(Z(o)?r.register(t,{processor:o,default:n}):r.register(t,{processor:St,default:n})),r.isSet(t)||Ft(n)?r.get(t):n}hasPlugin(t,n){return!(!ee(bu(this),t)||n&&il.get(t)===void 0)}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,n,o){this.editorCommands.addCommand(t,n,o)}addQueryStateHandler(t,n,o){this.editorCommands.addQueryStateHandler(t,n,o)}addQueryValueHandler(t,n,o){this.editorCommands.addQueryValueHandler(t,n,o)}addShortcut(t,n,o,r){this.shortcuts.add(t,n,o,r)}execCommand(t,n,o,r){return this.editorCommands.execCommand(t,n,o,r)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(ia.show(t.getContainer()),ia.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(ia.hide(t.getContainer()),ia.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,n){this.dispatch("ProgressState",{state:t,time:n})}load(t={}){const n=this,o=n.getElement();if(n.removed)return"";if(o){const r={...t,load:!0},s=Ni(o)?o.value:o.innerHTML,i=n.setContent(s,r);return r.no_events||n.dispatch("LoadContent",{...r,element:o}),i}return""}save(t={}){const n=this;let o=n.getElement();if(!o||!n.initialized||n.removed)return"";const r={...t,save:!0,element:o};let s=n.getContent(r);const i={...r,content:s};if(i.no_events||n.dispatch("SaveContent",i),i.format==="raw"&&n.dispatch("RawSaveContent",i),s=i.content,Ni(o))o.value=s;else{!t.is_removing&&n.inline||(o.innerHTML=s);const a=ia.getParent(n.id,"form");a&&OB(a.elements,l=>l.name!==n.id||(l.value=s,!1))}return i.element=r.element=o=null,i.set_dirty!==!1&&n.setDirty(!1),s}setContent(t,n){return bp(this,t,n)}getContent(t){return((n,o={})=>{const r=((s,i)=>({...s,format:i,get:!0,getInner:!0}))(o,o.format?o.format:"html");return iC(n,r).fold(Be,s=>{const i=((a,l)=>hp(a).editor.getContent(l))(n,s);return aC(n,i,s)})})(this,t)}insertContent(t,n){n&&(t=Zx({content:t},n)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){t===void 0?bp(this,this.startContent,{format:"raw"}):bp(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const n=!this.isNotDirty;this.isNotDirty=!t,t&&t!==n&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=t.editorContainer||ia.get(t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=ia.get(this.id)),this.targetElm}getWin(){const t=this;if(!t.contentWindow){const n=t.iframeElement;n&&(t.contentWindow=n.contentWindow)}return t.contentWindow}getDoc(){const t=this;if(!t.contentDocument){const n=t.getWin();n&&(t.contentDocument=n.document)}return t.contentDocument}getBody(){var t,n;const o=this.getDoc();return(n=(t=this.bodyElement)!==null&&t!==void 0?t:o?.body)!==null&&n!==void 0?n:null}convertURL(t,n,o){const r=this,s=r.options.get,i=ES(r);if(Ge(i))return i.call(r,t,o,!0,n);if(!s("convert_urls")||o==="link"||dt(o)&&o.nodeName==="LINK"||t.indexOf("file:")===0||t.length===0)return t;const a=new ir(t);return a.protocol!=="http"&&a.protocol!=="https"&&a.protocol!==""?t:s("relative_urls")?r.documentBaseURI.toRelative(t):t=r.documentBaseURI.toAbsolute(t,s("remove_script_host"))}addVisual(t){((n,o)=>{((r,s)=>{cn(r).editor.addVisual(s)})(n,o)})(this,t)}setEditableRoot(t){((n,o)=>{n._editableRoot!==o&&(n._editableRoot=o,n.readonly||(n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged()),((r,s)=>{r.dispatch("EditableRootStateChange",{state:s})})(n,o))})(this,t)}hasEditableRoot(){return this._editableRoot}remove(){(t=>{if(!t.removed){const{_selectionOverrides:n,editorUpload:o}=t,r=t.getBody(),s=t.getElement();r&&t.save({is_removing:!0}),t.removed=!0,t.unbindAllNativeEvents(),t.hasHiddenInput&&Z(s?.nextSibling)&&nm.remove(s.nextSibling),(i=>{i.dispatch("remove")})(t),t.editorManager.remove(t),!t.inline&&r&&(i=>{nm.setStyle(i.id,"display",i.orgDisplay)})(t),(i=>{i.dispatch("detach")})(t),nm.remove(t.getContainer()),om(n),om(o),t.destroy()}})(this)}destroy(t){((n,o)=>{const{selection:r,dom:s}=n;n.destroyed||(o||n.removed?(o||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),om(r),om(s)),(i=>{const a=i.formElement;a&&(a._mceOldSubmit&&(a.submit=a._mceOldSubmit,delete a._mceOldSubmit),nm.unbind(a,"submit reset",i.formEventDelegate))})(n),(i=>{const a=i;a.contentAreaContainer=a.formElement=a.container=a.editorContainer=null,a.bodyElement=a.contentDocument=a.contentWindow=null,a.iframeElement=a.targetElm=null;const l=i.selection;if(l){const c=l.dom;a.selection=l.win=l.dom=c.doc=null}})(n),n.destroyed=!0):n.remove())})(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const pl=ot.DOM,Um=Q.each;let Hm,Jx=!1,eo=[];const qm=e=>{const t=e.type;Um(ci.get(),n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e)}})},ek=e=>{if(e!==Jx){const t=ot.DOM;e?(t.bind(window,"resize",qm),t.bind(window,"scroll",qm)):(t.unbind(window,"resize",qm),t.unbind(window,"scroll",qm)),Jx=e}},tk=e=>{const t=eo;return eo=ue(eo,n=>e!==n),ci.activeEditor===e&&(ci.activeEditor=eo.length>0?eo[0]:null),ci.focusedEditor===e&&(ci.focusedEditor=null),t.length!==eo.length},RB=document.compatMode!=="CSS1Compat",ci={...Ih,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"3.0",releaseDate:"2024-08-07",i18n:_o,activeEditor:null,focusedEditor:null,setup(){const e=this;let t="",n="",o=ir.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/"));const r=window.tinymce||window.tinyMCEPreInit;if(r)t=r.base||r.baseURL,n=r.suffix;else{const i=document.getElementsByTagName("script");for(let a=0;a<i.length;a++){const l=i[a].src||"";if(l==="")continue;const c=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){c.indexOf(".min")!==-1&&(n=".min"),t=l.substring(0,l.lastIndexOf("/"));break}}if(!t&&document.currentScript){const a=document.currentScript.src;a.indexOf(".min")!==-1&&(n=".min"),t=a.substring(0,a.lastIndexOf("/"))}}var s;e.baseURL=new ir(o).toAbsolute(t),e.documentBaseURL=o,e.baseURI=new ir(e.baseURL),e.suffix=n,(s=e).on("AddEditor",ae(LA,s)),s.on("RemoveEditor",ae(MA,s))},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;n&&(this.suffix=n),this.defaultOptions=e;const o=e.plugin_base_urls;o!==void 0&&Ct(o,(r,s)=>{Sn.PluginManager.urls[s]=r})},init(e){const t=this;let n;const o=Q.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let r=i=>{n=i};const s=()=>{let i=0;const a=[];let l;pl.unbind(window,"ready",s),(c=>{const d=e.onpageload;d&&d.apply(t,[])})(),l=ca((c=>qe.browser.isIE()||qe.browser.isEdge()?(im("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):RB?(im("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):se(c.selector)?pl.select(c.selector):Z(c.target)?[c.target]:[])(e)),Q.each(l,c=>{var d;(d=t.get(c.id))&&d.initialized&&!(d.getContainer()||d.getBody()).parentNode&&(tk(d),d.unbindAllNativeEvents(),d.destroy(!0),d.removed=!0)}),l=Q.grep(l,c=>!t.get(c.id)),l.length===0?r([]):Um(l,c=>{((d,u)=>d.inline&&u.tagName.toLowerCase()in o)(e,c)?im("Could not initialize inline editor on invalid inline target element",c):((d,u,f)=>{const h=new zm(d,u,t);a.push(h),h.on("init",()=>{++i===l.length&&r(a)}),h.targetElm=h.targetElm||f,h.render()})((d=>{let u=d.id;return u||(u=At(d,"name").filter(f=>!pl.get(f)).getOrThunk(pl.uniqueId),d.setAttribute("id",u)),u})(c),e,c)})};return pl.bind(window,"ready",s),new Promise(i=>{n?i(n):r=a=>{i(a)}})},get(e){return arguments.length===0?eo.slice(0):se(e)?en(eo,t=>t.id===e).getOr(null):st(e)&&eo[e]?eo[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(n===null&&eo.push(e),ek(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),Hm||(Hm=o=>{const r=t.dispatch("BeforeUnload");if(r.returnValue)return o.preventDefault(),o.returnValue=r.returnValue,r.returnValue},window.addEventListener("beforeunload",Hm))),e},createEditor(e,t){return this.add(new zm(e,t,this))},remove(e){const t=this;let n;if(e){if(!se(e))return n=e,mt(t.get(n.id))?null:(tk(n)&&t.dispatch("RemoveEditor",{editor:n}),eo.length===0&&window.removeEventListener("beforeunload",Hm),n.remove(),ek(eo.length>0),n);Um(pl.select(e),o=>{n=t.get(o.id),n&&t.remove(n)})}else for(let o=eo.length-1;o>=0;o--)t.remove(eo[o])},execCommand(e,t,n){var o;const r=this,s=dt(n)?(o=n.id)!==null&&o!==void 0?o:n.index:n;switch(e){case"mceAddEditor":if(!r.get(s)){const i=n.options;new zm(s,i,r).render()}return!0;case"mceRemoveEditor":{const i=r.get(s);return i&&i.remove(),!0}case"mceToggleEditor":{const i=r.get(s);return i?(i.isHidden()?i.show():i.hide(),!0):(r.execCommand("mceAddEditor",!1,n),!0)}}return!!r.activeEditor&&r.activeEditor.execCommand(e,t,n)},triggerSave:()=>{Um(eo,e=>{e.save()})},addI18n:(e,t)=>{_o.add(e,t)},translate:e=>_o.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new ir(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new ir(this.baseURL)}};ci.setup();const BB=(()=>{const e=br();return{FakeClipboardItem:t=>({items:t,types:In(t),getType:n=>At(t,n).getOrUndefined()}),write:t=>{e.set(t)},read:()=>e.get().getOrUndefined(),clear:e.clear}})(),nk=Math.min,hl=Math.max,Wm=Math.round,ok=(e,t,n)=>{let o=t.x,r=t.y;const s=e.w,i=e.h,a=t.w,l=t.h,c=(n||"").split("");return c[0]==="b"&&(r+=l),c[1]==="r"&&(o+=a),c[0]==="c"&&(r+=Wm(l/2)),c[1]==="c"&&(o+=Wm(a/2)),c[3]==="b"&&(r-=i),c[4]==="r"&&(o-=s),c[3]==="c"&&(r-=Wm(i/2)),c[4]==="c"&&(o-=Wm(s/2)),bl(o,r,s,i)},bl=(e,t,n,o)=>({x:e,y:t,w:n,h:o}),DB={inflate:(e,t,n)=>bl(e.x-t,e.y-n,e.w+2*t,e.h+2*n),relativePosition:ok,findBestRelativePosition:(e,t,n,o)=>{for(let r=0;r<o.length;r++){const s=ok(e,t,o[r]);if(s.x>=n.x&&s.x+s.w<=n.w+n.x&&s.y>=n.y&&s.y+s.h<=n.h+n.y)return o[r]}return null},intersect:(e,t)=>{const n=hl(e.x,t.x),o=hl(e.y,t.y),r=nk(e.x+e.w,t.x+t.w),s=nk(e.y+e.h,t.y+t.h);return r-n<0||s-o<0?null:bl(n,o,r-n,s-o)},clamp:(e,t,n)=>{let o=e.x,r=e.y,s=e.x+e.w,i=e.y+e.h;const a=t.x+t.w,l=t.y+t.h,c=hl(0,t.x-o),d=hl(0,t.y-r),u=hl(0,s-a),f=hl(0,i-l);return o+=c,r+=d,n&&(s+=c,i+=d,o-=u,r-=f),s-=u,i-=f,bl(o,r,s-o,i-r)},create:bl,fromClientRect:e=>bl(e.left,e.top,e.width,e.height)},PB=(()=>{const e={},t={},n={};return{load:(o,r)=>{const s=`Script at URL "${r}" failed to load`,i=`Script at URL "${r}" did not call \`tinymce.Resource.add('${o}', data)\` within 1 second`;if(e[o]!==void 0)return e[o];{const a=new Promise((l,c)=>{const d=((u,f,h=1e3)=>{let g=!1,b=null;const p=C=>(...E)=>{g||(g=!0,b!==null&&(clearTimeout(b),b=null),C.apply(null,E))},v=p(u),_=p(f);return{start:(...C)=>{g||b!==null||(b=setTimeout(()=>_.apply(null,C),h))},resolve:v,reject:_}})(l,c);t[o]=d.resolve,or.ScriptLoader.loadScript(r).then(()=>d.start(i),()=>d.reject(s))});return e[o]=a,a}},add:(o,r)=>{t[o]!==void 0&&(t[o](r),delete t[o]),e[o]=Promise.resolve(r),n[o]=r},has:o=>o in n,get:o=>n[o],unload:o=>{delete e[o],delete n[o]}}})();let Ed;try{const e="__storage_test__";Ed=window.localStorage,Ed.setItem(e,e),Ed.removeItem(e)}catch{Ed=(()=>{let t={},n=[];const o={getItem:r=>t[r]||null,setItem:(r,s)=>{n.push(r),t[r]=String(s)},key:r=>n[r],removeItem:r=>{n=n.filter(s=>s===r),delete t[r]},clear:()=>{n=[],t={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})()}const LB={geom:{Rect:DB},util:{Delay:Uo,Tools:Q,VK:le,URI:ir,EventDispatcher:Mh,Observable:Ih,I18n:_o,LocalStorage:Ed,ImageUploader:e=>{const t=LC(),n=IC(e,t);return{upload:(o,r=!0)=>n.upload(o,r?MC(e):void 0)}}},dom:{EventUtils:ys,TreeWalker:an,TextSeeker:ji,DOMUtils:ot,ScriptLoader:or,RangeUtils:Xi,Serializer:kC,StyleSheetLoader:ou,ControlSelection:n0,BookmarkManager:Hc,Selection:xC,Event:ys.Event},html:{Styles:gn,Entities:xe,Node:Wn,Schema:fn,DomParser:rl,Writer:H0,Serializer:oi},Env:qe,AddOnManager:Sn,Annotator:Kv,Formatter:$C,UndoManager:UC,EditorCommands:Ux,WindowManager:BC,NotificationManager:RC,EditorObservable:Vx,Shortcuts:Qx,Editor:zm,FocusManager:k0,EditorManager:ci,DOM:ot.DOM,ScriptLoader:or.ScriptLoader,PluginManager:il,ThemeManager:ea,ModelManager:sl,IconManager:rm,Resource:PB,FakeClipboard:BB,trim:Q.trim,isArray:Q.isArray,is:Q.is,toArray:Q.toArray,makeMap:Q.makeMap,each:Q.each,map:Q.map,grep:Q.grep,inArray:Q.inArray,extend:Q.extend,walk:Q.walk,resolve:Q.resolve,explode:Q.explode,_addCacheSuffix:Q._addCacheSuffix},rk=Q.extend(ci,LB);(e=>{window.tinymce=e,window.tinyMCE=e})(rk),(e=>{if(typeof module=="object")try{module.exports=e}catch{}})(rk)}();
